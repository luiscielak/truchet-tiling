{"version":3,"sources":["processing.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","module","Browser","isDomPresent","navigator","window","document","ajax","url","xhr","XMLHttpRequest","open","overrideMimeType","setRequestHeader","send","status","responseText","Processing","ObjectIterator","obj","Array","index","hasNext","next","iterator","Function","X","Y","Z","R","G","B","A","U","V","NX","NY","NZ","EDGE","SR","SG","SB","SA","SW","TX","TY","TZ","VX","VY","VZ","VW","AR","AG","AB","DR","DG","DB","DA","SPR","SPG","SPB","SHINE","ER","EG","EB","BEEN_LIT","VERTEX_FIELD_COUNT","P2D","JAVA2D","WEBGL","P3D","OPENGL","PDF","DXF","OTHER","WINDOWS","MAXOSX","LINUX","EPSILON","MAX_FLOAT","MIN_FLOAT","MAX_INT","MIN_INT","PI","Math","TWO_PI","TAU","HALF_PI","THIRD_PI","QUARTER_PI","DEG_TO_RAD","RAD_TO_DEG","WHITESPACE","RGB","ARGB","HSB","ALPHA","CMYK","TIFF","TARGA","JPEG","GIF","BLUR","GRAY","INVERT","OPAQUE","POSTERIZE","THRESHOLD","ERODE","DILATE","REPLACE","BLEND","ADD","SUBTRACT","LIGHTEST","DARKEST","DIFFERENCE","EXCLUSION","MULTIPLY","SCREEN","OVERLAY","HARD_LIGHT","SOFT_LIGHT","DODGE","BURN","ALPHA_MASK","RED_MASK","GREEN_MASK","BLUE_MASK","CUSTOM","ORTHOGRAPHIC","PERSPECTIVE","POINT","POINTS","LINE","LINES","TRIANGLE","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","QUAD","QUADS","QUAD_STRIP","POLYGON","PATH","RECT","ELLIPSE","ARC","SPHERE","BOX","GROUP","PRIMITIVE","GEOMETRY","VERTEX","BEZIER_VERTEX","CURVE_VERTEX","BREAK","CLOSESHAPE","OPEN","CLOSE","CORNER","CORNERS","RADIUS","CENTER_RADIUS","CENTER","DIAMETER","CENTER_DIAMETER","BASELINE","TOP","BOTTOM","NORMAL","NORMALIZED","IMAGE","MODEL","SHAPE","SQUARE","ROUND","PROJECT","MITER","BEVEL","AMBIENT","DIRECTIONAL","SPOT","BACKSPACE","TAB","ENTER","RETURN","ESC","DELETE","CODED","SHIFT","CONTROL","ALT","CAPSLK","PGUP","PGDN","END","HOME","LEFT","UP","RIGHT","DOWN","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLK","META","INSERT","ARROW","CROSS","HAND","MOVE","TEXT","WAIT","NOCURSOR","DISABLE_OPENGL_2X_SMOOTH","ENABLE_OPENGL_2X_SMOOTH","ENABLE_OPENGL_4X_SMOOTH","ENABLE_NATIVE_FONTS","DISABLE_DEPTH_TEST","ENABLE_DEPTH_TEST","ENABLE_DEPTH_SORT","DISABLE_DEPTH_SORT","DISABLE_OPENGL_ERROR_REPORT","ENABLE_OPENGL_ERROR_REPORT","ENABLE_ACCURATE_TEXTURES","DISABLE_ACCURATE_TEXTURES","HINT_COUNT","SINCOS_LENGTH","PRECISIONB","PRECISIONF","PREC_MAXVAL","PREC_ALPHA_SHIFT","PREC_RED_SHIFT","NORMAL_MODE_AUTO","NORMAL_MODE_SHAPE","NORMAL_MODE_VERTEX","MAX_LIGHTS","options","DefaultScope","prototype","PConstants","defaultScope","Object","keys","forEach","prop","defineProperty","name","desc","hasOwnProperty","__defineGetter__","get","__defineSetter__","set","overloadBaseClassFunction","object","basefn","fn","$defaultOverload","overloads","defaultOverload","$overloads","slice","hubfn","arguments","$methodArgsIndex","apply","extendClass","subClass","baseClass","extendGetterSetter","propertyName","v","enumerable","properties","charAt","push","shift","$super","extendClassChain","base","path","self","$upcast","pop","$self","extendStaticMembers","derived","extendInterfaceMembers","addMethod","hasMethodArgs","existingfn","args","isNumericalJavaType","type","indexOf","createJavaArray","bounds","result","defaultValue","itemsCount","newBounds","j","innerWidth","innerHeight","finalizeProcessing","noop","isDOMPresent","version","undef","lib","registerLibrary","library","init","Sketch","attachFunction","pauseOnBlur","globalKeyEvents","onLoad","onSetup","onPause","onLoop","onFrameStart","onFrameEnd","onExit","params","imageCache","pending","images","operaCache","add","href","img","Image","onload","owner","src","opera","div","createElement","appendChild","style","position","opacity","width","height","body","sourceCode","undefined","attach","processing","func","toString","code","value","loadSketchFromSources","canvas","sources","errors","sourcesCount","loaded","ajaxAsync","callback","onreadystatechange","readyState","error","withCredentials","location","protocol","loadBlock","filename","block","join","console","log","scriptElement","getElementById","substring","text","textContent","removeEventListener","processingInstances","instances","getElementsByTagName","filenames","l","processingSources","getAttribute","split","splice","last","source","instance","nodelist","scripts","script","toLowerCase","target","nextSibling","nodeType","nodeName","addEventListener","reload","exit","disableInit","virtEquals","other","equals","virtHashCode","hash","charCodeAt","hashCode","$id","floor","random","Iterator","array","remove","ArrayList","toArray","contains","item","len","lastIndexOf","arg0","addAll","arg1","arg2","it","size","clear","removeAll","c","x","newList","isEmpty","clone","charMap","Char","chr","NaN","String","fromCharCode","valueOf","HashMap","initialCapacity","loadFactor","buckets","count","hashMap","getBucketIndex","key","ensureLoad","allEntries","concat","newBucketsLength","bucket","conversion","removeItem","bucketIndex","itemIndex","endOfBuckets","currentItem","findNext","Set","isIn","containsAll","changed","retainAll","toRemove","entry","Entry","pair","_isIn","map","removed","getKey","getValue","setValue","old","putAll","containsKey","containsValue","entrySet","keySet","values","removeByValue","put","previous","m","ilen","computeFontMetrics","pfont","emQuad","correctionFactor","cfmFont","getCSSDefinition","ctx","getContext","font","protrusions","measureText","leadDiv","fontFamily","fontSize","innerHTML","w","h","baseline","fillStyle","fillRect","fillText","pixelData","getImageData","data","w4","ascent","round","descent","defaultView","getComputedStyle","leadDivHeight","getPropertyValue","replace","leading","removeChild","caching","PFont","glyph","illegalIndicator","italicsIndicator","weight","boldIndicator","family","context2d","css","lineHeight","components","measureTextWidth","string","measureTextWidthFallback","PFontCache","fontName","cache","idx","getFallback","list","preloading","template","initialized","initialize","generateTinyFont","encoded","expand","input","substr","fontface","setAttribute","head","element","cssText","getElementWidth","timeAttempted","intervallength","computedWidthFont","computedWidthRef","fontList","addedList","fontSrc","fontFace","fontUrl","p","PMatrix2D","reset","elements","outgoing","translate","tx","ty","invTranslate","transpose","mult","y","PVector","z","multX","multY","skewX","angle","skewY","shearX","tan","shearY","determinant","invert","d","abs","old00","old01","old02","old10","old11","old12","scale","sx","sy","invScale","row","col","preApply","rotate","cos","sin","temp1","temp2","rotateZ","invRotateZ","print","digits","printMatrixHelper","output","nfs","println","PMatrix3D","tz","temp","v0","v1","v2","invApply","inverseCopy","rotateX","rotateY","sz","multZ","multW","fA0","fA1","fA2","fA3","fA4","fA5","fB0","fB1","fB2","fB3","fB4","fB5","fDet","kInv","fInvDet","str","invRotateX","invRotateY","PShape","visible","children","nameTable","image","matrix","kind","close","parent","isVisible","setVisible","disableStyle","enableStyle","getFamily","getWidth","getHeight","setName","getName","draw","renderContext","pre","drawImpl","post","drawGroup","drawPrimitive","drawGeometry","drawPath","vertices","beginShape","vertexCodes","vertex","moveTo","breakShape","bezierVertex","curveVertex","vertArray","endShape","vert","point","line","triangle","quad","imMode","imageModeConvert","imageMode","rcMode","curRectMode","rectMode","rect","elMode","curEllipseMode","ellipseMode","ellipse","eMode","arc","box","sphere","pushMatrix","transform","pushStyle","styles","popMatrix","popStyle","stroke","strokeColor","strokeWeight","strokeCap","strokeJoin","noStroke","fill","fillColor","noFill","getChild","child","found","getChildCount","addChild","addName","shape","checkMatrix","dimensions","resetMatrix","applyMatrix","CommonFunctions","XMLElement","colors","PShapeSVG","strokeGradient","strokeGradientPaint","strokeName","strokeOpacity","fillGradient","fillGradientPaint","fillName","fillOpacity","getStringAttribute","displayStr","parseMatrix","viewBoxStr","viewBox","unitWidth","unitHeight","parseUnitSize","parseColors","parseChildren","getCoords","all","pieces","trim","radians","parseFloat","newelement","getChildren","kid","parseChild","elem","parseLine","parseEllipse","parseRect","parsePoly","parsePath","unimplemented","pathDataChars","pathData","cx","cy","ctrlX","ctrlY","ctrlX1","ctrlX2","ctrlY1","ctrlY2","endX","endY","ppx","ppy","px","py","valOf","tmpArray","flag","lastInstruction","command","k","parsePathMoveto","parsePathLineto","parsePathCurveto","parsePathQuadto","x1","y1","x2","y2","parsePathCode","parsePathVertex","x3","y3","verts","what","val","pointsAttr","pointsBuffer","getFloatAttribute","rx","ry","hasAttribute","setOpacity","setStroke","setStrokeWeight","setStrokeJoin","setStrokeCap","setFill","styleText","styleTokens","tokens","setFillOpacity","setStrokeOpacity","opacityText","opacityMask","parseInt","parseRGB","strokeText","linejoin","linecap","color","sub","fromAngle","random2D","random3D","vz","sqrt","vx","vy","dist","dot","cross","angleBetween","acos","mag","lerp","amt","retval","magSq","setMag","v_or_len","normalize","prev_x","dx","dy","dz","v_or_x","amt_or_y","lerp_val","start","stop","limit","high","heading","atan2","heading2D","createPVectorMethod","method","XMLAttribute","fname","nameSpace","fullName","namespace","getFullName","getNamespace","getType","newval","DOMParser","selector","uri","sysid","attributes","content","lineNr","systemID","parse","systemId","textstring","xmlDoc","extension","parseFromString","documentElement","parseChildrenRecursive","elementpath","xmlelement","xmlattribute","tmpattrib","localName","createPCDataElement","createCDataElement","getname","namespaceURI","nodeValue","childNodes","node","fullname","namespaceuri","isCDATA","pcdata","cdata","htmlentities","entity","RegExp","getAttributeCount","attr_name","attr_ns","attr_value","attr_type","attr_other","findAttribute","child1","child2","getContent","attribute","getString","attributeName","getFloat","getIntAttribute","getInt","hasChildren","insertChild","getLocalName","lastChild","setContent","getChildRecursive","kidName","getChildrenRecursive","matches","items","offset","matchName","kidMatches","isLeaf","listChildren","arr","removeAttribute","removeChildAtIndex","attr","setString","setInt","setFloat","debug","tagstring","xmlstring","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","withProxyFunctions","removeFirstArgument","__contains","subject","subStr","__replaceAll","regex","replacement","replaceAll","__replaceFirst","replaceFirst","__replace","__equals","__equalsIgnoreCase","equalsIgnoreCase","__toCharArray","toCharArray","chars","__split","pattern","currSubject","pos","search","match","exec","__codePointAt","hi","low","__matches","regexp","test","__startsWith","prefix","toffset","startsWith","__endsWith","suffix","endsWith","suffixLen","__hashCode","__printStackTrace","withMath","internalRandomGenerator","ceil","exp","pow","asin","atan","constrain","aNumber","aMin","aMax","value1","value2","b","istart","istop","ostart","ostop","max","numbers","min","norm","sq","degrees","aAngle","Marsaglia","i1","i2","intGenerator","doubleGenerator","createRandomized","now","Date","randomSeed","seed","haveNextNextGaussian","randomGaussian","nextNextGaussian","multiplier","PerlinNoise","rnd","perm","Uint8Array","grad3d","grad2d","grad1d","noise3d","fx","fy","fz","p0","p00","p01","p1","p10","p11","noise2d","noise1d","noiseProfile","generator","octaves","fallout","noise","effect","sum","noiseDetail","noiseSeed","commonFunctions","nfCoreScalar","plus","minus","leftDigits","rightDigits","group","sign","autoDetectDecimals","rightDigitsOfDefault","absValue","number","doubled","floored","buffer","totalDigits","nfCore","nf","nfp","nfc","withCommonFunctions","withTouch","curElement","attachEventHandler","calculateOffset","event","offsetX","offsetY","pmouseX","mouseX","pmouseY","mouseY","offsetParent","offsetLeft","offsetTop","scrollLeft","scrollTop","parentNode","stylePaddingLeft","stylePaddingTop","styleBorderLeft","styleBorderTop","paddingLeft","paddingTop","borderLeftWidth","borderTopWidth","pageXOffset","pageYOffset","updateMousePosition","pageX","pageY","addTouchEventOffset","changedTouches","touches","touch","targetTouches","targetTouch","changedTouch","ehl","eventHandlers","detachEventHandler","touchStart","touchMove","touchEnd","touchCancel","preventDefault","__mousePressed","mouseDragging","mouseButton","mousePressed","mouseMoved","mouseDragged","mouseClicked","mouseReleased","dispatchEvent","enabled","contextMenu","stopPropagation","disableContextMenu","enableContextMenu","mouseOut","mouseOver","onmousedown","focus","which","mouseWheelHandler","delta","wheelDelta","detail","mouseScroll","mouseScrolled","setupParser","aFunctions","getGlobalMembers","names","members","exportedNames","parseProcessing","globalMembers","splitToAtoms","atoms","stack","unshift","injectStrings","strings","trimSpaces","m1","left","middle","right","m2","untrim","appendToLookupTable","table","isLookupTableEmpty","getAtomIndex","templ","codeWoExtraCr","codeWoStrings","quoted","aposed","regexCtx","singleComment","comment","hexCode","genericsWereRemoved","codeWoGenerics","replaceFunc","before","types","after","replaceContext","declaredClasses","currentClassId","classIdSeed","addAtom","lastIndex","generateClassId","appendClass","class_","classId","scopeId","transformClassBody","transformInterfaceBody","transformStatementsBlock","transformStatements","transformMain","transformExpression","classesRegex","methodsRegex","fieldTest","cstrsRegex","attrAndTypeRegex","functionsRegex","extractClassesAndMethods","extractConstructors","className","throws_","AstParam","AstParams","methodArgsParam","getNames","prependMethodArgs","transformParams","paramsWoPars","paramList","param","preExpressionTransform","expr","arrayInitializer","createArrayArgs","atom","indexParts","arg","trimmed","numberWo0","intPart","toUpperCase","indexOrLength","atomIndex","equalsPart","rightSide","repeatJavaReplacement","replacePrototypeMethods","replaceInstanceof","AstInlineClass","baseInterfaceName","transformInlineClass","oldClassId","newClassId","uniqueClassName","inlineClass","AstFunction","oldContext","transformFunction","AstInlineObject","label","transformInlineObject","expandExpression","replaceContextInVars","memberAccessSign","identifier","subMember","callSign","member","AstExpression","transforms","AstVarDefinition","isDefault","transformVarDefinition","def","defaultTypeValue","eqIndex","getDefaultValueForType","AstVar","definitions","varType","AstStatement","expression","transformStatement","statement","attrAndType","AstForExpression","initStatement","condition","step","AstForInExpression","container","AstForEachExpression","iteratorId","variableName","initIteratorAndVariable","nextIterationCondition","transformForExpression","sortByWeight","sort","AstInnerInterface","isStatic","AstInnerClass","transformInnerClass","innerClass","AstClassMethod","paramNames","methodId","transformClassMethod","AstClassField","fieldType","thisPrefix","staticDeclarations","definition","staticName","declaration","transformClassField","AstConstructor","transformConstructor","cstr","AstInterfaceBody","interfacesNames","methodsNames","fields","innerClasses","misc","getMembers","classFields","classMethods","classInners","fieldNames","methodName","getScopeLevel","scope","scopeLevel","staticDefinitions","metadata","thisClassFields","thisClassMethods","thisClassInners","interfaces","resolvedInterfaces","resolvedInterface","field","baseInterfaces","declarations","classes","baseInterfaceNames","tail","AstClassBody","baseClassName","functions","methods","cstrs","selfId","resolvedBaseClassName","fieldName","methodOverloads","overload","cstrsIfs","paramsLength","methodArgsPresent","baseName","AstInterface","AstClass","transformGlobalClass","globalClass","AstMethod","transformGlobalMethod","preStatementsTransform","statements","AstForStatement","argument","AstCatchStatement","AstPrefixStatement","AstSwitchCase","AstLabel","transformMethod","transformClass","nextStatement","res","space","statementsPrefix","statementsTail","getLocalNames","localNames","AstStatementsBlock","AstRoot","otherStatements","generateMetadata","ast","globalScope","id","inScope","findInScopes","parts","currentScope","interface_","setWeight","queue","tocheck","dependsOn","removeDependentAndCheck","targetId","from","transformed","redendered","preprocessCode","aCode","sketch","dm","jsonItems","directives","clean","dl","jl","imageName","xl","JSON","compile","pdeCode","compiledPde","PjsConsole","added","BufferMax","wrapper","dragger","closer","onmouseover","setProperty","onmouseout","javaconsole","divheight","selection","empty","getSelection","removeAllRanges","screenY","onmousemove","onmouseup","BufferArray","visibility","scrollHeight","showconsole","hideconsole","onclick","logger","extend","Character","XML","HTMLCanvasElement","HTMLImageElement","localStorage","Float32Array","setupTypedArray","Int32Array","Uint16Array","fallback","documentMode","doctype","processingInstanceIds","addInstance","externals","removeInstance","aCanvas","pgraphicsMode","attachEvent","eventHandler","detachEvent","context","use3DContext","focused","glyphTable","keyCode","keyPressed","keyReleased","keyTyped","setup","__keyPressed","__frameRate","frameCount","curContext","curSketch","drawing","doFill","currentFillColor","isFillDirty","doStroke","strokeStyle","currentStrokeColor","isStrokeDirty","lineWidth","loopStarted","renderSmooth","doLoop","looping","normalX","normalY","normalZ","normalMode","curFrameRate","curMsPerFrame","curCursor","oldCursor","cursor","curShape","curShapeCount","curvePoints","curTightness","curveDet","curveInited","backgroundObj","bezDetail","colorModeA","colorModeX","colorModeY","colorModeZ","pathOpen","pmouseXLastFrame","pmouseYLastFrame","curColorMode","curTint","curTint3d","getLoaded","timeSinceLastFPS","framesSinceLastFPS","textcanvas","curveBasisMatrix","curveToBezierMatrix","curveDrawMatrix","bezierDrawMatrix","bezierBasisInverse","bezierBasisMatrix","curContextCache","locations","programObject3D","programObject2D","programObjectUnlitShape","boxBuffer","boxNormBuffer","boxOutlineBuffer","rectBuffer","rectNormBuffer","sphereBuffer","lineBuffer","fillBuffer","fillColorBuffer","strokeColorBuffer","pointBuffer","shapeTexVBO","canTex","textTex","curTexture","curTextureMode","usingTexture","textBuffer","textureBuffer","indexBuffer","horizontalTextAlignment","verticalTextAlignment","textMode","curFontName","curTextSize","curTextAscent","curTextDescent","curTextLeading","curTextFont","originalContext","proxyContext","isContextReplaced","setPixelsCached","maxPixelsCached","pressedKeysMap","lastPressedKeyCode","codedKeys","lightCount","sphereDetailV","sphereDetailU","sphereX","sphereY","sphereZ","sinLUT","cosLUT","sphereVerts","sphereNorms","cam","cameraInv","modelView","modelViewInv","userMatrixStack","userReverseMatrixStack","projection","manipulatingCamera","frustumMode","cameraFOV","cameraX","cameraY","cameraZ","cameraNear","cameraFar","cameraAspect","curveVertArray","curveVertCount","isCurve","isBezier","firstVert","curShapeMode","styleArray","boxVerts","boxOutlineVerts","boxNorms","rectVerts","rectNorms","vertexShaderSrcUnlitShape","fragmentShaderSrcUnlitShape","vertexShaderSrc2D","fragmentShaderSrc2D","webglMaxTempsWorkaround","userAgent","vertexShaderSrc3D","fragmentShaderSrc3D","uniformf","cacheId","programObj","varName","varValue","varLocation","getUniformLocation","uniform4fv","uniform3fv","uniform2fv","uniform1f","uniformi","uniform4iv","uniform3iv","uniform2iv","uniform1i","uniformMatrix","uniformMatrix4fv","uniformMatrix3fv","uniformMatrix2fv","vertexAttribPointer","VBO","getAttribLocation","bindBuffer","ARRAY_BUFFER","FLOAT","enableVertexAttribArray","disableVertexAttribPointer","disableVertexAttribArray","createProgramObject","vetexShaderSource","fragmentShaderSource","vertexShaderObject","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShaderObject","FRAGMENT_SHADER","programObject","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","imageModeCorner","whAreSizes","imageModeCorners","imageModeCenter","DrawingShared","Drawing2D","Drawing3D","DrawingPre","constructor","a3DOnlyFunction","shapeMode","mode","loadShape","loadXML","big","PMatrixStack","matrixStack","load","tmpMatrix","$newPMatrix","peek","delim","splitTokens","tokenized","append","array1","array2","numElem","ret","elemsToCopy","subset","end","seperator","shorten","ary","newary","targetSize","newSize","arrayCopy","srcPos","dest","destPos","reverse","mix","peg","modes","applyMode","c1","ar","ag","ab","br","bg","bb","cr","cg","cb","g","c2","blend","subtract","lightest","darkest","difference","exclusion","multiply","screen","hard_light","soft_light","overlay","dodge","burn","color$4","aValue1","aValue2","aValue3","aValue4","rgb","toRGB","color$2","color$1","colorInt","toInt","toGLArray","hue","q","colorToHSB","saturation","brightness","colInt","aColor","alpha","lerpColor","r1","g1","b1","a1","r2","g2","b2","a2","hsb1","hsb2","colorBits1","colorBits2","colorMode","blendColor","saveContext","save","restoreContext","restore","printMatrix","pmatrix","transformm","pmatrix3d","setTransform","cnt","angleInRadians","newState","oldState","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","millis","redrawHelper","sec","fps","redraw","pmouseXLastEvent","pmouseYLastEvent","DEPTH_BUFFER_BIT","noLights","lightFalloff","shininess","ambient","specular","emissive","camera","noLoop","clearInterval","loop","setInterval","e_loop","frameRate","aRate","detach","PImage","imageDataURL","toDataURL","noCursor","link","beginDraw","endDraw","toImageData","createImageData","uBuff","readPixels","RGBA","UNSIGNED_BYTE","ul","obj_data","binary","num","numBits","bit","unbinary","binaryString","mask","ch","decimalToHex","padding","hex","Number","unhexScalar","unhex","loadStrings","filecontent","saveStrings","loadBytes","matchAll","aString","aRegExp","results","latest","logBuffer","message","booleanScalar","parseBoolean","parseByte","bytes","parseChar","floatScalar","intScalar","radix","__int_cast","__instanceof","objType","$isInterface","$interfaces","$base","aWidth","aHeight","aMode","savedProperties","lineCap","lineJoin","removeProperty","textFont","background","size3DCalled","getGLContext","ctxNames","gl","antialias","preserveDrawingBuffer","createTexture","e_size","viewport","enable","DEPTH_TEST","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","useProgram","createBuffer","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","perspective","ambientLight","view","normalizedCol","directionalLight","nx","ny","nz","mvm","dir","constant","linear","quadratic","lightSpecular","lights","pointLight","spotLight","concentration","beginCamera","endCamera","eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","xX","xY","xZ","yX","yY","yZ","zX","zY","zZ","fov","aspect","near","far","yMax","yMin","xMax","xMin","frustum","bottom","top","proj","ortho","printProjection","printCamera","model","POLYGON_OFFSET_FILL","polygonOffset","normalMatrix","drawArrays","disable","initSphere","v11","voff","sphereDetail","ures","vres","cz","vertCount","currVert","angle_step","curradius","currY","sRad","LINE_STRIP","modelX","mv","ci","ax","ay","az","aw","ox","ow","modelY","oy","modelZ","oz","v3","shine","screenX","pj","screenZ","executeContextFill","executeContextStroke","$ensureContext","smooth","mozImageSmoothingEnabled","noSmooth","beginPath","isVert","point3D","vArray","cArray","STREAM_DRAW","line3D","ctxMode","LINE_LOOP","fill3D","tArray","fillStrokeClose","closePath","closeShape","lineVertArray","fillVertArray","colorVertArray","strokeVertArray","texVertArray","cachedVertArray","vertArrayLength","bezierCurveTo","lineTo","tempArray","splineForward","segments","ff","fff","curveInit","lastPoint","z1","xplot1","xplot2","xplot3","yplot1","yplot2","yplot3","zplot1","zplot2","zplot3","texture","pimage","__texture","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","generateMipmap","cvs","cvsTextureCtx","pot","drawImage","sourceImg","LINEAR_MIPMAP_LINEAR","TEXTURE_WRAP_T","CLAMP_TO_EDGE","TEXTURE_WRAP_S","textureMode","curveVertexSegment","z2","z3","x4","y4","z4","x0","y0","z0","curve","curveTightness","tightness","curveDetail","aRectMode","aEllipseMode","hr","vr","startLUT","stopLUT","savedStroke","savedFill","swap","drawCrisp","currentModelView","identityMatrix","lineVerts","bezier","bezierDetail","bezierPoint","bezierTangent","curvePoint","curveTangent","roundedRect$2d","tl","tr","bl","halfWidth","halfHeight","quadraticCurveTo","C","c_x","c_y","xAv","yAv","normal","file","saveNumber","saveFrame","frameFilename","utilityContext2d","canvasDataCache","getCanvasData","canvasData","clearRect","putImageData","buildPixelsObject","pImage","getLength","aImg","isRemote","imageData","getPixel","setPixel","__isDirty","aL","aFormat","fromHTMLImageData","format","updatePixels","pixels","__isPImage","htmlImg","fromImageData","srcImg","dwidth","dheight","MODE","copy","swidth","sheight","filter","resize","loadPixels","canvasImg","createImage","loadImage","pimg","aImage","aPImage","aCallback","requestImage","get$2","get$3","get$4","get$5","cData","imgWidth","imgHeight","imgData","startRow","startColumn","stopRow","stopColumn","sourceOffset","targetOffset","createGraphics","render","pg","resetContext","SetPixelContextWrapper","wrapFunction","newContext","wrapProperty","getter","setter","set$3","set$4","oldFill","hint","depthMask","backgroundHelper","arg3","arg4","clearColor","COLOR_BUFFER_BIT","wid","hgt","fastImage","htmlElement","tint","a3","a4","tintColor","noTint","sw","sh","dw","dh","pimgdest","sx2","sy2","dx2","dy2","intersect","blit_resize","buildBlurKernel","radius","radiusi","shared","blurRadius","blurKernelSize","blurKernel","sharedBlurKernal","sharedBlurKernelSize","sharedBlurRadius","radiusiSquared","blurARGB","ca","read","ri","ym","ymi","bk0","wh","yi","aImgHeight","aImgWidth","pix","dilate","isInverted","currIdx","maxIdx","out","currRowIdx","maxRowIdx","colOrig","colOut","currLum","idxRight","idxLeft","idxUp","idxDown","colRight","colLeft","colUp","colDown","lumRight","lumLeft","lumUp","lumDown","lum","imglen","levels","levels1","rlevel","glevel","blevel","thresh","fracU","ifU","fracV","ifV","u1","u2","sX","sY","iw","iw1","ih1","ll","ur","lr","cUL","cLL","cUR","cLR","srcXOffset","srcYOffset","srcBuffer","sx1","sy1","dx1","dy1","blendFuncs","srcX1","srcY1","srcX2","srcY2","destPixels","screenW","screenH","destX1","destY1","destX2","destY2","srcW","srcH","destW","destH","pshared","destOffset","destColor","filterBilinear","filter_bilinear","filterNewScanline","filter_new_scanline","blendedColor","cULoffset","cURoffset","cLLoffset","cLRoffset","loadFont","loadGlyphs","units_per_em","horiz_adv_x","glyphLook","createFont","textSize","textAscent","textDescent","textLeading","textAlign","xalign","yalign","toP5String","textWidth","lines","linesCount","textContext","one","two","three","four","five","six","seven","eight","nine","zero","dollar","exclam","quotedbl","numbersign","percent","ampersand","quotesingle","parenleft","parenright","asterisk","comma","hyphen","period","slash","underscore","colon","semicolon","less","equal","greater","question","at","bracketleft","backslash","bracketright","asciicircum","grave","braceleft","bar","braceright","asciitilde","text$line","align","xOffset","upem","newScale","textBaseline","scalefactor","drawElements","UNSIGNED_SHORT","text$4","yOffset","text$6","spaceMark","drawCommands","charPos","currentChar","spaceChar","letterWidth","visibleLines","drawCommand","lastCom","lenC","getXY","needle","hay","buildPath","beforePathDraw","afterPathDraw","com","xy","parseSVGFont","svg","font_face","unicode","implementation","createDocument","e_fx_op","async","e_sf_ch","xmlhttp","responseXML","tagName","wireDimensionalFunctions","$init","createDrawingPreFunction","getKeyCode","getKeyChar","anyShiftPressed","shiftKey","ctrlKey","altKey","metaKey","suppressKeyEvent","updateKeyPressed","resetKeyPressed","simulateKeyTyped","handleKeydown","handleKeypress","handleKeyup","onfocus","onblur","keyTrigger","retryInterval","executeSketch","setTimeout","msg","getInstanceById","unsupportedP5","prettyName","p5Name","createUnsupportedFunc","finalize","buildProcessingJS","testHarness"],"mappings":"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","file":"processing.2dc9384b.map","sourceRoot":"..","sourcesContent":[";(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// build script for generating processing.js\n\nvar Browser = {\n  isDomPresent: true,\n  navigator: navigator,\n  window: window,\n  document: document,\n  ajax: function(url) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", url, false);\n    if (xhr.overrideMimeType) {\n      xhr.overrideMimeType(\"text/plain\");\n    }\n    xhr.setRequestHeader(\"If-Modified-Since\", \"Fri, 01 Jan 1960 00:00:00 GMT\");\n    xhr.send(null);\n    // failed request?\n    if (xhr.status !== 200 && xhr.status !== 0) { throw (\"XMLHttpRequest failed, status code \" + xhr.status); }\n    return xhr.responseText;\n  }\n};\n\nwindow.Processing = require('./src/')(Browser);\n\n},{\"./src/\":27}],2:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"Processing.js\",\n  \"version\": \"1.4.8\",\n  \"dependencies\": {\n    \"argv\": \"~0.0.2\",\n    \"browserify\": \"~2.18.1\",\n    \"express\": \"~3.3.3\",\n    \"node-minify\": \"~0.7.3\",\n    \"nunjucks\": \"~0.1.9\",\n    \"open\": \"0.0.3\"\n  },\n  \"devDependencies\": {\n    \"grunt\": \"~0.4.1\",\n    \"grunt-cli\": \"~0.1.8\",\n    \"grunt-contrib-jshint\": \"~0.4.3\"\n  }\n}\n\n},{}],3:[function(require,module,exports){\n/**\n* A ObjectIterator is an iterator wrapper for objects. If passed object contains\n* the iterator method, the object instance will be replaced by the result returned by\n* this method call. If passed object is an array, the ObjectIterator instance iterates\n* through its items.\n*\n* @param {Object} obj The object to be iterated.\n*/\nmodule.exports = function ObjectIterator(obj) {\n  if (obj instanceof Array) {\n    // iterate through array items\n    var index = -1;\n    this.hasNext = function() {\n      return ++index < obj.length;\n    };\n    this.next = function() {\n      return obj[index];\n    };\n  } else if (obj.iterator instanceof Function) {\n    return obj.iterator();\n  } else {\n    throw \"Unable to iterate: \" + obj;\n  }\n};\n\n},{}],4:[function(require,module,exports){\n/**\n * Processing.js environment constants\n */\nmodule.exports = {\n    X: 0,\n    Y: 1,\n    Z: 2,\n\n    R: 3,\n    G: 4,\n    B: 5,\n    A: 6,\n\n    U: 7,\n    V: 8,\n\n    NX: 9,\n    NY: 10,\n    NZ: 11,\n\n    EDGE: 12,\n\n    // Stroke\n    SR: 13,\n    SG: 14,\n    SB: 15,\n    SA: 16,\n\n    SW: 17,\n\n    // Transformations (2D and 3D)\n    TX: 18,\n    TY: 19,\n    TZ: 20,\n\n    VX: 21,\n    VY: 22,\n    VZ: 23,\n    VW: 24,\n\n    // Material properties\n    AR: 25,\n    AG: 26,\n    AB: 27,\n\n    DR: 3,\n    DG: 4,\n    DB: 5,\n    DA: 6,\n\n    SPR: 28,\n    SPG: 29,\n    SPB: 30,\n\n    SHINE: 31,\n\n    ER: 32,\n    EG: 33,\n    EB: 34,\n\n    BEEN_LIT: 35,\n\n    VERTEX_FIELD_COUNT: 36,\n\n    // Renderers\n    P2D:    1,\n    JAVA2D: 1,\n    WEBGL:  2,\n    P3D:    2,\n    OPENGL: 2,\n    PDF:    0,\n    DXF:    0,\n\n    // Platform IDs\n    OTHER:   0,\n    WINDOWS: 1,\n    MAXOSX:  2,\n    LINUX:   3,\n\n    EPSILON: 0.0001,\n\n    MAX_FLOAT:  3.4028235e+38,\n    MIN_FLOAT: -3.4028235e+38,\n    MAX_INT:    2147483647,\n    MIN_INT:   -2147483648,\n\n    PI:         Math.PI,\n    TWO_PI:     2 * Math.PI,\n    TAU:        2 * Math.PI,\n    HALF_PI:    Math.PI / 2,\n    THIRD_PI:   Math.PI / 3,\n    QUARTER_PI: Math.PI / 4,\n\n    DEG_TO_RAD: Math.PI / 180,\n    RAD_TO_DEG: 180 / Math.PI,\n\n    WHITESPACE: \" \\t\\n\\r\\f\\u00A0\",\n\n    // Color modes\n    RGB:   1,\n    ARGB:  2,\n    HSB:   3,\n    ALPHA: 4,\n    CMYK:  5,\n\n    // Image file types\n    TIFF:  0,\n    TARGA: 1,\n    JPEG:  2,\n    GIF:   3,\n\n    // Filter/convert types\n    BLUR:      11,\n    GRAY:      12,\n    INVERT:    13,\n    OPAQUE:    14,\n    POSTERIZE: 15,\n    THRESHOLD: 16,\n    ERODE:     17,\n    DILATE:    18,\n\n    // Blend modes\n    REPLACE:    0,\n    BLEND:      1 << 0,\n    ADD:        1 << 1,\n    SUBTRACT:   1 << 2,\n    LIGHTEST:   1 << 3,\n    DARKEST:    1 << 4,\n    DIFFERENCE: 1 << 5,\n    EXCLUSION:  1 << 6,\n    MULTIPLY:   1 << 7,\n    SCREEN:     1 << 8,\n    OVERLAY:    1 << 9,\n    HARD_LIGHT: 1 << 10,\n    SOFT_LIGHT: 1 << 11,\n    DODGE:      1 << 12,\n    BURN:       1 << 13,\n\n    // Color component bit masks\n    ALPHA_MASK: 0xff000000,\n    RED_MASK:   0x00ff0000,\n    GREEN_MASK: 0x0000ff00,\n    BLUE_MASK:  0x000000ff,\n\n    // Projection matrices\n    CUSTOM:       0,\n    ORTHOGRAPHIC: 2,\n    PERSPECTIVE:  3,\n\n    // Shapes\n    POINT:          2,\n    POINTS:         2,\n    LINE:           4,\n    LINES:          4,\n    TRIANGLE:       8,\n    TRIANGLES:      9,\n    TRIANGLE_STRIP: 10,\n    TRIANGLE_FAN:   11,\n    QUAD:           16,\n    QUADS:          16,\n    QUAD_STRIP:     17,\n    POLYGON:        20,\n    PATH:           21,\n    RECT:           30,\n    ELLIPSE:        31,\n    ARC:            32,\n    SPHERE:         40,\n    BOX:            41,\n\n    GROUP:          0,\n    PRIMITIVE:      1,\n    //PATH:         21, // shared with Shape PATH\n    GEOMETRY:       3,\n\n    // Shape Vertex\n    VERTEX:        0,\n    BEZIER_VERTEX: 1,\n    CURVE_VERTEX:  2,\n    BREAK:         3,\n    CLOSESHAPE:    4,\n\n    // Shape closing modes\n    OPEN:  1,\n    CLOSE: 2,\n\n    // Shape drawing modes\n    CORNER:          0, // Draw mode convention to use (x, y) to (width, height)\n    CORNERS:         1, // Draw mode convention to use (x1, y1) to (x2, y2) coordinates\n    RADIUS:          2, // Draw mode from the center, and using the radius\n    CENTER_RADIUS:   2, // Deprecated! Use RADIUS instead\n    CENTER:          3, // Draw from the center, using second pair of values as the diameter\n    DIAMETER:        3, // Synonym for the CENTER constant. Draw from the center\n    CENTER_DIAMETER: 3, // Deprecated! Use DIAMETER instead\n\n    // Text vertical alignment modes\n    BASELINE: 0,   // Default vertical alignment for text placement\n    TOP:      101, // Align text to the top\n    BOTTOM:   102, // Align text from the bottom, using the baseline\n\n    // UV Texture coordinate modes\n    NORMAL:     1,\n    NORMALIZED: 1,\n    IMAGE:      2,\n\n    // Text placement modes\n    MODEL: 4,\n    SHAPE: 5,\n\n    // Stroke modes\n    SQUARE:  'butt',\n    ROUND:   'round',\n    PROJECT: 'square',\n    MITER:   'miter',\n    BEVEL:   'bevel',\n\n    // Lighting modes\n    AMBIENT:     0,\n    DIRECTIONAL: 1,\n    //POINT:     2, Shared with Shape constant\n    SPOT:        3,\n\n    // Key constants\n\n    // Both key and keyCode will be equal to these values\n    BACKSPACE: 8,\n    TAB:       9,\n    ENTER:     10,\n    RETURN:    13,\n    ESC:       27,\n    DELETE:    127,\n    CODED:     0xffff,\n\n    // p.key will be CODED and p.keyCode will be this value\n    SHIFT:     16,\n    CONTROL:   17,\n    ALT:       18,\n    CAPSLK:    20,\n    PGUP:      33,\n    PGDN:      34,\n    END:       35,\n    HOME:      36,\n    LEFT:      37,\n    UP:        38,\n    RIGHT:     39,\n    DOWN:      40,\n    F1:        112,\n    F2:        113,\n    F3:        114,\n    F4:        115,\n    F5:        116,\n    F6:        117,\n    F7:        118,\n    F8:        119,\n    F9:        120,\n    F10:       121,\n    F11:       122,\n    F12:       123,\n    NUMLK:     144,\n    META:      157,\n    INSERT:    155,\n\n    // Cursor types\n    ARROW:    'default',\n    CROSS:    'crosshair',\n    HAND:     'pointer',\n    MOVE:     'move',\n    TEXT:     'text',\n    WAIT:     'wait',\n    NOCURSOR: \"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto\",\n\n    // Hints\n    DISABLE_OPENGL_2X_SMOOTH:     1,\n    ENABLE_OPENGL_2X_SMOOTH:     -1,\n    ENABLE_OPENGL_4X_SMOOTH:      2,\n    ENABLE_NATIVE_FONTS:          3,\n    DISABLE_DEPTH_TEST:           4,\n    ENABLE_DEPTH_TEST:           -4,\n    ENABLE_DEPTH_SORT:            5,\n    DISABLE_DEPTH_SORT:          -5,\n    DISABLE_OPENGL_ERROR_REPORT:  6,\n    ENABLE_OPENGL_ERROR_REPORT:  -6,\n    ENABLE_ACCURATE_TEXTURES:     7,\n    DISABLE_ACCURATE_TEXTURES:   -7,\n    HINT_COUNT:                  10,\n\n    // PJS defined constants\n    SINCOS_LENGTH:      720,       // every half degree\n    PRECISIONB:         15,        // fixed point precision is limited to 15 bits!!\n    PRECISIONF:         1 << 15,\n    PREC_MAXVAL:        (1 << 15) - 1,\n    PREC_ALPHA_SHIFT:   24 - 15,\n    PREC_RED_SHIFT:     16 - 15,\n    NORMAL_MODE_AUTO:   0,\n    NORMAL_MODE_SHAPE:  1,\n    NORMAL_MODE_VERTEX: 2,\n    MAX_LIGHTS:         8\n};\n\n},{}],5:[function(require,module,exports){\n/**\n * Processing.js default scope\n */\nmodule.exports = function(options) {\n\n  // Building defaultScope. Changing of the prototype protects\n  // internal Processing code from the changes in defaultScope\n  function DefaultScope() {}\n  DefaultScope.prototype = options.PConstants;\n\n  var defaultScope = new DefaultScope();\n\n  // copy over all known Object types and helper objects\n  Object.keys(options).forEach(function(prop) {\n    defaultScope[prop] = options[prop];\n  });\n\n  ////////////////////////////////////////////////////////////////////////////\n  // Class inheritance helper methods\n  ////////////////////////////////////////////////////////////////////////////\n\n  defaultScope.defineProperty = function(obj, name, desc) {\n    if(\"defineProperty\" in Object) {\n      Object.defineProperty(obj, name, desc);\n    } else {\n      if (desc.hasOwnProperty(\"get\")) {\n        obj.__defineGetter__(name, desc.get);\n      }\n      if (desc.hasOwnProperty(\"set\")) {\n        obj.__defineSetter__(name, desc.set);\n      }\n    }\n  };\n\n  /**\n   * class overloading, part 1\n   */\n  function overloadBaseClassFunction(object, name, basefn) {\n    if (!object.hasOwnProperty(name) || typeof object[name] !== 'function') {\n      // object method is not a function or just inherited from Object.prototype\n      object[name] = basefn;\n      return;\n    }\n    var fn = object[name];\n    if (\"$overloads\" in fn) {\n      // the object method already overloaded (see defaultScope.addMethod)\n      // let's just change a fallback method\n      fn.$defaultOverload = basefn;\n      return;\n    }\n    if (!(\"$overloads\" in basefn) && fn.length === basefn.length) {\n      // special case when we just overriding the method\n      return;\n    }\n    var overloads, defaultOverload;\n    if (\"$overloads\" in basefn) {\n      // let's inherit base class overloads to speed up things\n      overloads = basefn.$overloads.slice(0);\n      overloads[fn.length] = fn;\n      defaultOverload = basefn.$defaultOverload;\n    } else {\n      overloads = [];\n      overloads[basefn.length] = basefn;\n      overloads[fn.length] = fn;\n      defaultOverload = fn;\n    }\n    var hubfn = function() {\n      var fn = hubfn.$overloads[arguments.length] ||\n               (\"$methodArgsIndex\" in hubfn && arguments.length > hubfn.$methodArgsIndex ?\n               hubfn.$overloads[hubfn.$methodArgsIndex] : null) ||\n               hubfn.$defaultOverload;\n      return fn.apply(this, arguments);\n    };\n    hubfn.$overloads = overloads;\n    if (\"$methodArgsIndex\" in basefn) {\n      hubfn.$methodArgsIndex = basefn.$methodArgsIndex;\n    }\n    hubfn.$defaultOverload = defaultOverload;\n    hubfn.name = name;\n    object[name] = hubfn;\n  }\n\n  /**\n   * class overloading, part 2\n   */\n\n  function extendClass(subClass, baseClass) {\n    function extendGetterSetter(propertyName) {\n      defaultScope.defineProperty(subClass, propertyName, {\n        get: function() {\n          return baseClass[propertyName];\n        },\n        set: function(v) {\n          baseClass[propertyName]=v;\n        },\n        enumerable: true\n      });\n    }\n\n    var properties = [];\n    for (var propertyName in baseClass) {\n      if (typeof baseClass[propertyName] === 'function') {\n        overloadBaseClassFunction(subClass, propertyName, baseClass[propertyName]);\n      } else if(propertyName.charAt(0) !== \"$\" && !(propertyName in subClass)) {\n        // Delaying the properties extension due to the IE9 bug (see #918).\n        properties.push(propertyName);\n      }\n    }\n    while (properties.length > 0) {\n      extendGetterSetter(properties.shift());\n    }\n\n    subClass.$super = baseClass;\n  }\n\n  /**\n   * class overloading, part 3\n   */\n  defaultScope.extendClassChain = function(base) {\n    var path = [base];\n    for (var self = base.$upcast; self; self = self.$upcast) {\n      extendClass(self, base);\n      path.push(self);\n      base = self;\n    }\n    while (path.length > 0) {\n      path.pop().$self=base;\n    }\n  };\n\n  // static\n  defaultScope.extendStaticMembers = function(derived, base) {\n    extendClass(derived, base);\n  };\n\n  // interface\n  defaultScope.extendInterfaceMembers = function(derived, base) {\n    extendClass(derived, base);\n  };\n\n  /**\n   * Java methods and JavaScript functions differ enough that\n   * we need a special function to make sure it all links up\n   * as classical hierarchical class chains.\n   */\n  defaultScope.addMethod = function(object, name, fn, hasMethodArgs) {\n    var existingfn = object[name];\n    if (existingfn || hasMethodArgs) {\n      var args = fn.length;\n      // builds the overload methods table\n      if (\"$overloads\" in existingfn) {\n        existingfn.$overloads[args] = fn;\n      } else {\n        var hubfn = function() {\n          var fn = hubfn.$overloads[arguments.length] ||\n                   (\"$methodArgsIndex\" in hubfn && arguments.length > hubfn.$methodArgsIndex ?\n                   hubfn.$overloads[hubfn.$methodArgsIndex] : null) ||\n                   hubfn.$defaultOverload;\n          return fn.apply(this, arguments);\n        };\n        var overloads = [];\n        if (existingfn) {\n          overloads[existingfn.length] = existingfn;\n        }\n        overloads[args] = fn;\n        hubfn.$overloads = overloads;\n        hubfn.$defaultOverload = existingfn || fn;\n        if (hasMethodArgs) {\n          hubfn.$methodArgsIndex = args;\n        }\n        hubfn.name = name;\n        object[name] = hubfn;\n      }\n    } else {\n      object[name] = fn;\n    }\n  };\n\n  // internal helper function\n  function isNumericalJavaType(type) {\n    if (typeof type !== \"string\") {\n      return false;\n    }\n    return [\"byte\", \"int\", \"char\", \"color\", \"float\", \"long\", \"double\"].indexOf(type) !== -1;\n  }\n\n  /**\n   * Java's arrays are pre-filled when declared with\n   * an initial size, but no content. JS arrays are not.\n   */\n  defaultScope.createJavaArray = function(type, bounds) {\n    var result = null,\n        defaultValue = null;\n    if (typeof type === \"string\") {\n      if (type === \"boolean\") {\n        defaultValue = false;\n      } else if (isNumericalJavaType(type)) {\n        defaultValue = 0;\n      }\n    }\n    if (typeof bounds[0] === 'number') {\n      var itemsCount = 0 | bounds[0];\n      if (bounds.length <= 1) {\n        result = [];\n        result.length = itemsCount;\n        for (var i = 0; i < itemsCount; ++i) {\n          result[i] = defaultValue;\n        }\n      } else {\n        result = [];\n        var newBounds = bounds.slice(1);\n        for (var j = 0; j < itemsCount; ++j) {\n          result.push(defaultScope.createJavaArray(type, newBounds));\n        }\n      }\n    }\n    return result;\n  };\n\n  // screenWidth and screenHeight are shared by all instances.\n  // and return the width/height of the browser's viewport.\n  defaultScope.defineProperty(defaultScope, 'screenWidth',\n    { get: function() { return window.innerWidth; } });\n\n  defaultScope.defineProperty(defaultScope, 'screenHeight',\n    { get: function() { return window.innerHeight; } });\n\n  return defaultScope;\n};\n\n},{}],6:[function(require,module,exports){\n/**\n * Finalise the Processing.js object.\n */\nmodule.exports = function finalizeProcessing(Processing, options) {\n\n  // unpack options\n  var window = options.window,\n      document = options.document,\n      XMLHttpRequest = window.XMLHttpRequest,\n      noop = options.noop,\n      isDOMPresent = options.isDOMPresent,\n      version = options.version,\n      undef;\n\n  // versioning\n  Processing.version = (version ? version : \"@DEV-VERSION@\");\n\n  // Share lib space\n  Processing.lib = {};\n\n  /**\n   * External libraries can be added to the global Processing\n   * objects with the `registerLibrary` function.\n   */\n  Processing.registerLibrary = function(name, library) {\n    Processing.lib[name] = library;\n    if(library.hasOwnProperty(\"init\")) {\n      library.init(defaultScope);\n    }\n  };\n\n  /**\n   * This is the object that acts as our version of PApplet.\n   * This can be called as Processing.Sketch() or as\n   * Processing.Sketch(function) in which case the function\n   * must be an already-compiled-to-JS sketch function.\n   */\n  Processing.Sketch = function(attachFunction) {\n    this.attachFunction = attachFunction;\n    this.options = {\n      pauseOnBlur: false,\n      globalKeyEvents: false\n    };\n\n    /* Optional Sketch event hooks:\n     *   onLoad       - parsing/preloading is done, before sketch starts\n     *   onSetup      - setup() has been called, before first draw()\n     *   onPause      - noLoop() has been called, pausing draw loop\n     *   onLoop       - loop() has been called, resuming draw loop\n     *   onFrameStart - draw() loop about to begin\n     *   onFrameEnd   - draw() loop finished\n     *   onExit       - exit() done being called\n     */\n    this.onLoad = noop;\n    this.onSetup = noop;\n    this.onPause = noop;\n    this.onLoop = noop;\n    this.onFrameStart = noop;\n    this.onFrameEnd = noop;\n    this.onExit = noop;\n\n    this.params = {};\n    this.imageCache = {\n      pending: 0,\n      images: {},\n      // Opera requires special administration for preloading\n      operaCache: {},\n      // Specify an optional img arg if the image is already loaded in the DOM,\n      // otherwise href will get loaded.\n      add: function(href, img) {\n        // Prevent muliple loads for an image, in case it gets\n        // preloaded more than once, or is added via JS and then preloaded.\n        if (this.images[href]) {\n          return;\n        }\n\n        if (!isDOMPresent) {\n          this.images[href] = null;\n        }\n\n        // No image in the DOM, kick-off a background load\n        if (!img) {\n          img = new Image();\n          img.onload = (function(owner) {\n            return function() {\n              owner.pending--;\n            };\n          }(this));\n          this.pending++;\n          img.src = href;\n        }\n\n        this.images[href] = img;\n\n        // Opera will not load images until they are inserted into the DOM.\n        if (window.opera) {\n          var div = document.createElement(\"div\");\n          div.appendChild(img);\n          // we can't use \"display: none\", since that makes it invisible, and thus not load\n          div.style.position = \"absolute\";\n          div.style.opacity = 0;\n          div.style.width = \"1px\";\n          div.style.height= \"1px\";\n          if (!this.operaCache[href]) {\n            document.body.appendChild(div);\n            this.operaCache[href] = div;\n          }\n        }\n      }\n    };\n\n    this.sourceCode = undefined;\n    this.attach = function(processing) {\n      // either attachFunction or sourceCode must be present on attach\n      if(typeof this.attachFunction === \"function\") {\n        this.attachFunction(processing);\n      } else if(this.sourceCode) {\n        var func = ((new Function(\"return (\" + this.sourceCode + \");\"))());\n        func(processing);\n        this.attachFunction = func;\n      } else {\n        throw \"Unable to attach sketch to the processing instance\";\n      }\n    };\n\n    this.toString = function() {\n      var i;\n      var code = \"((function(Sketch) {\\n\";\n      code += \"var sketch = new Sketch(\\n\" + this.sourceCode + \");\\n\";\n      for(i in this.options) {\n        if(this.options.hasOwnProperty(i)) {\n          var value = this.options[i];\n          code += \"sketch.options.\" + i + \" = \" +\n            (typeof value === 'string' ? '\\\"' + value + '\\\"' : \"\" + value) + \";\\n\";\n        }\n      }\n      for(i in this.imageCache) {\n        if(this.options.hasOwnProperty(i)) {\n          code += \"sketch.imageCache.add(\\\"\" + i + \"\\\");\\n\";\n        }\n      }\n      // TODO serialize fonts\n      code += \"return sketch;\\n})(Processing.Sketch))\";\n      return code;\n    };\n  };\n\n  /**\n   * aggregate all source code into a single file, then rewrite that\n   * source and bind to canvas via new Processing(canvas, sourcestring).\n   * @param {CANVAS} canvas The html canvas element to bind to\n   * @param {String[]} source The array of files that must be loaded\n   */\n  var loadSketchFromSources = Processing.loadSketchFromSources = function(canvas, sources) {\n    var code = [], errors = [], sourcesCount = sources.length, loaded = 0;\n\n    function ajaxAsync(url, callback) {\n      var xhr = new XMLHttpRequest();\n      xhr.onreadystatechange = function() {\n        if (xhr.readyState === 4) {\n          var error;\n          if (xhr.status !== 200 && xhr.status !== 0) {\n            error = \"Invalid XHR status \" + xhr.status;\n          } else if (xhr.responseText === \"\") {\n            // Give a hint when loading fails due to same-origin issues on file:/// urls\n            if ( (\"withCredentials\" in new XMLHttpRequest()) &&\n                 (new XMLHttpRequest()).withCredentials === false &&\n                 window.location.protocol === \"file:\" ) {\n              error = \"XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.\";\n            } else {\n              error = \"File is empty.\";\n            }\n          }\n\n          callback(xhr.responseText, error);\n        }\n      };\n      xhr.open(\"GET\", url, true);\n      if (xhr.overrideMimeType) {\n        xhr.overrideMimeType(\"application/json\");\n      }\n      xhr.setRequestHeader(\"If-Modified-Since\", \"Fri, 01 Jan 1960 00:00:00 GMT\"); // no cache\n      xhr.send(null);\n    }\n\n    function loadBlock(index, filename) {\n      function callback(block, error) {\n        code[index] = block;\n        ++loaded;\n        if (error) {\n          errors.push(filename + \" ==> \" + error);\n        }\n        if (loaded === sourcesCount) {\n          if (errors.length === 0) {\n            try {\n              return new Processing(canvas, code.join(\"\\n\"));\n            } catch(e) {\n              console.log(\"Processing.js: Unable to execute pjs sketch.\");\n              throw e;\n            }\n          } else {\n            throw \"Processing.js: Unable to load pjs sketch files: \" + errors.join(\"\\n\");\n          }\n        }\n      }\n      if (filename.charAt(0) === '#') {\n        // trying to get script from the element\n        var scriptElement = document.getElementById(filename.substring(1));\n        if (scriptElement) {\n          callback(scriptElement.text || scriptElement.textContent);\n        } else {\n          callback(\"\", \"Unable to load pjs sketch: element with id \\'\" + filename.substring(1) + \"\\' was not found\");\n        }\n        return;\n      }\n\n      ajaxAsync(filename, callback);\n    }\n\n    for (var i = 0; i < sourcesCount; ++i) {\n      loadBlock(i, sources[i]);\n    }\n  };\n\n  /**\n   * Automatic initialization function.\n   */\n  var init = function() {\n    document.removeEventListener('DOMContentLoaded', init, false);\n\n    // before running through init, clear the instances list, to prevent\n    // sketch duplication when page content is dynamically swapped without\n    // swapping out processing.js\n    processingInstances = [];\n    Processing.instances = processingInstances;\n\n    var canvas = document.getElementsByTagName('canvas'),\n      filenames;\n\n    for (var i = 0, l = canvas.length; i < l; i++) {\n      // datasrc and data-src are deprecated.\n      var processingSources = canvas[i].getAttribute('data-processing-sources');\n      if (processingSources === null) {\n        // Temporary fallback for datasrc and data-src\n        processingSources = canvas[i].getAttribute('data-src');\n        if (processingSources === null) {\n          processingSources = canvas[i].getAttribute('datasrc');\n        }\n      }\n      if (processingSources) {\n        filenames = processingSources.split(/\\s+/g);\n        for (var j = 0; j < filenames.length;) {\n          if (filenames[j]) {\n            j++;\n          } else {\n            filenames.splice(j, 1);\n          }\n        }\n        loadSketchFromSources(canvas[i], filenames);\n      }\n    }\n\n    // also process all <script>-indicated sketches, if there are any\n    var s, last, source, instance,\n        nodelist = document.getElementsByTagName('script'),\n        scripts=[];\n\n    // snapshot the DOM, as the nodelist is only a DOM view, and is\n    // updated instantly when a script element is added or removed.\n    for (s = nodelist.length - 1; s >= 0; s--) {\n      scripts.push(nodelist[s]);\n    }\n\n    // iterate over all script elements to see if they contain Processing code\n    for (s = 0, last = scripts.length; s < last; s++) {\n      var script = scripts[s];\n      if (!script.getAttribute) {\n        continue;\n      }\n\n      var type = script.getAttribute(\"type\");\n      if (type && (type.toLowerCase() === \"text/processing\" || type.toLowerCase() === \"application/processing\")) {\n        var target = script.getAttribute(\"data-processing-target\");\n        canvas = undef;\n        if (target) {\n          canvas = document.getElementById(target);\n        } else {\n          var nextSibling = script.nextSibling;\n          while (nextSibling && nextSibling.nodeType !== 1) {\n            nextSibling = nextSibling.nextSibling;\n          }\n          if (nextSibling && nextSibling.nodeName.toLowerCase() === \"canvas\") {\n            canvas = nextSibling;\n          }\n        }\n\n        if (canvas) {\n          if (script.getAttribute(\"src\")) {\n            filenames = script.getAttribute(\"src\").split(/\\s+/);\n            loadSketchFromSources(canvas, filenames);\n            continue;\n          }\n          source =  script.textContent || script.text;\n          instance = new Processing(canvas, source);\n        }\n      }\n    }\n  };\n\n  /**\n   * automatic loading of all sketches on the page\n   */\n  document.addEventListener('DOMContentLoaded', init, false);\n\n  /**\n   * Make Processing run through init after already having\n   * been set up for a page. This function exists mostly for pages\n   * that swap content in/out without reloading a page.\n   */\n  Processing.reload = function() {\n    if (processingInstances.length > 0) {\n      // unload sketches\n      for (var i = processingInstances.length - 1; i >= 0; i--) {\n        if (processingInstances[i]) {\n          processingInstances[i].exit();\n        }\n      }\n    }\n    // rerun init() to scan the DOM for sketches\n    init();\n  };\n\n  /**\n   * Disable the automatic loading of all sketches on the page.\n   * This will work as long as it's issued before DOMContentLoaded.\n   */\n  Processing.disableInit = function() {\n    document.removeEventListener('DOMContentLoaded', init, false);\n  };\n\n  // done.\n  return Processing;\n};\n},{}],7:[function(require,module,exports){\n/**\n * Returns Java equals() result for two objects. If the first object\n * has the \"equals\" function, it preforms the call of this function.\n * Otherwise the method uses the JavaScript === operator.\n *\n * @param {Object} obj          The first object.\n * @param {Object} other        The second object.\n *\n * @returns {boolean}           true if the objects are equal.\n */\nmodule.exports = function virtEquals(obj, other) {\n  if (obj === null || other === null) {\n    return (obj === null) && (other === null);\n  }\n  if (typeof (obj) === \"string\") {\n    return obj === other;\n  }\n  if (typeof(obj) !== \"object\") {\n    return obj === other;\n  }\n  if (obj.equals instanceof Function) {\n    return obj.equals(other);\n  }\n  return obj === other;\n};\n\n},{}],8:[function(require,module,exports){\n/**\n * Returns Java hashCode() result for the object. If the object has the \"hashCode\" function,\n * it preforms the call of this function. Otherwise it uses/creates the \"$id\" property,\n * which is used as the hashCode.\n *\n * @param {Object} obj          The object.\n * @returns {int}               The object's hash code.\n */\nmodule.exports = function virtHashCode(obj, undef) {\n  if (typeof(obj) === \"string\") {\n    var hash = 0;\n    for (var i = 0; i < obj.length; ++i) {\n      hash = (hash * 31 + obj.charCodeAt(i)) & 0xFFFFFFFF;\n    }\n    return hash;\n  }\n  if (typeof(obj) !== \"object\") {\n    return obj & 0xFFFFFFFF;\n  }\n  if (obj.hashCode instanceof Function) {\n    return obj.hashCode();\n  }\n  if (obj.$id === undef) {\n      obj.$id = ((Math.floor(Math.random() * 0x10000) - 0x8000) << 16) | Math.floor(Math.random() * 0x10000);\n  }\n  return obj.$id;\n};\n\n},{}],9:[function(require,module,exports){\n/**\n * An ArrayList stores a variable number of objects.\n *\n * @param {int} initialCapacity optional defines the initial capacity of the list, it's empty by default\n *\n * @returns {ArrayList} new ArrayList object\n */\nmodule.exports = function(options) {\n  var virtHashCode = options.virtHashCode,\n      virtEquals = options.virtEquals;\n\n  function Iterator(array) {\n    var index = -1;\n    this.hasNext = function() {\n      return (index + 1) < array.length;\n    };\n\n    this.next = function() {\n      return array[++index];\n    };\n\n    this.remove = function() {\n      array.splice(index--, 1);\n    };\n  }\n\n  function ArrayList(a) {\n    var array = [];\n\n    if (a && a.toArray) {\n      array = a.toArray();\n    }\n\n    /**\n     * @member ArrayList\n     * ArrayList.get() Returns the element at the specified position in this list.\n     *\n     * @param {int} i index of element to return\n     *\n     * @returns {Object} the element at the specified position in this list.\n     */\n    this.get = function(i) {\n      return array[i];\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.contains() Returns true if this list contains the specified element.\n     *\n     * @param {Object} item element whose presence in this List is to be tested.\n     *\n     * @returns {boolean} true if the specified element is present; false otherwise.\n     */\n    this.contains = function(item) {\n      return this.indexOf(item)>-1;\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.indexOf() Returns the position this element takes in the list, or -1 if the element is not found.\n     *\n     * @param {Object} item element whose position in this List is to be tested.\n     *\n     * @returns {int} the list position that the first match for this element holds in the list, or -1 if it is not in the list.\n     */\n    this.indexOf = function(item) {\n      for (var i = 0, len = array.length; i < len; ++i) {\n        if (virtEquals(item, array[i])) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.lastIndexOf() Returns the index of the last occurrence of the specified element in this list,\n     * or -1 if this list does not contain the element. More formally, returns the highest index i such that\n     * (o==null ? get(i)==null : o.equals(get(i))), or -1 if there is no such index.\n     *\n     * @param {Object} item element to search for.\n     *\n     * @returns {int} the index of the last occurrence of the specified element in this list, or -1 if this list does not contain the element.\n     */\n    this.lastIndexOf = function(item) {\n      for (var i = array.length-1; i >= 0; --i) {\n        if (virtEquals(item, array[i])) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.add() Adds the specified element to this list.\n     *\n     * @param {int}    index  optional index at which the specified element is to be inserted\n     * @param {Object} object element to be added to the list\n     */\n    this.add = function() {\n      if (arguments.length === 1) {\n        array.push(arguments[0]); // for add(Object)\n      } else if (arguments.length === 2) {\n        var arg0 = arguments[0];\n        if (typeof arg0 === 'number') {\n          if (arg0 >= 0 && arg0 <= array.length) {\n            array.splice(arg0, 0, arguments[1]); // for add(i, Object)\n          } else {\n            throw(arg0 + \" is not a valid index\");\n          }\n        } else {\n          throw(typeof arg0 + \" is not a number\");\n        }\n      } else {\n        throw(\"Please use the proper number of parameters.\");\n      }\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.addAll(collection) appends all of the elements in the specified\n     * Collection to the end of this list, in the order that they are returned by\n     * the specified Collection's Iterator.\n     *\n     * When called as addAll(index, collection) the elements are inserted into\n     * this list at the position indicated by index.\n     *\n     * @param {index} Optional; specifies the position the colletion should be inserted at\n     * @param {collection} Any iterable object (ArrayList, HashMap.keySet(), etc.)\n     * @throws out of bounds error for negative index, or index greater than list size.\n     */\n    this.addAll = function(arg1, arg2) {\n      // addAll(int, Collection)\n      var it;\n      if (typeof arg1 === \"number\") {\n        if (arg1 < 0 || arg1 > array.length) {\n          throw(\"Index out of bounds for addAll: \" + arg1 + \" greater or equal than \" + array.length);\n        }\n        it = new ObjectIterator(arg2);\n        while (it.hasNext()) {\n          array.splice(arg1++, 0, it.next());\n        }\n      }\n      // addAll(Collection)\n      else {\n        it = new ObjectIterator(arg1);\n        while (it.hasNext()) {\n          array.push(it.next());\n        }\n      }\n    };\n    /**\n     * @member ArrayList\n     * ArrayList.set() Replaces the element at the specified position in this list with the specified element.\n     *\n     * @param {int}    index  index of element to replace\n     * @param {Object} object element to be stored at the specified position\n     */\n    this.set = function() {\n      if (arguments.length === 2) {\n        var arg0 = arguments[0];\n        if (typeof arg0 === 'number') {\n          if (arg0 >= 0 && arg0 < array.length) {\n            array.splice(arg0, 1, arguments[1]);\n          } else {\n            throw(arg0 + \" is not a valid index.\");\n          }\n        } else {\n          throw(typeof arg0 + \" is not a number\");\n        }\n      } else {\n        throw(\"Please use the proper number of parameters.\");\n      }\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.size() Returns the number of elements in this list.\n     *\n     * @returns {int} the number of elements in this list\n     */\n    this.size = function() {\n      return array.length;\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.clear() Removes all of the elements from this list. The list will be empty after this call returns.\n     */\n    this.clear = function() {\n      array.length = 0;\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.remove() Removes an element either based on index, if the argument is a number, or\n     * by equality check, if the argument is an object.\n     *\n     * @param {int|Object} item either the index of the element to be removed, or the element itself.\n     *\n     * @returns {Object|boolean} If removal is by index, the element that was removed, or null if nothing was removed. If removal is by object, true if removal occurred, otherwise false.\n     */\n    this.remove = function(item) {\n      if (typeof item === 'number') {\n        return array.splice(item, 1)[0];\n      }\n      item = this.indexOf(item);\n      if (item > -1) {\n        array.splice(item, 1);\n        return true;\n      }\n      return false;\n    };\n\n     /**\n     * @member ArrayList\n     * ArrayList.removeAll Removes from this List all of the elements from\n     * the current ArrayList which are present in the passed in paramater ArrayList 'c'.\n     * Shifts any succeeding elements to the left (reduces their index).\n     *\n     * @param {ArrayList} the ArrayList to compare to the current ArrayList\n     *\n     * @returns {boolean} true if the ArrayList had an element removed; false otherwise\n     */\n    this.removeAll = function(c) {\n      var i, x, item,\n          newList = new ArrayList();\n      newList.addAll(this);\n      this.clear();\n      // For every item that exists in the original ArrayList and not in the c ArrayList\n      // copy it into the empty 'this' ArrayList to create the new 'this' Array.\n      for (i = 0, x = 0; i < newList.size(); i++) {\n        item = newList.get(i);\n        if (!c.contains(item)) {\n          this.add(x++, item);\n        }\n      }\n      if (this.size() < newList.size()) {\n        return true;\n      }\n      return false;\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.isEmpty() Tests if this list has no elements.\n     *\n     * @returns {boolean} true if this list has no elements; false otherwise\n     */\n    this.isEmpty = function() {\n       return !array.length;\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.clone() Returns a shallow copy of this ArrayList instance. (The elements themselves are not copied.)\n     *\n     * @returns {ArrayList} a clone of this ArrayList instance\n     */\n    this.clone = function() {\n      return new ArrayList(this);\n    };\n\n    /**\n     * @member ArrayList\n     * ArrayList.toArray() Returns an array containing all of the elements in this list in the correct order.\n     *\n     * @returns {Object[]} Returns an array containing all of the elements in this list in the correct order\n     */\n    this.toArray = function() {\n      return array.slice(0);\n    };\n\n    this.iterator = function() {\n      return new Iterator(array);\n    };\n  }\n\n  return ArrayList;\n};\n\n},{}],10:[function(require,module,exports){\nmodule.exports = (function(charMap, undef) {\n\n  var Char = function(chr) {\n    if (typeof chr === 'string' && chr.length === 1) {\n      this.code = chr.charCodeAt(0);\n    } else if (typeof chr === 'number') {\n      this.code = chr;\n    } else if (chr instanceof Char) {\n      this.code = chr;\n    } else {\n      this.code = NaN;\n    }\n    return (charMap[this.code] === undef) ? charMap[this.code] = this : charMap[this.code];\n  };\n\n  Char.prototype.toString = function() {\n    return String.fromCharCode(this.code);\n  };\n\n  Char.prototype.valueOf = function() {\n    return this.code;\n  };\n\n  return Char;\n}({}));\n\n},{}],11:[function(require,module,exports){\n/**\n* A HashMap stores a collection of objects, each referenced by a key. This is similar to an Array, only\n* instead of accessing elements with a numeric index, a String  is used. (If you are familiar with\n* associative arrays from other languages, this is the same idea.)\n*\n* @param {int} initialCapacity          defines the initial capacity of the map, it's 16 by default\n* @param {float} loadFactor             the load factor for the map, the default is 0.75\n* @param {Map} m                        gives the new HashMap the same mappings as this Map\n*/\nmodule.exports = function(options) {\n  var virtHashCode = options.virtHashCode,\n      virtEquals = options.virtEquals;\n\n  /**\n  * @member HashMap\n  * A HashMap stores a collection of objects, each referenced by a key. This is similar to an Array, only\n  * instead of accessing elements with a numeric index, a String  is used. (If you are familiar with\n  * associative arrays from other languages, this is the same idea.)\n  *\n  * @param {int} initialCapacity          defines the initial capacity of the map, it's 16 by default\n  * @param {float} loadFactor             the load factor for the map, the default is 0.75\n  * @param {Map} m                        gives the new HashMap the same mappings as this Map\n  */\n  function HashMap() {\n    if (arguments.length === 1 && arguments[0] instanceof HashMap) {\n      return arguments[0].clone();\n    }\n\n    var initialCapacity = arguments.length > 0 ? arguments[0] : 16;\n    var loadFactor = arguments.length > 1 ? arguments[1] : 0.75;\n    var buckets = [];\n    buckets.length = initialCapacity;\n    var count = 0;\n    var hashMap = this;\n\n    function getBucketIndex(key) {\n      var index = virtHashCode(key) % buckets.length;\n      return index < 0 ? buckets.length + index : index;\n    }\n    function ensureLoad() {\n      if (count <= loadFactor * buckets.length) {\n        return;\n      }\n      var allEntries = [];\n      for (var i = 0; i < buckets.length; ++i) {\n        if (buckets[i] !== undefined) {\n          allEntries = allEntries.concat(buckets[i]);\n        }\n      }\n      var newBucketsLength = buckets.length * 2;\n      buckets = [];\n      buckets.length = newBucketsLength;\n      for (var j = 0; j < allEntries.length; ++j) {\n        var index = getBucketIndex(allEntries[j].key);\n        var bucket = buckets[index];\n        if (bucket === undefined) {\n          buckets[index] = bucket = [];\n        }\n        bucket.push(allEntries[j]);\n      }\n    }\n\n    function Iterator(conversion, removeItem) {\n      var bucketIndex = 0;\n      var itemIndex = -1;\n      var endOfBuckets = false;\n      var currentItem;\n\n      function findNext() {\n        while (!endOfBuckets) {\n          ++itemIndex;\n          if (bucketIndex >= buckets.length) {\n            endOfBuckets = true;\n          } else if (buckets[bucketIndex] === undefined || itemIndex >= buckets[bucketIndex].length) {\n            itemIndex = -1;\n            ++bucketIndex;\n          } else {\n            return;\n          }\n        }\n      }\n\n      /*\n      * @member Iterator\n      * Checks if the Iterator has more items\n      */\n      this.hasNext = function() {\n        return !endOfBuckets;\n      };\n\n      /*\n      * @member Iterator\n      * Return the next Item\n      */\n      this.next = function() {\n        currentItem = conversion(buckets[bucketIndex][itemIndex]);\n        findNext();\n        return currentItem;\n      };\n\n      /*\n      * @member Iterator\n      * Remove the current item\n      */\n      this.remove = function() {\n        if (currentItem !== undefined) {\n          removeItem(currentItem);\n          --itemIndex;\n          findNext();\n        }\n      };\n\n      findNext();\n    }\n\n    function Set(conversion, isIn, removeItem) {\n      this.clear = function() {\n        hashMap.clear();\n      };\n\n      this.contains = function(o) {\n        return isIn(o);\n      };\n\n      this.containsAll = function(o) {\n        var it = o.iterator();\n        while (it.hasNext()) {\n          if (!this.contains(it.next())) {\n            return false;\n          }\n        }\n        return true;\n      };\n\n      this.isEmpty = function() {\n        return hashMap.isEmpty();\n      };\n\n      this.iterator = function() {\n        return new Iterator(conversion, removeItem);\n      };\n\n      this.remove = function(o) {\n        if (this.contains(o)) {\n          removeItem(o);\n          return true;\n        }\n        return false;\n      };\n\n      this.removeAll = function(c) {\n        var it = c.iterator();\n        var changed = false;\n        while (it.hasNext()) {\n          var item = it.next();\n          if (this.contains(item)) {\n            removeItem(item);\n            changed = true;\n          }\n        }\n        return true;\n      };\n\n      this.retainAll = function(c) {\n        var it = this.iterator();\n        var toRemove = [];\n        while (it.hasNext()) {\n          var entry = it.next();\n          if (!c.contains(entry)) {\n            toRemove.push(entry);\n          }\n        }\n        for (var i = 0; i < toRemove.length; ++i) {\n          removeItem(toRemove[i]);\n        }\n        return toRemove.length > 0;\n      };\n\n      this.size = function() {\n        return hashMap.size();\n      };\n\n      this.toArray = function() {\n        var result = [];\n        var it = this.iterator();\n        while (it.hasNext()) {\n          result.push(it.next());\n        }\n        return result;\n      };\n    }\n\n    function Entry(pair) {\n      this._isIn = function(map) {\n        return map === hashMap && (pair.removed === undefined);\n      };\n\n      this.equals = function(o) {\n        return virtEquals(pair.key, o.getKey());\n      };\n\n      this.getKey = function() {\n        return pair.key;\n      };\n\n      this.getValue = function() {\n        return pair.value;\n      };\n\n      this.hashCode = function(o) {\n        return virtHashCode(pair.key);\n      };\n\n      this.setValue = function(value) {\n        var old = pair.value;\n        pair.value = value;\n        return old;\n      };\n    }\n\n    this.clear = function() {\n      count = 0;\n      buckets = [];\n      buckets.length = initialCapacity;\n    };\n\n    this.clone = function() {\n      var map = new HashMap();\n      map.putAll(this);\n      return map;\n    };\n\n    this.containsKey = function(key) {\n      var index = getBucketIndex(key);\n      var bucket = buckets[index];\n      if (bucket === undefined) {\n        return false;\n      }\n      for (var i = 0; i < bucket.length; ++i) {\n        if (virtEquals(bucket[i].key, key)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    this.containsValue = function(value) {\n      for (var i = 0; i < buckets.length; ++i) {\n        var bucket = buckets[i];\n        if (bucket === undefined) {\n          continue;\n        }\n        for (var j = 0; j < bucket.length; ++j) {\n          if (virtEquals(bucket[j].value, value)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n\n    this.entrySet = function() {\n      return new Set(\n\n      function(pair) {\n        return new Entry(pair);\n      },\n\n      function(pair) {\n        return (pair instanceof Entry) && pair._isIn(hashMap);\n      },\n\n      function(pair) {\n        return hashMap.remove(pair.getKey());\n      });\n    };\n\n    this.get = function(key) {\n      var index = getBucketIndex(key);\n      var bucket = buckets[index];\n      if (bucket === undefined) {\n        return null;\n      }\n      for (var i = 0; i < bucket.length; ++i) {\n        if (virtEquals(bucket[i].key, key)) {\n          return bucket[i].value;\n        }\n      }\n      return null;\n    };\n\n    this.isEmpty = function() {\n      return count === 0;\n    };\n\n    this.keySet = function() {\n      return new Set(\n        // get key from pair\n        function(pair) {\n          return pair.key;\n        },\n        // is-in test\n        function(key) {\n          return hashMap.containsKey(key);\n        },\n        // remove from hashmap by key\n        function(key) {\n          return hashMap.remove(key);\n        }\n      );\n    };\n\n    this.values = function() {\n      return new Set(\n        // get value from pair\n        function(pair) {\n          return pair.value;\n        },\n        // is-in test\n        function(value) {\n          return hashMap.containsValue(value);\n        },\n        // remove from hashmap by value\n        function(value) {\n          return hashMap.removeByValue(value);\n        }\n      );\n    };\n\n    this.put = function(key, value) {\n      var index = getBucketIndex(key);\n      var bucket = buckets[index];\n      if (bucket === undefined) {\n        ++count;\n        buckets[index] = [{\n          key: key,\n          value: value\n        }];\n        ensureLoad();\n        return null;\n      }\n      for (var i = 0; i < bucket.length; ++i) {\n        if (virtEquals(bucket[i].key, key)) {\n          var previous = bucket[i].value;\n          bucket[i].value = value;\n          return previous;\n        }\n      }\n      ++count;\n      bucket.push({\n        key: key,\n        value: value\n      });\n      ensureLoad();\n      return null;\n    };\n\n    this.putAll = function(m) {\n      var it = m.entrySet().iterator();\n      while (it.hasNext()) {\n        var entry = it.next();\n        this.put(entry.getKey(), entry.getValue());\n      }\n    };\n\n    this.remove = function(key) {\n      var index = getBucketIndex(key);\n      var bucket = buckets[index];\n      if (bucket === undefined) {\n        return null;\n      }\n      for (var i = 0; i < bucket.length; ++i) {\n        if (virtEquals(bucket[i].key, key)) {\n          --count;\n          var previous = bucket[i].value;\n          bucket[i].removed = true;\n          if (bucket.length > 1) {\n            bucket.splice(i, 1);\n          } else {\n            buckets[index] = undefined;\n          }\n          return previous;\n        }\n      }\n      return null;\n    };\n\n    this.removeByValue = function(value) {\n      var bucket, i, ilen, pair;\n      for (bucket in buckets) {\n        if (buckets.hasOwnProperty(bucket)) {\n          for (i = 0, ilen = buckets[bucket].length; i < ilen; i++) {\n            pair = buckets[bucket][i];\n            // removal on values is based on identity, not equality\n            if (pair.value === value) {\n              buckets[bucket].splice(i, 1);\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n\n    this.size = function() {\n      return count;\n    };\n  }\n\n  return HashMap;\n};\n\n},{}],12:[function(require,module,exports){\n// module export\nmodule.exports = function(options,undef) {\n  var window = options.Browser.window,\n      document = options.Browser.document,\n      noop = options.noop;\n\n  /**\n   * [internal function] computeFontMetrics() calculates various metrics for text\n   * placement. Currently this function computes the ascent, descent and leading\n   * (from \"lead\", used for vertical space) values for the currently active font.\n   */\n  function computeFontMetrics(pfont) {\n    var emQuad = 250,\n        correctionFactor = pfont.size / emQuad,\n        canvas = document.createElement(\"canvas\");\n    canvas.width = 2*emQuad;\n    canvas.height = 2*emQuad;\n    canvas.style.opacity = 0;\n    var cfmFont = pfont.getCSSDefinition(emQuad+\"px\", \"normal\"),\n        ctx = canvas.getContext(\"2d\");\n    ctx.font = cfmFont;\n\n    // Size the canvas using a string with common max-ascent and max-descent letters.\n    // Changing the canvas dimensions resets the context, so we must reset the font.\n    var protrusions = \"dbflkhyjqpg\";\n    canvas.width = ctx.measureText(protrusions).width;\n    ctx.font = cfmFont;\n\n    // for text lead values, we meaure a multiline text container.\n    var leadDiv = document.createElement(\"div\");\n    leadDiv.style.position = \"absolute\";\n    leadDiv.style.opacity = 0;\n    leadDiv.style.fontFamily = '\"' + pfont.name + '\"';\n    leadDiv.style.fontSize = emQuad + \"px\";\n    leadDiv.innerHTML = protrusions + \"<br/>\" + protrusions;\n    document.body.appendChild(leadDiv);\n\n    var w = canvas.width,\n        h = canvas.height,\n        baseline = h/2;\n\n    // Set all canvas pixeldata values to 255, with all the content\n    // data being 0. This lets us scan for data[i] != 255.\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, w, h);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(protrusions, 0, baseline);\n    var pixelData = ctx.getImageData(0, 0, w, h).data;\n\n    // canvas pixel data is w*4 by h*4, because R, G, B and A are separate,\n    // consecutive values in the array, rather than stored as 32 bit ints.\n    var i = 0,\n        w4 = w * 4,\n        len = pixelData.length;\n\n    // Finding the ascent uses a normal, forward scanline\n    while (++i < len && pixelData[i] === 255) {\n      noop();\n    }\n    var ascent = Math.round(i / w4);\n\n    // Finding the descent uses a reverse scanline\n    i = len - 1;\n    while (--i > 0 && pixelData[i] === 255) {\n      noop();\n    }\n    var descent = Math.round(i / w4);\n\n    // set font metrics\n    pfont.ascent = correctionFactor * (baseline - ascent);\n    pfont.descent = correctionFactor * (descent - baseline);\n\n    // Then we try to get the real value from the browser\n    if (document.defaultView.getComputedStyle) {\n      var leadDivHeight = document.defaultView.getComputedStyle(leadDiv,null).getPropertyValue(\"height\");\n      leadDivHeight = correctionFactor * leadDivHeight.replace(\"px\",\"\");\n      if (leadDivHeight >= pfont.size * 2) {\n        pfont.leading = Math.round(leadDivHeight/2);\n      }\n    }\n    document.body.removeChild(leadDiv);\n\n    // if we're caching, cache the context used for this pfont\n    if (pfont.caching) {\n      return ctx;\n    }\n  }\n\n  /**\n   * Constructor for a system or from-file (non-SVG) font.\n   */\n  function PFont(name, size) {\n    // according to the P5 API, new PFont() is legal (albeit completely useless)\n    if (name === undef) {\n      name = \"\";\n    }\n    this.name = name;\n    if (size === undef) {\n      size = 0;\n    }\n    this.size = size;\n    this.glyph = false;\n    this.ascent = 0;\n    this.descent = 0;\n    // For leading, the \"safe\" value uses the standard TEX ratio\n    this.leading = 1.2 * size;\n\n    // Note that an italic, bold font must used \"... Bold Italic\"\n    // in P5. \"... Italic Bold\" is treated as normal/normal.\n    var illegalIndicator = name.indexOf(\" Italic Bold\");\n    if (illegalIndicator !== -1) {\n      name = name.substring(0, illegalIndicator);\n    }\n\n    // determine font style\n    this.style = \"normal\";\n    var italicsIndicator = name.indexOf(\" Italic\");\n    if (italicsIndicator !== -1) {\n      name = name.substring(0, italicsIndicator);\n      this.style = \"italic\";\n    }\n\n    // determine font weight\n    this.weight = \"normal\";\n    var boldIndicator = name.indexOf(\" Bold\");\n    if (boldIndicator !== -1) {\n      name = name.substring(0, boldIndicator);\n      this.weight = \"bold\";\n    }\n\n    // determine font-family name\n    this.family = \"sans-serif\";\n    if (name !== undef) {\n      switch(name) {\n        case \"sans-serif\":\n        case \"serif\":\n        case \"monospace\":\n        case \"fantasy\":\n        case \"cursive\":\n          this.family = name;\n          break;\n        default:\n          this.family = '\"' + name + '\", sans-serif';\n          break;\n      }\n    }\n    // Calculate the ascent/descent/leading value based on\n    // how the browser renders this font.\n    this.context2d = computeFontMetrics(this);\n    this.css = this.getCSSDefinition();\n    if (this.context2d) {\n      this.context2d.font = this.css;\n    }\n  }\n\n  /**\n   * regulates whether or not we're caching the canvas\n   * 2d context for quick text width computation.\n   */\n  PFont.prototype.caching = true;\n\n  /**\n   * This function generates the CSS \"font\" string for this PFont\n   */\n  PFont.prototype.getCSSDefinition = function(fontSize, lineHeight) {\n    if(fontSize===undef) {\n      fontSize = this.size + \"px\";\n    }\n    if(lineHeight===undef) {\n      lineHeight = this.leading + \"px\";\n    }\n    // CSS \"font\" definition: font-style font-variant font-weight font-size/line-height font-family\n    var components = [this.style, \"normal\", this.weight, fontSize + \"/\" + lineHeight, this.family];\n    return components.join(\" \");\n  };\n\n  /**\n   * Rely on the cached context2d measureText function.\n   */\n  PFont.prototype.measureTextWidth = function(string) {\n    return this.context2d.measureText(string).width;\n  };\n\n  /**\n   * FALLBACK FUNCTION -- replaces Pfont.prototype.measureTextWidth\n   * when the font cache becomes too large. This contructs a new\n   * canvas 2d context object for calling measureText on.\n   */\n  PFont.prototype.measureTextWidthFallback = function(string) {\n    var canvas = document.createElement(\"canvas\"),\n        ctx = canvas.getContext(\"2d\");\n    ctx.font = this.css;\n    return ctx.measureText(string).width;\n  };\n\n  /**\n   * Global \"loaded fonts\" list, internal to PFont\n   */\n  PFont.PFontCache = { length: 0 };\n\n  /**\n   * This function acts as single access point for getting and caching\n   * fonts across all sketches handled by an instance of Processing.js\n   */\n  PFont.get = function(fontName, fontSize) {\n    // round fontSize to one decimal point\n    fontSize = ((fontSize*10)+0.5|0)/10;\n    var cache = PFont.PFontCache,\n        idx = fontName+\"/\"+fontSize;\n    if (!cache[idx]) {\n      cache[idx] = new PFont(fontName, fontSize);\n      cache.length++;\n\n      // FALLBACK FUNCTIONALITY 1:\n      // If the cache has become large, switch over from full caching\n      // to caching only the static metrics for each new font request.\n      if (cache.length === 50) {\n        PFont.prototype.measureTextWidth = PFont.prototype.measureTextWidthFallback;\n        PFont.prototype.caching = false;\n        // clear contexts stored for each cached font\n        var entry;\n        for (entry in cache) {\n          if (entry !== \"length\") {\n            cache[entry].context2d = null;\n          }\n        }\n        return new PFont(fontName, fontSize);\n      }\n\n      // FALLBACK FUNCTIONALITY 2:\n      // If the cache has become too large, switch off font caching entirely.\n      if (cache.length === 400) {\n        PFont.PFontCache = {};\n        PFont.get = PFont.getFallback;\n        return new PFont(fontName, fontSize);\n      }\n    }\n    return cache[idx];\n  };\n\n  /**\n   * FALLBACK FUNCTION -- replaces PFont.get when the font cache\n   * becomes too large. This function bypasses font caching entirely.\n   */\n  PFont.getFallback = function(fontName, fontSize) {\n    return new PFont(fontName, fontSize);\n  };\n\n  /**\n   * Lists all standard fonts. Due to browser limitations, this list is\n   * not the system font list, like in P5, but the CSS \"genre\" list.\n   */\n  PFont.list = function() {\n    return [\"sans-serif\", \"serif\", \"monospace\", \"fantasy\", \"cursive\"];\n  };\n\n  /**\n   * Loading external fonts through @font-face rules is handled by PFont,\n   * to ensure fonts loaded in this way are globally available.\n   */\n  PFont.preloading = {\n    // template element used to compare font sizes\n    template: {},\n    // indicates whether or not the reference tiny font has been loaded\n    initialized: false,\n    // load the reference tiny font via a css @font-face rule\n    initialize: function() {\n      var generateTinyFont = function() {\n        var encoded = \"#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm\" +\n                      \"7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3\" +\n                      \"AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG\" +\n                      \"9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3\" +\n                      \"#yld0xg32QAB77#E777773B#E3C#I#Q77773E#\" +\n                      \"Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#\" +\n                      \"E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#\" +\n                      \"Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#\";\n        var expand = function(input) {\n                       return \"AAAAAAAA\".substr(~~input ? 7-input : 6);\n                     };\n        return encoded.replace(/[#237]/g, expand);\n      };\n      var fontface = document.createElement(\"style\");\n      fontface.setAttribute(\"type\",\"text/css\");\n      fontface.innerHTML =  \"@font-face {\\n\" +\n                            '  font-family: \"PjsEmptyFont\";' + \"\\n\" +\n                            \"  src: url('data:application/x-font-ttf;base64,\"+generateTinyFont()+\"')\\n\" +\n                            \"       format('truetype');\\n\" +\n                            \"}\";\n      document.head.appendChild(fontface);\n\n      // set up the template element\n      var element = document.createElement(\"span\");\n      element.style.cssText = 'position: absolute; top: 0; left: 0; opacity: 0; font-family: \"PjsEmptyFont\", fantasy;';\n      element.innerHTML = \"AAAAAAAA\";\n      document.body.appendChild(element);\n      this.template = element;\n\n      this.initialized = true;\n    },\n    // Shorthand function to get the computed width for an element.\n    getElementWidth: function(element) {\n      return document.defaultView.getComputedStyle(element,\"\").getPropertyValue(\"width\");\n    },\n    // time taken so far in attempting to load a font\n    timeAttempted: 0,\n    // returns false if no fonts are pending load, or true otherwise.\n    pending: function(intervallength) {\n      if (!this.initialized) {\n        this.initialize();\n      }\n      var element,\n          computedWidthFont,\n          computedWidthRef = this.getElementWidth(this.template);\n      for (var i = 0; i < this.fontList.length; i++) {\n        // compares size of text in pixels. if equal, custom font is not yet loaded\n        element = this.fontList[i];\n        computedWidthFont = this.getElementWidth(element);\n        if (this.timeAttempted < 4000 && computedWidthFont === computedWidthRef) {\n          this.timeAttempted += intervallength;\n          return true;\n        } else {\n          document.body.removeChild(element);\n          this.fontList.splice(i--, 1);\n          this.timeAttempted = 0;\n        }\n      }\n      // if there are no more fonts to load, pending is false\n      if (this.fontList.length === 0) {\n        return false;\n      }\n      // We should have already returned before getting here.\n      // But, if we do get here, length!=0 so fonts are pending.\n      return true;\n    },\n    // fontList contains elements to compare font sizes against a template\n    fontList: [],\n    // addedList contains the fontnames of all the fonts loaded via @font-face\n    addedList: {},\n    // adds a font to the font cache\n    // creates an element using the font, to start loading the font,\n    // and compare against a default font to see if the custom font is loaded\n    add: function(fontSrc) {\n      if (!this.initialized) {\n       this.initialize();\n      }\n      // fontSrc can be a string or a javascript object\n      // acceptable fonts are .ttf, .otf, and data uri\n      var fontName = (typeof fontSrc === 'object' ? fontSrc.fontFace : fontSrc),\n          fontUrl = (typeof fontSrc === 'object' ? fontSrc.url : fontSrc);\n\n      // check whether we already created the @font-face rule for this font\n      if (this.addedList[fontName]) {\n        return;\n      }\n\n      // if we didn't, create the @font-face rule\n      var style = document.createElement(\"style\");\n      style.setAttribute(\"type\",\"text/css\");\n      style.innerHTML = \"@font-face{\\n  font-family: '\" + fontName + \"';\\n  src:  url('\" + fontUrl + \"');\\n}\\n\";\n      document.head.appendChild(style);\n      this.addedList[fontName] = true;\n\n      // also create the element to load and compare the new font\n      var element = document.createElement(\"span\");\n      element.style.cssText = \"position: absolute; top: 0; left: 0; opacity: 0;\";\n      element.style.fontFamily = '\"' + fontName + '\", \"PjsEmptyFont\", fantasy';\n      element.innerHTML = \"AAAAAAAA\";\n      document.body.appendChild(element);\n      this.fontList.push(element);\n    }\n  };\n\n  return PFont;\n};\n},{}],13:[function(require,module,exports){\nmodule.exports = function(options, undef) {\n\n  // FIXME: hack\n  var p = options.p;\n\n  /**\n   * PMatrix2D is a 3x2 affine matrix implementation. The constructor accepts another PMatrix2D or a list of six float elements.\n   * If no parameters are provided the matrix is set to the identity matrix.\n   *\n   * @param {PMatrix2D} matrix  the initial matrix to set to\n   * @param {float} m00         the first element of the matrix\n   * @param {float} m01         the second element of the matrix\n   * @param {float} m02         the third element of the matrix\n   * @param {float} m10         the fourth element of the matrix\n   * @param {float} m11         the fifth element of the matrix\n   * @param {float} m12         the sixth element of the matrix\n   */\n  var PMatrix2D = function() {\n    if (arguments.length === 0) {\n      this.reset();\n    } else if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n      this.set(arguments[0].array());\n    } else if (arguments.length === 6) {\n      this.set(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n    }\n  };\n\n  /**\n   * PMatrix2D methods\n   */\n  PMatrix2D.prototype = {\n    /**\n     * @member PMatrix2D\n     * The set() function sets the matrix elements. The function accepts either another PMatrix2D, an array of elements, or a list of six floats.\n     *\n     * @param {PMatrix2D} matrix    the matrix to set this matrix to\n     * @param {float[]} elements    an array of elements to set this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the third element of the matrix\n     * @param {float} m10           the fourth element of the matrix\n     * @param {float} m11           the fith element of the matrix\n     * @param {float} m12           the sixth element of the matrix\n     */\n    set: function() {\n      if (arguments.length === 6) {\n        var a = arguments;\n        this.set([a[0], a[1], a[2],\n                  a[3], a[4], a[5]]);\n      } else if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n        this.elements = arguments[0].array();\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        this.elements = arguments[0].slice();\n      }\n    },\n    /**\n     * @member PMatrix2D\n     * The get() function returns a copy of this PMatrix2D.\n     *\n     * @return {PMatrix2D} a copy of this PMatrix2D\n     */\n    get: function() {\n      var outgoing = new PMatrix2D();\n      outgoing.set(this.elements);\n      return outgoing;\n    },\n    /**\n     * @member PMatrix2D\n     * The reset() function sets this PMatrix2D to the identity matrix.\n     */\n    reset: function() {\n      this.set([1, 0, 0, 0, 1, 0]);\n    },\n    /**\n     * @member PMatrix2D\n     * The array() function returns a copy of the element values.\n     * @addon\n     *\n     * @return {float[]} returns a copy of the element values\n     */\n    array: function array() {\n      return this.elements.slice();\n    },\n    /**\n     * @member PMatrix2D\n     * The translate() function translates this matrix by moving the current coordinates to the location specified by tx and ty.\n     *\n     * @param {float} tx  the x-axis coordinate to move to\n     * @param {float} ty  the y-axis coordinate to move to\n     */\n    translate: function(tx, ty) {\n      this.elements[2] = tx * this.elements[0] + ty * this.elements[1] + this.elements[2];\n      this.elements[5] = tx * this.elements[3] + ty * this.elements[4] + this.elements[5];\n    },\n    /**\n     * @member PMatrix2D\n     * The invTranslate() function translates this matrix by moving the current coordinates to the negative location specified by tx and ty.\n     *\n     * @param {float} tx  the x-axis coordinate to move to\n     * @param {float} ty  the y-axis coordinate to move to\n     */\n    invTranslate: function(tx, ty) {\n      this.translate(-tx, -ty);\n    },\n     /**\n     * @member PMatrix2D\n     * The transpose() function is not used in processingjs.\n     */\n    transpose: function() {\n      // Does nothing in Processing.\n    },\n    /**\n     * @member PMatrix2D\n     * The mult() function multiplied this matrix.\n     * If two array elements are passed in the function will multiply a two element vector against this matrix.\n     * If target is null or not length four, a new float array will be returned.\n     * The values for vec and target can be the same (though that's less efficient).\n     * If two PVectors are passed in the function multiply the x and y coordinates of a PVector against this matrix.\n     *\n     * @param {PVector} source, target  the PVectors used to multiply this matrix\n     * @param {float[]} source, target  the arrays used to multiply this matrix\n     *\n     * @return {PVector|float[]} returns a PVector or an array representing the new matrix\n     */\n    mult: function(source, target) {\n      var x, y;\n      if (source instanceof PVector) {\n        x = source.x;\n        y = source.y;\n        if (!target) {\n          target = new PVector();\n        }\n      } else if (source instanceof Array) {\n        x = source[0];\n        y = source[1];\n        if (!target) {\n          target = [];\n        }\n      }\n      if (target instanceof Array) {\n        target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2];\n        target[1] = this.elements[3] * x + this.elements[4] * y + this.elements[5];\n      } else if (target instanceof PVector) {\n        target.x = this.elements[0] * x + this.elements[1] * y + this.elements[2];\n        target.y = this.elements[3] * x + this.elements[4] * y + this.elements[5];\n        target.z = 0;\n      }\n      return target;\n    },\n    /**\n     * @member PMatrix2D\n     * The multX() function calculates the x component of a vector from a transformation.\n     *\n     * @param {float} x the x component of the vector being transformed\n     * @param {float} y the y component of the vector being transformed\n     *\n     * @return {float} returnes the result of the calculation\n     */\n    multX: function(x, y) {\n      return (x * this.elements[0] + y * this.elements[1] + this.elements[2]);\n    },\n    /**\n     * @member PMatrix2D\n     * The multY() function calculates the y component of a vector from a transformation.\n     *\n     * @param {float} x the x component of the vector being transformed\n     * @param {float} y the y component of the vector being transformed\n     *\n     * @return {float} returnes the result of the calculation\n     */\n    multY: function(x, y) {\n      return (x * this.elements[3] + y * this.elements[4] + this.elements[5]);\n    },\n    /**\n     * @member PMatrix2D\n     * The skewX() function skews the matrix along the x-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    skewX: function(angle) {\n      this.apply(1, 0, 1, angle, 0, 0);\n    },\n    /**\n     * @member PMatrix2D\n     * The skewY() function skews the matrix along the y-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    skewY: function(angle) {\n      this.apply(1, 0, 1,  0, angle, 0);\n    },\n    /**\n     * @member PMatrix2D\n     * The shearX() function shears the matrix along the x-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    shearX: function(angle) {\n      this.apply(1, 0, 1, Math.tan(angle) , 0, 0);\n    },\n    /**\n     * @member PMatrix2D\n     * The shearY() function shears the matrix along the y-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    shearY: function(angle) {\n      this.apply(1, 0, 1,  0, Math.tan(angle), 0);\n    },\n    /**\n     * @member PMatrix2D\n     * The determinant() function calvculates the determinant of this matrix.\n     *\n     * @return {float} the determinant of the matrix\n     */\n    determinant: function() {\n      return (this.elements[0] * this.elements[4] - this.elements[1] * this.elements[3]);\n    },\n    /**\n     * @member PMatrix2D\n     * The invert() function inverts this matrix\n     *\n     * @return {boolean} true if successful\n     */\n    invert: function() {\n      var d = this.determinant();\n      if (Math.abs( d ) > PConstants.MIN_INT) {\n        var old00 = this.elements[0];\n        var old01 = this.elements[1];\n        var old02 = this.elements[2];\n        var old10 = this.elements[3];\n        var old11 = this.elements[4];\n        var old12 = this.elements[5];\n        this.elements[0] =  old11 / d;\n        this.elements[3] = -old10 / d;\n        this.elements[1] = -old01 / d;\n        this.elements[4] =  old00 / d;\n        this.elements[2] = (old01 * old12 - old11 * old02) / d;\n        this.elements[5] = (old10 * old02 - old00 * old12) / d;\n        return true;\n      }\n      return false;\n    },\n    /**\n     * @member PMatrix2D\n     * The scale() function increases or decreases the size of a shape by expanding and contracting vertices. When only one parameter is specified scale will occur in all dimensions.\n     * This is equivalent to a two parameter call.\n     *\n     * @param {float} sx  the amount to scale on the x-axis\n     * @param {float} sy  the amount to scale on the y-axis\n     */\n    scale: function(sx, sy) {\n      if (sx && !sy) {\n        sy = sx;\n      }\n      if (sx && sy) {\n        this.elements[0] *= sx;\n        this.elements[1] *= sy;\n        this.elements[3] *= sx;\n        this.elements[4] *= sy;\n      }\n    },\n     /**\n      * @member PMatrix2D\n      * The invScale() function decreases or increases the size of a shape by contracting and expanding vertices. When only one parameter is specified scale will occur in all dimensions.\n      * This is equivalent to a two parameter call.\n      *\n      * @param {float} sx  the amount to scale on the x-axis\n      * @param {float} sy  the amount to scale on the y-axis\n      */\n    invScale: function(sx, sy) {\n      if (sx && !sy) {\n        sy = sx;\n      }\n      this.scale(1 / sx, 1 / sy);\n    },\n    /**\n     * @member PMatrix2D\n     * The apply() function multiplies the current matrix by the one specified through the parameters. Note that either a PMatrix2D or a list of floats can be passed in.\n     *\n     * @param {PMatrix2D} matrix    the matrix to apply this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the third element of the matrix\n     * @param {float} m10           the fourth element of the matrix\n     * @param {float} m11           the fith element of the matrix\n     * @param {float} m12           the sixth element of the matrix\n     */\n    apply: function() {\n      var source;\n      if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n        source = arguments[0].array();\n      } else if (arguments.length === 6) {\n        source = Array.prototype.slice.call(arguments);\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        source = arguments[0];\n      }\n\n      var result = [0, 0, this.elements[2],\n                    0, 0, this.elements[5]];\n      var e = 0;\n      for (var row = 0; row < 2; row++) {\n        for (var col = 0; col < 3; col++, e++) {\n          result[e] += this.elements[row * 3 + 0] * source[col + 0] +\n                       this.elements[row * 3 + 1] * source[col + 3];\n        }\n      }\n      this.elements = result.slice();\n    },\n    /**\n     * @member PMatrix2D\n     * The preApply() function applies another matrix to the left of this one. Note that either a PMatrix2D or elements of a matrix can be passed in.\n     *\n     * @param {PMatrix2D} matrix    the matrix to apply this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the third element of the matrix\n     * @param {float} m10           the fourth element of the matrix\n     * @param {float} m11           the fith element of the matrix\n     * @param {float} m12           the sixth element of the matrix\n     */\n    preApply: function() {\n      var source;\n      if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n        source = arguments[0].array();\n      } else if (arguments.length === 6) {\n        source = Array.prototype.slice.call(arguments);\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        source = arguments[0];\n      }\n      var result = [0, 0, source[2],\n                    0, 0, source[5]];\n      result[2] = source[2] + this.elements[2] * source[0] + this.elements[5] * source[1];\n      result[5] = source[5] + this.elements[2] * source[3] + this.elements[5] * source[4];\n      result[0] = this.elements[0] * source[0] + this.elements[3] * source[1];\n      result[3] = this.elements[0] * source[3] + this.elements[3] * source[4];\n      result[1] = this.elements[1] * source[0] + this.elements[4] * source[1];\n      result[4] = this.elements[1] * source[3] + this.elements[4] * source[4];\n      this.elements = result.slice();\n    },\n    /**\n     * @member PMatrix2D\n     * The rotate() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotate: function(angle) {\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      var temp1 = this.elements[0];\n      var temp2 = this.elements[1];\n      this.elements[0] =  c * temp1 + s * temp2;\n      this.elements[1] = -s * temp1 + c * temp2;\n      temp1 = this.elements[3];\n      temp2 = this.elements[4];\n      this.elements[3] =  c * temp1 + s * temp2;\n      this.elements[4] = -s * temp1 + c * temp2;\n    },\n    /**\n     * @member PMatrix2D\n     * The rotateZ() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotateZ: function(angle) {\n      this.rotate(angle);\n    },\n    /**\n     * @member PMatrix2D\n     * The invRotateZ() function rotates the matrix in opposite direction.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    invRotateZ: function(angle) {\n      this.rotateZ(angle - Math.PI);\n    },\n    /**\n     * @member PMatrix2D\n     * The print() function prints out the elements of this matrix\n     */\n    print: function() {\n      var digits = printMatrixHelper(this.elements);\n      var output = \"\" + p.nfs(this.elements[0], digits, 4) + \" \" +\n                        p.nfs(this.elements[1], digits, 4) + \" \" +\n                        p.nfs(this.elements[2], digits, 4) + \"\\n\" +\n                        p.nfs(this.elements[3], digits, 4) + \" \" +\n                        p.nfs(this.elements[4], digits, 4) + \" \" +\n                        p.nfs(this.elements[5], digits, 4) + \"\\n\\n\";\n      p.println(output);\n    }\n  };\n\n  return PMatrix2D;\n};\n\n},{}],14:[function(require,module,exports){\nmodule.exports = function(options, undef) {\n\n  // FIXME: hack\n  var p = options.p;\n\n  /**\n   * PMatrix3D is a 4x4  matrix implementation. The constructor accepts another PMatrix3D or a list of six or sixteen float elements.\n   * If no parameters are provided the matrix is set to the identity matrix.\n   */\n  var PMatrix3D = function() {\n    // When a matrix is created, it is set to an identity matrix\n    this.reset();\n  };\n\n  /**\n   * PMatrix3D methods\n   */\n  PMatrix3D.prototype = {\n    /**\n     * @member PMatrix2D\n     * The set() function sets the matrix elements. The function accepts either another PMatrix3D, an array of elements, or a list of six or sixteen floats.\n     *\n     * @param {PMatrix3D} matrix    the initial matrix to set to\n     * @param {float[]} elements    an array of elements to set this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the second element of the matrix\n     * @param {float} m02           the third element of the matrix\n     * @param {float} m03           the fourth element of the matrix\n     * @param {float} m10           the fifth element of the matrix\n     * @param {float} m11           the sixth element of the matrix\n     * @param {float} m12           the seventh element of the matrix\n     * @param {float} m13           the eight element of the matrix\n     * @param {float} m20           the nineth element of the matrix\n     * @param {float} m21           the tenth element of the matrix\n     * @param {float} m22           the eleventh element of the matrix\n     * @param {float} m23           the twelveth element of the matrix\n     * @param {float} m30           the thirteenth element of the matrix\n     * @param {float} m31           the fourtheenth element of the matrix\n     * @param {float} m32           the fivetheenth element of the matrix\n     * @param {float} m33           the sixteenth element of the matrix\n     */\n    set: function() {\n      if (arguments.length === 16) {\n        this.elements = Array.prototype.slice.call(arguments);\n      } else if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n        this.elements = arguments[0].array();\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        this.elements = arguments[0].slice();\n      }\n    },\n    /**\n     * @member PMatrix3D\n     * The get() function returns a copy of this PMatrix3D.\n     *\n     * @return {PMatrix3D} a copy of this PMatrix3D\n     */\n    get: function() {\n      var outgoing = new PMatrix3D();\n      outgoing.set(this.elements);\n      return outgoing;\n    },\n    /**\n     * @member PMatrix3D\n     * The reset() function sets this PMatrix3D to the identity matrix.\n     */\n    reset: function() {\n      this.elements = [1,0,0,0,\n                       0,1,0,0,\n                       0,0,1,0,\n                       0,0,0,1];\n    },\n    /**\n     * @member PMatrix3D\n     * The array() function returns a copy of the element values.\n     * @addon\n     *\n     * @return {float[]} returns a copy of the element values\n     */\n    array: function array() {\n      return this.elements.slice();\n    },\n    /**\n     * @member PMatrix3D\n     * The translate() function translates this matrix by moving the current coordinates to the location specified by tx, ty, and tz.\n     *\n     * @param {float} tx  the x-axis coordinate to move to\n     * @param {float} ty  the y-axis coordinate to move to\n     * @param {float} tz  the z-axis coordinate to move to\n     */\n    translate: function(tx, ty, tz) {\n      if (tz === undef) {\n        tz = 0;\n      }\n\n      this.elements[3]  += tx * this.elements[0]  + ty * this.elements[1]  + tz * this.elements[2];\n      this.elements[7]  += tx * this.elements[4]  + ty * this.elements[5]  + tz * this.elements[6];\n      this.elements[11] += tx * this.elements[8]  + ty * this.elements[9]  + tz * this.elements[10];\n      this.elements[15] += tx * this.elements[12] + ty * this.elements[13] + tz * this.elements[14];\n    },\n    /**\n     * @member PMatrix3D\n     * The transpose() function transpose this matrix.\n     */\n    transpose: function() {\n      var temp = this.elements[4];\n      this.elements[4] = this.elements[1];\n      this.elements[1] = temp;\n\n      temp = this.elements[8];\n      this.elements[8] = this.elements[2];\n      this.elements[2] = temp;\n\n      temp = this.elements[6];\n      this.elements[6] = this.elements[9];\n      this.elements[9] = temp;\n\n      temp = this.elements[3];\n      this.elements[3] = this.elements[12];\n      this.elements[12] = temp;\n\n      temp = this.elements[7];\n      this.elements[7] = this.elements[13];\n      this.elements[13] = temp;\n\n      temp = this.elements[11];\n      this.elements[11] = this.elements[14];\n      this.elements[14] = temp;\n    },\n    /**\n     * @member PMatrix3D\n     * The mult() function multiplied this matrix.\n     * If two array elements are passed in the function will multiply a two element vector against this matrix.\n     * If target is null or not length four, a new float array will be returned.\n     * The values for vec and target can be the same (though that's less efficient).\n     * If two PVectors are passed in the function multiply the x and y coordinates of a PVector against this matrix.\n     *\n     * @param {PVector} source, target  the PVectors used to multiply this matrix\n     * @param {float[]} source, target  the arrays used to multiply this matrix\n     *\n     * @return {PVector|float[]} returns a PVector or an array representing the new matrix\n     */\n    mult: function(source, target) {\n      var x, y, z, w;\n      if (source instanceof PVector) {\n        x = source.x;\n        y = source.y;\n        z = source.z;\n        w = 1;\n        if (!target) {\n          target = new PVector();\n        }\n      } else if (source instanceof Array) {\n        x = source[0];\n        y = source[1];\n        z = source[2];\n        w = source[3] || 1;\n\n        if ( !target || (target.length !== 3 && target.length !== 4) ) {\n          target = [0, 0, 0];\n        }\n      }\n\n      if (target instanceof Array) {\n        if (target.length === 3) {\n          target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n          target[1] = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n          target[2] = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n        } else if (target.length === 4) {\n          target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3] * w;\n          target[1] = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7] * w;\n          target[2] = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11] * w;\n          target[3] = this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15] * w;\n        }\n      }\n      if (target instanceof PVector) {\n        target.x = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n        target.y = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n        target.z = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n      }\n      return target;\n    },\n    /**\n     * @member PMatrix3D\n     * The preApply() function applies another matrix to the left of this one. Note that either a PMatrix3D or elements of a matrix can be passed in.\n     *\n     * @param {PMatrix3D} matrix    the matrix to apply this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the second element of the matrix\n     * @param {float} m02           the third element of the matrix\n     * @param {float} m03           the fourth element of the matrix\n     * @param {float} m10           the fifth element of the matrix\n     * @param {float} m11           the sixth element of the matrix\n     * @param {float} m12           the seventh element of the matrix\n     * @param {float} m13           the eight element of the matrix\n     * @param {float} m20           the nineth element of the matrix\n     * @param {float} m21           the tenth element of the matrix\n     * @param {float} m22           the eleventh element of the matrix\n     * @param {float} m23           the twelveth element of the matrix\n     * @param {float} m30           the thirteenth element of the matrix\n     * @param {float} m31           the fourtheenth element of the matrix\n     * @param {float} m32           the fivetheenth element of the matrix\n     * @param {float} m33           the sixteenth element of the matrix\n     */\n    preApply: function() {\n      var source;\n      if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n        source = arguments[0].array();\n      } else if (arguments.length === 16) {\n        source = Array.prototype.slice.call(arguments);\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        source = arguments[0];\n      }\n\n      var result = [0, 0, 0, 0,\n                    0, 0, 0, 0,\n                    0, 0, 0, 0,\n                    0, 0, 0, 0];\n      var e = 0;\n      for (var row = 0; row < 4; row++) {\n        for (var col = 0; col < 4; col++, e++) {\n          result[e] += this.elements[col + 0] * source[row * 4 + 0] + this.elements[col + 4] *\n                       source[row * 4 + 1] + this.elements[col + 8] * source[row * 4 + 2] +\n                       this.elements[col + 12] * source[row * 4 + 3];\n        }\n      }\n      this.elements = result.slice();\n    },\n    /**\n     * @member PMatrix3D\n     * The apply() function multiplies the current matrix by the one specified through the parameters. Note that either a PMatrix3D or a list of floats can be passed in.\n     *\n     * @param {PMatrix3D} matrix    the matrix to apply this matrix to\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the second element of the matrix\n     * @param {float} m02           the third element of the matrix\n     * @param {float} m03           the fourth element of the matrix\n     * @param {float} m10           the fifth element of the matrix\n     * @param {float} m11           the sixth element of the matrix\n     * @param {float} m12           the seventh element of the matrix\n     * @param {float} m13           the eight element of the matrix\n     * @param {float} m20           the nineth element of the matrix\n     * @param {float} m21           the tenth element of the matrix\n     * @param {float} m22           the eleventh element of the matrix\n     * @param {float} m23           the twelveth element of the matrix\n     * @param {float} m30           the thirteenth element of the matrix\n     * @param {float} m31           the fourtheenth element of the matrix\n     * @param {float} m32           the fivetheenth element of the matrix\n     * @param {float} m33           the sixteenth element of the matrix\n     */\n    apply: function() {\n      var source;\n      if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n        source = arguments[0].array();\n      } else if (arguments.length === 16) {\n        source = Array.prototype.slice.call(arguments);\n      } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n        source = arguments[0];\n      }\n\n      var result = [0, 0, 0, 0,\n                    0, 0, 0, 0,\n                    0, 0, 0, 0,\n                    0, 0, 0, 0];\n      var e = 0;\n      for (var row = 0; row < 4; row++) {\n        for (var col = 0; col < 4; col++, e++) {\n          result[e] += this.elements[row * 4 + 0] * source[col + 0] + this.elements[row * 4 + 1] *\n                       source[col + 4] + this.elements[row * 4 + 2] * source[col + 8] +\n                       this.elements[row * 4 + 3] * source[col + 12];\n        }\n      }\n      this.elements = result.slice();\n    },\n    /**\n     * @member PMatrix3D\n     * The rotate() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotate: function(angle, v0, v1, v2) {\n      if (!v1) {\n        this.rotateZ(angle);\n      } else {\n        // TODO should make sure this vector is normalized\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        var t = 1.0 - c;\n\n        this.apply((t * v0 * v0) + c,\n                   (t * v0 * v1) - (s * v2),\n                   (t * v0 * v2) + (s * v1),\n                   0,\n                   (t * v0 * v1) + (s * v2),\n                   (t * v1 * v1) + c,\n                   (t * v1 * v2) - (s * v0),\n                   0,\n                   (t * v0 * v2) - (s * v1),\n                   (t * v1 * v2) + (s * v0),\n                   (t * v2 * v2) + c,\n                   0,\n                   0, 0, 0, 1);\n      }\n    },\n    /**\n     * @member PMatrix3D\n     * The invApply() function applies the inverted matrix to this matrix.\n     *\n     * @param {float} m00           the first element of the matrix\n     * @param {float} m01           the second element of the matrix\n     * @param {float} m02           the third element of the matrix\n     * @param {float} m03           the fourth element of the matrix\n     * @param {float} m10           the fifth element of the matrix\n     * @param {float} m11           the sixth element of the matrix\n     * @param {float} m12           the seventh element of the matrix\n     * @param {float} m13           the eight element of the matrix\n     * @param {float} m20           the nineth element of the matrix\n     * @param {float} m21           the tenth element of the matrix\n     * @param {float} m22           the eleventh element of the matrix\n     * @param {float} m23           the twelveth element of the matrix\n     * @param {float} m30           the thirteenth element of the matrix\n     * @param {float} m31           the fourtheenth element of the matrix\n     * @param {float} m32           the fivetheenth element of the matrix\n     * @param {float} m33           the sixteenth element of the matrix\n     *\n     * @return {boolean} returns true if the operation was successful.\n     */\n    invApply: function() {\n      if (inverseCopy === undef) {\n        inverseCopy = new PMatrix3D();\n      }\n      var a = arguments;\n      inverseCopy.set(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8],\n                      a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n\n      if (!inverseCopy.invert()) {\n        return false;\n      }\n      this.preApply(inverseCopy);\n      return true;\n    },\n    /**\n     * @member PMatrix3D\n     * The rotateZ() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotateX: function(angle) {\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      this.apply([1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1]);\n    },\n    /**\n     * @member PMatrix3D\n     * The rotateY() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotateY: function(angle) {\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      this.apply([c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1]);\n    },\n    /**\n     * @member PMatrix3D\n     * The rotateZ() function rotates the matrix.\n     *\n     * @param {float} angle         the angle of rotation in radiants\n     */\n    rotateZ: function(angle) {\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      this.apply([c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n    },\n    /**\n     * @member PMatrix3D\n     * The scale() function increases or decreases the size of a matrix by expanding and contracting vertices. When only one parameter is specified scale will occur in all dimensions.\n     * This is equivalent to a three parameter call.\n     *\n     * @param {float} sx  the amount to scale on the x-axis\n     * @param {float} sy  the amount to scale on the y-axis\n     * @param {float} sz  the amount to scale on the z-axis\n     */\n    scale: function(sx, sy, sz) {\n      if (sx && !sy && !sz) {\n        sy = sz = sx;\n      } else if (sx && sy && !sz) {\n        sz = 1;\n      }\n\n      if (sx && sy && sz) {\n        this.elements[0]  *= sx;\n        this.elements[1]  *= sy;\n        this.elements[2]  *= sz;\n        this.elements[4]  *= sx;\n        this.elements[5]  *= sy;\n        this.elements[6]  *= sz;\n        this.elements[8]  *= sx;\n        this.elements[9]  *= sy;\n        this.elements[10] *= sz;\n        this.elements[12] *= sx;\n        this.elements[13] *= sy;\n        this.elements[14] *= sz;\n      }\n    },\n    /**\n     * @member PMatrix3D\n     * The skewX() function skews the matrix along the x-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    skewX: function(angle) {\n      var t = Math.tan(angle);\n      this.apply(1, t, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    },\n    /**\n     * @member PMatrix3D\n     * The skewY() function skews the matrix along the y-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of skew specified in radians\n     */\n    skewY: function(angle) {\n      var t = Math.tan(angle);\n      this.apply(1, 0, 0, 0, t, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    },\n    /**\n     * @member PMatrix3D\n     * The shearX() function shears the matrix along the x-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of shear specified in radians\n     */\n    shearX: function(angle) {\n      var t = Math.tan(angle);\n      this.apply(1, t, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    },\n    /**\n     * @member PMatrix3D\n     * The shearY() function shears the matrix along the y-axis the amount specified by the angle parameter.\n     * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n     *\n     * @param {float} angle  angle of shear specified in radians\n     */\n    shearY: function(angle) {\n      var t = Math.tan(angle);\n      this.apply(1, 0, 0, 0, t, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    },\n    multX: function(x, y, z, w) {\n      if (!z) {\n        return this.elements[0] * x + this.elements[1] * y + this.elements[3];\n      }\n      if (!w) {\n        return this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n      }\n      return this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3] * w;\n    },\n    multY: function(x, y, z, w) {\n      if (!z) {\n        return this.elements[4] * x + this.elements[5] * y + this.elements[7];\n      }\n      if (!w) {\n        return this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n      }\n      return this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7] * w;\n    },\n    multZ: function(x, y, z, w) {\n      if (!w) {\n        return this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n      }\n      return this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11] * w;\n    },\n    multW: function(x, y, z, w) {\n      if (!w) {\n        return this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15];\n      }\n      return this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15] * w;\n    },\n    /**\n     * @member PMatrix3D\n     * The invert() function inverts this matrix\n     *\n     * @return {boolean} true if successful\n     */\n    invert: function() {\n      var fA0 = this.elements[0] * this.elements[5] - this.elements[1] * this.elements[4];\n      var fA1 = this.elements[0] * this.elements[6] - this.elements[2] * this.elements[4];\n      var fA2 = this.elements[0] * this.elements[7] - this.elements[3] * this.elements[4];\n      var fA3 = this.elements[1] * this.elements[6] - this.elements[2] * this.elements[5];\n      var fA4 = this.elements[1] * this.elements[7] - this.elements[3] * this.elements[5];\n      var fA5 = this.elements[2] * this.elements[7] - this.elements[3] * this.elements[6];\n      var fB0 = this.elements[8] * this.elements[13] - this.elements[9] * this.elements[12];\n      var fB1 = this.elements[8] * this.elements[14] - this.elements[10] * this.elements[12];\n      var fB2 = this.elements[8] * this.elements[15] - this.elements[11] * this.elements[12];\n      var fB3 = this.elements[9] * this.elements[14] - this.elements[10] * this.elements[13];\n      var fB4 = this.elements[9] * this.elements[15] - this.elements[11] * this.elements[13];\n      var fB5 = this.elements[10] * this.elements[15] - this.elements[11] * this.elements[14];\n\n      // Determinant\n      var fDet = fA0 * fB5 - fA1 * fB4 + fA2 * fB3 + fA3 * fB2 - fA4 * fB1 + fA5 * fB0;\n\n      // Account for a very small value\n      // return false if not successful.\n      if (Math.abs(fDet) <= 1e-9) {\n        return false;\n      }\n\n      var kInv = [];\n      kInv[0]  = +this.elements[5] * fB5 - this.elements[6] * fB4 + this.elements[7] * fB3;\n      kInv[4]  = -this.elements[4] * fB5 + this.elements[6] * fB2 - this.elements[7] * fB1;\n      kInv[8]  = +this.elements[4] * fB4 - this.elements[5] * fB2 + this.elements[7] * fB0;\n      kInv[12] = -this.elements[4] * fB3 + this.elements[5] * fB1 - this.elements[6] * fB0;\n      kInv[1]  = -this.elements[1] * fB5 + this.elements[2] * fB4 - this.elements[3] * fB3;\n      kInv[5]  = +this.elements[0] * fB5 - this.elements[2] * fB2 + this.elements[3] * fB1;\n      kInv[9]  = -this.elements[0] * fB4 + this.elements[1] * fB2 - this.elements[3] * fB0;\n      kInv[13] = +this.elements[0] * fB3 - this.elements[1] * fB1 + this.elements[2] * fB0;\n      kInv[2]  = +this.elements[13] * fA5 - this.elements[14] * fA4 + this.elements[15] * fA3;\n      kInv[6]  = -this.elements[12] * fA5 + this.elements[14] * fA2 - this.elements[15] * fA1;\n      kInv[10] = +this.elements[12] * fA4 - this.elements[13] * fA2 + this.elements[15] * fA0;\n      kInv[14] = -this.elements[12] * fA3 + this.elements[13] * fA1 - this.elements[14] * fA0;\n      kInv[3]  = -this.elements[9] * fA5 + this.elements[10] * fA4 - this.elements[11] * fA3;\n      kInv[7]  = +this.elements[8] * fA5 - this.elements[10] * fA2 + this.elements[11] * fA1;\n      kInv[11] = -this.elements[8] * fA4 + this.elements[9] * fA2 - this.elements[11] * fA0;\n      kInv[15] = +this.elements[8] * fA3 - this.elements[9] * fA1 + this.elements[10] * fA0;\n\n      // Inverse using Determinant\n      var fInvDet = 1.0 / fDet;\n      kInv[0]  *= fInvDet;\n      kInv[1]  *= fInvDet;\n      kInv[2]  *= fInvDet;\n      kInv[3]  *= fInvDet;\n      kInv[4]  *= fInvDet;\n      kInv[5]  *= fInvDet;\n      kInv[6]  *= fInvDet;\n      kInv[7]  *= fInvDet;\n      kInv[8]  *= fInvDet;\n      kInv[9]  *= fInvDet;\n      kInv[10] *= fInvDet;\n      kInv[11] *= fInvDet;\n      kInv[12] *= fInvDet;\n      kInv[13] *= fInvDet;\n      kInv[14] *= fInvDet;\n      kInv[15] *= fInvDet;\n\n      this.elements = kInv.slice();\n      return true;\n    },\n    toString: function() {\n      var str = \"\";\n      for (var i = 0; i < 15; i++) {\n        str += this.elements[i] + \", \";\n      }\n      str += this.elements[15];\n      return str;\n    },\n    /**\n     * @member PMatrix3D\n     * The print() function prints out the elements of this matrix\n     */\n    print: function() {\n      var digits = printMatrixHelper(this.elements);\n\n      var output = \"\"   + p.nfs(this.elements[0], digits, 4)  + \" \" + p.nfs(this.elements[1], digits, 4)  +\n                   \" \"  + p.nfs(this.elements[2], digits, 4)  + \" \" + p.nfs(this.elements[3], digits, 4)  +\n                   \"\\n\" + p.nfs(this.elements[4], digits, 4)  + \" \" + p.nfs(this.elements[5], digits, 4)  +\n                   \" \"  + p.nfs(this.elements[6], digits, 4)  + \" \" + p.nfs(this.elements[7], digits, 4)  +\n                   \"\\n\" + p.nfs(this.elements[8], digits, 4)  + \" \" + p.nfs(this.elements[9], digits, 4)  +\n                   \" \"  + p.nfs(this.elements[10], digits, 4) + \" \" + p.nfs(this.elements[11], digits, 4) +\n                   \"\\n\" + p.nfs(this.elements[12], digits, 4) + \" \" + p.nfs(this.elements[13], digits, 4) +\n                   \" \"  + p.nfs(this.elements[14], digits, 4) + \" \" + p.nfs(this.elements[15], digits, 4) + \"\\n\\n\";\n      p.println(output);\n    },\n    invTranslate: function(tx, ty, tz) {\n      this.preApply(1, 0, 0, -tx, 0, 1, 0, -ty, 0, 0, 1, -tz, 0, 0, 0, 1);\n    },\n    invRotateX: function(angle) {\n      var c = Math.cos(-angle);\n      var s = Math.sin(-angle);\n      this.preApply([1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1]);\n    },\n    invRotateY: function(angle) {\n      var c = Math.cos(-angle);\n      var s = Math.sin(-angle);\n      this.preApply([c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1]);\n    },\n    invRotateZ: function(angle) {\n      var c = Math.cos(-angle);\n      var s = Math.sin(-angle);\n      this.preApply([c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n    },\n    invScale: function(x, y, z) {\n      this.preApply([1 / x, 0, 0, 0, 0, 1 / y, 0, 0, 0, 0, 1 / z, 0, 0, 0, 0, 1]);\n    }\n  };\n\n  return PMatrix3D;\n};\n},{}],15:[function(require,module,exports){\nmodule.exports = function(options) {\n  var PConstants = options.PConstants,\n      PMatrix2D = options.PMatrix2D,\n      PMatrix3D = options.PMatrix3D;\n\n  /**\n   * Datatype for storing shapes. Processing can currently load and display SVG (Scalable Vector Graphics) shapes.\n   * Before a shape is used, it must be loaded with the <b>loadShape()</b> function. The <b>shape()</b> function is used to draw the shape to the display window.\n   * The <b>PShape</b> object contain a group of methods, linked below, that can operate on the shape data.\n   * <br><br>The <b>loadShape()</b> method supports SVG files created with Inkscape and Adobe Illustrator.\n   * It is not a full SVG implementation, but offers some straightforward support for handling vector data.\n   *\n   * @param {int} family the shape type, one of GROUP, PRIMITIVE, PATH, or GEOMETRY\n   *\n   * @see #shape()\n   * @see #loadShape()\n   * @see #shapeMode()\n   */\n  var PShape = function(family) {\n    this.family    = family || PConstants.GROUP;\n    this.visible   = true;\n    this.style     = true;\n    this.children  = [];\n    this.nameTable = [];\n    this.params    = [];\n    this.name      = \"\";\n    this.image     = null;  //type PImage\n    this.matrix    = null;\n    this.kind      = null;\n    this.close     = null;\n    this.width     = null;\n    this.height    = null;\n    this.parent    = null;\n  };\n  /**\n    * PShape methods\n    * missing: findChild(), apply(), contains(), findChild(), getPrimitive(), getParams(), getVertex() , getVertexCount(),\n    * getVertexCode() , getVertexCodes() , getVertexCodeCount(), getVertexX(), getVertexY(), getVertexZ()\n    */\n  PShape.prototype = {\n    /**\n     * @member PShape\n     * The isVisible() function returns a boolean value \"true\" if the image is set to be visible, \"false\" if not. This is modified with the <b>setVisible()</b> parameter.\n     * <br><br>The visibility of a shape is usually controlled by whatever program created the SVG file.\n     * For instance, this parameter is controlled by showing or hiding the shape in the layers palette in Adobe Illustrator.\n     *\n     * @return {boolean}  returns \"true\" if the image is set to be visible, \"false\" if not\n     */\n    isVisible: function(){\n      return this.visible;\n    },\n    /**\n     * @member PShape\n     * The setVisible() function sets the shape to be visible or invisible. This is determined by the value of the <b>visible</b> parameter.\n     * <br><br>The visibility of a shape is usually controlled by whatever program created the SVG file.\n     * For instance, this parameter is controlled by showing or hiding the shape in the layers palette in Adobe Illustrator.\n     *\n     * @param {boolean} visible \"false\" makes the shape invisible and \"true\" makes it visible\n     */\n    setVisible: function (visible){\n      this.visible = visible;\n    },\n    /**\n     * @member PShape\n     * The disableStyle() function disables the shape's style data and uses Processing's current styles. Styles include attributes such as colors, stroke weight, and stroke joints.\n     * Overrides this shape's style information and uses PGraphics styles and colors. Identical to ignoreStyles(true). Also disables styles for all child shapes.\n     */\n    disableStyle: function(){\n      this.style = false;\n      for(var i = 0, j=this.children.length; i<j; i++) {\n        this.children[i].disableStyle();\n      }\n    },\n    /**\n     * @member PShape\n     * The enableStyle() function enables the shape's style data and ignores Processing's current styles. Styles include attributes such as colors, stroke weight, and stroke joints.\n     */\n    enableStyle: function(){\n      this.style = true;\n      for(var i = 0, j=this.children.length; i<j; i++) {\n        this.children[i].enableStyle();\n      }\n    },\n    /**\n     * @member PShape\n     * The getFamily function returns the shape type\n     *\n     * @return {int} the shape type, one of GROUP, PRIMITIVE, PATH, or GEOMETRY\n     */\n    getFamily: function(){\n      return this.family;\n    },\n    /**\n     * @member PShape\n     * The getWidth() function gets the width of the drawing area (not necessarily the shape boundary).\n     */\n    getWidth: function(){\n      return this.width;\n    },\n    /**\n     * @member PShape\n     * The getHeight() function gets the height of the drawing area (not necessarily the shape boundary).\n     */\n    getHeight: function(){\n      return this.height;\n    },\n    /**\n     * @member PShape\n     * The setName() function sets the name of the shape\n     *\n     * @param {String} name the name of the shape\n     */\n    setName: function(name){\n      this.name = name;\n    },\n    /**\n     * @member PShape\n     * The getName() function returns the name of the shape\n     *\n     * @return {String} the name of the shape\n     */\n    getName: function(){\n      return this.name;\n    },\n    /**\n     * @member PShape\n     * Called by the following (the shape() command adds the g)\n     * PShape s = loadShapes(\"blah.svg\");\n     * shape(s);\n     */\n    draw: function(renderContext) {\n      if(!renderContext) {\n        throw \"render context missing for draw() in PShape\";\n      }\n      if (this.visible) {\n        this.pre(renderContext);\n        this.drawImpl(renderContext);\n        this.post(renderContext);\n      }\n    },\n    /**\n     * @member PShape\n     * the drawImpl() function draws the SVG document.\n     */\n    drawImpl: function(renderContext) {\n      if (this.family === PConstants.GROUP) {\n        this.drawGroup(renderContext);\n      } else if (this.family === PConstants.PRIMITIVE) {\n        this.drawPrimitive(renderContext);\n      } else if (this.family === PConstants.GEOMETRY) {\n        this.drawGeometry(renderContext);\n      } else if (this.family === PConstants.PATH) {\n        this.drawPath(renderContext);\n      }\n    },\n    /**\n     * @member PShape\n     * The drawPath() function draws the <path> part of the SVG document.\n     */\n    drawPath: function(renderContext) {\n      var i, j;\n      if (this.vertices.length === 0) { return; }\n      renderContext.beginShape();\n      if (this.vertexCodes.length === 0) {  // each point is a simple vertex\n        if (this.vertices[0].length === 2) {  // drawing 2D vertices\n          for (i = 0, j = this.vertices.length; i < j; i++) {\n            renderContext.vertex(this.vertices[i][0], this.vertices[i][1]);\n          }\n        } else {  // drawing 3D vertices\n          for (i = 0, j = this.vertices.length; i < j; i++) {\n            renderContext.vertex(this.vertices[i][0],\n                                 this.vertices[i][1],\n                                 this.vertices[i][2]);\n          }\n        }\n      } else {  // coded set of vertices\n        var index = 0;\n        if (this.vertices[0].length === 2) {  // drawing a 2D path\n          for (i = 0, j = this.vertexCodes.length; i < j; i++) {\n            if (this.vertexCodes[i] === PConstants.VERTEX) {\n              renderContext.vertex(this.vertices[index][0], this.vertices[index][1], this.vertices[index].moveTo);\n              renderContext.breakShape = false;\n              index++;\n            } else if (this.vertexCodes[i] === PConstants.BEZIER_VERTEX) {\n              renderContext.bezierVertex(this.vertices[index+0][0],\n                                         this.vertices[index+0][1],\n                                         this.vertices[index+1][0],\n                                         this.vertices[index+1][1],\n                                         this.vertices[index+2][0],\n                                         this.vertices[index+2][1]);\n              index += 3;\n            } else if (this.vertexCodes[i] === PConstants.CURVE_VERTEX) {\n              renderContext.curveVertex(this.vertices[index][0],\n                                        this.vertices[index][1]);\n              index++;\n            } else if (this.vertexCodes[i] ===  PConstants.BREAK) {\n              renderContext.breakShape = true;\n            }\n          }\n        } else {  // drawing a 3D path\n          for (i = 0, j = this.vertexCodes.length; i < j; i++) {\n            if (this.vertexCodes[i] === PConstants.VERTEX) {\n              renderContext.vertex(this.vertices[index][0],\n                                   this.vertices[index][1],\n                                   this.vertices[index][2]);\n              if (this.vertices[index].moveTo === true) {\n                vertArray[vertArray.length-1].moveTo = true;\n              } else if (this.vertices[index].moveTo === false) {\n                vertArray[vertArray.length-1].moveTo = false;\n              }\n              renderContext.breakShape = false;\n            } else if (this.vertexCodes[i] ===  PConstants.BEZIER_VERTEX) {\n              renderContext.bezierVertex(this.vertices[index+0][0],\n                                         this.vertices[index+0][1],\n                                         this.vertices[index+0][2],\n                                         this.vertices[index+1][0],\n                                         this.vertices[index+1][1],\n                                         this.vertices[index+1][2],\n                                         this.vertices[index+2][0],\n                                         this.vertices[index+2][1],\n                                         this.vertices[index+2][2]);\n              index += 3;\n            } else if (this.vertexCodes[i] === PConstants.CURVE_VERTEX) {\n              renderContext.curveVertex(this.vertices[index][0],\n                                        this.vertices[index][1],\n                                        this.vertices[index][2]);\n              index++;\n            } else if (this.vertexCodes[i] === PConstants.BREAK) {\n              renderContext.breakShape = true;\n            }\n          }\n        }\n      }\n      renderContext.endShape(this.close ? PConstants.CLOSE : PConstants.OPEN);\n    },\n    /**\n     * @member PShape\n     * The drawGeometry() function draws the geometry part of the SVG document.\n     */\n    drawGeometry: function(renderContext) {\n      var i, j;\n      renderContext.beginShape(this.kind);\n      if (this.style) {\n        for (i = 0, j = this.vertices.length; i < j; i++) {\n          renderContext.vertex(this.vertices[i]);\n        }\n      } else {\n        for (i = 0, j = this.vertices.length; i < j; i++) {\n          var vert = this.vertices[i];\n          if (vert[2] === 0) {\n            renderContext.vertex(vert[0], vert[1]);\n          } else {\n            renderContext.vertex(vert[0], vert[1], vert[2]);\n          }\n        }\n      }\n      renderContext.endShape();\n    },\n    /**\n     * @member PShape\n     * The drawGroup() function draws the <g> part of the SVG document.\n     */\n    drawGroup: function(renderContext) {\n      for (var i = 0, j = this.children.length; i < j; i++) {\n        this.children[i].draw(renderContext);\n      }\n    },\n    /**\n     * @member PShape\n     * The drawPrimitive() function draws SVG document shape elements. These can be point, line, triangle, quad, rect, ellipse, arc, box, or sphere.\n     */\n    drawPrimitive: function(renderContext) {\n      if (this.kind === PConstants.POINT) {\n        renderContext.point(this.params[0], this.params[1]);\n      } else if (this.kind === PConstants.LINE) {\n        if (this.params.length === 4) {  // 2D\n          renderContext.line(this.params[0], this.params[1],\n                            this.params[2], this.params[3]);\n        } else {  // 3D\n          renderContext.line(this.params[0], this.params[1], this.params[2],\n                             this.params[3], this.params[4], this.params[5]);\n        }\n      } else if (this.kind === PConstants.TRIANGLE) {\n        renderContext.triangle(this.params[0], this.params[1],\n                               this.params[2], this.params[3],\n                               this.params[4], this.params[5]);\n      } else if (this.kind === PConstants.QUAD) {\n        renderContext.quad(this.params[0], this.params[1],\n                           this.params[2], this.params[3],\n                           this.params[4], this.params[5],\n                           this.params[6], this.params[7]);\n      } else if (this.kind === PConstants.RECT) {\n        if (this.image !== null) {\n          var imMode = imageModeConvert;\n          renderContext.imageMode(PConstants.CORNER);\n          renderContext.image(this.image,\n                              this.params[0],\n                              this.params[1],\n                              this.params[2],\n                              this.params[3]);\n          imageModeConvert = imMode;\n        } else {\n          var rcMode = renderContext.curRectMode;\n          renderContext.rectMode(PConstants.CORNER);\n          renderContext.rect(this.params[0],\n                             this.params[1],\n                             this.params[2],\n                             this.params[3]);\n          renderContext.curRectMode = rcMode;\n        }\n      } else if (this.kind === PConstants.ELLIPSE) {\n        var elMode = renderContext.curEllipseMode;\n        renderContext.ellipseMode(PConstants.CORNER);\n        renderContext.ellipse(this.params[0],\n                              this.params[1],\n                              this.params[2],\n                              this.params[3]);\n        renderContext.curEllipseMode = elMode;\n      } else if (this.kind === PConstants.ARC) {\n        var eMode = curEllipseMode;\n        renderContext.ellipseMode(PConstants.CORNER);\n        renderContext.arc(this.params[0],\n                          this.params[1],\n                          this.params[2],\n                          this.params[3],\n                          this.params[4],\n                          this.params[5]);\n        curEllipseMode = eMode;\n      } else if (this.kind === PConstants.BOX) {\n        if (this.params.length === 1) {\n          renderContext.box(this.params[0]);\n        } else {\n          renderContext.box(this.params[0], this.params[1], this.params[2]);\n        }\n      } else if (this.kind === PConstants.SPHERE) {\n        renderContext.sphere(this.params[0]);\n      }\n    },\n    /**\n     * @member PShape\n     * The pre() function performs the preparations before the SVG is drawn. This includes doing transformations and storing previous styles.\n     */\n    pre: function(renderContext) {\n      if (this.matrix) {\n        renderContext.pushMatrix();\n        renderContext.transform(this.matrix);\n      }\n      if (this.style) {\n        renderContext.pushStyle();\n        this.styles(renderContext);\n      }\n    },\n    /**\n     * @member PShape\n     * The post() function performs the necessary actions after the SVG is drawn. This includes removing transformations and removing added styles.\n     */\n    post: function(renderContext) {\n      if (this.matrix) {\n        renderContext.popMatrix();\n      }\n      if (this.style) {\n        renderContext.popStyle();\n      }\n    },\n    /**\n     * @member PShape\n     * The styles() function changes the Processing's current styles\n     */\n    styles: function(renderContext) {\n      if (this.stroke) {\n        renderContext.stroke(this.strokeColor);\n        renderContext.strokeWeight(this.strokeWeight);\n        renderContext.strokeCap(this.strokeCap);\n        renderContext.strokeJoin(this.strokeJoin);\n      } else {\n        renderContext.noStroke();\n      }\n\n      if (this.fill) {\n        renderContext.fill(this.fillColor);\n\n      } else {\n        renderContext.noFill();\n      }\n    },\n    /**\n     * @member PShape\n     * The getChild() function extracts a child shape from a parent shape. Specify the name of the shape with the <b>target</b> parameter or the\n     * layer position of the shape to get with the <b>index</b> parameter.\n     * The shape is returned as a <b>PShape</b> object, or <b>null</b> is returned if there is an error.\n     *\n     * @param {String} target   the name of the shape to get\n     * @param {int} index   the layer position of the shape to get\n     *\n     * @return {PShape} returns a child element of a shape as a PShape object or null if there is an error\n     */\n    getChild: function(child) {\n      var i, j;\n      if (typeof child === 'number') {\n        return this.children[child];\n      }\n      var found;\n      if(child === \"\" || this.name === child){\n        return this;\n      }\n      if(this.nameTable.length > 0) {\n        for(i = 0, j = this.nameTable.length; i < j || found; i++) {\n          if(this.nameTable[i].getName === child) {\n            found = this.nameTable[i];\n            break;\n          }\n        }\n        if (found) { return found; }\n      }\n      for(i = 0, j = this.children.length; i < j; i++) {\n        found = this.children[i].getChild(child);\n        if(found) { return found; }\n      }\n      return null;\n    },\n    /**\n     * @member PShape\n     * The getChildCount() returns the number of children\n     *\n     * @return {int} returns a count of children\n     */\n    getChildCount: function () {\n      return this.children.length;\n    },\n    /**\n     * @member PShape\n     * The addChild() adds a child to the PShape.\n     *\n     * @param {PShape} child the child to add\n     */\n    addChild: function( child ) {\n      this.children.push(child);\n      child.parent = this;\n      if (child.getName() !== null) {\n        this.addName(child.getName(), child);\n      }\n    },\n    /**\n     * @member PShape\n     * The addName() functions adds a shape to the name lookup table.\n     *\n     * @param {String} name   the name to be added\n     * @param {PShape} shape  the shape\n     */\n    addName: function(name,  shape) {\n      if (this.parent !== null) {\n        this.parent.addName( name, shape );\n      } else {\n        this.nameTable.push( [name, shape] );\n      }\n    },\n    /**\n     * @member PShape\n     * The translate() function specifies an amount to displace the shape. The <b>x</b> parameter specifies left/right translation, the <b>y</b> parameter specifies up/down translation, and the <b>z</b> parameter specifies translations toward/away from the screen.\n     * Subsequent calls to the method accumulates the effect. For example, calling <b>translate(50, 0)</b> and then <b>translate(20, 0)</b> is the same as <b>translate(70, 0)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * <br><br>Using this method with the <b>z</b> parameter requires using the P3D or OPENGL parameter in combination with size.\n     *\n     * @param {int|float} x left/right translation\n     * @param {int|float} y up/down translation\n     * @param {int|float} z forward/back translation\n     *\n     * @see PMatrix2D#translate\n     * @see PMatrix3D#translate\n     */\n    translate: function() {\n      if(arguments.length === 2)\n      {\n        this.checkMatrix(2);\n        this.matrix.translate(arguments[0], arguments[1]);\n      } else {\n        this.checkMatrix(3);\n        this.matrix.translate(arguments[0], arguments[1], 0);\n      }\n    },\n    /**\n     * @member PShape\n     * The checkMatrix() function makes sure that the shape's matrix is 1) not null, and 2) has a matrix\n     * that can handle <em>at least</em> the specified number of dimensions.\n     *\n     * @param {int} dimensions the specified number of dimensions\n     */\n    checkMatrix: function(dimensions) {\n      if(this.matrix === null) {\n        if(dimensions === 2) {\n          this.matrix = new PMatrix2D();\n        } else {\n          this.matrix = new PMatrix3D();\n        }\n      }else if(dimensions === 3 && this.matrix instanceof PMatrix2D) {\n        this.matrix = new PMatrix3D();\n      }\n    },\n    /**\n     * @member PShape\n     * The rotateX() function rotates a shape around the x-axis the amount specified by the <b>angle</b> parameter. Angles should be specified in radians (values from 0 to TWO_PI) or converted to radians with the <b>radians()</b> method.\n     * <br><br>Shapes are always rotated around the upper-left corner of their bounding box. Positive numbers rotate objects in a clockwise direction.\n     * Subsequent calls to the method accumulates the effect. For example, calling <b>rotateX(HALF_PI)</b> and then <b>rotateX(HALF_PI)</b> is the same as <b>rotateX(PI)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * <br><br>This method requires a 3D renderer. You need to pass P3D or OPENGL as a third parameter into the <b>size()</b> method as shown in the example above.\n     *\n     * @param {float}angle angle of rotation specified in radians\n     *\n     * @see PMatrix3D#rotateX\n     */\n    rotateX: function(angle) {\n      this.rotate(angle, 1, 0, 0);\n    },\n    /**\n     * @member PShape\n     * The rotateY() function rotates a shape around the y-axis the amount specified by the <b>angle</b> parameter. Angles should be specified in radians (values from 0 to TWO_PI) or converted to radians with the <b>radians()</b> method.\n     * <br><br>Shapes are always rotated around the upper-left corner of their bounding box. Positive numbers rotate objects in a clockwise direction.\n     * Subsequent calls to the method accumulates the effect. For example, calling <b>rotateY(HALF_PI)</b> and then <b>rotateY(HALF_PI)</b> is the same as <b>rotateY(PI)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * <br><br>This method requires a 3D renderer. You need to pass P3D or OPENGL as a third parameter into the <b>size()</b> method as shown in the example above.\n     *\n     * @param {float}angle angle of rotation specified in radians\n     *\n     * @see PMatrix3D#rotateY\n     */\n    rotateY: function(angle) {\n      this.rotate(angle, 0, 1, 0);\n    },\n    /**\n     * @member PShape\n     * The rotateZ() function rotates a shape around the z-axis the amount specified by the <b>angle</b> parameter. Angles should be specified in radians (values from 0 to TWO_PI) or converted to radians with the <b>radians()</b> method.\n     * <br><br>Shapes are always rotated around the upper-left corner of their bounding box. Positive numbers rotate objects in a clockwise direction.\n     * Subsequent calls to the method accumulates the effect. For example, calling <b>rotateZ(HALF_PI)</b> and then <b>rotateZ(HALF_PI)</b> is the same as <b>rotateZ(PI)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * <br><br>This method requires a 3D renderer. You need to pass P3D or OPENGL as a third parameter into the <b>size()</b> method as shown in the example above.\n     *\n     * @param {float}angle angle of rotation specified in radians\n     *\n     * @see PMatrix3D#rotateZ\n     */\n    rotateZ: function(angle) {\n      this.rotate(angle, 0, 0, 1);\n    },\n    /**\n     * @member PShape\n     * The rotate() function rotates a shape the amount specified by the <b>angle</b> parameter. Angles should be specified in radians (values from 0 to TWO_PI) or converted to radians with the <b>radians()</b> method.\n     * <br><br>Shapes are always rotated around the upper-left corner of their bounding box. Positive numbers rotate objects in a clockwise direction.\n     * Transformations apply to everything that happens after and subsequent calls to the method accumulates the effect.\n     * For example, calling <b>rotate(HALF_PI)</b> and then <b>rotate(HALF_PI)</b> is the same as <b>rotate(PI)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * If optional parameters x,y,z are supplied, the rotate is about the point (x, y, z).\n     *\n     * @param {float}angle  angle of rotation specified in radians\n     * @param {float}x      x-coordinate of the point\n     * @param {float}y      y-coordinate of the point\n     * @param {float}z      z-coordinate of the point\n     * @see PMatrix2D#rotate\n     * @see PMatrix3D#rotate\n     */\n    rotate: function() {\n      if(arguments.length === 1){\n        this.checkMatrix(2);\n        this.matrix.rotate(arguments[0]);\n      } else {\n        this.checkMatrix(3);\n        this.matrix.rotate(arguments[0],\n                           arguments[1],\n                           arguments[2],\n                           arguments[3]);\n      }\n    },\n    /**\n     * @member PShape\n     * The scale() function increases or decreases the size of a shape by expanding and contracting vertices. Shapes always scale from the relative origin of their bounding box.\n     * Scale values are specified as decimal percentages. For example, the method call <b>scale(2.0)</b> increases the dimension of a shape by 200%.\n     * Subsequent calls to the method multiply the effect. For example, calling <b>scale(2.0)</b> and then <b>scale(1.5)</b> is the same as <b>scale(3.0)</b>.\n     * This transformation is applied directly to the shape, it's not refreshed each time <b>draw()</b> is run.\n     * <br><br>Using this fuction with the <b>z</b> parameter requires passing P3D or OPENGL into the size() parameter.\n     *\n     * @param {float}s      percentage to scale the object\n     * @param {float}x      percentage to scale the object in the x-axis\n     * @param {float}y      percentage to scale the object in the y-axis\n     * @param {float}z      percentage to scale the object in the z-axis\n     *\n     * @see PMatrix2D#scale\n     * @see PMatrix3D#scale\n     */\n    scale: function() {\n      if(arguments.length === 2) {\n        this.checkMatrix(2);\n        this.matrix.scale(arguments[0], arguments[1]);\n      } else if (arguments.length === 3) {\n        this.checkMatrix(2);\n        this.matrix.scale(arguments[0], arguments[1], arguments[2]);\n      } else {\n        this.checkMatrix(2);\n        this.matrix.scale(arguments[0]);\n      }\n    },\n    /**\n     * @member PShape\n     * The resetMatrix() function resets the matrix\n     *\n     * @see PMatrix2D#reset\n     * @see PMatrix3D#reset\n     */\n    resetMatrix: function() {\n      this.checkMatrix(2);\n      this.matrix.reset();\n    },\n    /**\n     * @member PShape\n     * The applyMatrix() function multiplies this matrix by another matrix of type PMatrix3D or PMatrix2D.\n     * Individual elements can also be provided\n     *\n     * @param {PMatrix3D|PMatrix2D} matrix   the matrix to multiply by\n     *\n     * @see PMatrix2D#apply\n     * @see PMatrix3D#apply\n     */\n    applyMatrix: function(matrix) {\n      if (arguments.length === 1) {\n        this.applyMatrix(matrix.elements[0],\n                         matrix.elements[1], 0,\n                         matrix.elements[2],\n                         matrix.elements[3],\n                         matrix.elements[4], 0,\n                         matrix.elements[5],\n                         0, 0, 1, 0,\n                         0, 0, 0, 1);\n      } else if (arguments.length === 6) {\n        this.checkMatrix(2);\n        this.matrix.apply(arguments[0], arguments[1], arguments[2], 0,\n                          arguments[3], arguments[4], arguments[5], 0,\n                          0,   0,   1,   0,\n                          0,   0,   0,   1);\n\n      } else if (arguments.length === 16) {\n        this.checkMatrix(3);\n        this.matrix.apply(arguments[0],\n                          arguments[1],\n                          arguments[2],\n                          arguments[3],\n                          arguments[4],\n                          arguments[5],\n                          arguments[6],\n                          arguments[7],\n                          arguments[8],\n                          arguments[9],\n                          arguments[10],\n                          arguments[11],\n                          arguments[12],\n                          arguments[13],\n                          arguments[14],\n                          arguments[15]);\n      }\n    }\n  };\n\n  return PShape;\n};\n},{}],16:[function(require,module,exports){\n/**\n * SVG stands for Scalable Vector Graphics, a portable graphics format. It is\n * a vector format so it allows for infinite resolution and relatively small\n * file sizes. Most modern media software can view SVG files, including Adobe\n * products, Firefox, etc. Illustrator and Inkscape can edit SVG files.\n *\n * @param {PApplet} parent     typically use \"this\"\n * @param {String} filename    name of the SVG file to load\n * @param {XMLElement} xml     an XMLElement element\n * @param {PShapeSVG} parent   the parent PShapeSVG\n *\n * @see PShape\n */\nmodule.exports = function(options) {\n  var CommonFunctions = options.CommonFunctions,\n      PConstants = options.PConstants,\n      PShape = options.PShape,\n      XMLElement = options.XMLElement,\n      colors = options.colors;\n\n  var PShapeSVG = function() {\n    PShape.call(this);                // PShape is the base class.\n    if (arguments.length === 1) {     // xml element coming in\n      this.element  = arguments[0];\n\n      // set values to their defaults according to the SVG spec\n      this.vertexCodes         = [];\n      this.vertices            = [];\n      this.opacity             = 1;\n\n      this.stroke              = false;\n      this.strokeColor         = PConstants.ALPHA_MASK;\n      this.strokeWeight        = 1;\n      this.strokeCap           = PConstants.SQUARE;  // BUTT in svg spec\n      this.strokeJoin          = PConstants.MITER;\n      this.strokeGradient      = null;\n      this.strokeGradientPaint = null;\n      this.strokeName          = null;\n      this.strokeOpacity       = 1;\n\n      this.fill                = true;\n      this.fillColor           = PConstants.ALPHA_MASK;\n      this.fillGradient        = null;\n      this.fillGradientPaint   = null;\n      this.fillName            = null;\n      this.fillOpacity         = 1;\n\n      if (this.element.getName() !== \"svg\") {\n        throw(\"root is not <svg>, it's <\" + this.element.getName() + \">\");\n      }\n    }\n    else if (arguments.length === 2) {\n      if (typeof arguments[1] === 'string') {\n        if (arguments[1].indexOf(\".svg\") > -1) { //its a filename\n          this.element = new XMLElement(true, arguments[1]);\n          // set values to their defaults according to the SVG spec\n          this.vertexCodes         = [];\n          this.vertices            = [];\n          this.opacity             = 1;\n\n          this.stroke              = false;\n          this.strokeColor         = PConstants.ALPHA_MASK;\n          this.strokeWeight        = 1;\n          this.strokeCap           = PConstants.SQUARE;  // BUTT in svg spec\n          this.strokeJoin          = PConstants.MITER;\n          this.strokeGradient      = \"\";\n          this.strokeGradientPaint = \"\";\n          this.strokeName          = \"\";\n          this.strokeOpacity       = 1;\n\n          this.fill                = true;\n          this.fillColor           = PConstants.ALPHA_MASK;\n          this.fillGradient        = null;\n          this.fillGradientPaint   = null;\n          this.fillOpacity         = 1;\n\n        }\n      } else { // XMLElement\n        if (arguments[0]) { // PShapeSVG\n          this.element             = arguments[1];\n          this.vertexCodes         = arguments[0].vertexCodes.slice();\n          this.vertices            = arguments[0].vertices.slice();\n\n          this.stroke              = arguments[0].stroke;\n          this.strokeColor         = arguments[0].strokeColor;\n          this.strokeWeight        = arguments[0].strokeWeight;\n          this.strokeCap           = arguments[0].strokeCap;\n          this.strokeJoin          = arguments[0].strokeJoin;\n          this.strokeGradient      = arguments[0].strokeGradient;\n          this.strokeGradientPaint = arguments[0].strokeGradientPaint;\n          this.strokeName          = arguments[0].strokeName;\n\n          this.fill                = arguments[0].fill;\n          this.fillColor           = arguments[0].fillColor;\n          this.fillGradient        = arguments[0].fillGradient;\n          this.fillGradientPaint   = arguments[0].fillGradientPaint;\n          this.fillName            = arguments[0].fillName;\n          this.strokeOpacity       = arguments[0].strokeOpacity;\n          this.fillOpacity         = arguments[0].fillOpacity;\n          this.opacity             = arguments[0].opacity;\n        }\n      }\n    }\n\n    this.name      = this.element.getStringAttribute(\"id\");\n    var displayStr = this.element.getStringAttribute(\"display\", \"inline\");\n    this.visible   = displayStr !== \"none\";\n    var str = this.element.getAttribute(\"transform\");\n    if (str) {\n      this.matrix = this.parseMatrix(str);\n    }\n    // not proper parsing of the viewBox, but will cover us for cases where\n    // the width and height of the object is not specified\n    var viewBoxStr = this.element.getStringAttribute(\"viewBox\");\n    if ( viewBoxStr !== null ) {\n      var viewBox = viewBoxStr.split(\" \");\n      this.width  = viewBox[2];\n      this.height = viewBox[3];\n    }\n\n    // TODO if viewbox is not same as width/height, then use it to scale\n    // the original objects. for now, viewbox only used when width/height\n    // are empty values (which by the spec means w/h of \"100%\"\n    var unitWidth  = this.element.getStringAttribute(\"width\");\n    var unitHeight = this.element.getStringAttribute(\"height\");\n    if (unitWidth !== null) {\n      this.width  = this.parseUnitSize(unitWidth);\n      this.height = this.parseUnitSize(unitHeight);\n    } else {\n      if ((this.width === 0) || (this.height === 0)) {\n        // For the spec, the default is 100% and 100%. For purposes\n        // here, insert a dummy value because this is prolly just a\n        // font or something for which the w/h doesn't matter.\n        this.width  = 1;\n        this.height = 1;\n\n        //show warning\n        throw(\"The width and/or height is not \" +\n              \"readable in the <svg> tag of this file.\");\n      }\n    }\n    this.parseColors(this.element);\n    this.parseChildren(this.element);\n\n  };\n  /**\n   * PShapeSVG methods\n   * missing: getChild(), print(), parseStyleAttributes(), styles() - deals with strokeGradient and fillGradient\n   */\n  PShapeSVG.prototype = new PShape();\n  /**\n   * @member PShapeSVG\n   * The parseMatrix() function parses the specified SVG matrix into a PMatrix2D. Note that PMatrix2D\n   * is rotated relative to the SVG definition, so parameters are rearranged\n   * here. More about the transformation matrices in\n   * <a href=\"http://www.w3.org/TR/SVG/coords.html#TransformAttribute\">this section</a>\n   * of the SVG documentation.\n   *\n   * @param {String} str text of the matrix param.\n   *\n   * @return {PMatrix2D} a PMatrix2D\n   */\n  PShapeSVG.prototype.parseMatrix = (function() {\n    function getCoords(s) {\n      var m = [];\n      s.replace(/\\((.*?)\\)/, (function() {\n        return function(all, params) {\n          // get the coordinates that can be separated by spaces or a comma\n          m = params.replace(/,+/g, \" \").split(/\\s+/);\n        };\n      }()));\n      return m;\n    }\n\n    return function(str) {\n      this.checkMatrix(2);\n      var pieces = [];\n      str.replace(/\\s*(\\w+)\\((.*?)\\)/g, function(all) {\n        // get a list of transform definitions\n        pieces.push(CommonFunctions.trim(all));\n      });\n      if (pieces.length === 0) {\n        return null;\n      }\n\n      for (var i = 0, j = pieces.length; i < j; i++) {\n        var m = getCoords(pieces[i]);\n\n        if (pieces[i].indexOf(\"matrix\") !== -1) {\n          this.matrix.set(m[0], m[2], m[4], m[1], m[3], m[5]);\n        } else if (pieces[i].indexOf(\"translate\") !== -1) {\n          var tx = m[0];\n          var ty = (m.length === 2) ? m[1] : 0;\n          this.matrix.translate(tx,ty);\n        } else if (pieces[i].indexOf(\"scale\") !== -1) {\n          var sx = m[0];\n          var sy = (m.length === 2) ? m[1] : m[0];\n          this.matrix.scale(sx,sy);\n        } else if (pieces[i].indexOf(\"rotate\") !== -1) {\n          var angle = m[0];\n          if (m.length === 1) {\n            this.matrix.rotate(CommonFunctions.radians(angle));\n          } else if (m.length === 3) {\n            this.matrix.translate(m[1], m[2]);\n            this.matrix.rotate(CommonFunctions.radians(m[0]));\n            this.matrix.translate(-m[1], -m[2]);\n          }\n        } else if (pieces[i].indexOf(\"skewX\") !== -1) {\n          this.matrix.skewX(parseFloat(m[0]));\n        } else if (pieces[i].indexOf(\"skewY\") !== -1) {\n          this.matrix.skewY(m[0]);\n        } else if (pieces[i].indexOf(\"shearX\") !== -1) {\n          this.matrix.shearX(m[0]);\n        } else if (pieces[i].indexOf(\"shearY\") !== -1) {\n          this.matrix.shearY(m[0]);\n        }\n      }\n      return this.matrix;\n    };\n  }());\n\n  /**\n   * @member PShapeSVG\n   * The parseChildren() function parses the specified XMLElement\n   *\n   * @param {XMLElement}element the XMLElement to parse\n   */\n  PShapeSVG.prototype.parseChildren = function(element) {\n    var newelement = element.getChildren();\n    var base = new PShape();\n    var i, j;\n    for (i = 0, j = newelement.length; i < j; i++) {\n      var kid = this.parseChild(newelement[i]);\n      if (kid) {\n        base.addChild(kid);\n      }\n    }\n    for (i = 0, j = base.children.length; i < j; i++) {\n      this.children.push(base.children[i]);\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * The getName() function returns the name\n   *\n   * @return {String} the name\n   */\n  PShapeSVG.prototype.getName = function() {\n    return this.name;\n  };\n  /**\n   * @member PShapeSVG\n   * The parseChild() function parses a child XML element.\n   *\n   * @param {XMLElement} elem the element to parse\n   *\n   * @return {PShape} the newly created PShape\n   */\n  PShapeSVG.prototype.parseChild = function( elem ) {\n    var name = elem.getName();\n    var shape;\n    if (name === \"g\") {\n      shape = new PShapeSVG(this, elem);\n    } else if (name === \"defs\") {\n      // generally this will contain gradient info, so may\n      // as well just throw it into a group element for parsing\n      shape = new PShapeSVG(this, elem);\n    } else if (name === \"line\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parseLine();\n    } else if (name === \"circle\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parseEllipse(true);\n    } else if (name === \"ellipse\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parseEllipse(false);\n    } else if (name === \"rect\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parseRect();\n    } else if (name === \"polygon\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parsePoly(true);\n    } else if (name === \"polyline\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parsePoly(false);\n    } else if (name === \"path\") {\n      shape = new PShapeSVG(this, elem);\n      shape.parsePath();\n    } else if (name === \"radialGradient\") {\n      //return new RadialGradient(this, elem);\n      unimplemented('PShapeSVG.prototype.parseChild, name = radialGradient');\n    } else if (name === \"linearGradient\") {\n      //return new LinearGradient(this, elem);\n      unimplemented('PShapeSVG.prototype.parseChild, name = linearGradient');\n    } else if (name === \"text\") {\n      unimplemented('PShapeSVG.prototype.parseChild, name = text');\n    } else if (name === \"filter\") {\n      unimplemented('PShapeSVG.prototype.parseChild, name = filter');\n    } else if (name === \"mask\") {\n      unimplemented('PShapeSVG.prototype.parseChild, name = mask');\n    } else {\n      // ignoring\n    }\n    return shape;\n  };\n  /**\n   * @member PShapeSVG\n   * The parsePath() function parses the <path> element of the svg file\n   * A path is defined by including a path element which contains a d=\"(path data)\" attribute, where the d attribute contains\n   * the moveto, line, curve (both cubic and quadratic Beziers), arc and closepath instructions.\n   **/\n  PShapeSVG.prototype.parsePath = function() {\n    this.family = PConstants.PATH;\n    this.kind = 0;\n    var pathDataChars = [];\n    var c;\n    //change multiple spaces and commas to single space\n    var pathData = CommonFunctions.trim(this.element.getStringAttribute(\"d\").replace(/[\\s,]+/g,' '));\n    if (pathData === null) {\n      return;\n    }\n    pathData = pathData.split('');\n    var cx     = 0,\n        cy     = 0,\n        ctrlX  = 0,\n        ctrlY  = 0,\n        ctrlX1 = 0,\n        ctrlX2 = 0,\n        ctrlY1 = 0,\n        ctrlY2 = 0,\n        endX   = 0,\n        endY   = 0,\n        ppx    = 0,\n        ppy    = 0,\n        px     = 0,\n        py     = 0,\n        i      = 0,\n        valOf  = 0;\n    var str = \"\";\n    var tmpArray = [];\n    var flag = false;\n    var lastInstruction;\n    var command;\n    var j, k;\n    while (i< pathData.length) {\n      valOf = pathData[i].charCodeAt(0);\n      if ((valOf >= 65 && valOf <= 90) || (valOf >= 97 && valOf <= 122)) {\n        // if it's a letter\n        // populate the tmpArray with coordinates\n        j = i;\n        i++;\n        if (i < pathData.length) { // don't go over boundary of array\n          tmpArray = [];\n          valOf = pathData[i].charCodeAt(0);\n          while (!((valOf >= 65 && valOf <= 90) ||\n                   (valOf >= 97 && valOf <= 100) ||\n                   (valOf >= 102 && valOf <= 122)) && flag === false) { // if its NOT a letter\n            if (valOf === 32) { //if its a space and the str isn't empty\n              // sometimes you get a space after the letter\n              if (str !== \"\") {\n                tmpArray.push(parseFloat(str));\n                str = \"\";\n              }\n              i++;\n            } else if (valOf === 45) { //if it's a -\n              // allow for 'e' notation in numbers, e.g. 2.10e-9\n              if (pathData[i-1].charCodeAt(0) === 101) {\n                str += pathData[i].toString();\n                i++;\n              } else {\n                // sometimes no space separator after (ex: 104.535-16.322)\n                if (str !== \"\") {\n                  tmpArray.push(parseFloat(str));\n                }\n                str = pathData[i].toString();\n                i++;\n              }\n            } else {\n              str += pathData[i].toString();\n              i++;\n            }\n            if (i === pathData.length) { // don't go over boundary of array\n              flag = true;\n            } else {\n              valOf = pathData[i].charCodeAt(0);\n            }\n          }\n        }\n        if (str !== \"\") {\n          tmpArray.push(parseFloat(str));\n          str = \"\";\n        }\n        command = pathData[j];\n        valOf = command.charCodeAt(0);\n        if (valOf === 77) {  // M - move to (absolute)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            cx = tmpArray[0];\n            cy = tmpArray[1];\n            this.parsePathMoveto(cx, cy);\n            if (tmpArray.length > 2) {\n              for (j = 2, k = tmpArray.length; j < k; j+=2) {\n                // absolute line to\n                cx = tmpArray[j];\n                cy = tmpArray[j+1];\n                this.parsePathLineto(cx,cy);\n              }\n            }\n          }\n        } else if (valOf === 109) {  // m - move to (relative)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            cx += tmpArray[0];\n            cy += tmpArray[1];\n            this.parsePathMoveto(cx,cy);\n            if (tmpArray.length > 2) {\n              for (j = 2, k = tmpArray.length; j < k; j+=2) {\n                // relative line to\n                cx += tmpArray[j];\n                cy += tmpArray[j + 1];\n                this.parsePathLineto(cx,cy);\n              }\n            }\n          }\n        } else if (valOf === 76) { // L - lineto (absolute)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=2) {\n              cx = tmpArray[j];\n              cy = tmpArray[j + 1];\n              this.parsePathLineto(cx,cy);\n            }\n          }\n        } else if (valOf === 108) { // l - lineto (relative)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=2) {\n              cx += tmpArray[j];\n              cy += tmpArray[j+1];\n              this.parsePathLineto(cx,cy);\n            }\n          }\n        } else if (valOf === 72) { // H - horizontal lineto (absolute)\n          for (j = 0, k = tmpArray.length; j < k; j++) {\n            // multiple x co-ordinates can be provided\n            cx = tmpArray[j];\n            this.parsePathLineto(cx, cy);\n          }\n        } else if (valOf === 104) { // h - horizontal lineto (relative)\n          for (j = 0, k = tmpArray.length; j < k; j++) {\n            // multiple x co-ordinates can be provided\n            cx += tmpArray[j];\n            this.parsePathLineto(cx, cy);\n          }\n        } else if (valOf === 86) { // V - vertical lineto (absolute)\n          for (j = 0, k = tmpArray.length; j < k; j++) {\n            // multiple y co-ordinates can be provided\n            cy = tmpArray[j];\n            this.parsePathLineto(cx, cy);\n          }\n        } else if (valOf === 118) { // v - vertical lineto (relative)\n          for (j = 0, k = tmpArray.length; j < k; j++) {\n            // multiple y co-ordinates can be provided\n            cy += tmpArray[j];\n            this.parsePathLineto(cx, cy);\n          }\n        } else if (valOf === 67) { // C - curve to (absolute)\n          if (tmpArray.length >= 6 && tmpArray.length % 6 === 0) {\n            // need one+ multiples of 6 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=6) {\n              ctrlX1 = tmpArray[j];\n              ctrlY1 = tmpArray[j + 1];\n              ctrlX2 = tmpArray[j + 2];\n              ctrlY2 = tmpArray[j + 3];\n              endX   = tmpArray[j + 4];\n              endY   = tmpArray[j + 5];\n              this.parsePathCurveto(ctrlX1,\n                                    ctrlY1,\n                                    ctrlX2,\n                                    ctrlY2,\n                                    endX,\n                                    endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 99) { // c - curve to (relative)\n          if (tmpArray.length >= 6 && tmpArray.length % 6 === 0) {\n            // need one+ multiples of 6 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=6) {\n              ctrlX1 = cx + tmpArray[j];\n              ctrlY1 = cy + tmpArray[j + 1];\n              ctrlX2 = cx + tmpArray[j + 2];\n              ctrlY2 = cy + tmpArray[j + 3];\n              endX   = cx + tmpArray[j + 4];\n              endY   = cy + tmpArray[j + 5];\n              this.parsePathCurveto(ctrlX1,\n                                    ctrlY1,\n                                    ctrlX2,\n                                    ctrlY2,\n                                    endX,\n                                    endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 83) { // S - curve to shorthand (absolute)\n          if (tmpArray.length >= 4 && tmpArray.length % 4 === 0) {\n            // need one+ multiples of 4 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=4) {\n              if (lastInstruction.toLowerCase() ===  \"c\" ||\n                  lastInstruction.toLowerCase() ===  \"s\") {\n                ppx    = this.vertices[ this.vertices.length-2 ][0];\n                ppy    = this.vertices[ this.vertices.length-2 ][1];\n                px     = this.vertices[ this.vertices.length-1 ][0];\n                py     = this.vertices[ this.vertices.length-1 ][1];\n                ctrlX1 = px + (px - ppx);\n                ctrlY1 = py + (py - ppy);\n              } else {\n                //If there is no previous curve,\n                //the current point will be used as the first control point.\n                ctrlX1 = this.vertices[this.vertices.length-1][0];\n                ctrlY1 = this.vertices[this.vertices.length-1][1];\n              }\n              ctrlX2 = tmpArray[j];\n              ctrlY2 = tmpArray[j + 1];\n              endX   = tmpArray[j + 2];\n              endY   = tmpArray[j + 3];\n              this.parsePathCurveto(ctrlX1,\n                                    ctrlY1,\n                                    ctrlX2,\n                                    ctrlY2,\n                                    endX,\n                                    endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 115) { // s - curve to shorthand (relative)\n          if (tmpArray.length >= 4 && tmpArray.length % 4 === 0) {\n            // need one+ multiples of 4 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=4) {\n              if (lastInstruction.toLowerCase() ===  \"c\" ||\n                  lastInstruction.toLowerCase() ===  \"s\") {\n                ppx    = this.vertices[this.vertices.length-2][0];\n                ppy    = this.vertices[this.vertices.length-2][1];\n                px     = this.vertices[this.vertices.length-1][0];\n                py     = this.vertices[this.vertices.length-1][1];\n                ctrlX1 = px + (px - ppx);\n                ctrlY1 = py + (py - ppy);\n              } else {\n                //If there is no previous curve,\n                //the current point will be used as the first control point.\n                ctrlX1 = this.vertices[this.vertices.length-1][0];\n                ctrlY1 = this.vertices[this.vertices.length-1][1];\n              }\n              ctrlX2 = cx + tmpArray[j];\n              ctrlY2 = cy + tmpArray[j + 1];\n              endX   = cx + tmpArray[j + 2];\n              endY   = cy + tmpArray[j + 3];\n              this.parsePathCurveto(ctrlX1,\n                                    ctrlY1,\n                                    ctrlX2,\n                                    ctrlY2,\n                                    endX,\n                                    endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 81) { // Q - quadratic curve to (absolute)\n          if (tmpArray.length >= 4 && tmpArray.length % 4 === 0) {\n            // need one+ multiples of 4 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=4) {\n              ctrlX = tmpArray[j];\n              ctrlY = tmpArray[j + 1];\n              endX  = tmpArray[j + 2];\n              endY  = tmpArray[j + 3];\n              this.parsePathQuadto(cx, cy, ctrlX, ctrlY, endX, endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 113) { // q - quadratic curve to (relative)\n          if (tmpArray.length >= 4 && tmpArray.length % 4 === 0) {\n            // need one+ multiples of 4 co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=4) {\n              ctrlX = cx + tmpArray[j];\n              ctrlY = cy + tmpArray[j + 1];\n              endX  = cx + tmpArray[j + 2];\n              endY  = cy + tmpArray[j + 3];\n              this.parsePathQuadto(cx, cy, ctrlX, ctrlY, endX, endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 84) {\n          // T - quadratic curve to shorthand (absolute)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=2) {\n              if (lastInstruction.toLowerCase() ===  \"q\" ||\n                  lastInstruction.toLowerCase() ===  \"t\") {\n                ppx   = this.vertices[this.vertices.length-2][0];\n                ppy   = this.vertices[this.vertices.length-2][1];\n                px    = this.vertices[this.vertices.length-1][0];\n                py    = this.vertices[this.vertices.length-1][1];\n                ctrlX = px + (px - ppx);\n                ctrlY = py + (py - ppy);\n              } else {\n                // If there is no previous command or if the previous command\n                // was not a Q, q, T or t, assume the control point is\n                // coincident with the current point.\n                ctrlX = cx;\n                ctrlY = cy;\n              }\n              endX  = tmpArray[j];\n              endY  = tmpArray[j + 1];\n              this.parsePathQuadto(cx, cy, ctrlX, ctrlY, endX, endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 116) {\n          // t - quadratic curve to shorthand (relative)\n          if (tmpArray.length >= 2 && tmpArray.length % 2 === 0) {\n            // need one+ pairs of co-ordinates\n            for (j = 0, k = tmpArray.length; j < k; j+=2) {\n              if (lastInstruction.toLowerCase() ===  \"q\" ||\n                  lastInstruction.toLowerCase() ===  \"t\") {\n                ppx   = this.vertices[this.vertices.length-2][0];\n                ppy   = this.vertices[this.vertices.length-2][1];\n                px    = this.vertices[this.vertices.length-1][0];\n                py    = this.vertices[this.vertices.length-1][1];\n                ctrlX = px + (px - ppx);\n                ctrlY = py + (py - ppy);\n              } else {\n                // If there is no previous command or if the previous command\n                // was not a Q, q, T or t, assume the control point is\n                // coincident with the current point.\n                ctrlX = cx;\n                ctrlY = cy;\n              }\n              endX  = cx + tmpArray[j];\n              endY  = cy + tmpArray[j + 1];\n              this.parsePathQuadto(cx, cy, ctrlX, ctrlY, endX, endY);\n              cx = endX;\n              cy = endY;\n            }\n          }\n        } else if (valOf === 90 || valOf === 122) { // Z or z (these do the same thing)\n          this.close = true;\n        }\n        lastInstruction = command.toString();\n      } else { i++;}\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parsePath() helper function\n   *\n   * @see PShapeSVG#parsePath\n   */\n  PShapeSVG.prototype.parsePathQuadto = function(x1, y1, cx, cy, x2, y2) {\n    if (this.vertices.length > 0) {\n      this.parsePathCode(PConstants.BEZIER_VERTEX);\n      // x1/y1 already covered by last moveto, lineto, or curveto\n      this.parsePathVertex(x1 + ((cx-x1)*2/3), y1 + ((cy-y1)*2/3));\n      this.parsePathVertex(x2 + ((cx-x2)*2/3), y2 + ((cy-y2)*2/3));\n      this.parsePathVertex(x2, y2);\n    } else {\n      throw (\"Path must start with M/m\");\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parsePath() helper function\n   *\n   * @see PShapeSVG#parsePath\n   */\n  PShapeSVG.prototype.parsePathCurveto = function(x1,  y1, x2, y2, x3, y3) {\n    if (this.vertices.length > 0) {\n      this.parsePathCode(PConstants.BEZIER_VERTEX );\n      this.parsePathVertex(x1, y1);\n      this.parsePathVertex(x2, y2);\n      this.parsePathVertex(x3, y3);\n    } else {\n      throw (\"Path must start with M/m\");\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parsePath() helper function\n   *\n   * @see PShapeSVG#parsePath\n   */\n  PShapeSVG.prototype.parsePathLineto = function(px, py) {\n    if (this.vertices.length > 0) {\n      this.parsePathCode(PConstants.VERTEX);\n      this.parsePathVertex(px, py);\n      // add property to distinguish between curContext.moveTo\n      // or curContext.lineTo\n      this.vertices[this.vertices.length-1].moveTo = false;\n    } else {\n      throw (\"Path must start with M/m\");\n    }\n  };\n\n  PShapeSVG.prototype.parsePathMoveto = function(px, py) {\n    if (this.vertices.length > 0) {\n      this.parsePathCode(PConstants.BREAK);\n    }\n    this.parsePathCode(PConstants.VERTEX);\n    this.parsePathVertex(px, py);\n    // add property to distinguish between curContext.moveTo\n    // or curContext.lineTo\n    this.vertices[this.vertices.length-1].moveTo = true;\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parsePath() helper function\n   *\n   * @see PShapeSVG#parsePath\n   */\n  PShapeSVG.prototype.parsePathVertex = function(x,  y) {\n    var verts = [];\n    verts[0]  = x;\n    verts[1]  = y;\n    this.vertices.push(verts);\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parsePath() helper function\n   *\n   * @see PShapeSVG#parsePath\n   */\n  PShapeSVG.prototype.parsePathCode = function(what) {\n    this.vertexCodes.push(what);\n  };\n  /**\n   * @member PShapeSVG\n   * The parsePoly() function parses a polyline or polygon from an SVG file.\n   *\n   * @param {boolean}val true if shape is closed (polygon), false if not (polyline)\n   */\n  PShapeSVG.prototype.parsePoly = function(val) {\n    this.family    = PConstants.PATH;\n    this.close     = val;\n    var pointsAttr = CommonFunctions.trim(this.element.getStringAttribute(\"points\").replace(/[,\\s]+/g,' '));\n    if (pointsAttr !== null) {\n      //split into array\n      var pointsBuffer = pointsAttr.split(\" \");\n      if (pointsBuffer.length % 2 === 0) {\n        for (var i = 0, j = pointsBuffer.length; i < j; i++) {\n          var verts = [];\n          verts[0]  = pointsBuffer[i];\n          verts[1]  = pointsBuffer[++i];\n          this.vertices.push(verts);\n        }\n      } else {\n        throw(\"Error parsing polygon points: odd number of coordinates provided\");\n      }\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * The parseRect() function parses a rect from an SVG file.\n   */\n  PShapeSVG.prototype.parseRect = function() {\n    this.kind      = PConstants.RECT;\n    this.family    = PConstants.PRIMITIVE;\n    this.params    = [];\n    this.params[0] = this.element.getFloatAttribute(\"x\");\n    this.params[1] = this.element.getFloatAttribute(\"y\");\n    this.params[2] = this.element.getFloatAttribute(\"width\");\n    this.params[3] = this.element.getFloatAttribute(\"height\");\n    if (this.params[2] < 0 || this.params[3] < 0) {\n      throw(\"svg error: negative width or height found while parsing <rect>\");\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * The parseEllipse() function handles parsing ellipse and circle tags.\n   *\n   * @param {boolean}val true if this is a circle and not an ellipse\n   */\n  PShapeSVG.prototype.parseEllipse = function(val) {\n    this.kind   = PConstants.ELLIPSE;\n    this.family = PConstants.PRIMITIVE;\n    this.params = [];\n\n    this.params[0] = this.element.getFloatAttribute(\"cx\") | 0 ;\n    this.params[1] = this.element.getFloatAttribute(\"cy\") | 0;\n\n    var rx, ry;\n    if (val) {\n      rx = ry = this.element.getFloatAttribute(\"r\");\n      if (rx < 0) {\n        throw(\"svg error: negative radius found while parsing <circle>\");\n      }\n    } else {\n      rx = this.element.getFloatAttribute(\"rx\");\n      ry = this.element.getFloatAttribute(\"ry\");\n      if (rx < 0 || ry < 0) {\n        throw(\"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>\");\n      }\n    }\n    this.params[0] -= rx;\n    this.params[1] -= ry;\n\n    this.params[2] = rx*2;\n    this.params[3] = ry*2;\n  };\n  /**\n   * @member PShapeSVG\n   * The parseLine() function handles parsing line tags.\n   *\n   * @param {boolean}val true if this is a circle and not an ellipse\n   */\n  PShapeSVG.prototype.parseLine = function() {\n    this.kind = PConstants.LINE;\n    this.family = PConstants.PRIMITIVE;\n    this.params = [];\n    this.params[0] = this.element.getFloatAttribute(\"x1\");\n    this.params[1] = this.element.getFloatAttribute(\"y1\");\n    this.params[2] = this.element.getFloatAttribute(\"x2\");\n    this.params[3] = this.element.getFloatAttribute(\"y2\");\n  };\n  /**\n   * @member PShapeSVG\n   * The parseColors() function handles parsing the opacity, strijem stroke-width, stroke-linejoin,stroke-linecap, fill, and style attributes\n   *\n   * @param {XMLElement}element the element of which attributes to parse\n   */\n  PShapeSVG.prototype.parseColors = function(element) {\n    if (element.hasAttribute(\"opacity\")) {\n      this.setOpacity(element.getAttribute(\"opacity\"));\n    }\n    if (element.hasAttribute(\"stroke\")) {\n      this.setStroke(element.getAttribute(\"stroke\"));\n    }\n    if (element.hasAttribute(\"stroke-width\")) {\n      // if NaN (i.e. if it's 'inherit') then default\n      // back to the inherit setting\n      this.setStrokeWeight(element.getAttribute(\"stroke-width\"));\n    }\n    if (element.hasAttribute(\"stroke-linejoin\") ) {\n      this.setStrokeJoin(element.getAttribute(\"stroke-linejoin\"));\n    }\n    if (element.hasAttribute(\"stroke-linecap\")) {\n      this.setStrokeCap(element.getStringAttribute(\"stroke-linecap\"));\n    }\n    // fill defaults to black (though stroke defaults to \"none\")\n    // http://www.w3.org/TR/SVG/painting.html#FillProperties\n    if (element.hasAttribute(\"fill\")) {\n      this.setFill(element.getStringAttribute(\"fill\"));\n    }\n    if (element.hasAttribute(\"style\")) {\n      var styleText   = element.getStringAttribute(\"style\");\n      var styleTokens = styleText.toString().split( \";\" );\n\n      for (var i = 0, j = styleTokens.length; i < j; i++) {\n        var tokens = CommonFunctions.trim(styleTokens[i].split( \":\" ));\n        if (tokens[0] === \"fill\") {\n            this.setFill(tokens[1]);\n        } else if (tokens[0] === \"fill-opacity\") {\n            this.setFillOpacity(tokens[1]);\n        } else if (tokens[0] === \"stroke\") {\n            this.setStroke(tokens[1]);\n        } else if (tokens[0] === \"stroke-width\") {\n            this.setStrokeWeight(tokens[1]);\n        } else if (tokens[0] === \"stroke-linecap\") {\n            this.setStrokeCap(tokens[1]);\n        } else if (tokens[0] === \"stroke-linejoin\") {\n            this.setStrokeJoin(tokens[1]);\n        } else if (tokens[0] === \"stroke-opacity\") {\n            this.setStrokeOpacity(tokens[1]);\n        } else if (tokens[0] === \"opacity\") {\n            this.setOpacity(tokens[1]);\n        } // Other attributes are not yet implemented\n      }\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} opacityText the value of fillOpacity\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setFillOpacity = function(opacityText) {\n    this.fillOpacity = parseFloat(opacityText);\n    this.fillColor   = this.fillOpacity * 255  << 24 |\n                       this.fillColor & 0xFFFFFF;\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} fillText the value of fill\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setFill = function (fillText) {\n    var opacityMask = this.fillColor & 0xFF000000;\n    if (fillText === \"none\") {\n      this.fill = false;\n    } else if (fillText.indexOf(\"#\") === 0) {\n      this.fill      = true;\n      if (fillText.length === 4) {\n        // convert #00F to #0000FF\n        fillText = fillText.replace(/#(.)(.)(.)/,\"#$1$1$2$2$3$3\");\n      }\n      this.fillColor = opacityMask |\n                       (parseInt(fillText.substring(1), 16 )) &\n                       0xFFFFFF;\n    } else if (fillText.indexOf(\"rgb\") === 0) {\n      this.fill      = true;\n      this.fillColor = opacityMask | this.parseRGB(fillText);\n    } else if (fillText.indexOf(\"url(#\") === 0) {\n      this.fillName = fillText.substring(5, fillText.length - 1 );\n    } else if (colors[fillText]) {\n      this.fill      = true;\n      this.fillColor = opacityMask |\n                       (parseInt(colors[fillText].substring(1), 16)) &\n                       0xFFFFFF;\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} opacity the value of opacity\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setOpacity = function(opacity) {\n    this.strokeColor = parseFloat(opacity) * 255 << 24 |\n                       this.strokeColor & 0xFFFFFF;\n    this.fillColor   = parseFloat(opacity) * 255 << 24 |\n                       this.fillColor & 0xFFFFFF;\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} strokeText the value to set stroke to\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setStroke = function(strokeText) {\n    var opacityMask = this.strokeColor & 0xFF000000;\n    if (strokeText === \"none\") {\n      this.stroke = false;\n    } else if (strokeText.charAt( 0 ) === \"#\") {\n      this.stroke      = true;\n      if (strokeText.length === 4) {\n        // convert #00F to #0000FF\n        strokeText = strokeText.replace(/#(.)(.)(.)/,\"#$1$1$2$2$3$3\");\n      }\n      this.strokeColor = opacityMask |\n                         (parseInt( strokeText.substring( 1 ), 16 )) &\n                         0xFFFFFF;\n    } else if (strokeText.indexOf( \"rgb\" ) === 0 ) {\n      this.stroke = true;\n      this.strokeColor = opacityMask | this.parseRGB(strokeText);\n    } else if (strokeText.indexOf( \"url(#\" ) === 0) {\n      this.strokeName = strokeText.substring(5, strokeText.length - 1);\n    } else if (colors[strokeText]) {\n      this.stroke      = true;\n      this.strokeColor = opacityMask |\n                         (parseInt(colors[strokeText].substring(1), 16)) &\n                         0xFFFFFF;\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} weight the value to set strokeWeight to\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setStrokeWeight = function(weight) {\n    this.strokeWeight = this.parseUnitSize(weight);\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} linejoin the value to set strokeJoin to\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setStrokeJoin = function(linejoin) {\n    if (linejoin === \"miter\") {\n      this.strokeJoin = PConstants.MITER;\n\n    } else if (linejoin === \"round\") {\n      this.strokeJoin = PConstants.ROUND;\n\n    } else if (linejoin === \"bevel\") {\n      this.strokeJoin = PConstants.BEVEL;\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} linecap the value to set strokeCap to\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setStrokeCap = function (linecap) {\n    if (linecap === \"butt\") {\n      this.strokeCap = PConstants.SQUARE;\n\n    } else if (linecap === \"round\") {\n      this.strokeCap = PConstants.ROUND;\n\n    } else if (linecap === \"square\") {\n      this.strokeCap = PConstants.PROJECT;\n    }\n  };\n  /**\n   * @member PShapeSVG\n   * PShapeSVG.parseColors() helper function\n   *\n   * @param {String} opacityText the value to set stroke opacity to\n   *\n   * @see PShapeSVG#parseColors\n   */\n  PShapeSVG.prototype.setStrokeOpacity =  function (opacityText) {\n    this.strokeOpacity = parseFloat(opacityText);\n    this.strokeColor   = this.strokeOpacity * 255 << 24 |\n                         this.strokeColor &\n                         0xFFFFFF;\n  };\n  /**\n   * @member PShapeSVG\n   * The parseRGB() function parses an rbg() color string and returns a color int\n   *\n   * @param {String} color the color to parse in rbg() format\n   *\n   * @return {int} the equivalent color int\n   */\n  PShapeSVG.prototype.parseRGB = function(color) {\n    var sub    = color.substring(color.indexOf('(') + 1, color.indexOf(')'));\n    var values = sub.split(\", \");\n    return (values[0] << 16) | (values[1] << 8) | (values[2]);\n  };\n  /**\n   * @member PShapeSVG\n   * The parseUnitSize() function parse a size that may have a suffix for its units.\n   * Ignoring cases where this could also be a percentage.\n   * The <A HREF=\"http://www.w3.org/TR/SVG/coords.html#Units\">units</A> spec:\n   * <UL>\n   * <LI>\"1pt\" equals \"1.25px\" (and therefore 1.25 user units)\n   * <LI>\"1pc\" equals \"15px\" (and therefore 15 user units)\n   * <LI>\"1mm\" would be \"3.543307px\" (3.543307 user units)\n   * <LI>\"1cm\" equals \"35.43307px\" (and therefore 35.43307 user units)\n   * <LI>\"1in\" equals \"90px\" (and therefore 90 user units)\n   * </UL>\n   */\n  PShapeSVG.prototype.parseUnitSize = function (text) {\n    var len = text.length - 2;\n    if (len < 0) { return text; }\n    if (text.indexOf(\"pt\") === len) {\n      return parseFloat(text.substring(0, len)) * 1.25;\n    }\n    if (text.indexOf(\"pc\") === len) {\n      return parseFloat( text.substring( 0, len)) * 15;\n    }\n    if (text.indexOf(\"mm\") === len) {\n      return parseFloat( text.substring(0, len)) * 3.543307;\n    }\n    if (text.indexOf(\"cm\") === len) {\n      return parseFloat(text.substring(0, len)) * 35.43307;\n    }\n    if (text.indexOf(\"in\") === len) {\n      return parseFloat(text.substring(0, len)) * 90;\n    }\n    if (text.indexOf(\"px\") === len) {\n      return parseFloat(text.substring(0, len));\n    }\n    return parseFloat(text);\n  };\n\n  return PShapeSVG;\n};\n\n},{}],17:[function(require,module,exports){\nmodule.exports = function(options, undef) {\n  var PConstants = options.PConstants;\n\n  function PVector(x, y, z) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n  }\n\n  PVector.fromAngle = function(angle, v) {\n    if (v === undef || v === null) {\n      v = new PVector();\n    }\n    v.x = Math.cos(angle);\n    v.y = Math.sin(angle);\n    return v;\n  };\n\n  PVector.random2D = function(v) {\n    return PVector.fromAngle(Math.random() * PConstants.TWO_PI, v);\n  };\n\n  PVector.random3D = function(v) {\n    var angle = Math.random() * PConstants.TWO_PI;\n    var vz = Math.random() * 2 - 1;\n    var mult = Math.sqrt(1 - vz * vz);\n    var vx = mult * Math.cos(angle);\n    var vy = mult * Math.sin(angle);\n    if (v === undef || v === null) {\n      v = new PVector(vx, vy, vz);\n    } else {\n      v.set(vx, vy, vz);\n    }\n    return v;\n  };\n\n  PVector.dist = function(v1, v2) {\n    return v1.dist(v2);\n  };\n\n  PVector.dot = function(v1, v2) {\n    return v1.dot(v2);\n  };\n\n  PVector.cross = function(v1, v2) {\n    return v1.cross(v2);\n  };\n\n  PVector.sub = function(v1, v2) {\n    return new PVector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z);\n  };\n\n  PVector.angleBetween = function(v1, v2) {\n    return Math.acos(v1.dot(v2) / (v1.mag() * v2.mag()));\n  };\n\n  PVector.lerp = function(v1, v2, amt) {\n    // non-static lerp mutates object, but this version returns a new vector\n    var retval = new PVector(v1.x, v1.y, v1.z);\n    retval.lerp(v2, amt);\n    return retval;\n  };\n\n  // Common vector operations for PVector\n  PVector.prototype = {\n    set: function(v, y, z) {\n      if (arguments.length === 1) {\n        this.set(v.x || v[0] || 0,\n                 v.y || v[1] || 0,\n                 v.z || v[2] || 0);\n      } else {\n        this.x = v;\n        this.y = y;\n        this.z = z;\n      }\n    },\n    get: function() {\n      return new PVector(this.x, this.y, this.z);\n    },\n    mag: function() {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      return Math.sqrt(x * x + y * y + z * z);\n    },\n    magSq: function() {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      return (x * x + y * y + z * z);\n    },\n    setMag: function(v_or_len, len) {\n      if (len === undef) {\n        len = v_or_len;\n        this.normalize();\n        this.mult(len);\n      } else {\n        var v = v_or_len;\n        v.normalize();\n        v.mult(len);\n        return v;\n      }\n    },\n    add: function(v, y, z) {\n      if (arguments.length === 1) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n      } else {\n        this.x += v;\n        this.y += y;\n        this.z += z;\n      }\n    },\n    sub: function(v, y, z) {\n      if (arguments.length === 1) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n      } else {\n        this.x -= v;\n        this.y -= y;\n        this.z -= z;\n      }\n    },\n    mult: function(v) {\n      if (typeof v === 'number') {\n        this.x *= v;\n        this.y *= v;\n        this.z *= v;\n      } else {\n        this.x *= v.x;\n        this.y *= v.y;\n        this.z *= v.z;\n      }\n    },\n    div: function(v) {\n      if (typeof v === 'number') {\n        this.x /= v;\n        this.y /= v;\n        this.z /= v;\n      } else {\n        this.x /= v.x;\n        this.y /= v.y;\n        this.z /= v.z;\n      }\n    },\n    rotate: function(angle) {\n      var prev_x = this.x;\n      var c = Math.cos(angle);\n      var s = Math.sin(angle);\n      this.x = c * this.x - s * this.y;\n      this.y = s * prev_x + c * this.y;\n    },\n    dist: function(v) {\n      var dx = this.x - v.x,\n          dy = this.y - v.y,\n          dz = this.z - v.z;\n      return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    },\n    dot: function(v, y, z) {\n      if (arguments.length === 1) {\n        return (this.x * v.x + this.y * v.y + this.z * v.z);\n      }\n      return (this.x * v + this.y * y + this.z * z);\n    },\n    cross: function(v) {\n      var x = this.x,\n          y = this.y,\n          z = this.z;\n      return new PVector(y * v.z - v.y * z,\n                         z * v.x - v.z * x,\n                         x * v.y - v.x * y);\n    },\n    lerp: function(v_or_x, amt_or_y, z, amt) {\n      var lerp_val = function(start, stop, amt) {\n        return start + (stop - start) * amt;\n      };\n      var x, y;\n      if (arguments.length === 2) {\n        // given vector and amt\n        amt = amt_or_y;\n        x = v_or_x.x;\n        y = v_or_x.y;\n        z = v_or_x.z;\n      } else {\n        // given x, y, z and amt\n        x = v_or_x;\n        y = amt_or_y;\n      }\n      this.x = lerp_val(this.x, x, amt);\n      this.y = lerp_val(this.y, y, amt);\n      this.z = lerp_val(this.z, z, amt);\n    },\n    normalize: function() {\n      var m = this.mag();\n      if (m > 0) {\n        this.div(m);\n      }\n    },\n    limit: function(high) {\n      if (this.mag() > high) {\n        this.normalize();\n        this.mult(high);\n      }\n    },\n    heading: function() {\n      return (-Math.atan2(-this.y, this.x));\n    },\n    heading2D: function() {\n      return this.heading();\n    },\n    toString: function() {\n      return \"[\" + this.x + \", \" + this.y + \", \" + this.z + \"]\";\n    },\n    array: function() {\n      return [this.x, this.y, this.z];\n    }\n  };\n\n  function createPVectorMethod(method) {\n    return function(v1, v2) {\n      var v = v1.get();\n      v[method](v2);\n      return v;\n    };\n  }\n\n  for (var method in PVector.prototype) {\n    if (PVector.prototype.hasOwnProperty(method) && !PVector.hasOwnProperty(method)) {\n      PVector[method] = createPVectorMethod(method);\n    }\n  }\n\n  return PVector;\n};\n\n\n},{}],18:[function(require,module,exports){\n/**\n * XMLAttribute is an attribute of a XML element.\n *\n * @param {String} fname     the full name of the attribute\n * @param {String} n         the short name of the attribute\n * @param {String} namespace the namespace URI of the attribute\n * @param {String} v         the value of the attribute\n * @param {String }t         the type of the attribute\n *\n * @see XMLElement\n */\nmodule.exports = function() {\n\n  var XMLAttribute = function (fname, n, nameSpace, v, t){\n    this.fullName = fname || \"\";\n    this.name = n || \"\";\n    this.namespace = nameSpace || \"\";\n    this.value = v;\n    this.type = t;\n  };\n\n  XMLAttribute.prototype = {\n    /**\n     * @member XMLAttribute\n     * The getName() function returns the short name of the attribute\n     *\n     * @return {String} the short name of the attribute\n     */\n    getName: function() {\n      return this.name;\n    },\n    /**\n     * @member XMLAttribute\n     * The getFullName() function returns the full name of the attribute\n     *\n     * @return {String} the full name of the attribute\n     */\n    getFullName: function() {\n      return this.fullName;\n    },\n    /**\n     * @member XMLAttribute\n     * The getNamespace() function returns the namespace of the attribute\n     *\n     * @return {String} the namespace of the attribute\n     */\n    getNamespace: function() {\n      return this.namespace;\n    },\n    /**\n     * @member XMLAttribute\n     * The getValue() function returns the value of the attribute\n     *\n     * @return {String} the value of the attribute\n     */\n    getValue: function() {\n      return this.value;\n    },\n    /**\n     * @member XMLAttribute\n     * The getValue() function returns the type of the attribute\n     *\n     * @return {String} the type of the attribute\n     */\n    getType: function() {\n      return this.type;\n    },\n    /**\n     * @member XMLAttribute\n     * The setValue() function sets the value of the attribute\n     *\n     * @param {String} newval the new value\n     */\n    setValue: function(newval) {\n      this.value = newval;\n    }\n  };\n\n  return XMLAttribute;\n};\n\n},{}],19:[function(require,module,exports){\n/**\n * XMLElement is a representation of an XML object. The object is able to parse XML code\n *\n * @param {PApplet} parent   typically use \"this\"\n * @param {String} filename  name of the XML/SVG file to load\n * @param {String} xml       the xml/svg string\n * @param {String} fullname  the full name of the element\n * @param {String} namespace the namespace  of the URI\n * @param {String} systemID  the system ID of the XML data where the element starts\n * @param {Integer }lineNr   the line in the XML data where the element starts\n */\nmodule.exports = function(options, undef) {\n\n  var Browser = options.Browser,\n      ajax = Browser.ajax,\n      window = Browser.window,\n      XMLHttpRequest = window.XMLHttpRequest,\n      DOMParser = window.DOMParser,\n      XMLAttribute = options. XMLAttribute;\n\n  var XMLElement = function(selector, uri, sysid, line) {\n    this.attributes = [];\n    this.children   = [];\n    this.fullName   = null;\n    this.name       = null;\n    this.namespace  = \"\";\n    this.content = null;\n    this.parent    = null;\n    this.lineNr     = \"\";\n    this.systemID   = \"\";\n    this.type = \"ELEMENT\";\n\n    if (selector) {\n      if (typeof selector === \"string\") {\n        if (uri === undef && selector.indexOf(\"<\") > -1) {\n          // load XML from text string\n          this.parse(selector);\n        } else {\n          // XMLElement(fullname, namespace, sysid, line) format\n          this.fullName = selector;\n          this.namespace = uri;\n          this.systemId = sysid;\n          this.lineNr = line;\n        }\n      } else {\n        // XMLElement(this,file) format\n        this.parse(uri);\n      }\n    }\n  };\n  /**\n   * XMLElement methods\n   * missing: enumerateAttributeNames(), enumerateChildren(),\n   * NOTE: parse does not work when a url is passed in\n   */\n  XMLElement.prototype = {\n    /**\n     * @member XMLElement\n     * The parse() function retrieves the file via ajax() and uses DOMParser()\n     * parseFromString method to make an XML document\n     * @addon\n     *\n     * @param {String} filename name of the XML/SVG file to load\n     *\n     * @throws ExceptionType Error loading document\n     *\n     * @see XMLElement#parseChildrenRecursive\n     */\n    parse: function(textstring) {\n      var xmlDoc;\n      try {\n        var extension = textstring.substring(textstring.length-4);\n        if (extension === \".xml\" || extension === \".svg\") {\n          textstring = ajax(textstring);\n        }\n        xmlDoc = new DOMParser().parseFromString(textstring, \"text/xml\");\n        var elements = xmlDoc.documentElement;\n        if (elements) {\n          this.parseChildrenRecursive(null, elements);\n        } else {\n          throw (\"Error loading document\");\n        }\n        return this;\n      } catch(e) {\n        throw(e);\n      }\n    },\n    /**\n     * @member XMLElement\n     * Internal helper function for parse().\n     * Loops through the\n     * @addon\n     *\n     * @param {XMLElement} parent                      the parent node\n     * @param {XML document childNodes} elementpath    the remaining nodes that need parsing\n     *\n     * @return {XMLElement} the new element and its children elements\n     */\n    parseChildrenRecursive: function (parent, elementpath){\n      var xmlelement,\n        xmlattribute,\n        tmpattrib,\n        l, m,\n        child;\n      if (!parent) { // this element is the root element\n        this.fullName = elementpath.localName;\n        this.name     = elementpath.nodeName;\n        xmlelement    = this;\n      } else { // this element has a parent\n        xmlelement         = new XMLElement(elementpath.nodeName);\n        xmlelement.parent  = parent;\n      }\n\n      // if this is a text node, return a PCData element (parsed character data)\n      if (elementpath.nodeType === 3 && elementpath.textContent !== \"\") {\n        return this.createPCDataElement(elementpath.textContent);\n      }\n\n      // if this is a CDATA node, return a CData element (unparsed character data)\n      if (elementpath.nodeType === 4) {\n       return this.createCDataElement(elementpath.textContent);\n      }\n\n      // bind all attributes, if there are any\n      if (elementpath.attributes) {\n        for (l = 0, m = elementpath.attributes.length; l < m; l++) {\n          tmpattrib    = elementpath.attributes[l];\n          xmlattribute = new XMLAttribute(tmpattrib.getname,\n                                          tmpattrib.nodeName,\n                                          tmpattrib.namespaceURI,\n                                          tmpattrib.nodeValue,\n                                          tmpattrib.nodeType);\n          xmlelement.attributes.push(xmlattribute);\n        }\n      }\n\n      // bind all children, if there are any\n      if (elementpath.childNodes) {\n        for (l = 0, m = elementpath.childNodes.length; l < m; l++) {\n          var node = elementpath.childNodes[l];\n          child = xmlelement.parseChildrenRecursive(xmlelement, node);\n          if (child !== null) {\n            xmlelement.children.push(child);\n          }\n        }\n      }\n\n      return xmlelement;\n    },\n    /**\n     * @member XMLElement\n     * The createElement() function Creates an empty element\n     *\n     * @param {String} fullName   the full name of the element\n     * @param {String} namespace  the namespace URI\n     * @param {String} systemID   the system ID of the XML data where the element starts\n     * @param {int} lineNr    the line in the XML data where the element starts\n     */\n    createElement: function (fullname, namespaceuri, sysid, line) {\n      if (sysid === undef) {\n        return new XMLElement(fullname, namespaceuri);\n      }\n      return new XMLElement(fullname, namespaceuri, sysid, line);\n    },\n    /**\n     * @member XMLElement\n     * The createPCDataElement() function creates an element to be used for #PCDATA content.\n     * Because Processing discards whitespace TEXT nodes, this method will not build an element\n     * if the passed content is empty after trimming for whitespace.\n     *\n     * @return {XMLElement} new \"pcdata\" XMLElement, or null if content consists only of whitespace\n     */\n    createPCDataElement: function (content, isCDATA) {\n      if (content.replace(/^\\s+$/g,\"\") === \"\") {\n        return null;\n      }\n      var pcdata = new XMLElement();\n      pcdata.type = \"TEXT\";\n      pcdata.content = content;\n      return pcdata;\n    },\n    /**\n     * @member XMLElement\n     * The createCDataElement() function creates an element to be used for CDATA content.\n     *\n     * @return {XMLElement} new \"cdata\" XMLElement, or null if content consists only of whitespace\n     */\n    createCDataElement: function (content) {\n      var cdata = this.createPCDataElement(content);\n      if (cdata === null) {\n        return null;\n      }\n\n      cdata.type = \"CDATA\";\n      var htmlentities = {\"<\": \"&lt;\", \">\": \"&gt;\", \"'\": \"&apos;\", '\"': \"&quot;\"},\n          entity;\n      for (entity in htmlentities) {\n        if (!Object.hasOwnProperty(htmlentities,entity)) {\n          content = content.replace(new RegExp(entity, \"g\"), htmlentities[entity]);\n        }\n      }\n      cdata.cdata = content;\n      return cdata;\n    },\n    /**\n     * @member XMLElement\n     * The hasAttribute() function returns whether an attribute exists\n     *\n     * @param {String} name      name of the attribute\n     * @param {String} namespace the namespace URI of the attribute\n     *\n     * @return {boolean} true if the attribute exists\n     */\n    hasAttribute: function () {\n      if (arguments.length === 1) {\n        return this.getAttribute(arguments[0]) !== null;\n      }\n      if (arguments.length === 2) {\n        return this.getAttribute(arguments[0],arguments[1]) !== null;\n      }\n    },\n    /**\n     * @member XMLElement\n     * The equals() function checks to see if the XMLElement being passed in equals another XMLElement\n     *\n     * @param {XMLElement} rawElement the element to compare to\n     *\n     * @return {boolean} true if the element equals another element\n     */\n    equals: function(other) {\n      if (!(other instanceof XMLElement)) {\n        return false;\n      }\n      var i, j;\n      if (this.fullName !== other.fullName) { return false; }\n      if (this.attributes.length !== other.getAttributeCount()) { return false; }\n      // attributes may be ordered differently\n      if (this.attributes.length !== other.attributes.length) { return false; }\n      var attr_name, attr_ns, attr_value, attr_type, attr_other;\n      for (i = 0, j = this.attributes.length; i < j; i++) {\n        attr_name = this.attributes[i].getName();\n        attr_ns = this.attributes[i].getNamespace();\n        attr_other = other.findAttribute(attr_name, attr_ns);\n        if (attr_other === null) { return false; }\n        if (this.attributes[i].getValue() !== attr_other.getValue()) { return false; }\n        if (this.attributes[i].getType() !== attr_other.getType()) { return false; }\n      }\n      // children must be ordered identically\n      if (this.children.length !== other.getChildCount()) { return false; }\n      if (this.children.length>0) {\n        var child1, child2;\n        for (i = 0, j = this.children.length; i < j; i++) {\n          child1 = this.getChild(i);\n          child2 = other.getChild(i);\n          if (!child1.equals(child2)) { return false; }\n        }\n        return true;\n      }\n      return (this.content === other.content);\n    },\n    /**\n     * @member XMLElement\n     * The getContent() function returns the content of an element. If there is no such content, null is returned\n     *\n     * @return {String} the (possibly null) content\n     */\n    getContent: function(){\n      if (this.type === \"TEXT\" || this.type === \"CDATA\") {\n        return this.content;\n      }\n      var children = this.children;\n      if (children.length === 1 && (children[0].type === \"TEXT\" || children[0].type === \"CDATA\")) {\n        return children[0].content;\n      }\n      return null;\n    },\n    /**\n     * @member XMLElement\n     * The getAttribute() function returns the value of an attribute\n     *\n     * @param {String} name         the non-null full name of the attribute\n     * @param {String} namespace    the namespace URI, which may be null\n     * @param {String} defaultValue the default value of the attribute\n     *\n     * @return {String} the value, or defaultValue if the attribute does not exist\n     */\n    getAttribute: function (){\n      var attribute;\n      if (arguments.length === 2) {\n        attribute = this.findAttribute(arguments[0]);\n        if (attribute) {\n          return attribute.getValue();\n        }\n        return arguments[1];\n      } else if (arguments.length === 1) {\n        attribute = this.findAttribute(arguments[0]);\n        if (attribute) {\n          return attribute.getValue();\n        }\n        return null;\n      } else if (arguments.length === 3) {\n        attribute = this.findAttribute(arguments[0],arguments[1]);\n        if (attribute) {\n          return attribute.getValue();\n        }\n        return arguments[2];\n      }\n    },\n    /**\n     * @member XMLElement\n     * The getStringAttribute() function returns the string attribute of the element\n     * If the <b>defaultValue</b> parameter is used and the attribute doesn't exist, the <b>defaultValue</b> value is returned.\n     * When calling the function without the <b>defaultValue</b> parameter, if the attribute doesn't exist, the value 0 is returned.\n     *\n     * @param name         the name of the attribute\n     * @param defaultValue value returned if the attribute is not found\n     *\n     * @return {String} the value, or defaultValue if the attribute does not exist\n     */\n    getStringAttribute: function() {\n      if (arguments.length === 1) {\n        return this.getAttribute(arguments[0]);\n      }\n      if (arguments.length === 2) {\n        return this.getAttribute(arguments[0], arguments[1]);\n      }\n      return this.getAttribute(arguments[0], arguments[1],arguments[2]);\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic String\n     * attribute getter. This may only take one argument.\n     */\n    getString: function(attributeName) {\n      return this.getStringAttribute(attributeName);\n    },\n    /**\n     * @member XMLElement\n     * The getFloatAttribute() function returns the float attribute of the element.\n     * If the <b>defaultValue</b> parameter is used and the attribute doesn't exist, the <b>defaultValue</b> value is returned.\n     * When calling the function without the <b>defaultValue</b> parameter, if the attribute doesn't exist, the value 0 is returned.\n     *\n     * @param name         the name of the attribute\n     * @param defaultValue value returned if the attribute is not found\n     *\n     * @return {float} the value, or defaultValue if the attribute does not exist\n     */\n    getFloatAttribute: function() {\n      if (arguments.length === 1 ) {\n        return parseFloat(this.getAttribute(arguments[0], 0));\n      }\n      if (arguments.length === 2 ) {\n        return this.getAttribute(arguments[0], arguments[1]);\n      }\n      return this.getAttribute(arguments[0], arguments[1],arguments[2]);\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic float\n     * attribute getter. This may only take one argument.\n     */\n    getFloat: function(attributeName) {\n      return this.getFloatAttribute(attributeName);\n    },\n    /**\n     * @member XMLElement\n     * The getIntAttribute() function returns the integer attribute of the element.\n     * If the <b>defaultValue</b> parameter is used and the attribute doesn't exist, the <b>defaultValue</b> value is returned.\n     * When calling the function without the <b>defaultValue</b> parameter, if the attribute doesn't exist, the value 0 is returned.\n     *\n     * @param name         the name of the attribute\n     * @param defaultValue value returned if the attribute is not found\n     *\n     * @return {int} the value, or defaultValue if the attribute does not exist\n     */\n    getIntAttribute: function () {\n      if (arguments.length === 1) {\n        return this.getAttribute( arguments[0], 0 );\n      }\n      if (arguments.length === 2) {\n        return this.getAttribute(arguments[0], arguments[1]);\n      }\n      return this.getAttribute(arguments[0], arguments[1],arguments[2]);\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic int\n     * attribute getter. This may only take one argument.\n     */\n    getInt: function(attributeName) {\n      return this.getIntAttribute(attributeName);\n    },\n    /**\n     * @member XMLElement\n     * The hasChildren() function returns whether the element has children.\n     *\n     * @return {boolean} true if the element has children.\n     */\n    hasChildren: function () {\n      return this.children.length > 0 ;\n    },\n    /**\n     * @member XMLElement\n     * The addChild() function adds a child element\n     *\n     * @param {XMLElement} child the non-null child to add.\n     */\n    addChild: function (child) {\n      if (child !== null) {\n        child.parent = this;\n        this.children.push(child);\n      }\n    },\n    /**\n     * @member XMLElement\n     * The insertChild() function inserts a child element at the index provided\n     *\n     * @param {XMLElement} child  the non-null child to add.\n     * @param {int} index     where to put the child.\n     */\n    insertChild: function (child, index) {\n      if (child) {\n        if ((child.getLocalName() === null) && (! this.hasChildren())) {\n          var lastChild = this.children[this.children.length -1];\n          if (lastChild.getLocalName() === null) {\n              lastChild.setContent(lastChild.getContent() + child.getContent());\n              return;\n          }\n        }\n        child.parent = this;\n        this.children.splice(index,0,child);\n      }\n    },\n    /**\n     * @member XMLElement\n     * The getChild() returns the child XMLElement as specified by the <b>index</b> parameter.\n     * The value of the <b>index</b> parameter must be less than the total number of children to avoid going out of the array storing the child elements.\n     * When the <b>path</b> parameter is specified, then it will return all children that match that path. The path is a series of elements and sub-elements, separated by slashes.\n     *\n     * @param {int} index     where to put the child.\n     * @param {String} path       path to a particular element\n     *\n     * @return {XMLElement} the element\n     */\n    getChild: function (selector) {\n      if (typeof selector === \"number\") {\n        return this.children[selector];\n      }\n      if (selector.indexOf('/') !== -1) {\n        // path traversal is required\n        return this.getChildRecursive(selector.split(\"/\"), 0);\n      }\n      var kid, kidName;\n      for (var i = 0, j = this.getChildCount(); i < j; i++) {\n        kid = this.getChild(i);\n        kidName = kid.getName();\n        if (kidName !== null && kidName === selector) {\n            return kid;\n        }\n      }\n      return null;\n    },\n    /**\n     * @member XMLElement\n     * The getChildren() returns all of the children as an XMLElement array.\n     * When the <b>path</b> parameter is specified, then it will return all children that match that path.\n     * The path is a series of elements and sub-elements, separated by slashes.\n     *\n     * @param {String} path       element name or path/to/element\n     *\n     * @return {XMLElement} array of child elements that match\n     *\n     * @see XMLElement#getChildCount()\n     * @see XMLElement#getChild()\n     */\n    getChildren: function(){\n      if (arguments.length === 1) {\n        if (typeof arguments[0] === \"number\") {\n          return this.getChild( arguments[0]);\n        }\n        if (arguments[0].indexOf('/') !== -1) { // path was given\n          return this.getChildrenRecursive( arguments[0].split(\"/\"), 0);\n        }\n        var matches = [];\n        var kid, kidName;\n        for (var i = 0, j = this.getChildCount(); i < j; i++) {\n          kid = this.getChild(i);\n          kidName = kid.getName();\n          if (kidName !== null && kidName === arguments[0]) {\n            matches.push(kid);\n          }\n        }\n        return matches;\n      }\n      return this.children;\n    },\n    /**\n     * @member XMLElement\n     * The getChildCount() returns the number of children for the element.\n     *\n     * @return {int} the count\n     *\n     * @see XMLElement#getChild()\n     * @see XMLElement#getChildren()\n     */\n    getChildCount: function() {\n      return this.children.length;\n    },\n    /**\n     * @member XMLElement\n     * Internal helper function for getChild().\n     *\n     * @param {String[]} items   result of splitting the query on slashes\n     * @param {int} offset   where in the items[] array we're currently looking\n     *\n     * @return {XMLElement} matching element or null if no match\n     */\n    getChildRecursive: function (items, offset) {\n      // terminating clause: we are the requested candidate\n      if (offset === items.length) {\n        return this;\n      }\n      // continuation clause\n      var kid, kidName, matchName = items[offset];\n      for(var i = 0, j = this.getChildCount(); i < j; i++) {\n          kid = this.getChild(i);\n          kidName = kid.getName();\n          if (kidName !== null && kidName === matchName) {\n            return kid.getChildRecursive(items, offset+1);\n          }\n      }\n      return null;\n    },\n    /**\n     * @member XMLElement\n     * Internal helper function for getChildren().\n     *\n     * @param {String[]} items   result of splitting the query on slashes\n     * @param {int} offset   where in the items[] array we're currently looking\n     *\n     * @return {XMLElement[]} matching elements or empty array if no match\n     */\n    getChildrenRecursive: function (items, offset) {\n      if (offset === items.length-1) {\n        return this.getChildren(items[offset]);\n      }\n      var matches = this.getChildren(items[offset]);\n      var kidMatches = [];\n      for (var i = 0; i < matches.length; i++) {\n        kidMatches = kidMatches.concat(matches[i].getChildrenRecursive(items, offset+1));\n      }\n      return kidMatches;\n    },\n    /**\n     * @member XMLElement\n     * The isLeaf() function returns whether the element is a leaf element.\n     *\n     * @return {boolean} true if the element has no children.\n     */\n    isLeaf: function() {\n      return !this.hasChildren();\n    },\n    /**\n     * @member XMLElement\n     * The listChildren() function put the names of all children into an array. Same as looping through\n     * each child and calling getName() on each XMLElement.\n     *\n     * @return {String[]} a list of element names.\n     */\n    listChildren: function() {\n      var arr = [];\n      for (var i = 0, j = this.children.length; i < j; i++) {\n        arr.push( this.getChild(i).getName());\n      }\n      return arr;\n    },\n    /**\n     * @member XMLElement\n     * The removeAttribute() function removes an attribute\n     *\n     * @param {String} name        the non-null name of the attribute.\n     * @param {String} namespace   the namespace URI of the attribute, which may be null.\n     */\n    removeAttribute: function (name , namespace) {\n      this.namespace = namespace || \"\";\n      for (var i = 0, j = this.attributes.length; i < j; i++) {\n        if (this.attributes[i].getName() === name && this.attributes[i].getNamespace() === this.namespace) {\n          this.attributes.splice(i, 1);\n          break;\n        }\n      }\n    },\n    /**\n     * @member XMLElement\n     * The removeChild() removes a child element.\n     *\n     * @param {XMLElement} child      the the non-null child to be renoved\n     */\n    removeChild: function(child) {\n      if (child) {\n        for (var i = 0, j = this.children.length; i < j; i++) {\n          if (this.children[i].equals(child)) {\n            this.children.splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    /**\n     * @member XMLElement\n     * The removeChildAtIndex() removes the child located at a certain index\n     *\n     * @param {int} index      the index of the child, where the first child has index 0\n     */\n    removeChildAtIndex: function(index) {\n      if (this.children.length > index) { //make sure its not outofbounds\n        this.children.splice(index, 1);\n      }\n    },\n    /**\n     * @member XMLElement\n     * The findAttribute() function searches an attribute\n     *\n     * @param {String} name        fullName the non-null full name of the attribute\n     * @param {String} namespace   the name space, which may be null\n     *\n     * @return {XMLAttribute} the attribute, or null if the attribute does not exist.\n     */\n    findAttribute: function (name, namespace) {\n      this.namespace = namespace || \"\";\n      for (var i = 0, j = this.attributes.length; i < j; i++) {\n        if (this.attributes[i].getName() === name && this.attributes[i].getNamespace() === this.namespace) {\n           return this.attributes[i];\n        }\n      }\n      return null;\n    },\n    /**\n     * @member XMLElement\n     * The setAttribute() function sets an attribute.\n     *\n     * @param {String} name        the non-null full name of the attribute\n     * @param {String} namespace   the non-null value of the attribute\n     */\n    setAttribute: function() {\n      var attr;\n      if (arguments.length === 3) {\n        var index = arguments[0].indexOf(':');\n        var name  = arguments[0].substring(index + 1);\n        attr      = this.findAttribute(name, arguments[1]);\n        if (attr) {\n          attr.setValue(arguments[2]);\n        } else {\n          attr = new XMLAttribute(arguments[0], name, arguments[1], arguments[2], \"CDATA\");\n          this.attributes.push(attr);\n        }\n      } else {\n        attr = this.findAttribute(arguments[0]);\n        if (attr) {\n          attr.setValue(arguments[1]);\n        } else {\n          attr = new XMLAttribute(arguments[0], arguments[0], null, arguments[1], \"CDATA\");\n          this.attributes.push(attr);\n        }\n      }\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic String\n     * attribute setter. This must take two arguments.\n     */\n    setString: function(attribute, value) {\n      this.setAttribute(attribute, value);\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic int\n     * attribute setter. This must take two arguments.\n     */\n    setInt: function(attribute, value) {\n      this.setAttribute(attribute, value);\n    },\n    /**\n     * Processing 1.5 XML API wrapper for the generic float\n     * attribute setter. This must take two arguments.\n     */\n    setFloat: function(attribute, value) {\n      this.setAttribute(attribute, value);\n    },\n    /**\n     * @member XMLElement\n     * The setContent() function sets the #PCDATA content. It is an error to call this method with a\n     * non-null value if there are child objects.\n     *\n     * @param {String} content     the (possibly null) content\n     */\n    setContent: function(content) {\n      if (this.children.length > 0) {\n        Processing.debug(\"Tried to set content for XMLElement with children\"); }\n      this.content = content;\n    },\n    /**\n     * @member XMLElement\n     * The setName() function sets the full name. This method also sets the short name and clears the\n     * namespace URI.\n     *\n     * @param {String} name        the non-null name\n     * @param {String} namespace   the namespace URI, which may be null.\n     */\n    setName: function() {\n      if (arguments.length === 1) {\n        this.name      = arguments[0];\n        this.fullName  = arguments[0];\n        this.namespace = null;\n      } else {\n        var index = arguments[0].indexOf(':');\n        if ((arguments[1] === null) || (index < 0)) {\n            this.name = arguments[0];\n        } else {\n            this.name = arguments[0].substring(index + 1);\n        }\n        this.fullName  = arguments[0];\n        this.namespace = arguments[1];\n      }\n    },\n    /**\n     * @member XMLElement\n     * The getName() function returns the full name (i.e. the name including an eventual namespace\n     * prefix) of the element.\n     *\n     * @return {String} the name, or null if the element only contains #PCDATA.\n     */\n    getName: function() {\n      return this.fullName;\n    },\n    /**\n     * @member XMLElement\n     * The getLocalName() function returns the local name (i.e. the name excluding an eventual namespace\n     * prefix) of the element.\n     *\n     * @return {String} the name, or null if the element only contains #PCDATA.\n     */\n    getLocalName: function() {\n      return this.name;\n    },\n    /**\n     * @member XMLElement\n     * The getAttributeCount() function returns the number of attributes for the node\n     * that this XMLElement represents.\n     *\n     * @return {int} the number of attributes in this XMLElement\n     */\n    getAttributeCount: function() {\n      return this.attributes.length;\n    },\n    /**\n     * @member XMLElement\n     * The toString() function returns the XML definition of an XMLElement.\n     *\n     * @return {String} the XML definition of this XMLElement\n     */\n    toString: function() {\n      // shortcut for text and cdata nodes\n      if (this.type === \"TEXT\") {\n        return this.content;\n      }\n\n      if (this.type === \"CDATA\") {\n        return this.cdata;\n      }\n\n      // real XMLElements\n      var tagstring = this.fullName;\n      var xmlstring =  \"<\" + tagstring;\n      var a,c;\n\n      // serialize the attributes to XML string\n      for (a = 0; a<this.attributes.length; a++) {\n        var attr = this.attributes[a];\n        xmlstring += \" \"  + attr.getName() + \"=\" + '\"' + attr.getValue() + '\"';\n      }\n\n      // serialize all children to XML string\n      if (this.children.length === 0) {\n        if (this.content===\"\") {\n          xmlstring += \"/>\";\n        } else {\n          xmlstring += \">\" + this.content + \"</\"+tagstring+\">\";\n        }\n      } else {\n        xmlstring += \">\";\n        for (c = 0; c<this.children.length; c++) {\n          xmlstring += this.children[c].toString();\n        }\n        xmlstring += \"</\" + tagstring + \">\";\n      }\n      return xmlstring;\n     }\n  };\n\n  /**\n   * static Processing 1.5 XML API wrapper for the\n   * parse method. This may only take one argument.\n   */\n  XMLElement.parse = function(xmlstring) {\n    var element = new XMLElement();\n    element.parse(xmlstring);\n    return element;\n  };\n\n  return XMLElement;\n};\n\n},{}],20:[function(require,module,exports){\n/**\n * web colors, by name\n */\nmodule.exports = {\n    aliceblue:            \"#f0f8ff\",\n    antiquewhite:         \"#faebd7\",\n    aqua:                 \"#00ffff\",\n    aquamarine:           \"#7fffd4\",\n    azure:                \"#f0ffff\",\n    beige:                \"#f5f5dc\",\n    bisque:               \"#ffe4c4\",\n    black:                \"#000000\",\n    blanchedalmond:       \"#ffebcd\",\n    blue:                 \"#0000ff\",\n    blueviolet:           \"#8a2be2\",\n    brown:                \"#a52a2a\",\n    burlywood:            \"#deb887\",\n    cadetblue:            \"#5f9ea0\",\n    chartreuse:           \"#7fff00\",\n    chocolate:            \"#d2691e\",\n    coral:                \"#ff7f50\",\n    cornflowerblue:       \"#6495ed\",\n    cornsilk:             \"#fff8dc\",\n    crimson:              \"#dc143c\",\n    cyan:                 \"#00ffff\",\n    darkblue:             \"#00008b\",\n    darkcyan:             \"#008b8b\",\n    darkgoldenrod:        \"#b8860b\",\n    darkgray:             \"#a9a9a9\",\n    darkgreen:            \"#006400\",\n    darkkhaki:            \"#bdb76b\",\n    darkmagenta:          \"#8b008b\",\n    darkolivegreen:       \"#556b2f\",\n    darkorange:           \"#ff8c00\",\n    darkorchid:           \"#9932cc\",\n    darkred:              \"#8b0000\",\n    darksalmon:           \"#e9967a\",\n    darkseagreen:         \"#8fbc8f\",\n    darkslateblue:        \"#483d8b\",\n    darkslategray:        \"#2f4f4f\",\n    darkturquoise:        \"#00ced1\",\n    darkviolet:           \"#9400d3\",\n    deeppink:             \"#ff1493\",\n    deepskyblue:          \"#00bfff\",\n    dimgray:              \"#696969\",\n    dodgerblue:           \"#1e90ff\",\n    firebrick:            \"#b22222\",\n    floralwhite:          \"#fffaf0\",\n    forestgreen:          \"#228b22\",\n    fuchsia:              \"#ff00ff\",\n    gainsboro:            \"#dcdcdc\",\n    ghostwhite:           \"#f8f8ff\",\n    gold:                 \"#ffd700\",\n    goldenrod:            \"#daa520\",\n    gray:                 \"#808080\",\n    green:                \"#008000\",\n    greenyellow:          \"#adff2f\",\n    honeydew:             \"#f0fff0\",\n    hotpink:              \"#ff69b4\",\n    indianred:            \"#cd5c5c\",\n    indigo:               \"#4b0082\",\n    ivory:                \"#fffff0\",\n    khaki:                \"#f0e68c\",\n    lavender:             \"#e6e6fa\",\n    lavenderblush:        \"#fff0f5\",\n    lawngreen:            \"#7cfc00\",\n    lemonchiffon:         \"#fffacd\",\n    lightblue:            \"#add8e6\",\n    lightcoral:           \"#f08080\",\n    lightcyan:            \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgrey:            \"#d3d3d3\",\n    lightgreen:           \"#90ee90\",\n    lightpink:            \"#ffb6c1\",\n    lightsalmon:          \"#ffa07a\",\n    lightseagreen:        \"#20b2aa\",\n    lightskyblue:         \"#87cefa\",\n    lightslategray:       \"#778899\",\n    lightsteelblue:       \"#b0c4de\",\n    lightyellow:          \"#ffffe0\",\n    lime:                 \"#00ff00\",\n    limegreen:            \"#32cd32\",\n    linen:                \"#faf0e6\",\n    magenta:              \"#ff00ff\",\n    maroon:               \"#800000\",\n    mediumaquamarine:     \"#66cdaa\",\n    mediumblue:           \"#0000cd\",\n    mediumorchid:         \"#ba55d3\",\n    mediumpurple:         \"#9370d8\",\n    mediumseagreen:       \"#3cb371\",\n    mediumslateblue:      \"#7b68ee\",\n    mediumspringgreen:    \"#00fa9a\",\n    mediumturquoise:      \"#48d1cc\",\n    mediumvioletred:      \"#c71585\",\n    midnightblue:         \"#191970\",\n    mintcream:            \"#f5fffa\",\n    mistyrose:            \"#ffe4e1\",\n    moccasin:             \"#ffe4b5\",\n    navajowhite:          \"#ffdead\",\n    navy:                 \"#000080\",\n    oldlace:              \"#fdf5e6\",\n    olive:                \"#808000\",\n    olivedrab:            \"#6b8e23\",\n    orange:               \"#ffa500\",\n    orangered:            \"#ff4500\",\n    orchid:               \"#da70d6\",\n    palegoldenrod:        \"#eee8aa\",\n    palegreen:            \"#98fb98\",\n    paleturquoise:        \"#afeeee\",\n    palevioletred:        \"#d87093\",\n    papayawhip:           \"#ffefd5\",\n    peachpuff:            \"#ffdab9\",\n    peru:                 \"#cd853f\",\n    pink:                 \"#ffc0cb\",\n    plum:                 \"#dda0dd\",\n    powderblue:           \"#b0e0e6\",\n    purple:               \"#800080\",\n    red:                  \"#ff0000\",\n    rosybrown:            \"#bc8f8f\",\n    royalblue:            \"#4169e1\",\n    saddlebrown:          \"#8b4513\",\n    salmon:               \"#fa8072\",\n    sandybrown:           \"#f4a460\",\n    seagreen:             \"#2e8b57\",\n    seashell:             \"#fff5ee\",\n    sienna:               \"#a0522d\",\n    silver:               \"#c0c0c0\",\n    skyblue:              \"#87ceeb\",\n    slateblue:            \"#6a5acd\",\n    slategray:            \"#708090\",\n    snow:                 \"#fffafa\",\n    springgreen:          \"#00ff7f\",\n    steelblue:            \"#4682b4\",\n    tan:                  \"#d2b48c\",\n    teal:                 \"#008080\",\n    thistle:              \"#d8bfd8\",\n    tomato:               \"#ff6347\",\n    turquoise:            \"#40e0d0\",\n    violet:               \"#ee82ee\",\n    wheat:                \"#f5deb3\",\n    white:                \"#ffffff\",\n    whitesmoke:           \"#f5f5f5\",\n    yellow:               \"#ffff00\",\n    yellowgreen:          \"#9acd32\"\n  };\n\n},{}],21:[function(require,module,exports){\nmodule.exports = function(virtHashCode, virtEquals, undef) {\n\n  return function withProxyFunctions(p, removeFirstArgument) {\n    /**\n     * The contains(string) function returns true if the string passed in the parameter\n     * is a substring of this string. It returns false if the string passed\n     * in the parameter is not a substring of this string.\n     *\n     * @param {String} The string to look for in the current string\n     *\n     * @return {boolean} returns true if this string contains\n     * the string passed as parameter. returns false, otherwise.\n     *\n     */\n    p.__contains = function (subject, subStr) {\n      if (typeof subject !== \"string\") {\n        return subject.contains.apply(subject, removeFirstArgument(arguments));\n      }\n      //Parameter is not null AND\n      //The type of the parameter is the same as this object (string)\n      //The javascript function that finds a substring returns 0 or higher\n      return (\n        (subject !== null) &&\n        (subStr !== null) &&\n        (typeof subStr === \"string\") &&\n        (subject.indexOf(subStr) > -1)\n      );\n    };\n\n    /**\n     * The __replaceAll() function searches all matches between a substring (or regular expression) and a string,\n     * and replaces the matched substring with a new substring\n     *\n     * @param {String} subject    a substring\n     * @param {String} regex      a substring or a regular expression\n     * @param {String} replace    the string to replace the found value\n     *\n     * @return {String} returns result\n     *\n     * @see #match\n     */\n    p.__replaceAll = function(subject, regex, replacement) {\n      if (typeof subject !== \"string\") {\n        return subject.replaceAll.apply(subject, removeFirstArgument(arguments));\n      }\n\n      return subject.replace(new RegExp(regex, \"g\"), replacement);\n    };\n\n    /**\n     * The __replaceFirst() function searches first matche between a substring (or regular expression) and a string,\n     * and replaces the matched substring with a new substring\n     *\n     * @param {String} subject    a substring\n     * @param {String} regex      a substring or a regular expression\n     * @param {String} replace    the string to replace the found value\n     *\n     * @return {String} returns result\n     *\n     * @see #match\n     */\n    p.__replaceFirst = function(subject, regex, replacement) {\n      if (typeof subject !== \"string\") {\n        return subject.replaceFirst.apply(subject, removeFirstArgument(arguments));\n      }\n\n      return subject.replace(new RegExp(regex, \"\"), replacement);\n    };\n\n    /**\n     * The __replace() function searches all matches between a substring and a string,\n     * and replaces the matched substring with a new substring\n     *\n     * @param {String} subject         a substring\n     * @param {String} what         a substring to find\n     * @param {String} replacement    the string to replace the found value\n     *\n     * @return {String} returns result\n     */\n    p.__replace = function(subject, what, replacement) {\n      if (typeof subject !== \"string\") {\n        return subject.replace.apply(subject, removeFirstArgument(arguments));\n      }\n      if (what instanceof RegExp) {\n        return subject.replace(what, replacement);\n      }\n\n      if (typeof what !== \"string\") {\n        what = what.toString();\n      }\n      if (what === \"\") {\n        return subject;\n      }\n\n      var i = subject.indexOf(what);\n      if (i < 0) {\n        return subject;\n      }\n\n      var j = 0, result = \"\";\n      do {\n        result += subject.substring(j, i) + replacement;\n        j = i + what.length;\n      } while ( (i = subject.indexOf(what, j)) >= 0);\n      return result + subject.substring(j);\n    };\n\n    /**\n     * The __equals() function compares two strings (or objects) to see if they are the same.\n     * This method is necessary because it's not possible to compare strings using the equality operator (==).\n     * Returns true if the strings are the same and false if they are not.\n     *\n     * @param {String} subject  a string used for comparison\n     * @param {String} other  a string used for comparison with\n     *\n     * @return {boolean} true is the strings are the same false otherwise\n     */\n    p.__equals = function(subject, other) {\n      if (subject.equals instanceof Function) {\n        return subject.equals.apply(subject, removeFirstArgument(arguments));\n      }\n\n      return virtEquals(subject, other);\n    };\n\n    /**\n     * The __equalsIgnoreCase() function compares two strings to see if they are the same.\n     * Returns true if the strings are the same, either when forced to all lower case or\n     * all upper case.\n     *\n     * @param {String} subject  a string used for comparison\n     * @param {String} other  a string used for comparison with\n     *\n     * @return {boolean} true is the strings are the same, ignoring case. false otherwise\n     */\n    p.__equalsIgnoreCase = function(subject, other) {\n      if (typeof subject !== \"string\") {\n        return subject.equalsIgnoreCase.apply(subject, removeFirstArgument(arguments));\n      }\n\n      return subject.toLowerCase() === other.toLowerCase();\n    };\n\n    /**\n     * The __toCharArray() function splits the string into a char array.\n     *\n     * @param {String} subject The string\n     *\n     * @return {Char[]} a char array\n     */\n    p.__toCharArray = function(subject) {\n      if (typeof subject !== \"string\") {\n        return subject.toCharArray.apply(subject, removeFirstArgument(arguments));\n      }\n\n      var chars = [];\n      for (var i = 0, len = subject.length; i < len; ++i) {\n        chars[i] = new Char(subject.charAt(i));\n      }\n      return chars;\n    };\n\n    /**\n     * The __split() function splits a string using the regex delimiter\n     * specified. If limit is specified, the resultant array will have number\n     * of elements equal to or less than the limit.\n     *\n     * @param {String} subject string to be split\n     * @param {String} regexp  regex string used to split the subject\n     * @param {int}    limit   max number of tokens to be returned\n     *\n     * @return {String[]} an array of tokens from the split string\n     */\n    p.__split = function(subject, regex, limit) {\n      if (typeof subject !== \"string\") {\n        return subject.split.apply(subject, removeFirstArgument(arguments));\n      }\n\n      var pattern = new RegExp(regex);\n\n      // If limit is not specified, use JavaScript's built-in String.split.\n      if ((limit === undef) || (limit < 1)) {\n        return subject.split(pattern);\n      }\n\n      // If limit is specified, JavaScript's built-in String.split has a\n      // different behaviour than Java's. A Java-compatible implementation is\n      // provided here.\n      var result = [], currSubject = subject, pos;\n      while (((pos = currSubject.search(pattern)) !== -1) && (result.length < (limit - 1))) {\n        var match = pattern.exec(currSubject).toString();\n        result.push(currSubject.substring(0, pos));\n        currSubject = currSubject.substring(pos + match.length);\n      }\n      if ((pos !== -1) || (currSubject !== \"\")) {\n        result.push(currSubject);\n      }\n      return result;\n    };\n\n    /**\n     * The codePointAt() function returns the unicode value of the character at a given index of a string.\n     *\n     * @param  {int} idx         the index of the character\n     *\n     * @return {String} code     the String containing the unicode value of the character\n     */\n    p.__codePointAt = function(subject, idx) {\n      var code = subject.charCodeAt(idx),\n          hi,\n          low;\n      if (0xD800 <= code && code <= 0xDBFF) {\n        hi = code;\n        low = subject.charCodeAt(idx + 1);\n        return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;\n      }\n      return code;\n    };\n\n    /**\n     * The matches() function checks whether or not a string matches a given regular expression.\n     *\n     * @param {String} str      the String on which the match is tested\n     * @param {String} regexp   the regexp for which a match is tested\n     *\n     * @return {boolean} true if the string fits the regexp, false otherwise\n     */\n    p.__matches = function(str, regexp) {\n      return (new RegExp(regexp)).test(str);\n    };\n\n    /**\n     * The startsWith() function tests if a string starts with the specified prefix.  If the prefix\n     * is the empty String or equal to the subject String, startsWith() will also return true.\n     *\n     * @param {String} prefix   the String used to compare against the start of the subject String.\n     * @param {int}    toffset  (optional) an offset into the subject String where searching should begin.\n     *\n     * @return {boolean} true if the subject String starts with the prefix.\n     */\n    p.__startsWith = function(subject, prefix, toffset) {\n      if (typeof subject !== \"string\") {\n        return subject.startsWith.apply(subject, removeFirstArgument(arguments));\n      }\n\n      toffset = toffset || 0;\n      if (toffset < 0 || toffset > subject.length) {\n        return false;\n      }\n      return (prefix === '' || prefix === subject) ? true : (subject.indexOf(prefix) === toffset);\n    };\n\n    /**\n     * The endsWith() function tests if a string ends with the specified suffix.  If the suffix\n     * is the empty String, endsWith() will also return true.\n     *\n     * @param {String} suffix   the String used to compare against the end of the subject String.\n     *\n     * @return {boolean} true if the subject String starts with the prefix.\n     */\n    p.__endsWith = function(subject, suffix) {\n      if (typeof subject !== \"string\") {\n        return subject.endsWith.apply(subject, removeFirstArgument(arguments));\n      }\n\n      var suffixLen = suffix ? suffix.length : 0;\n      return (suffix === '' || suffix === subject) ? true :\n        (subject.indexOf(suffix) === subject.length - suffixLen);\n    };\n\n    /**\n     * The returns hash code of the.\n     *\n     * @param {Object} subject The string\n     *\n     * @return {int} a hash code\n     */\n    p.__hashCode = function(subject) {\n      if (subject.hashCode instanceof Function) {\n        return subject.hashCode.apply(subject, removeFirstArgument(arguments));\n      }\n      return virtHashCode(subject);\n    };\n\n    /**\n     * The __printStackTrace() prints stack trace to the console.\n     *\n     * @param {Exception} subject The error\n     */\n    p.__printStackTrace = function(subject) {\n      p.println(\"Exception: \" + subject.toString() );\n    };\n  };\n\n};\n\n},{}],22:[function(require,module,exports){\n/**\n * For many \"math\" functions, we can delegate\n * to the Math object. For others, we can't.\n */\nmodule.exports = function withMath(p, undef) {\n  var internalRandomGenerator = function() { return Math.random(); };\n\n  /**\n  * Calculates the absolute value (magnitude) of a number. The absolute value of a number is always positive.\n  *\n  * @param {int|float} value   int or float\n  *\n  * @returns {int|float}\n  */\n  p.abs = Math.abs;\n\n  /**\n  * Calculates the closest int value that is greater than or equal to the value of the parameter.\n  * For example, ceil(9.03) returns the value 10.\n  *\n  * @param {float} value   float\n  *\n  * @returns {int}\n  *\n  * @see floor\n  * @see round\n  */\n  p.ceil = Math.ceil;\n\n  /**\n  * Returns Euler's number e (2.71828...) raised to the power of the value parameter.\n  *\n  * @param {int|float} value   int or float: the exponent to raise e to\n  *\n  * @returns {float}\n  */\n  p.exp = Math.exp;\n\n  /**\n  * Calculates the closest int value that is less than or equal to the value of the parameter.\n  *\n  * @param {int|float} value        the value to floor\n  *\n  * @returns {int|float}\n  *\n  * @see ceil\n  * @see round\n  */\n  p.floor = Math.floor;\n\n  /**\n  * Calculates the natural logarithm (the base-e logarithm) of a number. This function\n  * expects the values greater than 0.0.\n  *\n  * @param {int|float} value        int or float: number must be greater then 0.0\n  *\n  * @returns {float}\n  */\n  p.log = Math.log;\n\n  /**\n  * Facilitates exponential expressions. The pow() function is an efficient way of\n  * multiplying numbers by themselves (or their reciprocal) in large quantities.\n  * For example, pow(3, 5) is equivalent to the expression 3*3*3*3*3 and pow(3, -5)\n  * is equivalent to 1 / 3*3*3*3*3.\n  *\n  * @param {int|float} num        base of the exponential expression\n  * @param {int|float} exponent   power of which to raise the base\n  *\n  * @returns {float}\n  *\n  * @see sqrt\n  */\n  p.pow = Math.pow;\n\n  /**\n  * Calculates the integer closest to the value parameter. For example, round(9.2) returns the value 9.\n  *\n  * @param {float} value        number to round\n  *\n  * @returns {int}\n  *\n  * @see floor\n  * @see ceil\n  */\n  p.round = Math.round;\n  /**\n  * Calculates the square root of a number. The square root of a number is always positive,\n  * even though there may be a valid negative root. The square root s of number a is such\n  * that s*s = a. It is the opposite of squaring.\n  *\n  * @param {float} value        int or float, non negative\n  *\n  * @returns {float}\n  *\n  * @see pow\n  * @see sq\n  */\n\n  p.sqrt = Math.sqrt;\n\n  // Trigonometry\n  /**\n  * The inverse of cos(), returns the arc cosine of a value. This function expects the\n  * values in the range of -1 to 1 and values are returned in the range 0 to PI (3.1415927).\n  *\n  * @param {float} value        the value whose arc cosine is to be returned\n  *\n  * @returns {float}\n  *\n  * @see cos\n  * @see asin\n  * @see atan\n  */\n  p.acos = Math.acos;\n\n  /**\n  * The inverse of sin(), returns the arc sine of a value. This function expects the values\n  * in the range of -1 to 1 and values are returned in the range -PI/2 to PI/2.\n  *\n  * @param {float} value        the value whose arc sine is to be returned\n  *\n  * @returns {float}\n  *\n  * @see sin\n  * @see acos\n  * @see atan\n  */\n  p.asin = Math.asin;\n\n  /**\n  * The inverse of tan(), returns the arc tangent of a value. This function expects the values\n  * in the range of -Infinity to Infinity (exclusive) and values are returned in the range -PI/2 to PI/2 .\n  *\n  * @param {float} value        -Infinity to Infinity (exclusive)\n  *\n  * @returns {float}\n  *\n  * @see tan\n  * @see asin\n  * @see acos\n  */\n  p.atan = Math.atan;\n\n  /**\n  * Calculates the angle (in radians) from a specified point to the coordinate origin as measured from\n  * the positive x-axis. Values are returned as a float in the range from PI to -PI. The atan2() function\n  * is most often used for orienting geometry to the position of the cursor. Note: The y-coordinate of the\n  * point is the first parameter and the x-coordinate is the second due the the structure of calculating the tangent.\n  *\n  * @param {float} y        y-coordinate of the point\n  * @param {float} x        x-coordinate of the point\n  *\n  * @returns {float}\n  *\n  * @see tan\n  */\n  p.atan2 = Math.atan2;\n\n  /**\n  * Calculates the cosine of an angle. This function expects the values of the angle parameter to be provided\n  * in radians (values from 0 to PI*2). Values are returned in the range -1 to 1.\n  *\n  * @param {float} value        an angle in radians\n  *\n  * @returns {float}\n  *\n  * @see tan\n  * @see sin\n  */\n  p.cos = Math.cos;\n\n  /**\n  * Calculates the sine of an angle. This function expects the values of the angle parameter to be provided in\n  * radians (values from 0 to 6.28). Values are returned in the range -1 to 1.\n  *\n  * @param {float} value        an angle in radians\n  *\n  * @returns {float}\n  *\n  * @see cos\n  * @see radians\n  */\n  p.sin = Math.sin;\n\n  /**\n  * Calculates the ratio of the sine and cosine of an angle. This function expects the values of the angle\n  * parameter to be provided in radians (values from 0 to PI*2). Values are returned in the range infinity to -infinity.\n  *\n  * @param {float} value        an angle in radians\n  *\n  * @returns {float}\n  *\n  * @see cos\n  * @see sin\n  * @see radians\n  */\n  p.tan = Math.tan;\n\n  /**\n  * Constrains a value to not exceed a maximum and minimum value.\n  *\n  * @param {int|float} value   the value to constrain\n  * @param {int|float} value   minimum limit\n  * @param {int|float} value   maximum limit\n  *\n  * @returns {int|float}\n  *\n  * @see max\n  * @see min\n  */\n  p.constrain = function(aNumber, aMin, aMax) {\n    return aNumber > aMax ? aMax : aNumber < aMin ? aMin : aNumber;\n  };\n\n  /**\n  * Calculates the distance between two points.\n  *\n  * @param {int|float} x1     int or float: x-coordinate of the first point\n  * @param {int|float} y1     int or float: y-coordinate of the first point\n  * @param {int|float} z1     int or float: z-coordinate of the first point\n  * @param {int|float} x2     int or float: x-coordinate of the second point\n  * @param {int|float} y2     int or float: y-coordinate of the second point\n  * @param {int|float} z2     int or float: z-coordinate of the second point\n  *\n  * @returns {float}\n  */\n  p.dist = function() {\n    var dx, dy, dz;\n    if (arguments.length === 4) {\n      dx = arguments[0] - arguments[2];\n      dy = arguments[1] - arguments[3];\n      return Math.sqrt(dx * dx + dy * dy);\n    }\n    if (arguments.length === 6) {\n      dx = arguments[0] - arguments[3];\n      dy = arguments[1] - arguments[4];\n      dz = arguments[2] - arguments[5];\n      return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n  };\n\n  /**\n  * Calculates a number between two numbers at a specific increment. The amt  parameter is the\n  * amount to interpolate between the two values where 0.0 equal to the first point, 0.1 is very\n  * near the first point, 0.5 is half-way in between, etc. The lerp function is convenient for\n  * creating motion along a straight path and for drawing dotted lines.\n  *\n  * @param {int|float} value1       float or int: first value\n  * @param {int|float} value2       float or int: second value\n  * @param {int|float} amt          float: between 0.0 and 1.0\n  *\n  * @returns {float}\n  *\n  * @see curvePoint\n  * @see bezierPoint\n  */\n  p.lerp = function(value1, value2, amt) {\n    return ((value2 - value1) * amt) + value1;\n  };\n\n  /**\n  * Calculates the magnitude (or length) of a vector. A vector is a direction in space commonly\n  * used in computer graphics and linear algebra. Because it has no \"start\" position, the magnitude\n  * of a vector can be thought of as the distance from coordinate (0,0) to its (x,y) value.\n  * Therefore, mag() is a shortcut for writing \"dist(0, 0, x, y)\".\n  *\n  * @param {int|float} a       float or int: first value\n  * @param {int|float} b       float or int: second value\n  * @param {int|float} c       float or int: third value\n  *\n  * @returns {float}\n  *\n  * @see dist\n  */\n  p.mag = function(a, b, c) {\n    if (c) {\n      return Math.sqrt(a * a + b * b + c * c);\n    }\n\n    return Math.sqrt(a * a + b * b);\n  };\n\n  /**\n  * Re-maps a number from one range to another. In the example above, the number '25' is converted from\n  * a value in the range 0..100 into a value that ranges from the left edge (0) to the right edge (width) of the screen.\n  * Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful.\n  *\n  * @param {float} value        The incoming value to be converted\n  * @param {float} istart       Lower bound of the value's current range\n  * @param {float} istop        Upper bound of the value's current range\n  * @param {float} ostart       Lower bound of the value's target range\n  * @param {float} ostop        Upper bound of the value's target range\n  *\n  * @returns {float}\n  *\n  * @see norm\n  * @see lerp\n  */\n  p.map = function(value, istart, istop, ostart, ostop) {\n    return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n  };\n\n  /**\n  * Determines the largest value in a sequence of numbers.\n  *\n  * @param {int|float} value1         int or float\n  * @param {int|float} value2         int or float\n  * @param {int|float} value3         int or float\n  * @param {int|float} array          int or float array\n  *\n  * @returns {int|float}\n  *\n  * @see min\n  */\n  p.max = function() {\n    if (arguments.length === 2) {\n      return arguments[0] < arguments[1] ? arguments[1] : arguments[0];\n    }\n    var numbers = arguments.length === 1 ? arguments[0] : arguments; // if single argument, array is used\n    if (! (\"length\" in numbers && numbers.length > 0)) {\n      throw \"Non-empty array is expected\";\n    }\n    var max = numbers[0],\n      count = numbers.length;\n    for (var i = 1; i < count; ++i) {\n      if (max < numbers[i]) {\n        max = numbers[i];\n      }\n    }\n    return max;\n  };\n\n  /**\n  * Determines the smallest value in a sequence of numbers.\n  *\n  * @param {int|float} value1         int or float\n  * @param {int|float} value2         int or float\n  * @param {int|float} value3         int or float\n  * @param {int|float} array          int or float array\n  *\n  * @returns {int|float}\n  *\n  * @see max\n  */\n  p.min = function() {\n    if (arguments.length === 2) {\n      return arguments[0] < arguments[1] ? arguments[0] : arguments[1];\n    }\n    var numbers = arguments.length === 1 ? arguments[0] : arguments; // if single argument, array is used\n    if (! (\"length\" in numbers && numbers.length > 0)) {\n      throw \"Non-empty array is expected\";\n    }\n    var min = numbers[0],\n      count = numbers.length;\n    for (var i = 1; i < count; ++i) {\n      if (min > numbers[i]) {\n        min = numbers[i];\n      }\n    }\n    return min;\n  };\n\n  /**\n  * Normalizes a number from another range into a value between 0 and 1.\n  * Identical to map(value, low, high, 0, 1);\n  * Numbers outside the range are not clamped to 0 and 1, because out-of-range\n  * values are often intentional and useful.\n  *\n  * @param {float} aNumber    The incoming value to be converted\n  * @param {float} low        Lower bound of the value's current range\n  * @param {float} high       Upper bound of the value's current range\n  *\n  * @returns {float}\n  *\n  * @see map\n  * @see lerp\n  */\n  p.norm = function(aNumber, low, high) {\n    return (aNumber - low) / (high - low);\n  };\n\n  /**\n  * Squares a number (multiplies a number by itself). The result is always a positive number,\n  * as multiplying two negative numbers always yields a positive result. For example, -1 * -1 = 1.\n  *\n  * @param {float} value        int or float\n  *\n  * @returns {float}\n  *\n  * @see sqrt\n  */\n  p.sq = function(aNumber) {\n    return aNumber * aNumber;\n  };\n\n  /**\n  * Converts a radian measurement to its corresponding value in degrees. Radians and degrees are two ways of\n  * measuring the same thing. There are 360 degrees in a circle and 2*PI radians in a circle. For example,\n  * 90 degrees = PI/2 = 1.5707964. All trigonometric methods in Processing require their parameters to be specified in radians.\n  *\n  * @param {int|float} value        an angle in radians\n  *\n  * @returns {float}\n  *\n  * @see radians\n  */\n  p.degrees = function(aAngle) {\n    return (aAngle * 180) / Math.PI;\n  };\n\n  /**\n  * Generates random numbers. Each time the random() function is called, it returns an unexpected value within\n  * the specified range. If one parameter is passed to the function it will return a float between zero and the\n  * value of the high parameter. The function call random(5) returns values between 0 and 5 (starting at zero,\n  * up to but not including 5). If two parameters are passed, it will return a float with a value between the\n  * parameters. The function call random(-5, 10.2) returns values starting at -5 up to (but not including) 10.2.\n  * To convert a floating-point random number to an integer, use the int() function.\n  *\n  * @param {int|float} value1         if one parameter is used, the top end to random from, if two params the low end\n  * @param {int|float} value2         the top end of the random range\n  *\n  * @returns {float}\n  *\n  * @see randomSeed\n  * @see noise\n  */\n  p.random = function() {\n    if(arguments.length === 0) {\n      return internalRandomGenerator();\n    }\n    if(arguments.length === 1) {\n      return internalRandomGenerator() * arguments[0];\n    }\n    var aMin = arguments[0], aMax = arguments[1];\n    return internalRandomGenerator() * (aMax - aMin) + aMin;\n  };\n\n  // Pseudo-random generator\n  function Marsaglia(i1, i2) {\n    // from http://www.math.uni-bielefeld.de/~sillke/ALGORITHMS/random/marsaglia-c\n    var z=i1 || 362436069, w= i2 || 521288629;\n    var intGenerator = function() {\n      z=(36969*(z&65535)+(z>>>16)) & 0xFFFFFFFF;\n      w=(18000*(w&65535)+(w>>>16)) & 0xFFFFFFFF;\n      return (((z&0xFFFF)<<16) | (w&0xFFFF)) & 0xFFFFFFFF;\n    };\n\n    this.doubleGenerator = function() {\n      var i = intGenerator() / 4294967296;\n      return i < 0 ? 1 + i : i;\n    };\n    this.intGenerator = intGenerator;\n  }\n\n  Marsaglia.createRandomized = function() {\n    var now = new Date();\n    return new Marsaglia((now / 60000) & 0xFFFFFFFF, now & 0xFFFFFFFF);\n  };\n\n  /**\n  * Sets the seed value for random(). By default, random() produces different results each time the\n  * program is run. Set the value parameter to a constant to return the same pseudo-random numbers\n  * each time the software is run.\n  *\n  * @param {int|float} seed         int\n  *\n  * @see random\n  * @see noise\n  * @see noiseSeed\n  */\n  p.randomSeed = function(seed) {\n    internalRandomGenerator = (new Marsaglia(seed)).doubleGenerator;\n    this.haveNextNextGaussian = false;\n  };\n\n  /**\n  * Returns a float from a random series of numbers having a mean of 0 and standard deviation of 1. Each time\n  * the randomGaussian() function is called, it returns a number fitting a Gaussian, or normal, distribution.\n  * There is theoretically no minimum or maximum value that randomGaussian() might return. Rather, there is just a\n  * very low probability that values far from the mean will be returned; and a higher probability that numbers\n  * near the mean will be returned.\n  *\n  * @returns {float}\n  *\n  * @see random\n  * @see noise\n  */\n  p.randomGaussian = function() {\n    if (this.haveNextNextGaussian) {\n      this.haveNextNextGaussian = false;\n      return this.nextNextGaussian;\n    }\n    var v1, v2, s;\n    do {\n      v1 = 2 * internalRandomGenerator() - 1; // between -1.0 and 1.0\n      v2 = 2 * internalRandomGenerator() - 1; // between -1.0 and 1.0\n      s = v1 * v1 + v2 * v2;\n    }\n    while (s >= 1 || s === 0);\n\n    var multiplier = Math.sqrt(-2 * Math.log(s) / s);\n    this.nextNextGaussian = v2 * multiplier;\n    this.haveNextNextGaussian = true;\n\n    return v1 * multiplier;\n  };\n\n  // Noise functions and helpers\n  function PerlinNoise(seed) {\n    var rnd = seed !== undef ? new Marsaglia(seed) : Marsaglia.createRandomized();\n    var i, j;\n    // http://www.noisemachine.com/talk1/17b.html\n    // http://mrl.nyu.edu/~perlin/noise/\n    // generate permutation\n    var perm = new Uint8Array(512);\n    for(i=0;i<256;++i) { perm[i] = i; }\n    for(i=0;i<256;++i) { var t = perm[j = rnd.intGenerator() & 0xFF]; perm[j] = perm[i]; perm[i] = t; }\n    // copy to avoid taking mod in perm[0];\n    for(i=0;i<256;++i) { perm[i + 256] = perm[i]; }\n\n    function grad3d(i,x,y,z) {\n      var h = i & 15; // convert into 12 gradient directions\n      var u = h<8 ? x : y,\n          v = h<4 ? y : h===12||h===14 ? x : z;\n      return ((h&1) === 0 ? u : -u) + ((h&2) === 0 ? v : -v);\n    }\n\n    function grad2d(i,x,y) {\n      var v = (i & 1) === 0 ? x : y;\n      return (i&2) === 0 ? -v : v;\n    }\n\n    function grad1d(i,x) {\n      return (i&1) === 0 ? -x : x;\n    }\n\n    function lerp(t,a,b) { return a + t * (b - a); }\n\n    this.noise3d = function(x, y, z) {\n      var X = Math.floor(x)&255, Y = Math.floor(y)&255, Z = Math.floor(z)&255;\n      x -= Math.floor(x); y -= Math.floor(y); z -= Math.floor(z);\n      var fx = (3-2*x)*x*x, fy = (3-2*y)*y*y, fz = (3-2*z)*z*z;\n      var p0 = perm[X]+Y, p00 = perm[p0] + Z, p01 = perm[p0 + 1] + Z,\n          p1 = perm[X + 1] + Y, p10 = perm[p1] + Z, p11 = perm[p1 + 1] + Z;\n      return lerp(fz,\n        lerp(fy, lerp(fx, grad3d(perm[p00], x, y, z), grad3d(perm[p10], x-1, y, z)),\n                 lerp(fx, grad3d(perm[p01], x, y-1, z), grad3d(perm[p11], x-1, y-1,z))),\n        lerp(fy, lerp(fx, grad3d(perm[p00 + 1], x, y, z-1), grad3d(perm[p10 + 1], x-1, y, z-1)),\n                 lerp(fx, grad3d(perm[p01 + 1], x, y-1, z-1), grad3d(perm[p11 + 1], x-1, y-1,z-1))));\n    };\n\n    this.noise2d = function(x, y) {\n      var X = Math.floor(x)&255, Y = Math.floor(y)&255;\n      x -= Math.floor(x); y -= Math.floor(y);\n      var fx = (3-2*x)*x*x, fy = (3-2*y)*y*y;\n      var p0 = perm[X]+Y, p1 = perm[X + 1] + Y;\n      return lerp(fy,\n        lerp(fx, grad2d(perm[p0], x, y), grad2d(perm[p1], x-1, y)),\n        lerp(fx, grad2d(perm[p0 + 1], x, y-1), grad2d(perm[p1 + 1], x-1, y-1)));\n    };\n\n    this.noise1d = function(x) {\n      var X = Math.floor(x)&255;\n      x -= Math.floor(x);\n      var fx = (3-2*x)*x*x;\n      return lerp(fx, grad1d(perm[X], x), grad1d(perm[X+1], x-1));\n    };\n  }\n\n  // processing defaults\n  var noiseProfile = { generator: undef, octaves: 4, fallout: 0.5, seed: undef};\n\n  /**\n  * Returns the Perlin noise value at specified coordinates. Perlin noise is a random sequence\n  * generator producing a more natural ordered, harmonic succession of numbers compared to the\n  * standard random() function. It was invented by Ken Perlin in the 1980s and been used since\n  * in graphical applications to produce procedural textures, natural motion, shapes, terrains etc.\n  * The main difference to the random() function is that Perlin noise is defined in an infinite\n  * n-dimensional space where each pair of coordinates corresponds to a fixed semi-random value\n  * (fixed only for the lifespan of the program). The resulting value will always be between 0.0\n  * and 1.0. Processing can compute 1D, 2D and 3D noise, depending on the number of coordinates\n  * given. The noise value can be animated by moving through the noise space as demonstrated in\n  * the example above. The 2nd and 3rd dimension can also be interpreted as time.\n  * The actual noise is structured similar to an audio signal, in respect to the function's use\n  * of frequencies. Similar to the concept of harmonics in physics, perlin noise is computed over\n  * several octaves which are added together for the final result.\n  * Another way to adjust the character of the resulting sequence is the scale of the input\n  * coordinates. As the function works within an infinite space the value of the coordinates\n  * doesn't matter as such, only the distance between successive coordinates does (eg. when using\n  * noise() within a loop). As a general rule the smaller the difference between coordinates, the\n  * smoother the resulting noise sequence will be. Steps of 0.005-0.03 work best for most applications,\n  * but this will differ depending on use.\n  *\n  * @param {float} x          x coordinate in noise space\n  * @param {float} y          y coordinate in noise space\n  * @param {float} z          z coordinate in noise space\n  *\n  * @returns {float}\n  *\n  * @see random\n  * @see noiseDetail\n  */\n  p.noise = function(x, y, z) {\n    if(noiseProfile.generator === undef) {\n      // caching\n      noiseProfile.generator = new PerlinNoise(noiseProfile.seed);\n    }\n    var generator = noiseProfile.generator;\n    var effect = 1, k = 1, sum = 0;\n    for(var i=0; i<noiseProfile.octaves; ++i) {\n      effect *= noiseProfile.fallout;\n      switch (arguments.length) {\n      case 1:\n        sum += effect * (1 + generator.noise1d(k*x))/2; break;\n      case 2:\n        sum += effect * (1 + generator.noise2d(k*x, k*y))/2; break;\n      case 3:\n        sum += effect * (1 + generator.noise3d(k*x, k*y, k*z))/2; break;\n      }\n      k *= 2;\n    }\n    return sum;\n  };\n\n  /**\n  * Adjusts the character and level of detail produced by the Perlin noise function.\n  * Similar to harmonics in physics, noise is computed over several octaves. Lower octaves\n  * contribute more to the output signal and as such define the overal intensity of the noise,\n  * whereas higher octaves create finer grained details in the noise sequence. By default,\n  * noise is computed over 4 octaves with each octave contributing exactly half than its\n  * predecessor, starting at 50% strength for the 1st octave. This falloff amount can be\n  * changed by adding an additional function parameter. Eg. a falloff factor of 0.75 means\n  * each octave will now have 75% impact (25% less) of the previous lower octave. Any value\n  * between 0.0 and 1.0 is valid, however note that values greater than 0.5 might result in\n  * greater than 1.0 values returned by noise(). By changing these parameters, the signal\n  * created by the noise() function can be adapted to fit very specific needs and characteristics.\n  *\n  * @param {int} octaves          number of octaves to be used by the noise() function\n  * @param {float} falloff        falloff factor for each octave\n  *\n  * @see noise\n  */\n  p.noiseDetail = function(octaves, fallout) {\n    noiseProfile.octaves = octaves;\n    if(fallout !== undef) {\n      noiseProfile.fallout = fallout;\n    }\n  };\n\n  /**\n  * Sets the seed value for noise(). By default, noise() produces different results each\n  * time the program is run. Set the value parameter to a constant to return the same\n  * pseudo-random numbers each time the software is run.\n  *\n  * @param {int} seed         int\n  *\n  * @returns {float}\n  *\n  * @see random\n  * @see radomSeed\n  * @see noise\n  * @see noiseDetail\n  */\n  p.noiseSeed = function(seed) {\n    noiseProfile.seed = seed;\n    noiseProfile.generator = undef;\n  };\n};\n\n},{}],23:[function(require,module,exports){\n/**\n * Common functions traditionally on \"p\" that should be class functions\n * that get bound to \"p\" when an instance is actually built, instead.\n */\nmodule.exports = (function commonFunctions(undef) {\n\n  var CommonFunctions = {\n    /**\n     * Remove whitespace characters from the beginning and ending\n     * of a String or a String array. Works like String.trim() but includes the\n     * unicode nbsp character as well. If an array is passed in the function will return a new array not effecting the array passed in.\n     *\n     * @param {String} str    the string to trim\n     * @param {String[]} str  the string array to trim\n     *\n     * @return {String|String[]} retrurns a string or an array will removed whitespaces\n     */\n    trim: function(str) {\n      if (str instanceof Array) {\n        var arr = [];\n        for (var i = 0; i < str.length; i++) {\n          arr.push(str[i].replace(/^\\s*/, '').replace(/\\s*$/, '').replace(/\\r*$/, ''));\n        }\n        return arr;\n      }\n      return str.replace(/^\\s*/, '').replace(/\\s*$/, '').replace(/\\r*$/, '');\n    },\n\n    /**\n     * Converts a degree measurement to its corresponding value in radians. Radians and degrees are two ways of\n     * measuring the same thing. There are 360 degrees in a circle and 2*PI radians in a circle. For example,\n     * 90 degrees = PI/2 = 1.5707964. All trigonometric methods in Processing require their parameters to be specified in radians.\n     *\n     * @param {int|float} value        an angle in radians\n     *\n     * @returns {float}\n     *\n     * @see degrees\n     */\n    radians: function(aAngle) {\n      return (aAngle / 180) * Math.PI;\n    },\n\n    /**\n     * Number-to-String formatting function. Prepends \"plus\" or \"minus\" depending\n     * on whether the value is positive or negative, respectively, after padding\n     * the value with zeroes on the left and right, the number of zeroes used dictated\n     * by the values 'leftDigits' and 'rightDigits'. 'value' cannot be an array.\n     *\n     * @param {int|float} value                 the number to format\n     * @param {String} plus                     the prefix for positive numbers\n     * @param {String} minus                    the prefix for negative numbers\n     * @param {int} left                        number of digits to the left of the decimal point\n     * @param {int} right                       number of digits to the right of the decimal point\n     * @param {String} group                    string delimited for groups, such as the comma in \"1,000\"\n     *\n     * @returns {String or String[]}\n     *\n     * @see nfCore\n     */\n    nfCoreScalar: function (value, plus, minus, leftDigits, rightDigits, group) {\n      var sign = (value < 0) ? minus : plus;\n      var autoDetectDecimals = rightDigits === 0;\n      var rightDigitsOfDefault = (rightDigits === undef || rightDigits < 0) ? 0 : rightDigits;\n\n      var absValue = Math.abs(value);\n      if (autoDetectDecimals) {\n        rightDigitsOfDefault = 1;\n        absValue *= 10;\n        while (Math.abs(Math.round(absValue) - absValue) > 1e-6 && rightDigitsOfDefault < 7) {\n          ++rightDigitsOfDefault;\n          absValue *= 10;\n        }\n      } else if (rightDigitsOfDefault !== 0) {\n        absValue *= Math.pow(10, rightDigitsOfDefault);\n      }\n\n      // Using Java's default rounding policy HALF_EVEN. This policy is based\n      // on the idea that 0.5 values round to the nearest even number, and\n      // everything else is rounded normally.\n      var number, doubled = absValue * 2;\n      if (Math.floor(absValue) === absValue) {\n        number = absValue;\n      } else if (Math.floor(doubled) === doubled) {\n        var floored = Math.floor(absValue);\n        number = floored + (floored % 2);\n      } else {\n        number = Math.round(absValue);\n      }\n\n      var buffer = \"\";\n      var totalDigits = leftDigits + rightDigitsOfDefault;\n      while (totalDigits > 0 || number > 0) {\n        totalDigits--;\n        buffer = \"\" + (number % 10) + buffer;\n        number = Math.floor(number / 10);\n      }\n      if (group !== undef) {\n        var i = buffer.length - 3 - rightDigitsOfDefault;\n        while(i > 0) {\n          buffer = buffer.substring(0,i) + group + buffer.substring(i);\n          i-=3;\n        }\n      }\n      if (rightDigitsOfDefault > 0) {\n        return sign + buffer.substring(0, buffer.length - rightDigitsOfDefault) +\n               \".\" + buffer.substring(buffer.length - rightDigitsOfDefault, buffer.length);\n      }\n      return sign + buffer;\n    },\n\n    /**\n    * Number-to-String formatting function. Prepends \"plus\" or \"minus\" depending\n    * on whether the value is positive or negative, respectively, after padding\n    * the value with zeroes on the left and right, the number of zeroes used dictated\n    * by the values 'leftDigits' and 'rightDigits'. 'value' can be an array;\n    * if the input is an array, each value in it is formatted separately, and\n    * an array with formatted values is returned.\n    *\n    * @param {int|int[]|float|float[]} value   the number(s) to format\n    * @param {String} plus                     the prefix for positive numbers\n    * @param {String} minus                    the prefix for negative numbers\n    * @param {int} left                        number of digits to the left of the decimal point\n    * @param {int} right                       number of digits to the right of the decimal point\n    * @param {String} group                    string delimited for groups, such as the comma in \"1,000\"\n    *\n    * @returns {String or String[]}\n    *\n    * @see nfCoreScalar\n    */\n    nfCore: function(value, plus, minus, leftDigits, rightDigits, group) {\n      if (value instanceof Array) {\n        var arr = [];\n        for (var i = 0, len = value.length; i < len; i++) {\n          arr.push(CommonFunctions.nfCoreScalar(value[i], plus, minus, leftDigits, rightDigits, group));\n        }\n        return arr;\n      }\n      return CommonFunctions.nfCoreScalar(value, plus, minus, leftDigits, rightDigits, group);\n    },\n\n    /**\n    * Utility function for formatting numbers into strings. There are two versions, one for\n    * formatting floats and one for formatting ints. The values for the digits, left, and\n    * right parameters should always be positive integers.\n    * As shown in the above example, nf() is used to add zeros to the left and/or right\n    * of a number. This is typically for aligning a list of numbers. To remove digits from\n    * a floating-point number, use the int(), ceil(), floor(), or round() functions.\n    *\n    * @param {int|int[]|float|float[]} value   the number(s) to format\n    * @param {int} left                        number of digits to the left of the decimal point\n    * @param {int} right                       number of digits to the right of the decimal point\n    *\n    * @returns {String or String[]}\n    *\n    * @see nfs\n    * @see nfp\n    * @see nfc\n    */\n    nf: function(value, leftDigits, rightDigits) {\n      return CommonFunctions.nfCore(value, \"\", \"-\", leftDigits, rightDigits);\n    },\n\n    /**\n    * Utility function for formatting numbers into strings. Similar to nf()  but leaves a blank space in front\n    * of positive numbers so they align with negative numbers in spite of the minus symbol. There are two\n    * versions, one for formatting floats and one for formatting ints. The values for the digits, left,\n    * and right parameters should always be positive integers.\n    *\n    * @param {int|int[]|float|float[]} value   the number(s) to format\n    * @param {int} left                        number of digits to the left of the decimal point\n    * @param {int} right                       number of digits to the right of the decimal point\n    *\n    * @returns {String or String[]}\n    *\n    * @see nf\n    * @see nfp\n    * @see nfc\n    */\n    nfs: function(value, leftDigits, rightDigits) {\n      return CommonFunctions.nfCore(value, \" \", \"-\", leftDigits, rightDigits);\n    },\n\n    /**\n    * Utility function for formatting numbers into strings. Similar to nf()  but puts a \"+\" in front of\n    * positive numbers and a \"-\" in front of negative numbers. There are two versions, one for formatting\n    * floats and one for formatting ints. The values for the digits, left, and right parameters should\n    * always be positive integers.\n    *\n    * @param {int|int[]|float|float[]} value   the number(s) to format\n    * @param {int} left                        number of digits to the left of the decimal point\n    * @param {int} right                       number of digits to the right of the decimal point\n    *\n    * @returns {String or String[]}\n    *\n    * @see nfs\n    * @see nf\n    * @see nfc\n    */\n    nfp: function(value, leftDigits, rightDigits) {\n      return CommonFunctions.nfCore(value, \"+\", \"-\", leftDigits, rightDigits);\n    },\n\n    /**\n    * Utility function for formatting numbers into strings and placing appropriate commas to mark\n    * units of 1000. There are two versions, one for formatting ints and one for formatting an array\n    * of ints. The value for the digits parameter should always be a positive integer.\n    *\n    * @param {int|int[]|float|float[]} value   the number(s) to format\n    * @param {int} left                        number of digits to the left of the decimal point\n    * @param {int} right                       number of digits to the right of the decimal point\n    *\n    * @returns {String or String[]}\n    *\n    * @see nf\n    * @see nfs\n    * @see nfp\n    */\n    nfc: function(value, rightDigits) {\n      return CommonFunctions.nfCore(value, \"\", \"-\", 0, rightDigits, \",\");\n    },\n\n    // used to bind all common functions to \"p\"\n    withCommonFunctions: function withCommonFunctions(p) {\n      [\"trim\", \"radians\", \"nf\", \"nfs\", \"nfp\", \"nfc\"].forEach(function(f){\n        p[f] = CommonFunctions[f];\n      });\n    }\n  };\n\n  return CommonFunctions;\n}());\n\n},{}],24:[function(require,module,exports){\n/**\n * Touch and Mouse event handling\n */\nmodule.exports = function withTouch(p, curElement, attachEventHandler, document, PConstants, undef) {\n\n  /**\n   * Determine the location of the (mouse) pointer.\n   */\n  function calculateOffset(curElement, event) {\n    var element = curElement,\n      offsetX = 0,\n      offsetY = 0;\n\n    p.pmouseX = p.mouseX;\n    p.pmouseY = p.mouseY;\n\n    // Find element offset\n    if (element.offsetParent) {\n      do {\n        offsetX += element.offsetLeft;\n        offsetY += element.offsetTop;\n      } while (!!(element = element.offsetParent));\n    }\n\n    // Find Scroll offset\n    element = curElement;\n    do {\n      offsetX -= element.scrollLeft || 0;\n      offsetY -= element.scrollTop || 0;\n    } while (!!(element = element.parentNode));\n\n    // Get padding and border style widths for mouse offsets\n    var stylePaddingLeft, stylePaddingTop, styleBorderLeft, styleBorderTop;\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      stylePaddingLeft = parseInt(document.defaultView.getComputedStyle(curElement, null).paddingLeft, 10)      || 0;\n      stylePaddingTop  = parseInt(document.defaultView.getComputedStyle(curElement, null).paddingTop, 10)       || 0;\n      styleBorderLeft  = parseInt(document.defaultView.getComputedStyle(curElement, null).borderLeftWidth, 10)  || 0;\n      styleBorderTop   = parseInt(document.defaultView.getComputedStyle(curElement, null).borderTopWidth, 10)   || 0;\n    }\n\n    // Add padding and border style widths to offset\n    offsetX += stylePaddingLeft;\n    offsetY += stylePaddingTop;\n\n    offsetX += styleBorderLeft;\n    offsetY += styleBorderTop;\n\n    // Take into account any scrolling done\n    offsetX += window.pageXOffset;\n    offsetY += window.pageYOffset;\n\n    return {'X':offsetX,'Y':offsetY};\n  }\n\n  // simple relative position\n  function updateMousePosition(curElement, event) {\n    var offset = calculateOffset(curElement, event);\n    // Dropping support for IE clientX and clientY, switching to pageX and pageY\n    // so we don't have to calculate scroll offset.\n    // Removed in ticket #184. See rev: 2f106d1c7017fed92d045ba918db47d28e5c16f4\n    p.mouseX = event.pageX - offset.X;\n    p.mouseY = event.pageY - offset.Y;\n  }\n\n  /**\n   * Return a TouchEvent with canvas-specific x/y co-ordinates\n   */\n  function addTouchEventOffset(t) {\n    var offset = calculateOffset(t.changedTouches[0].target, t.changedTouches[0]),\n        i;\n\n    for (i = 0; i < t.touches.length; i++) {\n      var touch = t.touches[i];\n      touch.offsetX = touch.pageX - offset.X;\n      touch.offsetY = touch.pageY - offset.Y;\n    }\n    for (i = 0; i < t.targetTouches.length; i++) {\n      var targetTouch = t.targetTouches[i];\n      targetTouch.offsetX = targetTouch.pageX - offset.X;\n      targetTouch.offsetY = targetTouch.pageY - offset.Y;\n    }\n    for (i = 0; i < t.changedTouches.length; i++) {\n      var changedTouch = t.changedTouches[i];\n      changedTouch.offsetX = changedTouch.pageX - offset.X;\n      changedTouch.offsetY = changedTouch.pageY - offset.Y;\n    }\n\n    return t;\n  }\n\n  /**\n   * Touch event support.\n   */\n  attachEventHandler(curElement, \"touchstart\", function (t) {\n    // Removes unwanted behaviour of the canvas when touching canvas\n    curElement.setAttribute(\"style\",\"-webkit-user-select: none\");\n    curElement.setAttribute(\"onclick\",\"void(0)\");\n    curElement.setAttribute(\"style\",\"-webkit-tap-highlight-color:rgba(0,0,0,0)\");\n    // Loop though eventHandlers and remove mouse listeners\n    for (var i=0, ehl=eventHandlers.length; i<ehl; i++) {\n      var type = eventHandlers[i].type;\n      // Have this function remove itself from the eventHandlers list too\n      if (type === \"mouseout\" ||  type === \"mousemove\" ||\n          type === \"mousedown\" || type === \"mouseup\" ||\n          type === \"DOMMouseScroll\" || type === \"mousewheel\" || type === \"touchstart\") {\n        detachEventHandler(eventHandlers[i]);\n      }\n    }\n\n    // If there are any native touch events defined in the sketch, connect all of them\n    // Otherwise, connect all of the emulated mouse events\n    if (p.touchStart !== undef || p.touchMove !== undef ||\n        p.touchEnd !== undef || p.touchCancel !== undef) {\n      attachEventHandler(curElement, \"touchstart\", function(t) {\n        if (p.touchStart !== undef) {\n          t = addTouchEventOffset(t);\n          p.touchStart(t);\n        }\n      });\n\n      attachEventHandler(curElement, \"touchmove\", function(t) {\n        if (p.touchMove !== undef) {\n          t.preventDefault(); // Stop the viewport from scrolling\n          t = addTouchEventOffset(t);\n          p.touchMove(t);\n        }\n      });\n\n      attachEventHandler(curElement, \"touchend\", function(t) {\n        if (p.touchEnd !== undef) {\n          t = addTouchEventOffset(t);\n          p.touchEnd(t);\n        }\n      });\n\n      attachEventHandler(curElement, \"touchcancel\", function(t) {\n        if (p.touchCancel !== undef) {\n          t = addTouchEventOffset(t);\n          p.touchCancel(t);\n        }\n      });\n\n    } else {\n      // Emulated touch start/mouse down event\n      attachEventHandler(curElement, \"touchstart\", function(e) {\n        updateMousePosition(curElement, e.touches[0]);\n\n        p.__mousePressed = true;\n        p.mouseDragging = false;\n        p.mouseButton = PConstants.LEFT;\n\n        if (typeof p.mousePressed === \"function\") {\n          p.mousePressed();\n        }\n      });\n\n      // Emulated touch move/mouse move event\n      attachEventHandler(curElement, \"touchmove\", function(e) {\n        e.preventDefault();\n        updateMousePosition(curElement, e.touches[0]);\n\n        if (typeof p.mouseMoved === \"function\" && !p.__mousePressed) {\n          p.mouseMoved();\n        }\n        if (typeof p.mouseDragged === \"function\" && p.__mousePressed) {\n          p.mouseDragged();\n          p.mouseDragging = true;\n        }\n      });\n\n      // Emulated touch up/mouse up event\n      attachEventHandler(curElement, \"touchend\", function(e) {\n        p.__mousePressed = false;\n\n        if (typeof p.mouseClicked === \"function\" && !p.mouseDragging) {\n          p.mouseClicked();\n        }\n\n        if (typeof p.mouseReleased === \"function\") {\n          p.mouseReleased();\n        }\n      });\n    }\n\n    // Refire the touch start event we consumed in this function\n    curElement.dispatchEvent(t);\n  });\n\n  /**\n   * Context menu toggles. Most often you will not want the\n   * browser's context menu to show on a right click, but\n   * sometimes, you do, so we add two unofficial functions\n   * that can be used to trigger context menu behaviour.\n   */\n  (function() {\n    var enabled = true,\n        contextMenu = function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n        };\n\n    p.disableContextMenu = function() {\n      if (!enabled) {\n        return;\n      }\n      attachEventHandler(curElement, 'contextmenu', contextMenu);\n      enabled = false;\n    };\n\n    p.enableContextMenu = function() {\n      if (enabled) {\n        return;\n      }\n      detachEventHandler({elem: curElement, type: 'contextmenu', fn: contextMenu});\n      enabled = true;\n    };\n  }());\n\n  /**\n   * Mouse moved or dragged\n   */\n  attachEventHandler(curElement, \"mousemove\", function(e) {\n    updateMousePosition(curElement, e);\n    if (typeof p.mouseMoved === \"function\" && !p.__mousePressed) {\n      p.mouseMoved();\n    }\n    if (typeof p.mouseDragged === \"function\" && p.__mousePressed) {\n      p.mouseDragged();\n      p.mouseDragging = true;\n    }\n  });\n\n  /**\n   * Unofficial mouse-out handling\n   */\n  attachEventHandler(curElement, \"mouseout\", function(e) {\n    if (typeof p.mouseOut === \"function\") {\n      p.mouseOut();\n    }\n  });\n\n  /**\n   * Mouse over\n   */\n  attachEventHandler(curElement, \"mouseover\", function(e) {\n    updateMousePosition(curElement, e);\n    if (typeof p.mouseOver === \"function\") {\n      p.mouseOver();\n    }\n  });\n\n  /**\n   * Disable browser's default handling for click-drag of a canvas.\n   */\n  curElement.onmousedown = function () {\n    // make sure focus happens, but nothing else\n    curElement.focus();\n    return false;\n  };\n\n  /**\n   * Mouse pressed or drag\n   */\n  attachEventHandler(curElement, \"mousedown\", function(e) {\n    p.__mousePressed = true;\n    p.mouseDragging = false;\n    switch (e.which) {\n    case 1:\n      p.mouseButton = PConstants.LEFT;\n      break;\n    case 2:\n      p.mouseButton = PConstants.CENTER;\n      break;\n    case 3:\n      p.mouseButton = PConstants.RIGHT;\n      break;\n    }\n\n    if (typeof p.mousePressed === \"function\") {\n      p.mousePressed();\n    }\n  });\n\n  /**\n   * Mouse clicked or released\n   */\n  attachEventHandler(curElement, \"mouseup\", function(e) {\n    p.__mousePressed = false;\n\n    if (typeof p.mouseClicked === \"function\" && !p.mouseDragging) {\n      p.mouseClicked();\n    }\n\n    if (typeof p.mouseReleased === \"function\") {\n      p.mouseReleased();\n    }\n  });\n\n  /**\n   * Unofficial scroll wheel handling.\n   */\n  var mouseWheelHandler = function(e) {\n    var delta = 0;\n\n    if (e.wheelDelta) {\n      delta = e.wheelDelta / 120;\n      if (window.opera) {\n        delta = -delta;\n      }\n    } else if (e.detail) {\n      delta = -e.detail / 3;\n    }\n\n    p.mouseScroll = delta;\n\n    if (delta && typeof p.mouseScrolled === 'function') {\n      p.mouseScrolled();\n    }\n  };\n\n  // Support Gecko and non-Gecko scroll events\n  attachEventHandler(document, 'DOMMouseScroll', mouseWheelHandler);\n  attachEventHandler(document, 'mousewheel', mouseWheelHandler);\n\n};\n\n},{}],25:[function(require,module,exports){\n/**\n * The parser for turning Processing syntax into Pjs JavaScript.\n * This code is not trivial; unless you know what you're doing,\n * you shouldn't be changing things in here =)\n */\nmodule.exports = function setupParser(Processing, options) {\n\n  var defaultScope = options.defaultScope,\n      PConstants = defaultScope.PConstants,\n      aFunctions = options.aFunctions,\n      Browser = options.Browser,\n      document = Browser.document,\n      undef;\n\n  // Processing global methods and constants for the parser\n  function getGlobalMembers() {\n    // The names array contains the names of everything that is inside \"p.\"\n    // When something new is added to \"p.\" it must also be added to this list.\n    var names = [ /* this code is generated by jsglobals.js */\n      \"abs\", \"acos\", \"alpha\", \"ambient\", \"ambientLight\", \"append\", \"applyMatrix\",\n      \"arc\", \"arrayCopy\", \"asin\", \"atan\", \"atan2\", \"background\", \"beginCamera\",\n      \"beginDraw\", \"beginShape\", \"bezier\", \"bezierDetail\", \"bezierPoint\",\n      \"bezierTangent\", \"bezierVertex\", \"binary\", \"blend\", \"blendColor\",\n      \"blit_resize\", \"blue\", \"box\", \"breakShape\", \"brightness\",\n      \"camera\", \"ceil\", \"Character\", \"color\", \"colorMode\",\n      \"concat\", \"constrain\", \"copy\", \"cos\", \"createFont\",\n      \"createGraphics\", \"createImage\", \"cursor\", \"curve\", \"curveDetail\",\n      \"curvePoint\", \"curveTangent\", \"curveTightness\", \"curveVertex\", \"day\",\n      \"degrees\", \"directionalLight\", \"disableContextMenu\",\n      \"dist\", \"draw\", \"ellipse\", \"ellipseMode\", \"emissive\", \"enableContextMenu\",\n      \"endCamera\", \"endDraw\", \"endShape\", \"exit\", \"exp\", \"expand\", \"externals\",\n      \"fill\", \"filter\", \"floor\", \"focused\", \"frameCount\", \"frameRate\", \"frustum\",\n      \"get\", \"glyphLook\", \"glyphTable\", \"green\", \"height\", \"hex\", \"hint\", \"hour\",\n      \"hue\", \"image\", \"imageMode\", \"intersect\", \"join\", \"key\",\n      \"keyCode\", \"keyPressed\", \"keyReleased\", \"keyTyped\", \"lerp\", \"lerpColor\",\n      \"lightFalloff\", \"lights\", \"lightSpecular\", \"line\", \"link\", \"loadBytes\",\n      \"loadFont\", \"loadGlyphs\", \"loadImage\", \"loadPixels\", \"loadShape\", \"loadXML\",\n      \"loadStrings\", \"log\", \"loop\", \"mag\", \"map\", \"match\", \"matchAll\", \"max\",\n      \"millis\", \"min\", \"minute\", \"mix\", \"modelX\", \"modelY\", \"modelZ\", \"modes\",\n      \"month\", \"mouseButton\", \"mouseClicked\", \"mouseDragged\", \"mouseMoved\",\n      \"mouseOut\", \"mouseOver\", \"mousePressed\", \"mouseReleased\", \"mouseScroll\",\n      \"mouseScrolled\", \"mouseX\", \"mouseY\", \"name\", \"nf\", \"nfc\", \"nfp\", \"nfs\",\n      \"noCursor\", \"noFill\", \"noise\", \"noiseDetail\", \"noiseSeed\", \"noLights\",\n      \"noLoop\", \"norm\", \"normal\", \"noSmooth\", \"noStroke\", \"noTint\", \"ortho\",\n      \"param\", \"parseBoolean\", \"parseByte\", \"parseChar\", \"parseFloat\",\n      \"parseInt\", \"peg\", \"perspective\", \"PImage\", \"pixels\", \"PMatrix2D\",\n      \"PMatrix3D\", \"PMatrixStack\", \"pmouseX\", \"pmouseY\", \"point\",\n      \"pointLight\", \"popMatrix\", \"popStyle\", \"pow\", \"print\", \"printCamera\",\n      \"println\", \"printMatrix\", \"printProjection\", \"PShape\", \"PShapeSVG\",\n      \"pushMatrix\", \"pushStyle\", \"quad\", \"radians\", \"random\", \"randomGaussian\",\n      \"randomSeed\", \"rect\", \"rectMode\", \"red\", \"redraw\", \"requestImage\",\n      \"resetMatrix\", \"reverse\", \"rotate\", \"rotateX\", \"rotateY\", \"rotateZ\",\n      \"round\", \"saturation\", \"save\", \"saveFrame\", \"saveStrings\", \"scale\",\n      \"screenX\", \"screenY\", \"screenZ\", \"second\", \"set\", \"setup\", \"shape\",\n      \"shapeMode\", \"shared\", \"shearX\", \"shearY\", \"shininess\", \"shorten\", \"sin\", \"size\", \"smooth\",\n      \"sort\", \"specular\", \"sphere\", \"sphereDetail\", \"splice\", \"split\",\n      \"splitTokens\", \"spotLight\", \"sq\", \"sqrt\", \"status\", \"str\", \"stroke\",\n      \"strokeCap\", \"strokeJoin\", \"strokeWeight\", \"subset\", \"tan\", \"text\",\n      \"textAlign\", \"textAscent\", \"textDescent\", \"textFont\", \"textLeading\",\n      \"textMode\", \"textSize\", \"texture\", \"textureMode\", \"textWidth\", \"tint\", \"toImageData\",\n      \"touchCancel\", \"touchEnd\", \"touchMove\", \"touchStart\", \"translate\", \"transform\",\n      \"triangle\", \"trim\", \"unbinary\", \"unhex\", \"updatePixels\", \"use3DContext\",\n      \"vertex\", \"width\", \"XMLElement\", \"XML\", \"year\", \"__contains\", \"__equals\",\n      \"__equalsIgnoreCase\", \"__frameRate\", \"__hashCode\", \"__int_cast\",\n      \"__instanceof\", \"__keyPressed\", \"__mousePressed\", \"__printStackTrace\",\n      \"__replace\", \"__replaceAll\", \"__replaceFirst\", \"__toCharArray\", \"__split\",\n      \"__codePointAt\", \"__startsWith\", \"__endsWith\", \"__matches\"];\n\n    // custom functions and properties are added here\n    if(aFunctions) {\n      Object.keys(aFunctions).forEach(function(name) {\n        names.push(name);\n      });\n    }\n\n    // custom libraries that were attached to Processing\n    var members = {};\n    var i, l;\n    for (i = 0, l = names.length; i < l ; ++i) {\n      members[names[i]] = null;\n    }\n    for (var lib in Processing.lib) {\n      if (Processing.lib.hasOwnProperty(lib)) {\n        if (Processing.lib[lib].exports) {\n          var exportedNames = Processing.lib[lib].exports;\n          for (i = 0, l = exportedNames.length; i < l; ++i) {\n           members[exportedNames[i]] = null;\n          }\n        }\n      }\n    }\n    return members;\n  }\n\n  /*\n\n    Parser converts Java-like syntax into JavaScript.\n    Creates an Abstract Syntax Tree -- \"Light AST\" from the Java-like code.\n\n    It is an object tree. The root object is created from the AstRoot class, which contains statements.\n\n    A statement object can be of type: AstForStatement, AstCatchStatement, AstPrefixStatement, AstMethod, AstClass,\n    AstInterface, AstFunction, AstStatementBlock and AstLabel.\n\n    AstPrefixStatement can be a statement of type: if, switch, while, with, do, else, finally, return, throw, try, break, and continue.\n\n    These object's toString function returns the JavaScript code for the statement.\n\n    Any processing calls need \"processing.\" prepended to them.\n\n    Similarly, calls from inside classes need \"$this_1.\", prepended to them,\n    with 1 being the depth level for inner classes.\n    This includes members passed down from inheritance.\n\n    The resulting code is then eval'd and run.\n\n  */\n\n  function parseProcessing(code) {\n    var globalMembers = getGlobalMembers();\n\n    // masks parentheses, brackets and braces with '\"A5\"'\n    // where A is the bracket type, and 5 is the index in an array containing all brackets split into atoms\n    // 'while(true){}' -> 'while\"B1\"\"A2\"'\n    // parentheses() = B, brackets[] = C and braces{} = A\n    function splitToAtoms(code) {\n      var atoms = [];\n      var items = code.split(/([\\{\\[\\(\\)\\]\\}])/);\n      var result = items[0];\n\n      var stack = [];\n      for(var i=1; i < items.length; i += 2) {\n        var item = items[i];\n        if(item === '[' || item === '{' || item === '(') {\n          stack.push(result); result = item;\n        } else if(item === ']' || item === '}' || item === ')') {\n          var kind = item === '}' ? 'A' : item === ')' ? 'B' : 'C';\n          var index = atoms.length; atoms.push(result + item);\n          result = stack.pop() + '\"' + kind + (index + 1) + '\"';\n        }\n        result += items[i + 1];\n      }\n      atoms.unshift(result);\n      return atoms;\n    }\n\n    // replaces strings and regexs keyed by index with an array of strings\n    function injectStrings(code, strings) {\n      return code.replace(/'(\\d+)'/g, function(all, index) {\n        var val = strings[index];\n        if(val.charAt(0) === \"/\") {\n          return val;\n        }\n        return (/^'((?:[^'\\\\\\n])|(?:\\\\.[0-9A-Fa-f]*))'$/).test(val) ? \"(new $p.Character(\" + val + \"))\" : val;\n      });\n    }\n\n    // trims off leading and trailing spaces\n    // returns an object. object.left, object.middle, object.right, object.untrim\n    function trimSpaces(string) {\n      var m1 = /^\\s*/.exec(string), result;\n      if(m1[0].length === string.length) {\n        result = {left: m1[0], middle: \"\", right: \"\"};\n      } else {\n        var m2 = /\\s*$/.exec(string);\n        result = {left: m1[0], middle: string.substring(m1[0].length, m2.index), right: m2[0]};\n      }\n      result.untrim = function(t) { return this.left + t + this.right; };\n      return result;\n    }\n\n    // simple trim of leading and trailing spaces\n    function trim(string) {\n      return string.replace(/^\\s+/,'').replace(/\\s+$/,'');\n    }\n\n    function appendToLookupTable(table, array) {\n      for(var i=0,l=array.length;i<l;++i) {\n        table[array[i]] = null;\n      }\n      return table;\n    }\n\n    function isLookupTableEmpty(table) {\n      for(var i in table) {\n        if(table.hasOwnProperty(i)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    function getAtomIndex(templ) { return templ.substring(2, templ.length - 1); }\n\n    // remove carriage returns \"\\r\"\n    var codeWoExtraCr = code.replace(/\\r\\n?|\\n\\r/g, \"\\n\");\n\n    // masks strings and regexs with \"'5'\", where 5 is the index in an array containing all strings and regexs\n    // also removes all comments\n    var strings = [];\n    var codeWoStrings = codeWoExtraCr.replace(/(\"(?:[^\"\\\\\\n]|\\\\.)*\")|('(?:[^'\\\\\\n]|\\\\.)*')|(([\\[\\(=|&!\\^:?]\\s*)(\\/(?![*\\/])(?:[^\\/\\\\\\n]|\\\\.)*\\/[gim]*)\\b)|(\\/\\/[^\\n]*\\n)|(\\/\\*(?:(?!\\*\\/)(?:.|\\n))*\\*\\/)/g,\n    function(all, quoted, aposed, regexCtx, prefix, regex, singleComment, comment) {\n      var index;\n      if(quoted || aposed) { // replace strings\n        index = strings.length; strings.push(all);\n        return \"'\" + index + \"'\";\n      }\n      if(regexCtx) { // replace RegExps\n        index = strings.length; strings.push(regex);\n        return prefix + \"'\" + index + \"'\";\n      }\n      // kill comments\n      return comment !== \"\" ? \" \" : \"\\n\";\n    });\n\n    // protect character codes from namespace collision\n    codeWoStrings = codeWoStrings.replace(/__x([0-9A-F]{4})/g, function(all, hexCode) {\n      // $ = __x0024\n      // _ = __x005F\n      // this protects existing character codes from conversion\n      // __x0024 = __x005F_x0024\n      return \"__x005F_x\" + hexCode;\n    });\n\n    // convert dollar sign to character code\n    codeWoStrings = codeWoStrings.replace(/\\$/g, \"__x0024\");\n\n    // Remove newlines after return statements\n    codeWoStrings = codeWoStrings.replace(/return\\s*[\\n\\r]+/g, \"return \");\n\n    // removes generics\n    var genericsWereRemoved;\n    var codeWoGenerics = codeWoStrings;\n    var replaceFunc = function(all, before, types, after) {\n      if(!!before || !!after) {\n        return all;\n      }\n      genericsWereRemoved = true;\n      return \"\";\n    };\n\n    do {\n      genericsWereRemoved = false;\n      codeWoGenerics = codeWoGenerics.replace(/([<]?)<\\s*((?:\\?|[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)(?:\\[\\])*(?:\\s+(?:extends|super)\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)?(?:\\s*,\\s*(?:\\?|[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)(?:\\[\\])*(?:\\s+(?:extends|super)\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)?)*)\\s*>([=]?)/g, replaceFunc);\n    } while (genericsWereRemoved);\n\n    var atoms = splitToAtoms(codeWoGenerics);\n    var replaceContext;\n    var declaredClasses = {}, currentClassId, classIdSeed = 0;\n\n    function addAtom(text, type) {\n      var lastIndex = atoms.length;\n      atoms.push(text);\n      return '\"' + type + lastIndex + '\"';\n    }\n\n    function generateClassId() {\n      return \"class\" + (++classIdSeed);\n    }\n\n    function appendClass(class_, classId, scopeId) {\n      class_.classId = classId;\n      class_.scopeId = scopeId;\n      declaredClasses[classId] = class_;\n    }\n\n    // functions defined below\n    var transformClassBody, transformInterfaceBody, transformStatementsBlock, transformStatements, transformMain, transformExpression;\n\n    var classesRegex = /\\b((?:(?:public|private|final|protected|static|abstract)\\s+)*)(class|interface)\\s+([A-Za-z_$][\\w$]*\\b)(\\s+extends\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*,\\s*[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*\\b)*)?(\\s+implements\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*,\\s*[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*\\b)*)?\\s*(\"A\\d+\")/g;\n    var methodsRegex = /\\b((?:(?:public|private|final|protected|static|abstract|synchronized)\\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\\b)[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*\"C\\d+\")*)\\s*([A-Za-z_$][\\w$]*\\b)\\s*(\"B\\d+\")(\\s*throws\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*,\\s*[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)*)?\\s*(\"A\\d+\"|;)/g;\n    var fieldTest = /^((?:(?:public|private|final|protected|static)\\s+)*)((?!(?:else|new|return|throw)\\b)[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*\"C\\d+\")*)\\s*([A-Za-z_$][\\w$]*\\b)\\s*(?:\"C\\d+\"\\s*)*([=,]|$)/;\n    var cstrsRegex = /\\b((?:(?:public|private|final|protected|static|abstract)\\s+)*)((?!(?:new|return|throw)\\b)[A-Za-z_$][\\w$]*\\b)\\s*(\"B\\d+\")(\\s*throws\\s+[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*,\\s*[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)*)?\\s*(\"A\\d+\")/g;\n    var attrAndTypeRegex = /^((?:(?:public|private|final|protected|static)\\s+)*)((?!(?:new|return|throw)\\b)[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*(?:\\s*\"C\\d+\")*)\\s*/;\n    var functionsRegex = /\\bfunction(?:\\s+([A-Za-z_$][\\w$]*))?\\s*(\"B\\d+\")\\s*(\"A\\d+\")/g;\n\n    // This converts classes, methods and functions into atoms, and adds them to the atoms array.\n    // classes = E, methods = D and functions = H\n    function extractClassesAndMethods(code) {\n      var s = code;\n      s = s.replace(classesRegex, function(all) {\n        return addAtom(all, 'E');\n      });\n      s = s.replace(methodsRegex, function(all) {\n        return addAtom(all, 'D');\n      });\n      s = s.replace(functionsRegex, function(all) {\n        return addAtom(all, 'H');\n      });\n      return s;\n    }\n\n    // This converts constructors into atoms, and adds them to the atoms array.\n    // constructors = G\n    function extractConstructors(code, className) {\n      var result = code.replace(cstrsRegex, function(all, attr, name, params, throws_, body) {\n        if(name !== className) {\n          return all;\n        }\n        return addAtom(all, 'G');\n      });\n      return result;\n    }\n\n    // AstParam contains the name of a parameter inside a function declaration\n    function AstParam(name) {\n      this.name = name;\n    }\n    AstParam.prototype.toString = function() {\n      return this.name;\n    };\n    // AstParams contains an array of AstParam objects\n    function AstParams(params, methodArgsParam) {\n      this.params = params;\n      this.methodArgsParam = methodArgsParam;\n    }\n    AstParams.prototype.getNames = function() {\n      var names = [];\n      for(var i=0,l=this.params.length;i<l;++i) {\n        names.push(this.params[i].name);\n      }\n      return names;\n    };\n    AstParams.prototype.prependMethodArgs = function(body) {\n      if (!this.methodArgsParam) {\n        return body;\n      }\n      return \"{\\nvar \" + this.methodArgsParam.name +\n        \" = Array.prototype.slice.call(arguments, \" +\n        this.params.length + \");\\n\" + body.substring(1);\n    };\n    AstParams.prototype.toString = function() {\n      if(this.params.length === 0) {\n        return \"()\";\n      }\n      var result = \"(\";\n      for(var i=0,l=this.params.length;i<l;++i) {\n        result += this.params[i] + \", \";\n      }\n      return result.substring(0, result.length - 2) + \")\";\n    };\n\n    function transformParams(params) {\n      var paramsWoPars = trim(params.substring(1, params.length - 1));\n      var result = [], methodArgsParam = null;\n      if(paramsWoPars !== \"\") {\n        var paramList = paramsWoPars.split(\",\");\n        for(var i=0; i < paramList.length; ++i) {\n          var param = /\\b([A-Za-z_$][\\w$]*\\b)(\\s*\"[ABC][\\d]*\")*\\s*$/.exec(paramList[i]);\n          if (i === paramList.length - 1 && paramList[i].indexOf('...') >= 0) {\n            methodArgsParam = new AstParam(param[1]);\n            break;\n          }\n          result.push(new AstParam(param[1]));\n        }\n      }\n      return new AstParams(result, methodArgsParam);\n    }\n\n    function preExpressionTransform(expr) {\n      var s = expr;\n      // new type[] {...} --> {...}\n      s = s.replace(/\\bnew\\s+([A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)(?:\\s*\"C\\d+\")+\\s*(\"A\\d+\")/g, function(all, type, init) {\n        return init;\n      });\n      // new Runnable() {...} --> \"F???\"\n      s = s.replace(/\\bnew\\s+([A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)(?:\\s*\"B\\d+\")\\s*(\"A\\d+\")/g, function(all, type, init) {\n        return addAtom(all, 'F');\n      });\n      // function(...) { } --> \"H???\"\n      s = s.replace(functionsRegex, function(all) {\n        return addAtom(all, 'H');\n      });\n      // new type[?] --> createJavaArray('type', [?])\n      s = s.replace(/\\bnew\\s+([A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)\\s*(\"C\\d+\"(?:\\s*\"C\\d+\")*)/g, function(all, type, index) {\n        var args = index.replace(/\"C(\\d+)\"/g, function(all, j) { return atoms[j]; })\n          .replace(/\\[\\s*\\]/g, \"[null]\").replace(/\\s*\\]\\s*\\[\\s*/g, \", \");\n        var arrayInitializer = \"{\" + args.substring(1, args.length - 1) + \"}\";\n        var createArrayArgs = \"('\" + type + \"', \" + addAtom(arrayInitializer, 'A') + \")\";\n        return '$p.createJavaArray' + addAtom(createArrayArgs, 'B');\n      });\n      // .length() --> .length\n      s = s.replace(/(\\.\\s*length)\\s*\"B\\d+\"/g, \"$1\");\n      // #000000 --> 0x000000\n      s = s.replace(/#([0-9A-Fa-f]{6})\\b/g, function(all, digits) {\n        return \"0xFF\" + digits;\n      });\n      // delete (type)???, except (int)???\n      s = s.replace(/\"B(\\d+)\"(\\s*(?:[\\w$']|\"B))/g, function(all, index, next) {\n        var atom = atoms[index];\n        if(!/^\\(\\s*[A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*\\s*(?:\"C\\d+\"\\s*)*\\)$/.test(atom)) {\n          return all;\n        }\n        if(/^\\(\\s*int\\s*\\)$/.test(atom)) {\n          return \"(int)\" + next;\n        }\n        var indexParts = atom.split(/\"C(\\d+)\"/g);\n        if(indexParts.length > 1) {\n          // even items contains atom numbers, can check only first\n          if(! /^\\[\\s*\\]$/.test(atoms[indexParts[1]])) {\n            return all; // fallback - not a cast\n          }\n        }\n        return \"\" + next;\n      });\n      // (int)??? -> __int_cast(???)\n      s = s.replace(/\\(int\\)([^,\\]\\)\\}\\?\\:\\*\\+\\-\\/\\^\\|\\%\\&\\~<\\>\\=]+)/g, function(all, arg) {\n        var trimmed = trimSpaces(arg);\n        return trimmed.untrim(\"__int_cast(\" + trimmed.middle + \")\");\n      });\n      // super() -> $superCstr(), super. -> $super.;\n      s = s.replace(/\\bsuper(\\s*\"B\\d+\")/g, \"$$superCstr$1\").replace(/\\bsuper(\\s*\\.)/g, \"$$super$1\");\n      // 000.43->0.43 and 0010f->10, but not 0010\n      s = s.replace(/\\b0+((\\d*)(?:\\.[\\d*])?(?:[eE][\\-\\+]?\\d+)?[fF]?)\\b/, function(all, numberWo0, intPart) {\n        if( numberWo0 === intPart) {\n          return all;\n        }\n        return intPart === \"\" ? \"0\" + numberWo0 : numberWo0;\n      });\n      // 3.0f -> 3.0\n      s = s.replace(/\\b(\\.?\\d+\\.?)[fF]\\b/g, \"$1\");\n      // Weird (?) parsing errors with %\n      s = s.replace(/([^\\s])%([^=\\s])/g, \"$1 % $2\");\n      // Since frameRate() and frameRate are different things,\n      // we need to differentiate them somehow. So when we parse\n      // the Processing.js source, replace frameRate so it isn't\n      // confused with frameRate(), as well as keyPressed and mousePressed\n      s = s.replace(/\\b(frameRate|keyPressed|mousePressed)\\b(?!\\s*\"B)/g, \"__$1\");\n      // \"boolean\", \"byte\", \"int\", etc. => \"parseBoolean\", \"parseByte\", \"parseInt\", etc.\n      s = s.replace(/\\b(boolean|byte|char|float|int)\\s*\"B/g, function(all, name) {\n        return \"parse\" + name.substring(0, 1).toUpperCase() + name.substring(1) + \"\\\"B\";\n      });\n      // \"pixels\" replacements:\n      //   pixels[i] = c => pixels.setPixel(i,c) | pixels[i] => pixels.getPixel(i)\n      //   pixels.length => pixels.getLength()\n      //   pixels = ar => pixels.set(ar) | pixels => pixels.toArray()\n      s = s.replace(/\\bpixels\\b\\s*((\"C(\\d+)\")|\\.length)?(\\s*=(?!=)([^,\\]\\)\\}]+))?/g,\n        function(all, indexOrLength, index, atomIndex, equalsPart, rightSide) {\n          if(index) {\n            var atom = atoms[atomIndex];\n            if(equalsPart) {\n              return \"pixels.setPixel\" + addAtom(\"(\" +atom.substring(1, atom.length - 1) +\n                \",\" + rightSide + \")\", 'B');\n            }\n            return \"pixels.getPixel\" + addAtom(\"(\" + atom.substring(1, atom.length - 1) +\n              \")\", 'B');\n          }\n          if(indexOrLength) {\n            // length\n            return \"pixels.getLength\" + addAtom(\"()\", 'B');\n          }\n          if(equalsPart) {\n            return \"pixels.set\" + addAtom(\"(\" + rightSide + \")\", 'B');\n          }\n          return \"pixels.toArray\" + addAtom(\"()\", 'B');\n        });\n      // Java method replacements for: replace, replaceAll, replaceFirst, equals, hashCode, etc.\n      //   xxx.replace(yyy) -> __replace(xxx, yyy)\n      //   \"xx\".replace(yyy) -> __replace(\"xx\", yyy)\n      var repeatJavaReplacement;\n      function replacePrototypeMethods(all, subject, method, atomIndex) {\n        var atom = atoms[atomIndex];\n        repeatJavaReplacement = true;\n        var trimmed = trimSpaces(atom.substring(1, atom.length - 1));\n        return \"__\" + method  + ( trimmed.middle === \"\" ? addAtom(\"(\" + subject.replace(/\\.\\s*$/, \"\") + \")\", 'B') :\n          addAtom(\"(\" + subject.replace(/\\.\\s*$/, \"\") + \",\" + trimmed.middle + \")\", 'B') );\n      }\n      do {\n        repeatJavaReplacement = false;\n        s = s.replace(/((?:'\\d+'|\\b[A-Za-z_$][\\w$]*\\s*(?:\"[BC]\\d+\")*)\\s*\\.\\s*(?:[A-Za-z_$][\\w$]*\\s*(?:\"[BC]\\d+\"\\s*)*\\.\\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\\s*\"B(\\d+)\"/g,\n          replacePrototypeMethods);\n      } while (repeatJavaReplacement);\n      // xxx instanceof yyy -> __instanceof(xxx, yyy)\n      function replaceInstanceof(all, subject, type) {\n        repeatJavaReplacement = true;\n        return \"__instanceof\" + addAtom(\"(\" + subject + \", \" + type + \")\", 'B');\n      }\n      do {\n        repeatJavaReplacement = false;\n        s = s.replace(/((?:'\\d+'|\\b[A-Za-z_$][\\w$]*\\s*(?:\"[BC]\\d+\")*)\\s*(?:\\.\\s*[A-Za-z_$][\\w$]*\\s*(?:\"[BC]\\d+\"\\s*)*)*)instanceof\\s+([A-Za-z_$][\\w$]*\\s*(?:\\.\\s*[A-Za-z_$][\\w$]*)*)/g,\n          replaceInstanceof);\n      } while (repeatJavaReplacement);\n      // this() -> $constr()\n      s = s.replace(/\\bthis(\\s*\"B\\d+\")/g, \"$$constr$1\");\n\n      return s;\n    }\n\n    function AstInlineClass(baseInterfaceName, body) {\n      this.baseInterfaceName = baseInterfaceName;\n      this.body = body;\n      body.owner = this;\n    }\n    AstInlineClass.prototype.toString = function() {\n      return \"new (\" + this.body + \")\";\n    };\n\n    function transformInlineClass(class_) {\n      var m = new RegExp(/\\bnew\\s*([A-Za-z_$][\\w$]*\\s*(?:\\.\\s*[A-Za-z_$][\\w$]*)*)\\s*\"B\\d+\"\\s*\"A(\\d+)\"/).exec(class_);\n      var oldClassId = currentClassId, newClassId = generateClassId();\n      currentClassId = newClassId;\n      var uniqueClassName = m[1] + \"$\" + newClassId;\n      var inlineClass = new AstInlineClass(uniqueClassName,\n        transformClassBody(atoms[m[2]], uniqueClassName, \"\", \"implements \" + m[1]));\n      appendClass(inlineClass, newClassId, oldClassId);\n      currentClassId = oldClassId;\n      return inlineClass;\n    }\n\n    function AstFunction(name, params, body) {\n      this.name = name;\n      this.params = params;\n      this.body = body;\n    }\n    AstFunction.prototype.toString = function() {\n      var oldContext = replaceContext;\n      // saving \"this.\" and parameters\n      var names = appendToLookupTable({\"this\":null}, this.params.getNames());\n      replaceContext = function (subject) {\n        return names.hasOwnProperty(subject.name) ? subject.name : oldContext(subject);\n      };\n      var result = \"function\";\n      if(this.name) {\n        result += \" \" + this.name;\n      }\n      var body = this.params.prependMethodArgs(this.body.toString());\n      result += this.params + \" \" + body;\n      replaceContext = oldContext;\n      return result;\n    };\n\n    function transformFunction(class_) {\n      var m = new RegExp(/\\b([A-Za-z_$][\\w$]*)\\s*\"B(\\d+)\"\\s*\"A(\\d+)\"/).exec(class_);\n      return new AstFunction( m[1] !== \"function\" ? m[1] : null,\n        transformParams(atoms[m[2]]), transformStatementsBlock(atoms[m[3]]));\n    }\n\n    function AstInlineObject(members) {\n      this.members = members;\n    }\n    AstInlineObject.prototype.toString = function() {\n      var oldContext = replaceContext;\n      replaceContext = function (subject) {\n          return subject.name === \"this\" ? \"this\" : oldContext(subject); // saving \"this.\"\n      };\n      var result = \"\";\n      for(var i=0,l=this.members.length;i<l;++i) {\n        if(this.members[i].label) {\n          result += this.members[i].label + \": \";\n        }\n        result += this.members[i].value.toString() + \", \";\n      }\n      replaceContext = oldContext;\n      return result.substring(0, result.length - 2);\n    };\n\n    function transformInlineObject(obj) {\n      var members = obj.split(',');\n      for(var i=0; i < members.length; ++i) {\n        var label = members[i].indexOf(':');\n        if(label < 0) {\n          members[i] = { value: transformExpression(members[i]) };\n        } else {\n          members[i] = { label: trim(members[i].substring(0, label)),\n            value: transformExpression( trim(members[i].substring(label + 1)) ) };\n        }\n      }\n      return new AstInlineObject(members);\n    }\n\n    function expandExpression(expr) {\n      if(expr.charAt(0) === '(' || expr.charAt(0) === '[') {\n        return expr.charAt(0) + expandExpression(expr.substring(1, expr.length - 1)) + expr.charAt(expr.length - 1);\n      }\n      if(expr.charAt(0) === '{') {\n        if(/^\\{\\s*(?:[A-Za-z_$][\\w$]*|'\\d+')\\s*:/.test(expr)) {\n          return \"{\" + addAtom(expr.substring(1, expr.length - 1), 'I') + \"}\";\n        }\n        return \"[\" + expandExpression(expr.substring(1, expr.length - 1)) + \"]\";\n      }\n      var trimmed = trimSpaces(expr);\n      var result = preExpressionTransform(trimmed.middle);\n      result = result.replace(/\"[ABC](\\d+)\"/g, function(all, index) {\n        return expandExpression(atoms[index]);\n      });\n      return trimmed.untrim(result);\n    }\n\n    function replaceContextInVars(expr) {\n      return expr.replace(/(\\.\\s*)?((?:\\b[A-Za-z_]|\\$)[\\w$]*)(\\s*\\.\\s*([A-Za-z_$][\\w$]*)(\\s*\\()?)?/g,\n        function(all, memberAccessSign, identifier, suffix, subMember, callSign) {\n          if(memberAccessSign) {\n            return all;\n          }\n          var subject = { name: identifier, member: subMember, callSign: !!callSign };\n          return replaceContext(subject) + (suffix === undef ? \"\" : suffix);\n        });\n    }\n\n    function AstExpression(expr, transforms) {\n      this.expr = expr;\n      this.transforms = transforms;\n    }\n    AstExpression.prototype.toString = function() {\n      var transforms = this.transforms;\n      var expr = replaceContextInVars(this.expr);\n      return expr.replace(/\"!(\\d+)\"/g, function(all, index) {\n        return transforms[index].toString();\n      });\n    };\n\n    transformExpression = function(expr) {\n      var transforms = [];\n      var s = expandExpression(expr);\n      s = s.replace(/\"H(\\d+)\"/g, function(all, index) {\n        transforms.push(transformFunction(atoms[index]));\n        return '\"!' + (transforms.length - 1) + '\"';\n      });\n      s = s.replace(/\"F(\\d+)\"/g, function(all, index) {\n        transforms.push(transformInlineClass(atoms[index]));\n        return '\"!' + (transforms.length - 1) + '\"';\n      });\n      s = s.replace(/\"I(\\d+)\"/g, function(all, index) {\n        transforms.push(transformInlineObject(atoms[index]));\n        return '\"!' + (transforms.length - 1) + '\"';\n      });\n\n      return new AstExpression(s, transforms);\n    };\n\n    function AstVarDefinition(name, value, isDefault) {\n      this.name = name;\n      this.value = value;\n      this.isDefault = isDefault;\n    }\n    AstVarDefinition.prototype.toString = function() {\n      return this.name + ' = ' + this.value;\n    };\n\n    function transformVarDefinition(def, defaultTypeValue) {\n      var eqIndex = def.indexOf(\"=\");\n      var name, value, isDefault;\n      if(eqIndex < 0) {\n        name = def;\n        value = defaultTypeValue;\n        isDefault = true;\n      } else {\n        name = def.substring(0, eqIndex);\n        value = transformExpression(def.substring(eqIndex + 1));\n        isDefault = false;\n      }\n      return new AstVarDefinition( trim(name.replace(/(\\s*\"C\\d+\")+/g, \"\")),\n        value, isDefault);\n    }\n\n    function getDefaultValueForType(type) {\n        if(type === \"int\" || type === \"float\") {\n          return \"0\";\n        }\n        if(type === \"boolean\") {\n          return \"false\";\n        }\n        if(type === \"color\") {\n          return \"0x00000000\";\n        }\n        return \"null\";\n    }\n\n    function AstVar(definitions, varType) {\n      this.definitions = definitions;\n      this.varType = varType;\n    }\n    AstVar.prototype.getNames = function() {\n      var names = [];\n      for(var i=0,l=this.definitions.length;i<l;++i) {\n        names.push(this.definitions[i].name);\n      }\n      return names;\n    };\n    AstVar.prototype.toString = function() {\n      return \"var \" + this.definitions.join(\",\");\n    };\n    function AstStatement(expression) {\n      this.expression = expression;\n    }\n    AstStatement.prototype.toString = function() {\n      return this.expression.toString();\n    };\n\n    function transformStatement(statement) {\n      if(fieldTest.test(statement)) {\n        var attrAndType = attrAndTypeRegex.exec(statement);\n        var definitions = statement.substring(attrAndType[0].length).split(\",\");\n        var defaultTypeValue = getDefaultValueForType(attrAndType[2]);\n        for(var i=0; i < definitions.length; ++i) {\n          definitions[i] = transformVarDefinition(definitions[i], defaultTypeValue);\n        }\n        return new AstVar(definitions, attrAndType[2]);\n      }\n      return new AstStatement(transformExpression(statement));\n    }\n\n    function AstForExpression(initStatement, condition, step) {\n      this.initStatement = initStatement;\n      this.condition = condition;\n      this.step = step;\n    }\n    AstForExpression.prototype.toString = function() {\n      return \"(\" + this.initStatement + \"; \" + this.condition + \"; \" + this.step + \")\";\n    };\n\n    function AstForInExpression(initStatement, container) {\n      this.initStatement = initStatement;\n      this.container = container;\n    }\n    AstForInExpression.prototype.toString = function() {\n      var init = this.initStatement.toString();\n      if(init.indexOf(\"=\") >= 0) { // can be without var declaration\n        init = init.substring(0, init.indexOf(\"=\"));\n      }\n      return \"(\" + init + \" in \" + this.container + \")\";\n    };\n\n    function AstForEachExpression(initStatement, container) {\n      this.initStatement = initStatement;\n      this.container = container;\n    }\n    AstForEachExpression.iteratorId = 0;\n    AstForEachExpression.prototype.toString = function() {\n      var init = this.initStatement.toString();\n      var iterator = \"$it\" + (AstForEachExpression.iteratorId++);\n      var variableName = init.replace(/^\\s*var\\s*/, \"\").split(\"=\")[0];\n      var initIteratorAndVariable = \"var \" + iterator + \" = new $p.ObjectIterator(\" + this.container + \"), \" +\n         variableName + \" = void(0)\";\n      var nextIterationCondition = iterator + \".hasNext() && ((\" +\n         variableName + \" = \" + iterator + \".next()) || true)\";\n      return \"(\" + initIteratorAndVariable + \"; \" + nextIterationCondition + \";)\";\n    };\n\n    function transformForExpression(expr) {\n      var content;\n      if (/\\bin\\b/.test(expr)) {\n        content = expr.substring(1, expr.length - 1).split(/\\bin\\b/g);\n        return new AstForInExpression( transformStatement(trim(content[0])),\n          transformExpression(content[1]));\n      }\n      if (expr.indexOf(\":\") >= 0 && expr.indexOf(\";\") < 0) {\n        content = expr.substring(1, expr.length - 1).split(\":\");\n        return new AstForEachExpression( transformStatement(trim(content[0])),\n          transformExpression(content[1]));\n      }\n      content = expr.substring(1, expr.length - 1).split(\";\");\n      return new AstForExpression( transformStatement(trim(content[0])),\n        transformExpression(content[1]), transformExpression(content[2]));\n    }\n\n    function sortByWeight(array) {\n      array.sort(function (a,b) {\n        return b.weight - a.weight;\n      });\n    }\n\n    function AstInnerInterface(name, body, isStatic) {\n      this.name = name;\n      this.body = body;\n      this.isStatic = isStatic;\n      body.owner = this;\n    }\n    AstInnerInterface.prototype.toString = function() {\n      return \"\" + this.body;\n    };\n    function AstInnerClass(name, body, isStatic) {\n      this.name = name;\n      this.body = body;\n      this.isStatic = isStatic;\n      body.owner = this;\n    }\n    AstInnerClass.prototype.toString = function() {\n      return \"\" + this.body;\n    };\n\n    function transformInnerClass(class_) {\n      var m = classesRegex.exec(class_); // 1 - attr, 2 - class|int, 3 - name, 4 - extends, 5 - implements, 6 - body\n      classesRegex.lastIndex = 0;\n      var isStatic = m[1].indexOf(\"static\") >= 0;\n      var body = atoms[getAtomIndex(m[6])], innerClass;\n      var oldClassId = currentClassId, newClassId = generateClassId();\n      currentClassId = newClassId;\n      if(m[2] === \"interface\") {\n        innerClass = new AstInnerInterface(m[3], transformInterfaceBody(body, m[3], m[4]), isStatic);\n      } else {\n        innerClass = new AstInnerClass(m[3], transformClassBody(body, m[3], m[4], m[5]), isStatic);\n      }\n      appendClass(innerClass, newClassId, oldClassId);\n      currentClassId = oldClassId;\n      return innerClass;\n    }\n\n    function AstClassMethod(name, params, body, isStatic) {\n      this.name = name;\n      this.params = params;\n      this.body = body;\n      this.isStatic = isStatic;\n    }\n    AstClassMethod.prototype.toString = function(){\n      var paramNames = appendToLookupTable({}, this.params.getNames());\n      var oldContext = replaceContext;\n      replaceContext = function (subject) {\n        return paramNames.hasOwnProperty(subject.name) ? subject.name : oldContext(subject);\n      };\n      var body = this.params.prependMethodArgs(this.body.toString());\n      var result = \"function \" + this.methodId + this.params + \" \" + body +\"\\n\";\n      replaceContext = oldContext;\n      return result;\n    };\n\n    function transformClassMethod(method) {\n      var m = methodsRegex.exec(method);\n      methodsRegex.lastIndex = 0;\n      var isStatic = m[1].indexOf(\"static\") >= 0;\n      var body = m[6] !== ';' ? atoms[getAtomIndex(m[6])] : \"{}\";\n      return new AstClassMethod(m[3], transformParams(atoms[getAtomIndex(m[4])]),\n        transformStatementsBlock(body), isStatic );\n    }\n\n    function AstClassField(definitions, fieldType, isStatic) {\n      this.definitions = definitions;\n      this.fieldType = fieldType;\n      this.isStatic = isStatic;\n    }\n    AstClassField.prototype.getNames = function() {\n      var names = [];\n      for(var i=0,l=this.definitions.length;i<l;++i) {\n        names.push(this.definitions[i].name);\n      }\n      return names;\n    };\n    AstClassField.prototype.toString = function() {\n      var thisPrefix = replaceContext({ name: \"[this]\" });\n      if(this.isStatic) {\n        var className = this.owner.name;\n        var staticDeclarations = [];\n        for(var i=0,l=this.definitions.length;i<l;++i) {\n          var definition = this.definitions[i];\n          var name = definition.name, staticName = className + \".\" + name;\n          var declaration = \"if(\" + staticName + \" === void(0)) {\\n\" +\n            \" \" + staticName + \" = \" + definition.value + \"; }\\n\" +\n            \"$p.defineProperty(\" + thisPrefix + \", \" +\n            \"'\" + name + \"', { get: function(){return \" + staticName + \";}, \" +\n            \"set: function(val){\" + staticName + \" = val;} });\\n\";\n          staticDeclarations.push(declaration);\n        }\n        return staticDeclarations.join(\"\");\n      }\n      return thisPrefix + \".\" + this.definitions.join(\"; \" + thisPrefix + \".\");\n    };\n\n    function transformClassField(statement) {\n      var attrAndType = attrAndTypeRegex.exec(statement);\n      var isStatic = attrAndType[1].indexOf(\"static\") >= 0;\n      var definitions = statement.substring(attrAndType[0].length).split(/,\\s*/g);\n      var defaultTypeValue = getDefaultValueForType(attrAndType[2]);\n      for(var i=0; i < definitions.length; ++i) {\n        definitions[i] = transformVarDefinition(definitions[i], defaultTypeValue);\n      }\n      return new AstClassField(definitions, attrAndType[2], isStatic);\n    }\n\n    function AstConstructor(params, body) {\n      this.params = params;\n      this.body = body;\n    }\n    AstConstructor.prototype.toString = function() {\n      var paramNames = appendToLookupTable({}, this.params.getNames());\n      var oldContext = replaceContext;\n      replaceContext = function (subject) {\n        return paramNames.hasOwnProperty(subject.name) ? subject.name : oldContext(subject);\n      };\n      var prefix = \"function $constr_\" + this.params.params.length + this.params.toString();\n      var body = this.params.prependMethodArgs(this.body.toString());\n      if(!/\\$(superCstr|constr)\\b/.test(body)) {\n        body = \"{\\n$superCstr();\\n\" + body.substring(1);\n      }\n      replaceContext = oldContext;\n      return prefix + body + \"\\n\";\n    };\n\n    function transformConstructor(cstr) {\n      var m = new RegExp(/\"B(\\d+)\"\\s*\"A(\\d+)\"/).exec(cstr);\n      var params = transformParams(atoms[m[1]]);\n\n      return new AstConstructor(params, transformStatementsBlock(atoms[m[2]]));\n    }\n\n    function AstInterfaceBody(name, interfacesNames, methodsNames, fields, innerClasses, misc) {\n      var i,l;\n      this.name = name;\n      this.interfacesNames = interfacesNames;\n      this.methodsNames = methodsNames;\n      this.fields = fields;\n      this.innerClasses = innerClasses;\n      this.misc = misc;\n      for(i=0,l=fields.length; i<l; ++i) {\n        fields[i].owner = this;\n      }\n    }\n    AstInterfaceBody.prototype.getMembers = function(classFields, classMethods, classInners) {\n      if(this.owner.base) {\n        this.owner.base.body.getMembers(classFields, classMethods, classInners);\n      }\n      var i, j, l, m;\n      for(i=0,l=this.fields.length;i<l;++i) {\n        var fieldNames = this.fields[i].getNames();\n        for(j=0,m=fieldNames.length;j<m;++j) {\n          classFields[fieldNames[j]] = this.fields[i];\n        }\n      }\n      for(i=0,l=this.methodsNames.length;i<l;++i) {\n        var methodName = this.methodsNames[i];\n        classMethods[methodName] = true;\n      }\n      for(i=0,l=this.innerClasses.length;i<l;++i) {\n        var innerClass = this.innerClasses[i];\n        classInners[innerClass.name] = innerClass;\n      }\n    };\n    AstInterfaceBody.prototype.toString = function() {\n      function getScopeLevel(p) {\n        var i = 0;\n        while(p) {\n          ++i;\n          p=p.scope;\n        }\n        return i;\n      }\n\n      var scopeLevel = getScopeLevel(this.owner);\n\n      var className = this.name;\n      var staticDefinitions = \"\";\n      var metadata = \"\";\n\n      var thisClassFields = {}, thisClassMethods = {}, thisClassInners = {};\n      this.getMembers(thisClassFields, thisClassMethods, thisClassInners);\n\n      var i, l, j, m;\n\n      if (this.owner.interfaces) {\n        // interface name can be present, but interface is not\n        var resolvedInterfaces = [], resolvedInterface;\n        for (i = 0, l = this.interfacesNames.length; i < l; ++i) {\n          if (!this.owner.interfaces[i]) {\n            continue;\n          }\n          resolvedInterface = replaceContext({name: this.interfacesNames[i]});\n          resolvedInterfaces.push(resolvedInterface);\n          staticDefinitions += \"$p.extendInterfaceMembers(\" + className + \", \" + resolvedInterface + \");\\n\";\n        }\n        metadata += className + \".$interfaces = [\" + resolvedInterfaces.join(\", \") + \"];\\n\";\n      }\n      metadata += className + \".$isInterface = true;\\n\";\n      metadata += className + \".$methods = [\\'\" + this.methodsNames.join(\"\\', \\'\") + \"\\'];\\n\";\n\n      sortByWeight(this.innerClasses);\n      for (i = 0, l = this.innerClasses.length; i < l; ++i) {\n        var innerClass = this.innerClasses[i];\n        if (innerClass.isStatic) {\n          staticDefinitions += className + \".\" + innerClass.name + \" = \" + innerClass + \";\\n\";\n        }\n      }\n\n      for (i = 0, l = this.fields.length; i < l; ++i) {\n        var field = this.fields[i];\n        if (field.isStatic) {\n          staticDefinitions += className + \".\" + field.definitions.join(\";\\n\" + className + \".\") + \";\\n\";\n        }\n      }\n\n      return \"(function() {\\n\" +\n        \"function \" + className + \"() { throw \\'Unable to create the interface\\'; }\\n\" +\n        staticDefinitions +\n        metadata +\n        \"return \" + className + \";\\n\" +\n        \"})()\";\n    };\n\n    transformInterfaceBody = function(body, name, baseInterfaces) {\n      var declarations = body.substring(1, body.length - 1);\n      declarations = extractClassesAndMethods(declarations);\n      declarations = extractConstructors(declarations, name);\n      var methodsNames = [], classes = [];\n      declarations = declarations.replace(/\"([DE])(\\d+)\"/g, function(all, type, index) {\n        if(type === 'D') { methodsNames.push(index); }\n        else if(type === 'E') { classes.push(index); }\n        return \"\";\n      });\n      var fields = declarations.split(/;(?:\\s*;)*/g);\n      var baseInterfaceNames;\n      var i, l;\n\n      if(baseInterfaces !== undef) {\n        baseInterfaceNames = baseInterfaces.replace(/^\\s*extends\\s+(.+?)\\s*$/g, \"$1\").split(/\\s*,\\s*/g);\n      }\n\n      for(i = 0, l = methodsNames.length; i < l; ++i) {\n        var method = transformClassMethod(atoms[methodsNames[i]]);\n        methodsNames[i] = method.name;\n      }\n      for(i = 0, l = fields.length - 1; i < l; ++i) {\n        var field = trimSpaces(fields[i]);\n        fields[i] = transformClassField(field.middle);\n      }\n      var tail = fields.pop();\n      for(i = 0, l = classes.length; i < l; ++i) {\n        classes[i] = transformInnerClass(atoms[classes[i]]);\n      }\n\n      return new AstInterfaceBody(name, baseInterfaceNames, methodsNames, fields, classes, { tail: tail });\n    };\n\n    function AstClassBody(name, baseClassName, interfacesNames, functions, methods, fields, cstrs, innerClasses, misc) {\n      var i,l;\n      this.name = name;\n      this.baseClassName = baseClassName;\n      this.interfacesNames = interfacesNames;\n      this.functions = functions;\n      this.methods = methods;\n      this.fields = fields;\n      this.cstrs = cstrs;\n      this.innerClasses = innerClasses;\n      this.misc = misc;\n      for(i=0,l=fields.length; i<l; ++i) {\n        fields[i].owner = this;\n      }\n    }\n    AstClassBody.prototype.getMembers = function(classFields, classMethods, classInners) {\n      if(this.owner.base) {\n        this.owner.base.body.getMembers(classFields, classMethods, classInners);\n      }\n      var i, j, l, m;\n      for(i=0,l=this.fields.length;i<l;++i) {\n        var fieldNames = this.fields[i].getNames();\n        for(j=0,m=fieldNames.length;j<m;++j) {\n          classFields[fieldNames[j]] = this.fields[i];\n        }\n      }\n      for(i=0,l=this.methods.length;i<l;++i) {\n        var method = this.methods[i];\n        classMethods[method.name] = method;\n      }\n      for(i=0,l=this.innerClasses.length;i<l;++i) {\n        var innerClass = this.innerClasses[i];\n        classInners[innerClass.name] = innerClass;\n      }\n    };\n    AstClassBody.prototype.toString = function() {\n      function getScopeLevel(p) {\n        var i = 0;\n        while(p) {\n          ++i;\n          p=p.scope;\n        }\n        return i;\n      }\n\n      var scopeLevel = getScopeLevel(this.owner);\n\n      var selfId = \"$this_\" + scopeLevel;\n      var className = this.name;\n      var result = \"var \" + selfId + \" = this;\\n\";\n      var staticDefinitions = \"\";\n      var metadata = \"\";\n\n      var thisClassFields = {}, thisClassMethods = {}, thisClassInners = {};\n      this.getMembers(thisClassFields, thisClassMethods, thisClassInners);\n\n      var oldContext = replaceContext;\n      replaceContext = function (subject) {\n        var name = subject.name;\n        if(name === \"this\") {\n          // returns \"$this_N.$self\" pointer instead of \"this\" in cases:\n          // \"this()\", \"this.XXX()\", \"this\", but not for \"this.XXX\"\n          return subject.callSign || !subject.member ? selfId + \".$self\" : selfId;\n        }\n        if(thisClassFields.hasOwnProperty(name)) {\n          return thisClassFields[name].isStatic ? className + \".\" + name : selfId + \".\" + name;\n        }\n        if(thisClassInners.hasOwnProperty(name)) {\n          return selfId + \".\" + name;\n        }\n        if(thisClassMethods.hasOwnProperty(name)) {\n          return thisClassMethods[name].isStatic ? className + \".\" + name : selfId + \".$self.\" + name;\n        }\n        return oldContext(subject);\n      };\n\n      var resolvedBaseClassName;\n      if (this.baseClassName) {\n        resolvedBaseClassName = oldContext({name: this.baseClassName});\n        result += \"var $super = { $upcast: \" + selfId + \" };\\n\";\n        result += \"function $superCstr(){\" + resolvedBaseClassName +\n          \".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\\n\";\n        metadata += className + \".$base = \" + resolvedBaseClassName + \";\\n\";\n      } else {\n        result += \"function $superCstr(){$p.extendClassChain(\"+ selfId +\")}\\n\";\n      }\n\n      if (this.owner.base) {\n        // base class name can be present, but class is not\n        staticDefinitions += \"$p.extendStaticMembers(\" + className + \", \" + resolvedBaseClassName + \");\\n\";\n      }\n\n      var i, l, j, m;\n\n      if (this.owner.interfaces) {\n        // interface name can be present, but interface is not\n        var resolvedInterfaces = [], resolvedInterface;\n        for (i = 0, l = this.interfacesNames.length; i < l; ++i) {\n          if (!this.owner.interfaces[i]) {\n            continue;\n          }\n          resolvedInterface = oldContext({name: this.interfacesNames[i]});\n          resolvedInterfaces.push(resolvedInterface);\n          staticDefinitions += \"$p.extendInterfaceMembers(\" + className + \", \" + resolvedInterface + \");\\n\";\n        }\n        metadata += className + \".$interfaces = [\" + resolvedInterfaces.join(\", \") + \"];\\n\";\n      }\n\n      if (this.functions.length > 0) {\n        result += this.functions.join('\\n') + '\\n';\n      }\n\n      sortByWeight(this.innerClasses);\n      for (i = 0, l = this.innerClasses.length; i < l; ++i) {\n        var innerClass = this.innerClasses[i];\n        if (innerClass.isStatic) {\n          staticDefinitions += className + \".\" + innerClass.name + \" = \" + innerClass + \";\\n\";\n          result += selfId + \".\" + innerClass.name + \" = \" + className + \".\" + innerClass.name + \";\\n\";\n        } else {\n          result += selfId + \".\" + innerClass.name + \" = \" + innerClass + \";\\n\";\n        }\n      }\n\n      for (i = 0, l = this.fields.length; i < l; ++i) {\n        var field = this.fields[i];\n        if (field.isStatic) {\n          staticDefinitions += className + \".\" + field.definitions.join(\";\\n\" + className + \".\") + \";\\n\";\n          for (j = 0, m = field.definitions.length; j < m; ++j) {\n            var fieldName = field.definitions[j].name, staticName = className + \".\" + fieldName;\n            result += \"$p.defineProperty(\" + selfId + \", '\" + fieldName + \"', {\" +\n              \"get: function(){return \" + staticName + \"}, \" +\n              \"set: function(val){\" + staticName + \" = val}});\\n\";\n          }\n        } else {\n          result += selfId + \".\" + field.definitions.join(\";\\n\" + selfId + \".\") + \";\\n\";\n        }\n      }\n      var methodOverloads = {};\n      for (i = 0, l = this.methods.length; i < l; ++i) {\n        var method = this.methods[i];\n        var overload = methodOverloads[method.name];\n        var methodId = method.name + \"$\" + method.params.params.length;\n        var hasMethodArgs = !!method.params.methodArgsParam;\n        if (overload) {\n          ++overload;\n          methodId += \"_\" + overload;\n        } else {\n          overload = 1;\n        }\n        method.methodId = methodId;\n        methodOverloads[method.name] = overload;\n        if (method.isStatic) {\n          staticDefinitions += method;\n          staticDefinitions += \"$p.addMethod(\" + className + \", '\" + method.name + \"', \" + methodId + \", \" + hasMethodArgs + \");\\n\";\n          result += \"$p.addMethod(\" + selfId + \", '\" + method.name + \"', \" + methodId + \", \" + hasMethodArgs + \");\\n\";\n        } else {\n          result += method;\n          result += \"$p.addMethod(\" + selfId + \", '\" + method.name + \"', \" + methodId + \", \" + hasMethodArgs + \");\\n\";\n        }\n      }\n      result += trim(this.misc.tail);\n\n      if (this.cstrs.length > 0) {\n        result += this.cstrs.join('\\n') + '\\n';\n      }\n\n      result += \"function $constr() {\\n\";\n      var cstrsIfs = [];\n      for (i = 0, l = this.cstrs.length; i < l; ++i) {\n        var paramsLength = this.cstrs[i].params.params.length;\n        var methodArgsPresent = !!this.cstrs[i].params.methodArgsParam;\n        cstrsIfs.push(\"if(arguments.length \" + (methodArgsPresent ? \">=\" : \"===\") +\n          \" \" + paramsLength + \") { \" +\n          \"$constr_\" + paramsLength + \".apply(\" + selfId + \", arguments); }\");\n      }\n      if(cstrsIfs.length > 0) {\n        result += cstrsIfs.join(\" else \") + \" else \";\n      }\n      // ??? add check if length is 0, otherwise fail\n      result += \"$superCstr();\\n}\\n\";\n      result += \"$constr.apply(null, arguments);\\n\";\n\n      replaceContext = oldContext;\n      return \"(function() {\\n\" +\n        \"function \" + className + \"() {\\n\" + result + \"}\\n\" +\n        staticDefinitions +\n        metadata +\n        \"return \" + className + \";\\n\" +\n        \"})()\";\n    };\n\n    transformClassBody = function(body, name, baseName, interfaces) {\n      var declarations = body.substring(1, body.length - 1);\n      declarations = extractClassesAndMethods(declarations);\n      declarations = extractConstructors(declarations, name);\n      var methods = [], classes = [], cstrs = [], functions = [];\n      declarations = declarations.replace(/\"([DEGH])(\\d+)\"/g, function(all, type, index) {\n        if(type === 'D') { methods.push(index); }\n        else if(type === 'E') { classes.push(index); }\n        else if(type === 'H') { functions.push(index); }\n        else { cstrs.push(index); }\n        return \"\";\n      });\n      var fields = declarations.replace(/^(?:\\s*;)+/, \"\").split(/;(?:\\s*;)*/g);\n      var baseClassName, interfacesNames;\n      var i;\n\n      if(baseName !== undef) {\n        baseClassName = baseName.replace(/^\\s*extends\\s+([A-Za-z_$][\\w$]*\\b(?:\\s*\\.\\s*[A-Za-z_$][\\w$]*\\b)*)\\s*$/g, \"$1\");\n      }\n\n      if(interfaces !== undef) {\n        interfacesNames = interfaces.replace(/^\\s*implements\\s+(.+?)\\s*$/g, \"$1\").split(/\\s*,\\s*/g);\n      }\n\n      for(i = 0; i < functions.length; ++i) {\n        functions[i] = transformFunction(atoms[functions[i]]);\n      }\n      for(i = 0; i < methods.length; ++i) {\n        methods[i] = transformClassMethod(atoms[methods[i]]);\n      }\n      for(i = 0; i < fields.length - 1; ++i) {\n        var field = trimSpaces(fields[i]);\n        fields[i] = transformClassField(field.middle);\n      }\n      var tail = fields.pop();\n      for(i = 0; i < cstrs.length; ++i) {\n        cstrs[i] = transformConstructor(atoms[cstrs[i]]);\n      }\n      for(i = 0; i < classes.length; ++i) {\n        classes[i] = transformInnerClass(atoms[classes[i]]);\n      }\n\n      return new AstClassBody(name, baseClassName, interfacesNames, functions, methods, fields, cstrs,\n        classes, { tail: tail });\n    };\n\n    function AstInterface(name, body) {\n      this.name = name;\n      this.body = body;\n      body.owner = this;\n    }\n    AstInterface.prototype.toString = function() {\n      return \"var \" + this.name + \" = \" + this.body + \";\\n\" +\n        \"$p.\" + this.name + \" = \" + this.name + \";\\n\";\n    };\n    function AstClass(name, body) {\n      this.name = name;\n      this.body = body;\n      body.owner = this;\n    }\n    AstClass.prototype.toString = function() {\n      return \"var \" + this.name + \" = \" + this.body + \";\\n\" +\n        \"$p.\" + this.name + \" = \" + this.name + \";\\n\";\n    };\n\n    function transformGlobalClass(class_) {\n      var m = classesRegex.exec(class_); // 1 - attr, 2 - class|int, 3 - name, 4 - extends, 5 - implements, 6 - body\n      classesRegex.lastIndex = 0;\n      var body = atoms[getAtomIndex(m[6])];\n      var oldClassId = currentClassId, newClassId = generateClassId();\n      currentClassId = newClassId;\n      var globalClass;\n      if(m[2] === \"interface\") {\n        globalClass = new AstInterface(m[3], transformInterfaceBody(body, m[3], m[4]) );\n      } else {\n        globalClass = new AstClass(m[3], transformClassBody(body, m[3], m[4], m[5]) );\n      }\n      appendClass(globalClass, newClassId, oldClassId);\n      currentClassId = oldClassId;\n      return globalClass;\n    }\n\n    function AstMethod(name, params, body) {\n      this.name = name;\n      this.params = params;\n      this.body = body;\n    }\n    AstMethod.prototype.toString = function(){\n      var paramNames = appendToLookupTable({}, this.params.getNames());\n      var oldContext = replaceContext;\n      replaceContext = function (subject) {\n        return paramNames.hasOwnProperty(subject.name) ? subject.name : oldContext(subject);\n      };\n      var body = this.params.prependMethodArgs(this.body.toString());\n      var result = \"function \" + this.name + this.params + \" \" + body + \"\\n\" +\n                   \"$p.\" + this.name + \" = \" + this.name + \";\\n\" +\n                   this.name + \" = \" + this.name + \".bind($p);\";\n//        \"$p.\" + this.name + \" = \" + this.name + \";\";\n      replaceContext = oldContext;\n      return result;\n    };\n\n    function transformGlobalMethod(method) {\n      var m = methodsRegex.exec(method);\n      var result =\n      methodsRegex.lastIndex = 0;\n      return new AstMethod(m[3], transformParams(atoms[getAtomIndex(m[4])]),\n        transformStatementsBlock(atoms[getAtomIndex(m[6])]));\n    }\n\n    function preStatementsTransform(statements) {\n      var s = statements;\n      // turns multiple catch blocks into one, because we have no way to properly get into them anyway.\n      s = s.replace(/\\b(catch\\s*\"B\\d+\"\\s*\"A\\d+\")(\\s*catch\\s*\"B\\d+\"\\s*\"A\\d+\")+/g, \"$1\");\n      return s;\n    }\n\n    function AstForStatement(argument, misc) {\n      this.argument = argument;\n      this.misc = misc;\n    }\n    AstForStatement.prototype.toString = function() {\n      return this.misc.prefix + this.argument.toString();\n    };\n    function AstCatchStatement(argument, misc) {\n      this.argument = argument;\n      this.misc = misc;\n    }\n    AstCatchStatement.prototype.toString = function() {\n      return this.misc.prefix + this.argument.toString();\n    };\n    function AstPrefixStatement(name, argument, misc) {\n      this.name = name;\n      this.argument = argument;\n      this.misc = misc;\n    }\n    AstPrefixStatement.prototype.toString = function() {\n      var result = this.misc.prefix;\n      if(this.argument !== undef) {\n        result += this.argument.toString();\n      }\n      return result;\n    };\n    function AstSwitchCase(expr) {\n      this.expr = expr;\n    }\n    AstSwitchCase.prototype.toString = function() {\n      return \"case \" + this.expr + \":\";\n    };\n    function AstLabel(label) {\n      this.label = label;\n    }\n    AstLabel.prototype.toString = function() {\n      return this.label;\n    };\n\n    transformStatements = function(statements, transformMethod, transformClass) {\n      var nextStatement = new RegExp(/\\b(catch|for|if|switch|while|with)\\s*\"B(\\d+)\"|\\b(do|else|finally|return|throw|try|break|continue)\\b|(\"[ADEH](\\d+)\")|\\b(case)\\s+([^:]+):|\\b([A-Za-z_$][\\w$]*\\s*:)|(;)/g);\n      var res = [];\n      statements = preStatementsTransform(statements);\n      var lastIndex = 0, m, space;\n      // m contains the matches from the nextStatement regexp, null if there are no matches.\n      // nextStatement.exec starts searching at nextStatement.lastIndex.\n      while((m = nextStatement.exec(statements)) !== null) {\n        if(m[1] !== undef) { // catch, for ...\n          var i = statements.lastIndexOf('\"B', nextStatement.lastIndex);\n          var statementsPrefix = statements.substring(lastIndex, i);\n          if(m[1] === \"for\") {\n            res.push(new AstForStatement(transformForExpression(atoms[m[2]]),\n              { prefix: statementsPrefix }) );\n          } else if(m[1] === \"catch\") {\n            res.push(new AstCatchStatement(transformParams(atoms[m[2]]),\n              { prefix: statementsPrefix }) );\n          } else {\n            res.push(new AstPrefixStatement(m[1], transformExpression(atoms[m[2]]),\n              { prefix: statementsPrefix }) );\n          }\n        } else if(m[3] !== undef) { // do, else, ...\n            res.push(new AstPrefixStatement(m[3], undef,\n              { prefix: statements.substring(lastIndex, nextStatement.lastIndex) }) );\n        } else if(m[4] !== undef) { // block, class and methods\n          space = statements.substring(lastIndex, nextStatement.lastIndex - m[4].length);\n          if(trim(space).length !== 0) { continue; } // avoiding new type[] {} construct\n          res.push(space);\n          var kind = m[4].charAt(1), atomIndex = m[5];\n          if(kind === 'D') {\n            res.push(transformMethod(atoms[atomIndex]));\n          } else if(kind === 'E') {\n            res.push(transformClass(atoms[atomIndex]));\n          } else if(kind === 'H') {\n            res.push(transformFunction(atoms[atomIndex]));\n          } else {\n            res.push(transformStatementsBlock(atoms[atomIndex]));\n          }\n        } else if(m[6] !== undef) { // switch case\n          res.push(new AstSwitchCase(transformExpression(trim(m[7]))));\n        } else if(m[8] !== undef) { // label\n          space = statements.substring(lastIndex, nextStatement.lastIndex - m[8].length);\n          if(trim(space).length !== 0) { continue; } // avoiding ?: construct\n          res.push(new AstLabel(statements.substring(lastIndex, nextStatement.lastIndex)) );\n        } else { // semicolon\n          var statement = trimSpaces(statements.substring(lastIndex, nextStatement.lastIndex - 1));\n          res.push(statement.left);\n          res.push(transformStatement(statement.middle));\n          res.push(statement.right + \";\");\n        }\n        lastIndex = nextStatement.lastIndex;\n      }\n      var statementsTail = trimSpaces(statements.substring(lastIndex));\n      res.push(statementsTail.left);\n      if(statementsTail.middle !== \"\") {\n        res.push(transformStatement(statementsTail.middle));\n        res.push(\";\" + statementsTail.right);\n      }\n      return res;\n    };\n\n    function getLocalNames(statements) {\n      var localNames = [];\n      for(var i=0,l=statements.length;i<l;++i) {\n        var statement = statements[i];\n        if(statement instanceof AstVar) {\n          localNames = localNames.concat(statement.getNames());\n        } else if(statement instanceof AstForStatement &&\n          statement.argument.initStatement instanceof AstVar) {\n          localNames = localNames.concat(statement.argument.initStatement.getNames());\n        } else if(statement instanceof AstInnerInterface || statement instanceof AstInnerClass ||\n          statement instanceof AstInterface || statement instanceof AstClass ||\n          statement instanceof AstMethod || statement instanceof AstFunction) {\n          localNames.push(statement.name);\n        }\n      }\n      return appendToLookupTable({}, localNames);\n    }\n\n    function AstStatementsBlock(statements) {\n      this.statements = statements;\n    }\n    AstStatementsBlock.prototype.toString = function() {\n      var localNames = getLocalNames(this.statements);\n      var oldContext = replaceContext;\n\n      // replacing context only when necessary\n      if(!isLookupTableEmpty(localNames)) {\n        replaceContext = function (subject) {\n          return localNames.hasOwnProperty(subject.name) ? subject.name : oldContext(subject);\n        };\n      }\n\n      var result = \"{\\n\" + this.statements.join('') + \"\\n}\";\n      replaceContext = oldContext;\n      return result;\n    };\n\n    transformStatementsBlock = function(block) {\n      var content = trimSpaces(block.substring(1, block.length - 1));\n      return new AstStatementsBlock(transformStatements(content.middle));\n    };\n\n    function AstRoot(statements) {\n      this.statements = statements;\n    }\n    AstRoot.prototype.toString = function() {\n      var classes = [], otherStatements = [], statement;\n      for (var i = 0, len = this.statements.length; i < len; ++i) {\n        statement = this.statements[i];\n        if (statement instanceof AstClass || statement instanceof AstInterface) {\n          classes.push(statement);\n        } else {\n          otherStatements.push(statement);\n        }\n      }\n      sortByWeight(classes);\n\n      var localNames = getLocalNames(this.statements);\n      replaceContext = function (subject) {\n        var name = subject.name;\n        if(localNames.hasOwnProperty(name)) {\n          return name;\n        }\n        if(globalMembers.hasOwnProperty(name) ||\n           PConstants.hasOwnProperty(name) ||\n           defaultScope.hasOwnProperty(name)) {\n          return \"$p.\" + name;\n        }\n        return name;\n      };\n      var result = \"// this code was autogenerated from PJS\\n\" +\n        \"(function($p) {\\n\" +\n        classes.join('') + \"\\n\" +\n        otherStatements.join('') + \"\\n})\";\n      replaceContext = null;\n      return result;\n    };\n\n    transformMain = function() {\n      var statements = extractClassesAndMethods(atoms[0]);\n      statements = statements.replace(/\\bimport\\s+[^;]+;/g, \"\");\n      return new AstRoot( transformStatements(statements,\n        transformGlobalMethod, transformGlobalClass) );\n    };\n\n    function generateMetadata(ast) {\n      var globalScope = {};\n      var id, class_;\n      for(id in declaredClasses) {\n        if(declaredClasses.hasOwnProperty(id)) {\n          class_ = declaredClasses[id];\n          var scopeId = class_.scopeId, name = class_.name;\n          if(scopeId) {\n            var scope = declaredClasses[scopeId];\n            class_.scope = scope;\n            if(scope.inScope === undef) {\n              scope.inScope = {};\n            }\n            scope.inScope[name] = class_;\n          } else {\n            globalScope[name] = class_;\n          }\n        }\n      }\n\n      function findInScopes(class_, name) {\n        var parts = name.split('.');\n        var currentScope = class_.scope, found;\n        while(currentScope) {\n          if(currentScope.hasOwnProperty(parts[0])) {\n            found = currentScope[parts[0]]; break;\n          }\n          currentScope = currentScope.scope;\n        }\n        if(found === undef) {\n          found = globalScope[parts[0]];\n        }\n        for(var i=1,l=parts.length;i<l && found;++i) {\n          found = found.inScope[parts[i]];\n        }\n        return found;\n      }\n\n      for(id in declaredClasses) {\n        if(declaredClasses.hasOwnProperty(id)) {\n          class_ = declaredClasses[id];\n          var baseClassName = class_.body.baseClassName;\n          if(baseClassName) {\n            var parent = findInScopes(class_, baseClassName);\n            if (parent) {\n              class_.base = parent;\n              if (!parent.derived) {\n                parent.derived = [];\n              }\n              parent.derived.push(class_);\n            }\n          }\n          var interfacesNames = class_.body.interfacesNames,\n            interfaces = [], i, l;\n          if (interfacesNames && interfacesNames.length > 0) {\n            for (i = 0, l = interfacesNames.length; i < l; ++i) {\n              var interface_ = findInScopes(class_, interfacesNames[i]);\n              interfaces.push(interface_);\n              if (!interface_) {\n                continue;\n              }\n              if (!interface_.derived) {\n                interface_.derived = [];\n              }\n              interface_.derived.push(class_);\n            }\n            if (interfaces.length > 0) {\n              class_.interfaces = interfaces;\n            }\n          }\n        }\n      }\n    }\n\n    function setWeight(ast) {\n      var queue = [], tocheck = {};\n      var id, scopeId, class_;\n      // queue most inner and non-inherited\n      for (id in declaredClasses) {\n        if (declaredClasses.hasOwnProperty(id)) {\n          class_ = declaredClasses[id];\n          if (!class_.inScope && !class_.derived) {\n            queue.push(id);\n            class_.weight = 0;\n          } else {\n            var dependsOn = [];\n            if (class_.inScope) {\n              for (scopeId in class_.inScope) {\n                if (class_.inScope.hasOwnProperty(scopeId)) {\n                  dependsOn.push(class_.inScope[scopeId]);\n                }\n              }\n            }\n            if (class_.derived) {\n              dependsOn = dependsOn.concat(class_.derived);\n            }\n            tocheck[id] = dependsOn;\n          }\n        }\n      }\n      function removeDependentAndCheck(targetId, from) {\n        var dependsOn = tocheck[targetId];\n        if (!dependsOn) {\n          return false; // no need to process\n        }\n        var i = dependsOn.indexOf(from);\n        if (i < 0) {\n          return false;\n        }\n        dependsOn.splice(i, 1);\n        if (dependsOn.length > 0) {\n          return false;\n        }\n        delete tocheck[targetId];\n        return true;\n      }\n      while (queue.length > 0) {\n        id = queue.shift();\n        class_ = declaredClasses[id];\n        if (class_.scopeId && removeDependentAndCheck(class_.scopeId, class_)) {\n          queue.push(class_.scopeId);\n          declaredClasses[class_.scopeId].weight = class_.weight + 1;\n        }\n        if (class_.base && removeDependentAndCheck(class_.base.classId, class_)) {\n          queue.push(class_.base.classId);\n          class_.base.weight = class_.weight + 1;\n        }\n        if (class_.interfaces) {\n          var i, l;\n          for (i = 0, l = class_.interfaces.length; i < l; ++i) {\n            if (!class_.interfaces[i] ||\n                !removeDependentAndCheck(class_.interfaces[i].classId, class_)) {\n              continue;\n            }\n            queue.push(class_.interfaces[i].classId);\n            class_.interfaces[i].weight = class_.weight + 1;\n          }\n        }\n      }\n    }\n\n    var transformed = transformMain();\n    generateMetadata(transformed);\n    setWeight(transformed);\n\n    var redendered = transformed.toString();\n\n    // remove empty extra lines with space\n    redendered = redendered.replace(/\\s*\\n(?:[\\t ]*\\n)+/g, \"\\n\\n\");\n\n    // convert character codes to characters\n    redendered = redendered.replace(/__x([0-9A-F]{4})/g, function(all, hexCode) {\n      return String.fromCharCode(parseInt(hexCode,16));\n    });\n\n    return injectStrings(redendered, strings);\n  }// Parser ends\n\n  function preprocessCode(aCode, sketch) {\n    // Parse out @pjs directive, if any.\n    var dm = new RegExp(/\\/\\*\\s*@pjs\\s+((?:[^\\*]|\\*+[^\\*\\/])*)\\*\\//g).exec(aCode);\n    if (dm && dm.length === 2) {\n      // masks contents of a JSON to be replaced later\n      // to protect the contents from further parsing\n      var jsonItems = [],\n          directives = dm.splice(1, 2)[0].replace(/\\{([\\s\\S]*?)\\}/g, (function() {\n            return function(all, item) {\n              jsonItems.push(item);\n              return \"{\" + (jsonItems.length-1) + \"}\";\n            };\n          }())).replace('\\n', '').replace('\\r', '').split(\";\");\n\n      // We'll L/RTrim, and also remove any surrounding double quotes (e.g., just take string contents)\n      var clean = function(s) {\n        return s.replace(/^\\s*[\"']?/, '').replace(/[\"']?\\s*$/, '');\n      };\n\n      for (var i = 0, dl = directives.length; i < dl; i++) {\n        var pair = directives[i].split('=');\n        if (pair && pair.length === 2) {\n          var key = clean(pair[0]),\n              value = clean(pair[1]),\n              list = [];\n          // A few directives require work beyond storying key/value pairings\n          if (key === \"preload\") {\n            list = value.split(',');\n            // All pre-loaded images will get put in imageCache, keyed on filename\n            for (var j = 0, jl = list.length; j < jl; j++) {\n              var imageName = clean(list[j]);\n              sketch.imageCache.add(imageName);\n            }\n          // fonts can be declared as a string containing a url,\n          // or a JSON object, containing a font name, and a url\n          } else if (key === \"font\") {\n            list = value.split(\",\");\n            for (var x = 0, xl = list.length; x < xl; x++) {\n              var fontName = clean(list[x]),\n                  index = /^\\{(\\d*?)\\}$/.exec(fontName);\n              // if index is not null, send JSON, otherwise, send string\n              PFont.preloading.add(index ? JSON.parse(\"{\" + jsonItems[index[1]] + \"}\") : fontName);\n            }\n          } else if (key === \"pauseOnBlur\") {\n            sketch.options.pauseOnBlur = value === \"true\";\n          } else if (key === \"globalKeyEvents\") {\n            sketch.options.globalKeyEvents = value === \"true\";\n          } else if (key.substring(0, 6) === \"param-\") {\n            sketch.params[key.substring(6)] = value;\n          } else {\n            sketch.options[key] = value;\n          }\n        }\n      }\n    }\n    return aCode;\n  }\n\n  // Parse/compiles Processing (Java-like) syntax to JavaScript syntax\n  Processing.compile = function(pdeCode) {\n    var sketch = new Processing.Sketch();\n    var code = preprocessCode(pdeCode, sketch);\n    var compiledPde = parseProcessing(code);\n    sketch.sourceCode = compiledPde;\n    return sketch;\n  };\n\n  // the logger for println()\n  var PjsConsole = function (document) {\n    var e = {}, added = false;\n    e.BufferMax = 200;\n    e.wrapper = document.createElement(\"div\");\n    e.wrapper.setAttribute(\"style\", \"opacity:.75;display:block;position:fixed;bottom:0px;left:0px;right:0px;height:50px;background-color:#aaa\");\n    e.dragger = document.createElement(\"div\");\n    e.dragger.setAttribute(\"style\", \"display:block;border:3px black raised;cursor:n-resize;position:absolute;top:0px;left:0px;right:0px;height:5px;background-color:#333\");\n    e.closer = document.createElement(\"div\");\n    e.closer.onmouseover = function () {\n      e.closer.style.setProperty(\"background-color\", \"#ccc\");\n    };\n    e.closer.onmouseout = function () {\n      e.closer.style.setProperty(\"background-color\", \"#ddd\");\n    };\n    e.closer.innerHTML = \"&#10006;\";\n    e.closer.setAttribute(\"style\", \"opacity:.5;display:block;border:3px black raised;position:absolute;top:10px;right:30px;height:20px;width:20px;background-color:#ddd;color:#000;line-height:20px;text-align:center;cursor:pointer;\");\n    e.javaconsole = document.createElement(\"div\");\n    e.javaconsole.setAttribute(\"style\", \"overflow-x: auto;display:block;position:absolute;left:10px;right:0px;bottom:5px;top:10px;overflow-y:scroll;height:40px;\");\n    e.wrapper.appendChild(e.dragger);\n    e.wrapper.appendChild(e.javaconsole);\n    e.wrapper.appendChild(e.closer);\n    e.dragger.onmousedown = function (t) {\n      e.divheight = e.wrapper.style.height;\n      if (document.selection) document.selection.empty();\n      else window.getSelection().removeAllRanges();\n      var n = t.screenY;\n      window.onmousemove = function (t) {\n        e.wrapper.style.height = parseFloat(e.divheight) + (n - t.screenY) + \"px\";\n        e.javaconsole.style.height = parseFloat(e.divheight) + (n - t.screenY) - 10 + \"px\";\n      };\n      window.onmouseup = function (t) {\n        if (document.selection) document.selection.empty();\n        else window.getSelection().removeAllRanges();\n        e.wrapper.style.height = parseFloat(e.divheight) + (n - t.screenY) + \"px\";\n        e.javaconsole.style.height = parseFloat(e.divheight) + (n - t.screenY) - 10 + \"px\";\n        window.onmousemove = null;\n        window.onmouseup = null;\n      };\n    };\n    e.BufferArray = [];\n    e.print = e.log = function (t) {\n      // var oldheight = e.javaconsole.scrollHeight-e.javaconsole.scrollTop;\n      if (e.BufferArray[e.BufferArray.length - 1]) e.BufferArray[e.BufferArray.length - 1] += (t) + \"\";\n      else e.BufferArray.push(t);\n      e.javaconsole.innerHTML = e.BufferArray.join('');\n      if (e.wrapper.style.visibility === \"hidden\") {\n        e.wrapper.style.visibility = \"visible\";\n      }\n      //if (e.BufferArray.length > e.BufferMax) e.BufferArray.splice(0, 1);\n      //else e.javaconsole.scrollTop = oldheight;\n      if (e.wrapper.style.visibility === \"hidden\") {\n        e.wrapper.style.visibility = \"visible\";\n      }\n    };\n    e.println = function (t) {\n      if(!added) { document.body.appendChild(e.wrapper); }\n      e.print(t);\n      e.BufferArray.push('<br/>');\n      e.javaconsole.innerHTML = e.BufferArray.join('');\n      if (e.wrapper.style.visibility === \"hidden\") {\n        e.wrapper.style.visibility = \"visible\";\n      }\n      if (e.BufferArray.length > e.BufferMax) e.BufferArray.splice(0, 1);\n      else e.javaconsole.scrollTop = e.javaconsole.scrollHeight;\n      if (e.wrapper.style.visibility === \"hidden\") {\n        e.wrapper.style.visibility = \"visible\";\n      }\n    };\n    e.showconsole = function () {\n      e.wrapper.style.visibility = \"visible\";\n    };\n    e.hideconsole = function () {\n      e.wrapper.style.visibility = \"hidden\";\n    };\n    e.closer.onclick = function () {\n      e.hideconsole();\n    };\n    e.hideconsole();\n    return e;\n  };\n\n  Processing.logger = new PjsConsole(document);\n\n  // done\n  return Processing;\n};\n\n},{}],26:[function(require,module,exports){\n/**\n * Processing.js object\n */\n module.exports = function(options, undef) {\n  var defaultScope = options.defaultScope,\n      extend = options.extend,\n      Browser = options.Browser,\n      ajax = Browser.ajax,\n      navigator = Browser.navigator,\n      window = Browser.window,\n      XMLHttpRequest = window.XMLHttpRequest,\n      document = Browser.document,\n      noop = options.noop,\n\n      PConstants = defaultScope.PConstants;\n      PFont = defaultScope.PFont,\n      PShapeSVG = defaultScope.PShapeSVG,\n      PVector = defaultScope.PVector,\n      Char = Character = defaultScope.Char,\n      ObjectIterator = defaultScope.ObjectIterator,\n      XMLElement = defaultScope.XMLElement,\n      XML = defaultScope.XML;\n\n  // fascinating \"read only\" jshint error if we don't start a new var block here.\n  var HTMLCanvasElement = window.HTMLCanvasElement,\n      HTMLImageElement = window.HTMLImageElement,\n      localStorage = window.localStorage;\n\n  var isDOMPresent = (\"document\" in this) && !(\"fake\" in this.document);\n\n  // document.head polyfill for the benefit of Firefox 3.6\n  if (!document.head) {\n    document.head = document.getElementsByTagName('head')[0];\n  }\n\n  var Float32Array = setupTypedArray(\"Float32Array\", \"WebGLFloatArray\"),\n      Int32Array   = setupTypedArray(\"Int32Array\",   \"WebGLIntArray\"),\n      Uint16Array  = setupTypedArray(\"Uint16Array\",  \"WebGLUnsignedShortArray\"),\n      Uint8Array   = setupTypedArray(\"Uint8Array\",   \"WebGLUnsignedByteArray\");\n\n  // Typed Arrays: fallback to WebGL arrays or Native JS arrays if unavailable\n  function setupTypedArray(name, fallback) {\n    // Check if TypedArray exists, and use if so.\n    if (name in window) {\n      return window[name];\n    }\n\n    // Check if WebGLArray exists\n    if (typeof window[fallback] === \"function\") {\n      return window[fallback];\n    }\n\n    // Use Native JS array\n    return function(obj) {\n      if (obj instanceof Array) {\n        return obj;\n      }\n      if (typeof obj === \"number\") {\n        var arr = [];\n        arr.length = obj;\n        return arr;\n      }\n    };\n  }\n\n  /* IE9+ quirks mode check - ticket #1606 */\n  if (document.documentMode >= 9 && !document.doctype) {\n    throw(\"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>\");\n  }\n\n  // Manage multiple Processing instances\n  var processingInstances = [];\n  var processingInstanceIds = {};\n\n  /**\n   * instance tracking - adding new instances\n   */\n  var addInstance = function(processing) {\n    if (processing.externals.canvas.id === undef || !processing.externals.canvas.id.length) {\n      processing.externals.canvas.id = \"__processing\" + processingInstances.length;\n    }\n    processingInstanceIds[processing.externals.canvas.id] = processingInstances.length;\n    processingInstances.push(processing);\n  };\n\n  /**\n   * instance tracking - removal\n   */\n  var removeInstance = function(id) {\n    processingInstances.splice(processingInstanceIds[id], 1);\n    delete processingInstanceIds[id];\n  };\n\n\n  /**\n   * The Processing object\n   */\n  var Processing = this.Processing = function(aCanvas, aCode, aFunctions) {\n\n    if (!(this instanceof Processing)) {\n      throw(\"called Processing constructor as if it were a function: missing 'new'.\");\n    }\n\n    var curElement = {},\n      pgraphicsMode = (aCanvas === undef && aCode === undef);\n\n    if (pgraphicsMode) {\n      curElement = document.createElement(\"canvas\");\n    } else {\n      // We'll take a canvas element or a string for a canvas element's id\n      curElement = typeof aCanvas === \"string\" ? document.getElementById(aCanvas) : aCanvas;\n    }\n\n    if (!('getContext' in curElement)) {\n      throw(\"called Processing constructor without passing canvas element reference or id.\");\n    }\n\n    function unimplemented(s) {\n      Processing.debug('Unimplemented - ' + s);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // JavaScript event binding and releasing\n    ////////////////////////////////////////////////////////////////////////////\n\n    var eventHandlers = [];\n\n    function attachEventHandler(elem, type, fn) {\n      if (elem.addEventListener) {\n        elem.addEventListener(type, fn, false);\n      } else {\n        elem.attachEvent(\"on\" + type, fn);\n      }\n      eventHandlers.push({elem: elem, type: type, fn: fn});\n    }\n\n    function detachEventHandler(eventHandler) {\n      var elem = eventHandler.elem,\n          type = eventHandler.type,\n          fn   = eventHandler.fn;\n      if (elem.removeEventListener) {\n        elem.removeEventListener(type, fn, false);\n      } else if (elem.detachEvent) {\n        elem.detachEvent(\"on\" + type, fn);\n      }\n    }\n\n    function removeFirstArgument(args) {\n      return Array.prototype.slice.call(args, 1);\n    }\n\n    // When something new is added to \"p.\" it must also be added to the \"names\" array.\n    // The names array contains the names of everything that is inside \"p.\"\n    var p = this;\n\n    p.Char = p.Character = Char;\n\n    // add in the Processing API functions\n    extend.withCommonFunctions(p);\n    extend.withMath(p);\n    extend.withProxyFunctions(p, removeFirstArgument);\n    extend.withTouch(p, curElement, attachEventHandler, document, PConstants);\n\n    // custom functions and properties are added here\n    if(aFunctions) {\n      Object.keys(aFunctions).forEach(function(name) {\n        p[name] = aFunctions[name];\n      });\n    }\n\n    // PJS specific (non-p5) methods and properties to externalize\n    p.externals = {\n      canvas:  curElement,\n      context: undef,\n      sketch:  undef,\n      window: window\n    };\n\n    p.name            = 'Processing.js Instance'; // Set Processing defaults / environment variables\n    p.use3DContext    = false; // default '2d' canvas context\n\n    /**\n     * Confirms if a Processing program is \"focused\", meaning that it is\n     * active and will accept input from mouse or keyboard. This variable\n     * is \"true\" if it is focused and \"false\" if not. This variable is\n     * often used when you want to warn people they need to click on the\n     * browser before it will work.\n    */\n    p.focused         = false;\n    p.breakShape      = false;\n\n    // Glyph path storage for textFonts\n    p.glyphTable      = {};\n\n    // Global vars for tracking mouse position\n    p.pmouseX         = 0;\n    p.pmouseY         = 0;\n    p.mouseX          = 0;\n    p.mouseY          = 0;\n    p.mouseButton     = 0;\n    p.mouseScroll     = 0;\n\n    // Undefined event handlers to be replaced by user when needed\n    p.mouseClicked    = undef;\n    p.mouseDragged    = undef;\n    p.mouseMoved      = undef;\n    p.mousePressed    = undef;\n    p.mouseReleased   = undef;\n    p.mouseScrolled   = undef;\n    p.mouseOver       = undef;\n    p.mouseOut        = undef;\n    p.touchStart      = undef;\n    p.touchEnd        = undef;\n    p.touchMove       = undef;\n    p.touchCancel     = undef;\n    p.key             = undef;\n    p.keyCode         = undef;\n    p.keyPressed      = noop; // needed to remove function checks\n    p.keyReleased     = noop;\n    p.keyTyped        = noop;\n    p.draw            = undef;\n    p.setup           = undef;\n\n    // Remapped vars\n    p.__mousePressed  = false;\n    p.__keyPressed    = false;\n    p.__frameRate     = 60;\n\n    // The current animation frame\n    p.frameCount      = 0;\n\n    // The height/width of the canvas\n    p.width           = 100;\n    p.height          = 100;\n\n    // \"Private\" variables used to maintain state\n    var curContext,\n        curSketch,\n        drawing, // hold a Drawing2D or Drawing3D object\n        doFill = true,\n        fillStyle = [1.0, 1.0, 1.0, 1.0],\n        currentFillColor = 0xFFFFFFFF,\n        isFillDirty = true,\n        doStroke = true,\n        strokeStyle = [0.0, 0.0, 0.0, 1.0],\n        currentStrokeColor = 0xFF000000,\n        isStrokeDirty = true,\n        lineWidth = 1,\n        loopStarted = false,\n        renderSmooth = false,\n        doLoop = true,\n        looping = 0,\n        curRectMode = PConstants.CORNER,\n        curEllipseMode = PConstants.CENTER,\n        normalX = 0,\n        normalY = 0,\n        normalZ = 0,\n        normalMode = PConstants.NORMAL_MODE_AUTO,\n        curFrameRate = 60,\n        curMsPerFrame = 1000/curFrameRate,\n        curCursor = PConstants.ARROW,\n        oldCursor = curElement.style.cursor,\n        curShape = PConstants.POLYGON,\n        curShapeCount = 0,\n        curvePoints = [],\n        curTightness = 0,\n        curveDet = 20,\n        curveInited = false,\n        backgroundObj = -3355444, // rgb(204, 204, 204) is the default gray background colour\n        bezDetail = 20,\n        colorModeA = 255,\n        colorModeX = 255,\n        colorModeY = 255,\n        colorModeZ = 255,\n        pathOpen = false,\n        mouseDragging = false,\n        pmouseXLastFrame = 0,\n        pmouseYLastFrame = 0,\n        curColorMode = PConstants.RGB,\n        curTint = null,\n        curTint3d = null,\n        getLoaded = false,\n        start = Date.now(),\n        timeSinceLastFPS = start,\n        framesSinceLastFPS = 0,\n        textcanvas,\n        curveBasisMatrix,\n        curveToBezierMatrix,\n        curveDrawMatrix,\n        bezierDrawMatrix,\n        bezierBasisInverse,\n        bezierBasisMatrix,\n        curContextCache = { attributes: {}, locations: {} },\n        // Shaders\n        programObject3D,\n        programObject2D,\n        programObjectUnlitShape,\n        boxBuffer,\n        boxNormBuffer,\n        boxOutlineBuffer,\n        rectBuffer,\n        rectNormBuffer,\n        sphereBuffer,\n        lineBuffer,\n        fillBuffer,\n        fillColorBuffer,\n        strokeColorBuffer,\n        pointBuffer,\n        shapeTexVBO,\n        canTex,   // texture for createGraphics\n        textTex,   // texture for 3d tex\n        curTexture = {width:0,height:0},\n        curTextureMode = PConstants.IMAGE,\n        usingTexture = false,\n        textBuffer,\n        textureBuffer,\n        indexBuffer,\n        // Text alignment\n        horizontalTextAlignment = PConstants.LEFT,\n        verticalTextAlignment = PConstants.BASELINE,\n        textMode = PConstants.MODEL,\n        // Font state\n        curFontName = \"Arial\",\n        curTextSize = 12,\n        curTextAscent = 9,\n        curTextDescent = 2,\n        curTextLeading = 14,\n        curTextFont = PFont.get(curFontName, curTextSize),\n        // Pixels cache\n        originalContext,\n        proxyContext = null,\n        isContextReplaced = false,\n        setPixelsCached,\n        maxPixelsCached = 1000,\n        pressedKeysMap = [],\n        lastPressedKeyCode = null,\n        codedKeys = [ PConstants.SHIFT, PConstants.CONTROL, PConstants.ALT, PConstants.CAPSLK, PConstants.PGUP, PConstants.PGDN,\n                      PConstants.END, PConstants.HOME, PConstants.LEFT, PConstants.UP, PConstants.RIGHT, PConstants.DOWN, PConstants.NUMLK,\n                      PConstants.INSERT, PConstants.F1, PConstants.F2, PConstants.F3, PConstants.F4, PConstants.F5, PConstants.F6, PConstants.F7,\n                      PConstants.F8, PConstants.F9, PConstants.F10, PConstants.F11, PConstants.F12, PConstants.META ];\n\n    // User can only have MAX_LIGHTS lights\n    var lightCount = 0;\n\n    //sphere stuff\n    var sphereDetailV = 0,\n        sphereDetailU = 0,\n        sphereX = [],\n        sphereY = [],\n        sphereZ = [],\n        sinLUT = new Float32Array(PConstants.SINCOS_LENGTH),\n        cosLUT = new Float32Array(PConstants.SINCOS_LENGTH),\n        sphereVerts,\n        sphereNorms;\n\n    // Camera defaults and settings\n    var cam,\n        cameraInv,\n        modelView,\n        modelViewInv,\n        userMatrixStack,\n        userReverseMatrixStack,\n        inverseCopy,\n        projection,\n        manipulatingCamera = false,\n        frustumMode = false,\n        cameraFOV = 60 * (Math.PI / 180),\n        cameraX = p.width / 2,\n        cameraY = p.height / 2,\n        cameraZ = cameraY / Math.tan(cameraFOV / 2),\n        cameraNear = cameraZ / 10,\n        cameraFar = cameraZ * 10,\n        cameraAspect = p.width / p.height;\n\n    var vertArray = [],\n        curveVertArray = [],\n        curveVertCount = 0,\n        isCurve = false,\n        isBezier = false,\n        firstVert = true;\n\n    //PShape stuff\n    var curShapeMode = PConstants.CORNER;\n\n    // Stores states for pushStyle() and popStyle().\n    var styleArray = [];\n\n    // The vertices for the box cannot be specified using a triangle strip since each\n    // side of the cube must have its own set of normals.\n    // Vertices are specified in a counter-clockwise order.\n    // Triangles are in this order: back, front, right, bottom, left, top.\n    var boxVerts = new Float32Array([\n       0.5,  0.5, -0.5,  0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5,  0.5, -0.5,  0.5,  0.5, -0.5,\n       0.5,  0.5,  0.5, -0.5,  0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5,  0.5,  0.5, -0.5,  0.5,  0.5,  0.5,  0.5,\n       0.5,  0.5, -0.5,  0.5,  0.5,  0.5,  0.5, -0.5,  0.5,  0.5, -0.5,  0.5,  0.5, -0.5, -0.5,  0.5,  0.5, -0.5,\n       0.5, -0.5, -0.5,  0.5, -0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5, -0.5,  0.5, -0.5, -0.5,\n      -0.5, -0.5, -0.5, -0.5, -0.5,  0.5, -0.5,  0.5,  0.5, -0.5,  0.5,  0.5, -0.5,  0.5, -0.5, -0.5, -0.5, -0.5,\n       0.5,  0.5,  0.5,  0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5,  0.5,  0.5,  0.5,  0.5,  0.5]);\n\n    var boxOutlineVerts = new Float32Array([\n       0.5,  0.5,  0.5,  0.5, -0.5,  0.5,  0.5,  0.5, -0.5,  0.5, -0.5, -0.5,\n      -0.5,  0.5, -0.5, -0.5, -0.5, -0.5, -0.5,  0.5,  0.5, -0.5, -0.5,  0.5,\n       0.5,  0.5,  0.5,  0.5,  0.5, -0.5,  0.5,  0.5, -0.5, -0.5,  0.5, -0.5,\n      -0.5,  0.5, -0.5, -0.5,  0.5,  0.5, -0.5,  0.5,  0.5,  0.5,  0.5,  0.5,\n       0.5, -0.5,  0.5,  0.5, -0.5, -0.5,  0.5, -0.5, -0.5, -0.5, -0.5, -0.5,\n      -0.5, -0.5, -0.5, -0.5, -0.5,  0.5, -0.5, -0.5,  0.5,  0.5, -0.5,  0.5]);\n\n    var boxNorms = new Float32Array([\n       0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,\n       0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,\n       1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,\n       0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,\n      -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0, -1,  0,  0,\n       0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0]);\n\n    // These verts are used for the fill and stroke using TRIANGLE_FAN and LINE_LOOP.\n    var rectVerts = new Float32Array([0,0,0, 0,1,0, 1,1,0, 1,0,0]);\n\n    var rectNorms = new Float32Array([0,0,1, 0,0,1, 0,0,1, 0,0,1]);\n\n    // Shader for points and lines in begin/endShape.\n    var vertexShaderSrcUnlitShape =\n      \"varying vec4 vFrontColor;\" +\n\n      \"attribute vec3 aVertex;\" +\n      \"attribute vec4 aColor;\" +\n\n      \"uniform mat4 uView;\" +\n      \"uniform mat4 uProjection;\" +\n      \"uniform float uPointSize;\" +\n\n      \"void main(void) {\" +\n      \"  vFrontColor = aColor;\" +\n      \"  gl_PointSize = uPointSize;\" +\n      \"  gl_Position = uProjection * uView * vec4(aVertex, 1.0);\" +\n      \"}\";\n\n    var fragmentShaderSrcUnlitShape =\n      \"#ifdef GL_ES\\n\" +\n      \"precision highp float;\\n\" +\n      \"#endif\\n\" +\n\n      \"varying vec4 vFrontColor;\" +\n      \"uniform bool uSmooth;\" +\n\n      \"void main(void){\" +\n      \"  if(uSmooth == true){\" +\n      \"    float dist = distance(gl_PointCoord, vec2(0.5));\" +\n      \"    if(dist > 0.5){\" +\n      \"      discard;\" +\n      \"    }\" +\n      \"  }\" +\n      \"  gl_FragColor = vFrontColor;\" +\n      \"}\";\n\n    // Shader for rect, text, box outlines, sphere outlines, point() and line().\n    var vertexShaderSrc2D =\n      \"varying vec4 vFrontColor;\" +\n\n      \"attribute vec3 aVertex;\" +\n      \"attribute vec2 aTextureCoord;\" +\n      \"uniform vec4 uColor;\" +\n\n      \"uniform mat4 uModel;\" +\n      \"uniform mat4 uView;\" +\n      \"uniform mat4 uProjection;\" +\n      \"uniform float uPointSize;\" +\n      \"varying vec2 vTextureCoord;\"+\n\n      \"void main(void) {\" +\n      \"  gl_PointSize = uPointSize;\" +\n      \"  vFrontColor = uColor;\" +\n      \"  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);\" +\n      \"  vTextureCoord = aTextureCoord;\" +\n      \"}\";\n\n    var fragmentShaderSrc2D =\n      \"#ifdef GL_ES\\n\" +\n      \"precision highp float;\\n\" +\n      \"#endif\\n\" +\n\n      \"varying vec4 vFrontColor;\" +\n      \"varying vec2 vTextureCoord;\"+\n\n      \"uniform sampler2D uSampler;\"+\n      \"uniform int uIsDrawingText;\"+\n      \"uniform bool uSmooth;\" +\n\n      \"void main(void){\" +\n      // WebGL does not support POINT_SMOOTH, so we do it ourselves\n      \"  if(uSmooth == true){\" +\n      \"    float dist = distance(gl_PointCoord, vec2(0.5));\" +\n      \"    if(dist > 0.5){\" +\n      \"      discard;\" +\n      \"    }\" +\n      \"  }\" +\n\n      \"  if(uIsDrawingText == 1){\" +\n      \"    float alpha = texture2D(uSampler, vTextureCoord).a;\"+\n      \"    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);\"+\n      \"  }\" +\n      \"  else{\" +\n      \"    gl_FragColor = vFrontColor;\" +\n      \"  }\" +\n      \"}\";\n\n    var webglMaxTempsWorkaround = /Windows/.test(navigator.userAgent);\n\n    // Vertex shader for boxes and spheres.\n    var vertexShaderSrc3D =\n      \"varying vec4 vFrontColor;\" +\n\n      \"attribute vec3 aVertex;\" +\n      \"attribute vec3 aNormal;\" +\n      \"attribute vec4 aColor;\" +\n      \"attribute vec2 aTexture;\" +\n      \"varying   vec2 vTexture;\" +\n\n      \"uniform vec4 uColor;\" +\n\n      \"uniform bool uUsingMat;\" +\n      \"uniform vec3 uSpecular;\" +\n      \"uniform vec3 uMaterialEmissive;\" +\n      \"uniform vec3 uMaterialAmbient;\" +\n      \"uniform vec3 uMaterialSpecular;\" +\n      \"uniform float uShininess;\" +\n\n      \"uniform mat4 uModel;\" +\n      \"uniform mat4 uView;\" +\n      \"uniform mat4 uProjection;\" +\n      \"uniform mat4 uNormalTransform;\" +\n\n      \"uniform int uLightCount;\" +\n      \"uniform vec3 uFalloff;\" +\n\n      // Careful changing the order of these fields. Some cards\n      // have issues with memory alignment.\n      \"struct Light {\" +\n      \"  int type;\" +\n      \"  vec3 color;\" +\n      \"  vec3 position;\" +\n      \"  vec3 direction;\" +\n      \"  float angle;\" +\n      \"  vec3 halfVector;\" +\n      \"  float concentration;\" +\n      \"};\" +\n\n      // nVidia cards have issues with arrays of structures\n      // so instead we create 8 instances of Light.\n      \"uniform Light uLights0;\" +\n      \"uniform Light uLights1;\" +\n      \"uniform Light uLights2;\" +\n      \"uniform Light uLights3;\" +\n      \"uniform Light uLights4;\" +\n      \"uniform Light uLights5;\" +\n      \"uniform Light uLights6;\" +\n      \"uniform Light uLights7;\" +\n\n     // GLSL does not support switch.\n      \"Light getLight(int index){\" +\n      \"  if(index == 0) return uLights0;\" +\n      \"  if(index == 1) return uLights1;\" +\n      \"  if(index == 2) return uLights2;\" +\n      \"  if(index == 3) return uLights3;\" +\n      \"  if(index == 4) return uLights4;\" +\n      \"  if(index == 5) return uLights5;\" +\n      \"  if(index == 6) return uLights6;\" +\n      // Do not use a conditional for the last return statement\n      // because some video cards will fail and complain that\n      // \"not all paths return\".\n      \"  return uLights7;\" +\n      \"}\" +\n\n      \"void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {\" +\n      // Get the vector from the light to the vertex and\n      // get the distance from the current vector to the light position.\n      \"  float d = length( light.position - ecPos );\" +\n      \"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));\" +\n      \"  totalAmbient += light.color * attenuation;\" +\n      \"}\" +\n\n      /*\n        col - accumulated color\n        spec - accumulated specular highlight\n        vertNormal - Normal of the vertex\n        ecPos - eye coordinate position\n        light - light structure\n      */\n      \"void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {\" +\n      \"  float powerFactor = 0.0;\" +\n      \"  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));\" +\n      \"  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));\" +\n\n      \"  if( nDotVP != 0.0 ){\" +\n      \"    powerFactor = pow( nDotVH, uShininess );\" +\n      \"  }\" +\n\n      \"  col += light.color * nDotVP;\" +\n      \"  spec += uSpecular * powerFactor;\" +\n      \"}\" +\n\n      /*\n        col - accumulated color\n        spec - accumulated specular highlight\n        vertNormal - Normal of the vertex\n        ecPos - eye coordinate position\n        light - light structure\n      */\n      \"void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {\" +\n      \"  float powerFactor;\" +\n\n      // Get the vector from the light to the vertex.\n      \"   vec3 VP = light.position - ecPos;\" +\n\n      // Get the distance from the current vector to the light position.\n      \"  float d = length( VP ); \" +\n\n      // Normalize the light ray so it can be used in the dot product operation.\n      \"  VP = normalize( VP );\" +\n\n      \"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));\" +\n\n      \"  float nDotVP = max( 0.0, dot( vertNormal, VP ));\" +\n      \"  vec3 halfVector = normalize( VP - normalize(ecPos) );\" +\n      \"  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));\" +\n\n      \"  if( nDotVP == 0.0 ) {\" +\n      \"    powerFactor = 0.0;\" +\n      \"  }\" +\n      \"  else {\" +\n      \"    powerFactor = pow( nDotHV, uShininess );\" +\n      \"  }\" +\n\n      \"  spec += uSpecular * powerFactor * attenuation;\" +\n      \"  col += light.color * nDotVP * attenuation;\" +\n      \"}\" +\n\n      /*\n        col - accumulated color\n        spec - accumulated specular highlight\n        vertNormal - Normal of the vertex\n        ecPos - eye coordinate position\n        light - light structure\n      */\n      \"void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {\" +\n      \"  float spotAttenuation;\" +\n      \"  float powerFactor = 0.0;\" +\n\n      // Calculate the vector from the current vertex to the light.\n      \"  vec3 VP = light.position - ecPos;\" +\n      \"  vec3 ldir = normalize( -light.direction );\" +\n\n      // Get the distance from the spotlight and the vertex\n      \"  float d = length( VP );\" +\n      \"  VP = normalize( VP );\" +\n\n      \"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );\" +\n\n      // Dot product of the vector from vertex to light and light direction.\n      \"  float spotDot = dot( VP, ldir );\" +\n\n      // If the vertex falls inside the cone\n      (webglMaxTempsWorkaround ? // Windows reports max temps error if light.angle is used\n      \"  spotAttenuation = 1.0; \" :\n      \"  if( spotDot > cos( light.angle ) ) {\" +\n      \"    spotAttenuation = pow( spotDot, light.concentration );\" +\n      \"  }\" +\n      \"  else{\" +\n      \"    spotAttenuation = 0.0;\" +\n      \"  }\" +\n      \"  attenuation *= spotAttenuation;\" +\n      \"\") +\n\n      \"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );\" +\n      \"  vec3 halfVector = normalize( VP - normalize(ecPos) );\" +\n      \"  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );\" +\n\n      \"  if( nDotVP != 0.0 ) {\" +\n      \"    powerFactor = pow( nDotHV, uShininess );\" +\n      \"  }\" +\n\n      \"  spec += uSpecular * powerFactor * attenuation;\" +\n      \"  col += light.color * nDotVP * attenuation;\" +\n      \"}\" +\n\n      \"void main(void) {\" +\n      \"  vec3 finalAmbient = vec3( 0.0 );\" +\n      \"  vec3 finalDiffuse = vec3( 0.0 );\" +\n      \"  vec3 finalSpecular = vec3( 0.0 );\" +\n\n      \"  vec4 col = uColor;\" +\n\n      \"  if ( uColor[0] == -1.0 ){\" +\n      \"    col = aColor;\" +\n      \"  }\" +\n\n      // We use the sphere vertices as the normals when we create the sphere buffer.\n      // But this only works if the sphere vertices are unit length, so we\n      // have to normalize the normals here. Since this is only required for spheres\n      // we could consider placing this in a conditional later on.\n      \"  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));\" +\n\n      \"  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);\" +\n      \"  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;\" +\n\n      // If there were no lights this draw call, just use the\n      // assigned fill color of the shape and the specular value.\n      \"  if( uLightCount == 0 ) {\" +\n      \"    vFrontColor = col + vec4(uMaterialSpecular, 1.0);\" +\n      \"  }\" +\n      \"  else {\" +\n           // WebGL forces us to iterate over a constant value\n           // so we can't iterate using lightCount.\n      \"    for( int i = 0; i < 8; i++ ) {\" +\n      \"      Light l = getLight(i);\" +\n\n      // We can stop iterating if we know we have gone past\n      // the number of lights which are actually on. This gives us a\n      // significant performance increase with high vertex counts.\n      \"      if( i >= uLightCount ){\" +\n      \"        break;\" +\n      \"      }\" +\n\n      \"      if( l.type == 0 ) {\" +\n      \"        AmbientLight( finalAmbient, ecPos, l );\" +\n      \"      }\" +\n      \"      else if( l.type == 1 ) {\" +\n      \"        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );\" +\n      \"      }\" +\n      \"      else if( l.type == 2 ) {\" +\n      \"        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );\" +\n      \"      }\" +\n      \"      else {\" +\n      \"        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );\" +\n      \"      }\" +\n      \"    }\" +\n\n      \"   if( uUsingMat == false ) {\" +\n      \"     vFrontColor = vec4(\" +\n      \"       vec3( col ) * finalAmbient +\" +\n      \"       vec3( col ) * finalDiffuse +\" +\n      \"       vec3( col ) * finalSpecular,\" +\n      \"       col[3] );\" +\n      \"   }\" +\n      \"   else{\" +\n      \"     vFrontColor = vec4( \" +\n      \"       uMaterialEmissive + \" +\n      \"       (vec3(col) * uMaterialAmbient * finalAmbient ) + \" +\n      \"       (vec3(col) * finalDiffuse) + \" +\n      \"       (uMaterialSpecular * finalSpecular), \" +\n      \"       col[3] );\" +\n      \"    }\" +\n      \"  }\" +\n\n      \"  vTexture.xy = aTexture.xy;\" +\n      \"  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );\" +\n      \"}\";\n\n    var fragmentShaderSrc3D =\n      \"#ifdef GL_ES\\n\" +\n      \"precision highp float;\\n\" +\n      \"#endif\\n\" +\n\n      \"varying vec4 vFrontColor;\" +\n\n      \"uniform sampler2D uSampler;\" +\n      \"uniform bool uUsingTexture;\" +\n      \"varying vec2 vTexture;\" +\n\n      // In Processing, when a texture is used, the fill color is ignored\n      // vec4(1.0,1.0,1.0,0.5)\n      \"void main(void){\" +\n      \"  if( uUsingTexture ){\" +\n      \"    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;\" +\n      \"  }\"+\n      \"  else{\" +\n      \"    gl_FragColor = vFrontColor;\" +\n      \"  }\" +\n      \"}\";\n\n    ////////////////////////////////////////////////////////////////////////////\n    // 3D Functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /*\n     * Sets a uniform variable in a program object to a particular\n     * value. Before calling this function, ensure the correct\n     * program object has been installed as part of the current\n     * rendering state by calling useProgram.\n     *\n     * On some systems, if the variable exists in the shader but isn't used,\n     * the compiler will optimize it out and this function will fail.\n     *\n     * @param {String} cacheId\n     * @param {WebGLProgram} programObj program object returned from\n     * createProgramObject\n     * @param {String} varName the name of the variable in the shader\n     * @param {float | Array} varValue either a scalar value or an Array\n     *\n     * @returns none\n     *\n     * @see uniformi\n     * @see uniformMatrix\n    */\n    function uniformf(cacheId, programObj, varName, varValue) {\n      var varLocation = curContextCache.locations[cacheId];\n      if(varLocation === undef) {\n        varLocation = curContext.getUniformLocation(programObj, varName);\n        curContextCache.locations[cacheId] = varLocation;\n      }\n      // the variable won't be found if it was optimized out.\n      if (varLocation !== null) {\n        if (varValue.length === 4) {\n          curContext.uniform4fv(varLocation, varValue);\n        } else if (varValue.length === 3) {\n          curContext.uniform3fv(varLocation, varValue);\n        } else if (varValue.length === 2) {\n          curContext.uniform2fv(varLocation, varValue);\n        } else {\n          curContext.uniform1f(varLocation, varValue);\n        }\n      }\n    }\n\n    /**\n     * Sets a uniform int or int array in a program object to a particular\n     * value. Before calling this function, ensure the correct\n     * program object has been installed as part of the current\n     * rendering state.\n     *\n     * On some systems, if the variable exists in the shader but isn't used,\n     * the compiler will optimize it out and this function will fail.\n     *\n     * @param {String} cacheId\n     * @param {WebGLProgram} programObj program object returned from\n     * createProgramObject\n     * @param {String} varName the name of the variable in the shader\n     * @param {int | Array} varValue either a scalar value or an Array\n     *\n     * @returns none\n     *\n     * @see uniformf\n     * @see uniformMatrix\n    */\n    function uniformi(cacheId, programObj, varName, varValue) {\n      var varLocation = curContextCache.locations[cacheId];\n      if(varLocation === undef) {\n        varLocation = curContext.getUniformLocation(programObj, varName);\n        curContextCache.locations[cacheId] = varLocation;\n      }\n      // the variable won't be found if it was optimized out.\n      if (varLocation !== null) {\n        if (varValue.length === 4) {\n          curContext.uniform4iv(varLocation, varValue);\n        } else if (varValue.length === 3) {\n          curContext.uniform3iv(varLocation, varValue);\n        } else if (varValue.length === 2) {\n          curContext.uniform2iv(varLocation, varValue);\n        } else {\n          curContext.uniform1i(varLocation, varValue);\n        }\n      }\n    }\n\n    /**\n     * Sets the value of a uniform matrix variable in a program\n     * object. Before calling this function, ensure the correct\n     * program object has been installed as part of the current\n     * rendering state.\n     *\n     * On some systems, if the variable exists in the shader but\n     * isn't used, the compiler will optimize it out and this\n     * function will fail.\n     *\n     * @param {String} cacheId\n     * @param {WebGLProgram} programObj program object returned from\n     * createProgramObject\n     * @param {String} varName the name of the variable in the shader\n     * @param {boolean} transpose must be false\n     * @param {Array} matrix an array of 4, 9 or 16 values\n     *\n     * @returns none\n     *\n     * @see uniformi\n     * @see uniformf\n    */\n    function uniformMatrix(cacheId, programObj, varName, transpose, matrix) {\n      var varLocation = curContextCache.locations[cacheId];\n      if(varLocation === undef) {\n        varLocation = curContext.getUniformLocation(programObj, varName);\n        curContextCache.locations[cacheId] = varLocation;\n      }\n      // The variable won't be found if it was optimized out.\n      if (varLocation !== -1) {\n        if (matrix.length === 16) {\n          curContext.uniformMatrix4fv(varLocation, transpose, matrix);\n        } else if (matrix.length === 9) {\n          curContext.uniformMatrix3fv(varLocation, transpose, matrix);\n        } else {\n          curContext.uniformMatrix2fv(varLocation, transpose, matrix);\n        }\n      }\n    }\n\n    /**\n     * Binds the VBO, sets the vertex attribute data for the program\n     * object and enables the attribute.\n     *\n     * On some systems, if the attribute exists in the shader but\n     * isn't used, the compiler will optimize it out and this\n     * function will fail.\n     *\n     * @param {String} cacheId\n     * @param {WebGLProgram} programObj program object returned from\n     * createProgramObject\n     * @param {String} varName the name of the variable in the shader\n     * @param {int} size the number of components per vertex attribute\n     * @param {WebGLBuffer} VBO Vertex Buffer Object\n     *\n     * @returns none\n     *\n     * @see disableVertexAttribPointer\n    */\n    function vertexAttribPointer(cacheId, programObj, varName, size, VBO) {\n      var varLocation = curContextCache.attributes[cacheId];\n      if(varLocation === undef) {\n        varLocation = curContext.getAttribLocation(programObj, varName);\n        curContextCache.attributes[cacheId] = varLocation;\n      }\n      if (varLocation !== -1) {\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, VBO);\n        curContext.vertexAttribPointer(varLocation, size, curContext.FLOAT, false, 0, 0);\n        curContext.enableVertexAttribArray(varLocation);\n      }\n    }\n\n    /**\n     * Disables a program object attribute from being sent to WebGL.\n     *\n     * @param {String} cacheId\n     * @param {WebGLProgram} programObj program object returned from\n     * createProgramObject\n     * @param {String} varName name of the attribute\n     *\n     * @returns none\n     *\n     * @see vertexAttribPointer\n    */\n    function disableVertexAttribPointer(cacheId, programObj, varName){\n      var varLocation = curContextCache.attributes[cacheId];\n      if(varLocation === undef) {\n        varLocation = curContext.getAttribLocation(programObj, varName);\n        curContextCache.attributes[cacheId] = varLocation;\n      }\n      if (varLocation !== -1) {\n        curContext.disableVertexAttribArray(varLocation);\n      }\n    }\n\n    /**\n     * Creates a WebGL program object.\n     *\n     * @param {String} vetexShaderSource\n     * @param {String} fragmentShaderSource\n     *\n     * @returns {WebGLProgram} A program object\n    */\n    var createProgramObject = function(curContext, vetexShaderSource, fragmentShaderSource) {\n      var vertexShaderObject = curContext.createShader(curContext.VERTEX_SHADER);\n      curContext.shaderSource(vertexShaderObject, vetexShaderSource);\n      curContext.compileShader(vertexShaderObject);\n      if (!curContext.getShaderParameter(vertexShaderObject, curContext.COMPILE_STATUS)) {\n        throw curContext.getShaderInfoLog(vertexShaderObject);\n      }\n\n      var fragmentShaderObject = curContext.createShader(curContext.FRAGMENT_SHADER);\n      curContext.shaderSource(fragmentShaderObject, fragmentShaderSource);\n      curContext.compileShader(fragmentShaderObject);\n      if (!curContext.getShaderParameter(fragmentShaderObject, curContext.COMPILE_STATUS)) {\n        throw curContext.getShaderInfoLog(fragmentShaderObject);\n      }\n\n      var programObject = curContext.createProgram();\n      curContext.attachShader(programObject, vertexShaderObject);\n      curContext.attachShader(programObject, fragmentShaderObject);\n      curContext.linkProgram(programObject);\n      if (!curContext.getProgramParameter(programObject, curContext.LINK_STATUS)) {\n        throw \"Error linking shaders.\";\n      }\n\n      return programObject;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // 2D/3D drawing handling\n    ////////////////////////////////////////////////////////////////////////////\n    var imageModeCorner = function(x, y, w, h, whAreSizes) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var imageModeConvert = imageModeCorner;\n\n    var imageModeCorners = function(x, y, w, h, whAreSizes) {\n      return {\n        x: x,\n        y: y,\n        w: whAreSizes ? w : w - x,\n        h: whAreSizes ? h : h - y\n      };\n    };\n\n    var imageModeCenter = function(x, y, w, h, whAreSizes) {\n      return {\n        x: x - w / 2,\n        y: y - h / 2,\n        w: w,\n        h: h\n      };\n    };\n\n    // Objects for shared, 2D and 3D contexts\n    var DrawingShared = function(){};\n    var Drawing2D = function(){};\n    var Drawing3D = function(){};\n    var DrawingPre = function(){};\n\n    // Setup the prototype chain\n    Drawing2D.prototype = new DrawingShared();\n    Drawing2D.prototype.constructor = Drawing2D;\n    Drawing3D.prototype = new DrawingShared();\n    Drawing3D.prototype.constructor = Drawing3D;\n    DrawingPre.prototype = new DrawingShared();\n    DrawingPre.prototype.constructor = DrawingPre;\n\n    // A no-op function for when the user calls 3D functions from a 2D sketch\n    // We can change this to a throw or console.error() later if we want\n    DrawingShared.prototype.a3DOnlyFunction = noop;\n\n    /**\n     * The shape() function displays shapes to the screen.\n     * Processing currently works with SVG shapes only.\n     * The <b>shape</b> parameter specifies the shape to display and the <b>x</b>\n     * and <b>y</b> parameters define the location of the shape from its\n     * upper-left corner.\n     * The shape is displayed at its original size unless the <b>width</b>\n     * and <b>height</b> parameters specify a different size.\n     * The <b>shapeMode()</b> function changes the way the parameters work.\n     * A call to <b>shapeMode(CORNERS)</b>, for example, will change the width\n     * and height parameters to define the x and y values of the opposite corner\n     * of the shape.\n     * <br><br>\n     * Note complex shapes may draw awkwardly with P2D, P3D, and OPENGL. Those\n     * renderers do not yet support shapes that have holes or complicated breaks.\n     *\n     * @param {PShape} shape       the shape to display\n     * @param {int|float} x        x-coordinate of the shape\n     * @param {int|float} y        y-coordinate of the shape\n     * @param {int|float} width    width to display the shape\n     * @param {int|float} height   height to display the shape\n     *\n     * @see PShape\n     * @see loadShape()\n     * @see shapeMode()\n     */\n    p.shape = function(shape, x, y, width, height) {\n      if (arguments.length >= 1 && arguments[0] !== null) {\n        if (shape.isVisible()) {\n          p.pushMatrix();\n          if (curShapeMode === PConstants.CENTER) {\n            if (arguments.length === 5) {\n              p.translate(x - width/2, y - height/2);\n              p.scale(width / shape.getWidth(), height / shape.getHeight());\n            } else if (arguments.length === 3) {\n              p.translate(x - shape.getWidth()/2, - shape.getHeight()/2);\n            } else {\n              p.translate(-shape.getWidth()/2, -shape.getHeight()/2);\n            }\n          } else if (curShapeMode === PConstants.CORNER) {\n            if (arguments.length === 5) {\n              p.translate(x, y);\n              p.scale(width / shape.getWidth(), height / shape.getHeight());\n            } else if (arguments.length === 3) {\n              p.translate(x, y);\n            }\n          } else if (curShapeMode === PConstants.CORNERS) {\n            if (arguments.length === 5) {\n              width  -= x;\n              height -= y;\n              p.translate(x, y);\n              p.scale(width / shape.getWidth(), height / shape.getHeight());\n            } else if (arguments.length === 3) {\n              p.translate(x, y);\n            }\n          }\n          shape.draw(p);\n          if ((arguments.length === 1 && curShapeMode === PConstants.CENTER ) || arguments.length > 1) {\n            p.popMatrix();\n          }\n        }\n      }\n    };\n\n    /**\n     * The shapeMode() function modifies the location from which shapes draw.\n     * The default mode is <b>shapeMode(CORNER)</b>, which specifies the\n     * location to be the upper left corner of the shape and uses the third\n     * and fourth parameters of <b>shape()</b> to specify the width and height.\n     * The syntax <b>shapeMode(CORNERS)</b> uses the first and second parameters\n     * of <b>shape()</b> to set the location of one corner and uses the third\n     * and fourth parameters to set the opposite corner.\n     * The syntax <b>shapeMode(CENTER)</b> draws the shape from its center point\n     * and uses the third and forth parameters of <b>shape()</b> to specify the\n     * width and height.\n     * The parameter must be written in \"ALL CAPS\" because Processing syntax\n     * is case sensitive.\n     *\n     * @param {int} mode One of CORNER, CORNERS, CENTER\n     *\n     * @see shape()\n     * @see rectMode()\n     */\n    p.shapeMode = function (mode) {\n      curShapeMode = mode;\n    };\n\n    /**\n     * The loadShape() function loads vector shapes into a variable of type PShape. Currently, only SVG files may be loaded.\n     * In most cases, <b>loadShape()</b> should be used inside <b>setup()</b> because loading shapes inside <b>draw()</b> will reduce the speed of a sketch.\n     *\n     * @param {String} filename     an SVG file\n     *\n     * @return {PShape} a object of type PShape or null\n     * @see PShape\n     * @see PApplet#shape()\n     * @see PApplet#shapeMode()\n     */\n    p.loadShape = function (filename) {\n      if (arguments.length === 1) {\n        if (filename.indexOf(\".svg\") > -1) {\n          return new PShapeSVG(null, filename);\n        }\n      }\n      return null;\n    };\n\n    /**\n     * Processing 2.0 function for loading XML files.\n     *\n     * @param {String} uri The uri for the xml file to load.\n     *\n     * @return {XML} An XML object representing the xml data.\n     */\n    p.loadXML = function(uri) {\n      return new XML(p, uri);\n    };\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    // 2D Matrix\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Helper function for printMatrix(). Finds the largest scalar\n     * in the matrix, then number of digits left of the decimal.\n     * Call from PMatrix2D and PMatrix3D's print() function.\n     */\n    var printMatrixHelper = function(elements) {\n      var big = 0;\n      for (var i = 0; i < elements.length; i++) {\n        if (i !== 0) {\n          big = Math.max(big, Math.abs(elements[i]));\n        } else {\n          big = Math.abs(elements[i]);\n        }\n      }\n\n      var digits = (big + \"\").indexOf(\".\");\n      if (digits === 0) {\n        digits = 1;\n      } else if (digits === -1) {\n        digits = (big + \"\").length;\n      }\n\n      return digits;\n    };\n    /**\n     * PMatrix2D is a 3x2 affine matrix implementation. The constructor accepts another PMatrix2D or a list of six float elements.\n     * If no parameters are provided the matrix is set to the identity matrix.\n     *\n     * @param {PMatrix2D} matrix  the initial matrix to set to\n     * @param {float} m00         the first element of the matrix\n     * @param {float} m01         the second element of the matrix\n     * @param {float} m02         the third element of the matrix\n     * @param {float} m10         the fourth element of the matrix\n     * @param {float} m11         the fifth element of the matrix\n     * @param {float} m12         the sixth element of the matrix\n     */\n    var PMatrix2D = p.PMatrix2D = function() {\n      if (arguments.length === 0) {\n        this.reset();\n      } else if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n        this.set(arguments[0].array());\n      } else if (arguments.length === 6) {\n        this.set(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n      }\n    };\n    /**\n     * PMatrix2D methods\n     */\n    PMatrix2D.prototype = {\n      /**\n       * @member PMatrix2D\n       * The set() function sets the matrix elements. The function accepts either another PMatrix2D, an array of elements, or a list of six floats.\n       *\n       * @param {PMatrix2D} matrix    the matrix to set this matrix to\n       * @param {float[]} elements    an array of elements to set this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the third element of the matrix\n       * @param {float} m10           the fourth element of the matrix\n       * @param {float} m11           the fith element of the matrix\n       * @param {float} m12           the sixth element of the matrix\n       */\n      set: function() {\n        if (arguments.length === 6) {\n          var a = arguments;\n          this.set([a[0], a[1], a[2],\n                    a[3], a[4], a[5]]);\n        } else if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n          this.elements = arguments[0].array();\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          this.elements = arguments[0].slice();\n        }\n      },\n      /**\n       * @member PMatrix2D\n       * The get() function returns a copy of this PMatrix2D.\n       *\n       * @return {PMatrix2D} a copy of this PMatrix2D\n       */\n      get: function() {\n        var outgoing = new PMatrix2D();\n        outgoing.set(this.elements);\n        return outgoing;\n      },\n      /**\n       * @member PMatrix2D\n       * The reset() function sets this PMatrix2D to the identity matrix.\n       */\n      reset: function() {\n        this.set([1, 0, 0, 0, 1, 0]);\n      },\n      /**\n       * @member PMatrix2D\n       * The array() function returns a copy of the element values.\n       * @addon\n       *\n       * @return {float[]} returns a copy of the element values\n       */\n      array: function array() {\n        return this.elements.slice();\n      },\n      /**\n       * @member PMatrix2D\n       * The translate() function translates this matrix by moving the current coordinates to the location specified by tx and ty.\n       *\n       * @param {float} tx  the x-axis coordinate to move to\n       * @param {float} ty  the y-axis coordinate to move to\n       */\n      translate: function(tx, ty) {\n        this.elements[2] = tx * this.elements[0] + ty * this.elements[1] + this.elements[2];\n        this.elements[5] = tx * this.elements[3] + ty * this.elements[4] + this.elements[5];\n      },\n      /**\n       * @member PMatrix2D\n       * The invTranslate() function translates this matrix by moving the current coordinates to the negative location specified by tx and ty.\n       *\n       * @param {float} tx  the x-axis coordinate to move to\n       * @param {float} ty  the y-axis coordinate to move to\n       */\n      invTranslate: function(tx, ty) {\n        this.translate(-tx, -ty);\n      },\n       /**\n       * @member PMatrix2D\n       * The transpose() function is not used in processingjs.\n       */\n      transpose: function() {\n        // Does nothing in Processing.\n      },\n      /**\n       * @member PMatrix2D\n       * The mult() function multiplied this matrix.\n       * If two array elements are passed in the function will multiply a two element vector against this matrix.\n       * If target is null or not length four, a new float array will be returned.\n       * The values for vec and target can be the same (though that's less efficient).\n       * If two PVectors are passed in the function multiply the x and y coordinates of a PVector against this matrix.\n       *\n       * @param {PVector} source, target  the PVectors used to multiply this matrix\n       * @param {float[]} source, target  the arrays used to multiply this matrix\n       *\n       * @return {PVector|float[]} returns a PVector or an array representing the new matrix\n       */\n      mult: function(source, target) {\n        var x, y;\n        if (source instanceof PVector) {\n          x = source.x;\n          y = source.y;\n          if (!target) {\n            target = new PVector();\n          }\n        } else if (source instanceof Array) {\n          x = source[0];\n          y = source[1];\n          if (!target) {\n            target = [];\n          }\n        }\n        if (target instanceof Array) {\n          target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2];\n          target[1] = this.elements[3] * x + this.elements[4] * y + this.elements[5];\n        } else if (target instanceof PVector) {\n          target.x = this.elements[0] * x + this.elements[1] * y + this.elements[2];\n          target.y = this.elements[3] * x + this.elements[4] * y + this.elements[5];\n          target.z = 0;\n        }\n        return target;\n      },\n      /**\n       * @member PMatrix2D\n       * The multX() function calculates the x component of a vector from a transformation.\n       *\n       * @param {float} x the x component of the vector being transformed\n       * @param {float} y the y component of the vector being transformed\n       *\n       * @return {float} returnes the result of the calculation\n       */\n      multX: function(x, y) {\n        return (x * this.elements[0] + y * this.elements[1] + this.elements[2]);\n      },\n      /**\n       * @member PMatrix2D\n       * The multY() function calculates the y component of a vector from a transformation.\n       *\n       * @param {float} x the x component of the vector being transformed\n       * @param {float} y the y component of the vector being transformed\n       *\n       * @return {float} returnes the result of the calculation\n       */\n      multY: function(x, y) {\n        return (x * this.elements[3] + y * this.elements[4] + this.elements[5]);\n      },\n      /**\n       * @member PMatrix2D\n       * The skewX() function skews the matrix along the x-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      skewX: function(angle) {\n        this.apply(1, 0, 1, angle, 0, 0);\n      },\n      /**\n       * @member PMatrix2D\n       * The skewY() function skews the matrix along the y-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      skewY: function(angle) {\n        this.apply(1, 0, 1,  0, angle, 0);\n      },\n      /**\n       * @member PMatrix2D\n       * The shearX() function shears the matrix along the x-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      shearX: function(angle) {\n        this.apply(1, 0, 1, Math.tan(angle) , 0, 0);\n      },\n      /**\n       * @member PMatrix2D\n       * The shearY() function shears the matrix along the y-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      shearY: function(angle) {\n        this.apply(1, 0, 1,  0, Math.tan(angle), 0);\n      },\n      /**\n       * @member PMatrix2D\n       * The determinant() function calvculates the determinant of this matrix.\n       *\n       * @return {float} the determinant of the matrix\n       */\n      determinant: function() {\n        return (this.elements[0] * this.elements[4] - this.elements[1] * this.elements[3]);\n      },\n      /**\n       * @member PMatrix2D\n       * The invert() function inverts this matrix\n       *\n       * @return {boolean} true if successful\n       */\n      invert: function() {\n        var d = this.determinant();\n        if (Math.abs( d ) > PConstants.MIN_INT) {\n          var old00 = this.elements[0];\n          var old01 = this.elements[1];\n          var old02 = this.elements[2];\n          var old10 = this.elements[3];\n          var old11 = this.elements[4];\n          var old12 = this.elements[5];\n          this.elements[0] =  old11 / d;\n          this.elements[3] = -old10 / d;\n          this.elements[1] = -old01 / d;\n          this.elements[4] =  old00 / d;\n          this.elements[2] = (old01 * old12 - old11 * old02) / d;\n          this.elements[5] = (old10 * old02 - old00 * old12) / d;\n          return true;\n        }\n        return false;\n      },\n      /**\n       * @member PMatrix2D\n       * The scale() function increases or decreases the size of a shape by expanding and contracting vertices. When only one parameter is specified scale will occur in all dimensions.\n       * This is equivalent to a two parameter call.\n       *\n       * @param {float} sx  the amount to scale on the x-axis\n       * @param {float} sy  the amount to scale on the y-axis\n       */\n      scale: function(sx, sy) {\n        if (sx && !sy) {\n          sy = sx;\n        }\n        if (sx && sy) {\n          this.elements[0] *= sx;\n          this.elements[1] *= sy;\n          this.elements[3] *= sx;\n          this.elements[4] *= sy;\n        }\n      },\n       /**\n        * @member PMatrix2D\n        * The invScale() function decreases or increases the size of a shape by contracting and expanding vertices. When only one parameter is specified scale will occur in all dimensions.\n        * This is equivalent to a two parameter call.\n        *\n        * @param {float} sx  the amount to scale on the x-axis\n        * @param {float} sy  the amount to scale on the y-axis\n        */\n      invScale: function(sx, sy) {\n        if (sx && !sy) {\n          sy = sx;\n        }\n        this.scale(1 / sx, 1 / sy);\n      },\n      /**\n       * @member PMatrix2D\n       * The apply() function multiplies the current matrix by the one specified through the parameters. Note that either a PMatrix2D or a list of floats can be passed in.\n       *\n       * @param {PMatrix2D} matrix    the matrix to apply this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the third element of the matrix\n       * @param {float} m10           the fourth element of the matrix\n       * @param {float} m11           the fith element of the matrix\n       * @param {float} m12           the sixth element of the matrix\n       */\n      apply: function() {\n        var source;\n        if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n          source = arguments[0].array();\n        } else if (arguments.length === 6) {\n          source = Array.prototype.slice.call(arguments);\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          source = arguments[0];\n        }\n\n        var result = [0, 0, this.elements[2],\n                      0, 0, this.elements[5]];\n        var e = 0;\n        for (var row = 0; row < 2; row++) {\n          for (var col = 0; col < 3; col++, e++) {\n            result[e] += this.elements[row * 3 + 0] * source[col + 0] +\n                         this.elements[row * 3 + 1] * source[col + 3];\n          }\n        }\n        this.elements = result.slice();\n      },\n      /**\n       * @member PMatrix2D\n       * The preApply() function applies another matrix to the left of this one. Note that either a PMatrix2D or elements of a matrix can be passed in.\n       *\n       * @param {PMatrix2D} matrix    the matrix to apply this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the third element of the matrix\n       * @param {float} m10           the fourth element of the matrix\n       * @param {float} m11           the fith element of the matrix\n       * @param {float} m12           the sixth element of the matrix\n       */\n      preApply: function() {\n        var source;\n        if (arguments.length === 1 && arguments[0] instanceof PMatrix2D) {\n          source = arguments[0].array();\n        } else if (arguments.length === 6) {\n          source = Array.prototype.slice.call(arguments);\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          source = arguments[0];\n        }\n        var result = [0, 0, source[2],\n                      0, 0, source[5]];\n        result[2] = source[2] + this.elements[2] * source[0] + this.elements[5] * source[1];\n        result[5] = source[5] + this.elements[2] * source[3] + this.elements[5] * source[4];\n        result[0] = this.elements[0] * source[0] + this.elements[3] * source[1];\n        result[3] = this.elements[0] * source[3] + this.elements[3] * source[4];\n        result[1] = this.elements[1] * source[0] + this.elements[4] * source[1];\n        result[4] = this.elements[1] * source[3] + this.elements[4] * source[4];\n        this.elements = result.slice();\n      },\n      /**\n       * @member PMatrix2D\n       * The rotate() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotate: function(angle) {\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        var temp1 = this.elements[0];\n        var temp2 = this.elements[1];\n        this.elements[0] =  c * temp1 + s * temp2;\n        this.elements[1] = -s * temp1 + c * temp2;\n        temp1 = this.elements[3];\n        temp2 = this.elements[4];\n        this.elements[3] =  c * temp1 + s * temp2;\n        this.elements[4] = -s * temp1 + c * temp2;\n      },\n      /**\n       * @member PMatrix2D\n       * The rotateZ() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotateZ: function(angle) {\n        this.rotate(angle);\n      },\n      /**\n       * @member PMatrix2D\n       * The invRotateZ() function rotates the matrix in opposite direction.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      invRotateZ: function(angle) {\n        this.rotateZ(angle - Math.PI);\n      },\n      /**\n       * @member PMatrix2D\n       * The print() function prints out the elements of this matrix\n       */\n      print: function() {\n        var digits = printMatrixHelper(this.elements);\n        var output = \"\" + p.nfs(this.elements[0], digits, 4) + \" \" +\n                     p.nfs(this.elements[1], digits, 4) + \" \" +\n                     p.nfs(this.elements[2], digits, 4) + \"\\n\" +\n                     p.nfs(this.elements[3], digits, 4) + \" \" +\n                     p.nfs(this.elements[4], digits, 4) + \" \" +\n                     p.nfs(this.elements[5], digits, 4) + \"\\n\\n\";\n        p.println(output);\n      }\n    };\n\n    /**\n     * PMatrix3D is a 4x4  matrix implementation. The constructor accepts another PMatrix3D or a list of six or sixteen float elements.\n     * If no parameters are provided the matrix is set to the identity matrix.\n     */\n    var PMatrix3D = p.PMatrix3D = function() {\n      // When a matrix is created, it is set to an identity matrix\n      this.reset();\n    };\n    /**\n     * PMatrix3D methods\n     */\n    PMatrix3D.prototype = {\n      /**\n       * @member PMatrix2D\n       * The set() function sets the matrix elements. The function accepts either another PMatrix3D, an array of elements, or a list of six or sixteen floats.\n       *\n       * @param {PMatrix3D} matrix    the initial matrix to set to\n       * @param {float[]} elements    an array of elements to set this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the second element of the matrix\n       * @param {float} m02           the third element of the matrix\n       * @param {float} m03           the fourth element of the matrix\n       * @param {float} m10           the fifth element of the matrix\n       * @param {float} m11           the sixth element of the matrix\n       * @param {float} m12           the seventh element of the matrix\n       * @param {float} m13           the eight element of the matrix\n       * @param {float} m20           the nineth element of the matrix\n       * @param {float} m21           the tenth element of the matrix\n       * @param {float} m22           the eleventh element of the matrix\n       * @param {float} m23           the twelveth element of the matrix\n       * @param {float} m30           the thirteenth element of the matrix\n       * @param {float} m31           the fourtheenth element of the matrix\n       * @param {float} m32           the fivetheenth element of the matrix\n       * @param {float} m33           the sixteenth element of the matrix\n       */\n      set: function() {\n        if (arguments.length === 16) {\n          this.elements = Array.prototype.slice.call(arguments);\n        } else if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n          this.elements = arguments[0].array();\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          this.elements = arguments[0].slice();\n        }\n      },\n      /**\n       * @member PMatrix3D\n       * The get() function returns a copy of this PMatrix3D.\n       *\n       * @return {PMatrix3D} a copy of this PMatrix3D\n       */\n      get: function() {\n        var outgoing = new PMatrix3D();\n        outgoing.set(this.elements);\n        return outgoing;\n      },\n      /**\n       * @member PMatrix3D\n       * The reset() function sets this PMatrix3D to the identity matrix.\n       */\n      reset: function() {\n        this.elements = [1,0,0,0,\n                         0,1,0,0,\n                         0,0,1,0,\n                         0,0,0,1];\n      },\n      /**\n       * @member PMatrix3D\n       * The array() function returns a copy of the element values.\n       * @addon\n       *\n       * @return {float[]} returns a copy of the element values\n       */\n      array: function array() {\n        return this.elements.slice();\n      },\n      /**\n       * @member PMatrix3D\n       * The translate() function translates this matrix by moving the current coordinates to the location specified by tx, ty, and tz.\n       *\n       * @param {float} tx  the x-axis coordinate to move to\n       * @param {float} ty  the y-axis coordinate to move to\n       * @param {float} tz  the z-axis coordinate to move to\n       */\n      translate: function(tx, ty, tz) {\n        if (tz === undef) {\n          tz = 0;\n        }\n\n        this.elements[3]  += tx * this.elements[0]  + ty * this.elements[1]  + tz * this.elements[2];\n        this.elements[7]  += tx * this.elements[4]  + ty * this.elements[5]  + tz * this.elements[6];\n        this.elements[11] += tx * this.elements[8]  + ty * this.elements[9]  + tz * this.elements[10];\n        this.elements[15] += tx * this.elements[12] + ty * this.elements[13] + tz * this.elements[14];\n      },\n      /**\n       * @member PMatrix3D\n       * The transpose() function transpose this matrix.\n       */\n      transpose: function() {\n        var temp = this.elements[4];\n        this.elements[4] = this.elements[1];\n        this.elements[1] = temp;\n\n        temp = this.elements[8];\n        this.elements[8] = this.elements[2];\n        this.elements[2] = temp;\n\n        temp = this.elements[6];\n        this.elements[6] = this.elements[9];\n        this.elements[9] = temp;\n\n        temp = this.elements[3];\n        this.elements[3] = this.elements[12];\n        this.elements[12] = temp;\n\n        temp = this.elements[7];\n        this.elements[7] = this.elements[13];\n        this.elements[13] = temp;\n\n        temp = this.elements[11];\n        this.elements[11] = this.elements[14];\n        this.elements[14] = temp;\n      },\n      /**\n       * @member PMatrix3D\n       * The mult() function multiplied this matrix.\n       * If two array elements are passed in the function will multiply a two element vector against this matrix.\n       * If target is null or not length four, a new float array will be returned.\n       * The values for vec and target can be the same (though that's less efficient).\n       * If two PVectors are passed in the function multiply the x and y coordinates of a PVector against this matrix.\n       *\n       * @param {PVector} source, target  the PVectors used to multiply this matrix\n       * @param {float[]} source, target  the arrays used to multiply this matrix\n       *\n       * @return {PVector|float[]} returns a PVector or an array representing the new matrix\n       */\n      mult: function(source, target) {\n        var x, y, z, w;\n        if (source instanceof PVector) {\n          x = source.x;\n          y = source.y;\n          z = source.z;\n          w = 1;\n          if (!target) {\n            target = new PVector();\n          }\n        } else if (source instanceof Array) {\n          x = source[0];\n          y = source[1];\n          z = source[2];\n          w = source[3] || 1;\n\n          if ( !target || (target.length !== 3 && target.length !== 4) ) {\n            target = [0, 0, 0];\n          }\n        }\n\n        if (target instanceof Array) {\n          if (target.length === 3) {\n            target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n            target[1] = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n            target[2] = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n          } else if (target.length === 4) {\n            target[0] = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3] * w;\n            target[1] = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7] * w;\n            target[2] = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11] * w;\n            target[3] = this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15] * w;\n          }\n        }\n        if (target instanceof PVector) {\n          target.x = this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n          target.y = this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n          target.z = this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n        }\n        return target;\n      },\n      /**\n       * @member PMatrix3D\n       * The preApply() function applies another matrix to the left of this one. Note that either a PMatrix3D or elements of a matrix can be passed in.\n       *\n       * @param {PMatrix3D} matrix    the matrix to apply this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the second element of the matrix\n       * @param {float} m02           the third element of the matrix\n       * @param {float} m03           the fourth element of the matrix\n       * @param {float} m10           the fifth element of the matrix\n       * @param {float} m11           the sixth element of the matrix\n       * @param {float} m12           the seventh element of the matrix\n       * @param {float} m13           the eight element of the matrix\n       * @param {float} m20           the nineth element of the matrix\n       * @param {float} m21           the tenth element of the matrix\n       * @param {float} m22           the eleventh element of the matrix\n       * @param {float} m23           the twelveth element of the matrix\n       * @param {float} m30           the thirteenth element of the matrix\n       * @param {float} m31           the fourtheenth element of the matrix\n       * @param {float} m32           the fivetheenth element of the matrix\n       * @param {float} m33           the sixteenth element of the matrix\n       */\n      preApply: function() {\n        var source;\n        if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n          source = arguments[0].array();\n        } else if (arguments.length === 16) {\n          source = Array.prototype.slice.call(arguments);\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          source = arguments[0];\n        }\n\n        var result = [0, 0, 0, 0,\n                      0, 0, 0, 0,\n                      0, 0, 0, 0,\n                      0, 0, 0, 0];\n        var e = 0;\n        for (var row = 0; row < 4; row++) {\n          for (var col = 0; col < 4; col++, e++) {\n            result[e] += this.elements[col + 0] * source[row * 4 + 0] + this.elements[col + 4] *\n                         source[row * 4 + 1] + this.elements[col + 8] * source[row * 4 + 2] +\n                         this.elements[col + 12] * source[row * 4 + 3];\n          }\n        }\n        this.elements = result.slice();\n      },\n      /**\n       * @member PMatrix3D\n       * The apply() function multiplies the current matrix by the one specified through the parameters. Note that either a PMatrix3D or a list of floats can be passed in.\n       *\n       * @param {PMatrix3D} matrix    the matrix to apply this matrix to\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the second element of the matrix\n       * @param {float} m02           the third element of the matrix\n       * @param {float} m03           the fourth element of the matrix\n       * @param {float} m10           the fifth element of the matrix\n       * @param {float} m11           the sixth element of the matrix\n       * @param {float} m12           the seventh element of the matrix\n       * @param {float} m13           the eight element of the matrix\n       * @param {float} m20           the nineth element of the matrix\n       * @param {float} m21           the tenth element of the matrix\n       * @param {float} m22           the eleventh element of the matrix\n       * @param {float} m23           the twelveth element of the matrix\n       * @param {float} m30           the thirteenth element of the matrix\n       * @param {float} m31           the fourtheenth element of the matrix\n       * @param {float} m32           the fivetheenth element of the matrix\n       * @param {float} m33           the sixteenth element of the matrix\n       */\n      apply: function() {\n        var source;\n        if (arguments.length === 1 && arguments[0] instanceof PMatrix3D) {\n          source = arguments[0].array();\n        } else if (arguments.length === 16) {\n          source = Array.prototype.slice.call(arguments);\n        } else if (arguments.length === 1 && arguments[0] instanceof Array) {\n          source = arguments[0];\n        }\n\n        var result = [0, 0, 0, 0,\n                      0, 0, 0, 0,\n                      0, 0, 0, 0,\n                      0, 0, 0, 0];\n        var e = 0;\n        for (var row = 0; row < 4; row++) {\n          for (var col = 0; col < 4; col++, e++) {\n            result[e] += this.elements[row * 4 + 0] * source[col + 0] + this.elements[row * 4 + 1] *\n                         source[col + 4] + this.elements[row * 4 + 2] * source[col + 8] +\n                         this.elements[row * 4 + 3] * source[col + 12];\n          }\n        }\n        this.elements = result.slice();\n      },\n      /**\n       * @member PMatrix3D\n       * The rotate() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotate: function(angle, v0, v1, v2) {\n        if (arguments.length < 4) {\n          this.rotateZ(angle);\n        } else {\n          var v = new PVector(v0, v1, v2);\n          var m = v.mag();\n          if (m === 0) {\n            return;\n          } else if (m != 1) {\n            v.normalize();\n            v0 = v.x;\n            v1 = v.y;\n            v2 = v.z;\n          }\n          var c = p.cos(angle);\n          var s = p.sin(angle);\n          var t = 1.0 - c;\n\n          this.apply((t * v0 * v0) + c,\n                     (t * v0 * v1) - (s * v2),\n                     (t * v0 * v2) + (s * v1),\n                     0,\n                     (t * v0 * v1) + (s * v2),\n                     (t * v1 * v1) + c,\n                     (t * v1 * v2) - (s * v0),\n                     0,\n                     (t * v0 * v2) - (s * v1),\n                     (t * v1 * v2) + (s * v0),\n                     (t * v2 * v2) + c,\n                     0,\n                     0, 0, 0, 1);\n        }\n      },\n      /**\n       * @member PMatrix3D\n       * The invApply() function applies the inverted matrix to this matrix.\n       *\n       * @param {float} m00           the first element of the matrix\n       * @param {float} m01           the second element of the matrix\n       * @param {float} m02           the third element of the matrix\n       * @param {float} m03           the fourth element of the matrix\n       * @param {float} m10           the fifth element of the matrix\n       * @param {float} m11           the sixth element of the matrix\n       * @param {float} m12           the seventh element of the matrix\n       * @param {float} m13           the eight element of the matrix\n       * @param {float} m20           the nineth element of the matrix\n       * @param {float} m21           the tenth element of the matrix\n       * @param {float} m22           the eleventh element of the matrix\n       * @param {float} m23           the twelveth element of the matrix\n       * @param {float} m30           the thirteenth element of the matrix\n       * @param {float} m31           the fourtheenth element of the matrix\n       * @param {float} m32           the fivetheenth element of the matrix\n       * @param {float} m33           the sixteenth element of the matrix\n       *\n       * @return {boolean} returns true if the operation was successful.\n       */\n      invApply: function() {\n        if (inverseCopy === undef) {\n          inverseCopy = new PMatrix3D();\n        }\n        var a = arguments;\n        inverseCopy.set(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8],\n                        a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n\n        if (!inverseCopy.invert()) {\n          return false;\n        }\n        this.preApply(inverseCopy);\n        return true;\n      },\n      /**\n       * @member PMatrix3D\n       * The rotateZ() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotateX: function(angle) {\n        var c = p.cos(angle);\n        var s = p.sin(angle);\n        this.apply([1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1]);\n      },\n      /**\n       * @member PMatrix3D\n       * The rotateY() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotateY: function(angle) {\n        var c = p.cos(angle);\n        var s = p.sin(angle);\n        this.apply([c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1]);\n      },\n      /**\n       * @member PMatrix3D\n       * The rotateZ() function rotates the matrix.\n       *\n       * @param {float} angle         the angle of rotation in radiants\n       */\n      rotateZ: function(angle) {\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        this.apply([c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n      },\n      /**\n       * @member PMatrix3D\n       * The scale() function increases or decreases the size of a matrix by expanding and contracting vertices. When only one parameter is specified scale will occur in all dimensions.\n       * This is equivalent to a three parameter call.\n       *\n       * @param {float} sx  the amount to scale on the x-axis\n       * @param {float} sy  the amount to scale on the y-axis\n       * @param {float} sz  the amount to scale on the z-axis\n       */\n      scale: function(sx, sy, sz) {\n        if (sx && !sy && !sz) {\n          sy = sz = sx;\n        } else if (sx && sy && !sz) {\n          sz = 1;\n        }\n\n        if (sx && sy && sz) {\n          this.elements[0]  *= sx;\n          this.elements[1]  *= sy;\n          this.elements[2]  *= sz;\n          this.elements[4]  *= sx;\n          this.elements[5]  *= sy;\n          this.elements[6]  *= sz;\n          this.elements[8]  *= sx;\n          this.elements[9]  *= sy;\n          this.elements[10] *= sz;\n          this.elements[12] *= sx;\n          this.elements[13] *= sy;\n          this.elements[14] *= sz;\n        }\n      },\n      /**\n       * @member PMatrix3D\n       * The skewX() function skews the matrix along the x-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      skewX: function(angle) {\n        var t = Math.tan(angle);\n        this.apply(1, t, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      },\n      /**\n       * @member PMatrix3D\n       * The skewY() function skews the matrix along the y-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of skew specified in radians\n       */\n      skewY: function(angle) {\n        var t = Math.tan(angle);\n        this.apply(1, 0, 0, 0, t, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      },\n      /**\n       * @member PMatrix3D\n       * The shearX() function shears the matrix along the x-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of shear specified in radians\n       */\n      shearX: function(angle) {\n        var t = Math.tan(angle);\n        this.apply(1, t, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      },\n      /**\n       * @member PMatrix3D\n       * The shearY() function shears the matrix along the y-axis the amount specified by the angle parameter.\n       * Angles should be specified in radians (values from 0 to PI*2) or converted to radians with the <b>radians()</b> function.\n       *\n       * @param {float} angle  angle of shear specified in radians\n       */\n      shearY: function(angle) {\n        var t = Math.tan(angle);\n        this.apply(1, 0, 0, 0, t, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      },\n      multX: function(x, y, z, w) {\n        if (!z) {\n          return this.elements[0] * x + this.elements[1] * y + this.elements[3];\n        }\n        if (!w) {\n          return this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3];\n        }\n        return this.elements[0] * x + this.elements[1] * y + this.elements[2] * z + this.elements[3] * w;\n      },\n      multY: function(x, y, z, w) {\n        if (!z) {\n          return this.elements[4] * x + this.elements[5] * y + this.elements[7];\n        }\n        if (!w) {\n          return this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7];\n        }\n        return this.elements[4] * x + this.elements[5] * y + this.elements[6] * z + this.elements[7] * w;\n      },\n      multZ: function(x, y, z, w) {\n        if (!w) {\n          return this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11];\n        }\n        return this.elements[8] * x + this.elements[9] * y + this.elements[10] * z + this.elements[11] * w;\n      },\n      multW: function(x, y, z, w) {\n        if (!w) {\n          return this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15];\n        }\n        return this.elements[12] * x + this.elements[13] * y + this.elements[14] * z + this.elements[15] * w;\n      },\n      /**\n       * @member PMatrix3D\n       * The invert() function inverts this matrix\n       *\n       * @return {boolean} true if successful\n       */\n      invert: function() {\n        var fA0 = this.elements[0] * this.elements[5] - this.elements[1] * this.elements[4];\n        var fA1 = this.elements[0] * this.elements[6] - this.elements[2] * this.elements[4];\n        var fA2 = this.elements[0] * this.elements[7] - this.elements[3] * this.elements[4];\n        var fA3 = this.elements[1] * this.elements[6] - this.elements[2] * this.elements[5];\n        var fA4 = this.elements[1] * this.elements[7] - this.elements[3] * this.elements[5];\n        var fA5 = this.elements[2] * this.elements[7] - this.elements[3] * this.elements[6];\n        var fB0 = this.elements[8] * this.elements[13] - this.elements[9] * this.elements[12];\n        var fB1 = this.elements[8] * this.elements[14] - this.elements[10] * this.elements[12];\n        var fB2 = this.elements[8] * this.elements[15] - this.elements[11] * this.elements[12];\n        var fB3 = this.elements[9] * this.elements[14] - this.elements[10] * this.elements[13];\n        var fB4 = this.elements[9] * this.elements[15] - this.elements[11] * this.elements[13];\n        var fB5 = this.elements[10] * this.elements[15] - this.elements[11] * this.elements[14];\n\n        // Determinant\n        var fDet = fA0 * fB5 - fA1 * fB4 + fA2 * fB3 + fA3 * fB2 - fA4 * fB1 + fA5 * fB0;\n\n        // Account for a very small value\n        // return false if not successful.\n        if (Math.abs(fDet) <= 1e-9) {\n          return false;\n        }\n\n        var kInv = [];\n        kInv[0]  = +this.elements[5] * fB5 - this.elements[6] * fB4 + this.elements[7] * fB3;\n        kInv[4]  = -this.elements[4] * fB5 + this.elements[6] * fB2 - this.elements[7] * fB1;\n        kInv[8]  = +this.elements[4] * fB4 - this.elements[5] * fB2 + this.elements[7] * fB0;\n        kInv[12] = -this.elements[4] * fB3 + this.elements[5] * fB1 - this.elements[6] * fB0;\n        kInv[1]  = -this.elements[1] * fB5 + this.elements[2] * fB4 - this.elements[3] * fB3;\n        kInv[5]  = +this.elements[0] * fB5 - this.elements[2] * fB2 + this.elements[3] * fB1;\n        kInv[9]  = -this.elements[0] * fB4 + this.elements[1] * fB2 - this.elements[3] * fB0;\n        kInv[13] = +this.elements[0] * fB3 - this.elements[1] * fB1 + this.elements[2] * fB0;\n        kInv[2]  = +this.elements[13] * fA5 - this.elements[14] * fA4 + this.elements[15] * fA3;\n        kInv[6]  = -this.elements[12] * fA5 + this.elements[14] * fA2 - this.elements[15] * fA1;\n        kInv[10] = +this.elements[12] * fA4 - this.elements[13] * fA2 + this.elements[15] * fA0;\n        kInv[14] = -this.elements[12] * fA3 + this.elements[13] * fA1 - this.elements[14] * fA0;\n        kInv[3]  = -this.elements[9] * fA5 + this.elements[10] * fA4 - this.elements[11] * fA3;\n        kInv[7]  = +this.elements[8] * fA5 - this.elements[10] * fA2 + this.elements[11] * fA1;\n        kInv[11] = -this.elements[8] * fA4 + this.elements[9] * fA2 - this.elements[11] * fA0;\n        kInv[15] = +this.elements[8] * fA3 - this.elements[9] * fA1 + this.elements[10] * fA0;\n\n        // Inverse using Determinant\n        var fInvDet = 1.0 / fDet;\n        kInv[0]  *= fInvDet;\n        kInv[1]  *= fInvDet;\n        kInv[2]  *= fInvDet;\n        kInv[3]  *= fInvDet;\n        kInv[4]  *= fInvDet;\n        kInv[5]  *= fInvDet;\n        kInv[6]  *= fInvDet;\n        kInv[7]  *= fInvDet;\n        kInv[8]  *= fInvDet;\n        kInv[9]  *= fInvDet;\n        kInv[10] *= fInvDet;\n        kInv[11] *= fInvDet;\n        kInv[12] *= fInvDet;\n        kInv[13] *= fInvDet;\n        kInv[14] *= fInvDet;\n        kInv[15] *= fInvDet;\n\n        this.elements = kInv.slice();\n        return true;\n      },\n      toString: function() {\n        var str = \"\";\n        for (var i = 0; i < 15; i++) {\n          str += this.elements[i] + \", \";\n        }\n        str += this.elements[15];\n        return str;\n      },\n      /**\n       * @member PMatrix3D\n       * The print() function prints out the elements of this matrix\n       */\n      print: function() {\n        var digits = printMatrixHelper(this.elements);\n\n        var output = \"\" + p.nfs(this.elements[0], digits, 4) + \" \" + p.nfs(this.elements[1], digits, 4) +\n                     \" \" + p.nfs(this.elements[2], digits, 4) + \" \" + p.nfs(this.elements[3], digits, 4) +\n                     \"\\n\" + p.nfs(this.elements[4], digits, 4) + \" \" + p.nfs(this.elements[5], digits, 4) +\n                     \" \" + p.nfs(this.elements[6], digits, 4) + \" \" + p.nfs(this.elements[7], digits, 4) +\n                     \"\\n\" + p.nfs(this.elements[8], digits, 4) + \" \" + p.nfs(this.elements[9], digits, 4) +\n                     \" \" + p.nfs(this.elements[10], digits, 4) + \" \" + p.nfs(this.elements[11], digits, 4) +\n                     \"\\n\" + p.nfs(this.elements[12], digits, 4) + \" \" + p.nfs(this.elements[13], digits, 4) +\n                     \" \" + p.nfs(this.elements[14], digits, 4) + \" \" + p.nfs(this.elements[15], digits, 4) + \"\\n\\n\";\n        p.println(output);\n      },\n      invTranslate: function(tx, ty, tz) {\n        this.preApply(1, 0, 0, -tx, 0, 1, 0, -ty, 0, 0, 1, -tz, 0, 0, 0, 1);\n      },\n      invRotateX: function(angle) {\n        var c = Math.cos(-angle);\n        var s = Math.sin(-angle);\n        this.preApply([1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1]);\n      },\n      invRotateY: function(angle) {\n        var c = Math.cos(-angle);\n        var s = Math.sin(-angle);\n        this.preApply([c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1]);\n      },\n      invRotateZ: function(angle) {\n        var c = Math.cos(-angle);\n        var s = Math.sin(-angle);\n        this.preApply([c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n      },\n      invScale: function(x, y, z) {\n        this.preApply([1 / x, 0, 0, 0, 0, 1 / y, 0, 0, 0, 0, 1 / z, 0, 0, 0, 0, 1]);\n      }\n    };\n\n    /**\n     * @private\n     * The matrix stack stores the transformations and translations that occur within the space.\n     */\n    var PMatrixStack = p.PMatrixStack = function() {\n      this.matrixStack = [];\n    };\n\n    /**\n     * @member PMatrixStack\n     * load pushes the matrix given in the function into the stack\n     *\n     * @param {Object | Array} matrix the matrix to be pushed into the stack\n     */\n    PMatrixStack.prototype.load = function() {\n      var tmpMatrix = drawing.$newPMatrix();\n\n      if (arguments.length === 1) {\n        tmpMatrix.set(arguments[0]);\n      } else {\n        tmpMatrix.set(arguments);\n      }\n      this.matrixStack.push(tmpMatrix);\n    };\n\n    Drawing2D.prototype.$newPMatrix = function() {\n      return new PMatrix2D();\n    };\n\n    Drawing3D.prototype.$newPMatrix = function() {\n      return new PMatrix3D();\n    };\n\n    /**\n     * @member PMatrixStack\n     * push adds a duplicate of the top of the stack onto the stack - uses the peek function\n     */\n    PMatrixStack.prototype.push = function() {\n      this.matrixStack.push(this.peek());\n    };\n\n    /**\n     * @member PMatrixStack\n     * pop removes returns the matrix at the top of the stack\n     *\n     * @returns {Object} the matrix at the top of the stack\n     */\n    PMatrixStack.prototype.pop = function() {\n      return this.matrixStack.pop();\n    };\n\n    /**\n     * @member PMatrixStack\n     * peek returns but doesn't remove the matrix at the top of the stack\n     *\n     * @returns {Object} the matrix at the top of the stack\n     */\n    PMatrixStack.prototype.peek = function() {\n      var tmpMatrix = drawing.$newPMatrix();\n\n      tmpMatrix.set(this.matrixStack[this.matrixStack.length - 1]);\n      return tmpMatrix;\n    };\n\n    /**\n     * @member PMatrixStack\n     * this function multiplies the matrix at the top of the stack with the matrix given as a parameter\n     *\n     * @param {Object | Array} matrix the matrix to be multiplied into the stack\n     */\n    PMatrixStack.prototype.mult = function(matrix) {\n      this.matrixStack[this.matrixStack.length - 1].apply(matrix);\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Array handling\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n    * The split() function breaks a string into pieces using a character or string\n    * as the divider. The delim  parameter specifies the character or characters that\n    * mark the boundaries between each piece. A String[] array is returned that contains\n    * each of the pieces.\n    * If the result is a set of numbers, you can convert the String[] array to to a float[]\n    * or int[] array using the datatype conversion functions int() and float() (see example above).\n    * The splitTokens() function works in a similar fashion, except that it splits using a range\n    * of characters instead of a specific character or sequence.\n    *\n    * @param {String} str       the String to be split\n    * @param {String} delim     the character or String used to separate the data\n    *\n    * @returns {string[]} The new string array\n    *\n    * @see splitTokens\n    * @see join\n    * @see trim\n    */\n    p.split = function(str, delim) {\n      return str.split(delim);\n    };\n\n    /**\n    * The splitTokens() function splits a String at one or many character \"tokens.\" The tokens\n    * parameter specifies the character or characters to be used as a boundary.\n    * If no tokens character is specified, any whitespace character is used to split.\n    * Whitespace characters include tab (\\t), line feed (\\n), carriage return (\\r), form\n    * feed (\\f), and space. To convert a String to an array of integers or floats, use the\n    * datatype conversion functions int() and float() to convert the array of Strings.\n    *\n    * @param {String} str       the String to be split\n    * @param {Char[]} tokens    list of individual characters that will be used as separators\n    *\n    * @returns {string[]} The new string array\n    *\n    * @see split\n    * @see join\n    * @see trim\n    */\n    p.splitTokens = function(str, tokens) {\n      if (tokens === undef) {\n        return str.split(/\\s+/g);\n      }\n\n      var chars = tokens.split(/()/g),\n          buffer = \"\",\n          len = str.length,\n          i, c,\n          tokenized = [];\n\n      for (i = 0; i < len; i++) {\n        c = str[i];\n        if (chars.indexOf(c) > -1) {\n          if (buffer !== \"\") {\n            tokenized.push(buffer);\n          }\n          buffer = \"\";\n        } else {\n          buffer += c;\n        }\n      }\n\n      if (buffer !== \"\") {\n        tokenized.push(buffer);\n      }\n\n      return tokenized;\n    };\n\n    /**\n    * Expands an array by one element and adds data to the new position. The datatype of\n    * the element parameter must be the same as the datatype of the array.\n    * When using an array of objects, the data returned from the function must be cast to\n    * the object array's data type. For example: SomeClass[] items = (SomeClass[])\n    * append(originalArray, element).\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array boolean[],\n    * byte[], char[], int[], float[], or String[], or an array of objects\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} element new data for the array\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see shorten\n    * @see expand\n    */\n    p.append = function(array, element) {\n      array[array.length] = element;\n      return array;\n    };\n\n    /**\n    * Concatenates two arrays. For example, concatenating the array { 1, 2, 3 } and the\n    * array { 4, 5, 6 } yields { 1, 2, 3, 4, 5, 6 }. Both parameters must be arrays of the\n    * same datatype.\n    * When using an array of objects, the data returned from the function must be cast to the\n    * object array's data type. For example: SomeClass[] items = (SomeClass[]) concat(array1, array2).\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array1 boolean[],\n    * byte[], char[], int[], float[], String[], or an array of objects\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array2 boolean[],\n    * byte[], char[], int[], float[], String[], or an array of objects\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see splice\n    */\n    p.concat = function(array1, array2) {\n      return array1.concat(array2);\n    };\n\n    /**\n     * Sorts an array of numbers from smallest to largest and puts an array of\n     * words in alphabetical order. The original array is not modified, a\n     * re-ordered array is returned. The count parameter states the number of\n     * elements to sort. For example if there are 12 elements in an array and\n     * if count is the value 5, only the first five elements on the array will\n     * be sorted. Alphabetical ordering is case insensitive.\n     *\n     * @param {String[] | int[] | float[]}  array Array of elements to sort\n     * @param {int}                         numElem Number of elements to sort\n     *\n     * @returns {String[] | int[] | float[]} Array (same datatype as the input)\n     *\n     * @see reverse\n    */\n    p.sort = function(array, numElem) {\n      var ret = [];\n\n      // depending on the type used (int, float) or string\n      // we'll need to use a different compare function\n      if (array.length > 0) {\n        // copy since we need to return another array\n        var elemsToCopy = numElem > 0 ? numElem : array.length;\n        for (var i = 0; i < elemsToCopy; i++) {\n          ret.push(array[i]);\n        }\n        if (typeof array[0] === \"string\") {\n          ret.sort();\n        }\n        // int or float\n        else {\n          ret.sort(function(a, b) {\n            return a - b;\n          });\n        }\n\n        // copy on the rest of the elements that were not sorted in case the user\n        // only wanted a subset of an array to be sorted.\n        if (numElem > 0) {\n          for (var j = ret.length; j < array.length; j++) {\n            ret.push(array[j]);\n          }\n        }\n      }\n      return ret;\n    };\n\n    /**\n    * Inserts a value or array of values into an existing array. The first two parameters must\n    * be of the same datatype. The array parameter defines the array which will be modified\n    * and the second parameter defines the data which will be inserted. When using an array\n    * of objects, the data returned from the function must be cast to the object array's data\n    * type. For example: SomeClass[] items = (SomeClass[]) splice(array1, array2, index).\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array boolean[],\n    * byte[], char[], int[], float[], String[], or an array of objects\n    * @param {boolean|byte|char|int|float|String|boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects}\n    * value boolean, byte, char, int, float, String, boolean[], byte[], char[], int[],\n    * float[], String[], or other Object: value or an array of objects to be spliced in\n    * @param {int} index                position in the array from which to insert data\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see contract\n    * @see subset\n    */\n    p.splice = function(array, value, index) {\n\n      // Trying to splice an empty array into \"array\" in P5 won't do\n      // anything, just return the original.\n      if(value.length === 0)\n      {\n        return array;\n      }\n\n      // If the second argument was an array, we'll need to iterate over all\n      // the \"value\" elements and add one by one because\n      // array.splice(index, 0, value);\n      // would create a multi-dimensional array which isn't what we want.\n      if(value instanceof Array) {\n        for(var i = 0, j = index; i < value.length; j++,i++) {\n          array.splice(j, 0, value[i]);\n        }\n      } else {\n        array.splice(index, 0, value);\n      }\n\n      return array;\n    };\n\n    /**\n    * Extracts an array of elements from an existing array. The array parameter defines the\n    * array from which the elements will be copied and the offset and length parameters determine\n    * which elements to extract. If no length is given, elements will be extracted from the offset\n    * to the end of the array. When specifying the offset remember the first array element is 0.\n    * This function does not change the source array.\n    * When using an array of objects, the data returned from the function must be cast to the\n    * object array's data type.\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array boolean[],\n    * byte[], char[], int[], float[], String[], or an array of objects\n    * @param {int} offset         position to begin\n    * @param {int} length         number of values to extract\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see splice\n    */\n    p.subset = function(array, offset, length) {\n      var end = (length !== undef) ? offset + length : array.length;\n      return array.slice(offset, end);\n    };\n\n    /**\n    * Combines an array of Strings into one String, each separated by the character(s) used for\n    * the separator parameter. To join arrays of ints or floats, it's necessary to first convert\n    * them to strings using nf() or nfs().\n    *\n    * @param {Array} array              array of Strings\n    * @param {char|String} separator    char or String to be placed between each item\n    *\n    * @returns {String} The combined string\n    *\n    * @see split\n    * @see trim\n    * @see nf\n    * @see nfs\n    */\n    p.join = function(array, seperator) {\n      return array.join(seperator);\n    };\n\n    /**\n    * Decreases an array by one element and returns the shortened array. When using an\n    * array of objects, the data returned from the function must be cast to the object array's\n    * data type. For example: SomeClass[] items = (SomeClass[]) shorten(originalArray).\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} array\n    * boolean[], byte[], char[], int[], float[], or String[], or an array of objects\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see append\n    * @see expand\n    */\n    p.shorten = function(ary) {\n      var newary = [];\n\n      // copy array into new array\n      var len = ary.length;\n      for (var i = 0; i < len; i++) {\n        newary[i] = ary[i];\n      }\n      newary.pop();\n\n      return newary;\n    };\n\n    /**\n    * Increases the size of an array. By default, this function doubles the size of the array,\n    * but the optional newSize parameter provides precise control over the increase in size.\n    * When using an array of objects, the data returned from the function must be cast to the\n    * object array's data type. For example: SomeClass[] items = (SomeClass[]) expand(originalArray).\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]|array of objects} ary\n    * boolean[], byte[], char[], int[], float[], String[], or an array of objects\n    * @param {int} newSize              positive int: new size for the array\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see contract\n    */\n    p.expand = function(ary, targetSize) {\n      var temp = ary.slice(0),\n          newSize = targetSize || ary.length * 2;\n      temp.length = newSize;\n      return temp;\n    };\n\n    /**\n    * Copies an array (or part of an array) to another array. The src array is copied to the\n    * dst array, beginning at the position specified by srcPos and into the position specified\n    * by dstPos. The number of elements to copy is determined by length. The simplified version\n    * with two arguments copies an entire array to another of the same size. It is equivalent\n    * to \"arrayCopy(src, 0, dst, 0, src.length)\". This function is far more efficient for copying\n    * array data than iterating through a for and copying each element.\n    *\n    * @param {Array} src an array of any data type: the source array\n    * @param {Array} dest an array of any data type (as long as it's the same as src): the destination array\n    * @param {int} srcPos     starting position in the source array\n    * @param {int} destPos    starting position in the destination array\n    * @param {int} length     number of array elements to be copied\n    *\n    * @returns none\n    */\n    p.arrayCopy = function() { // src, srcPos, dest, destPos, length) {\n      var src, srcPos = 0, dest, destPos = 0, length;\n\n      if (arguments.length === 2) {\n        // recall itself and copy src to dest from start index 0 to 0 of src.length\n        src = arguments[0];\n        dest = arguments[1];\n        length = src.length;\n      } else if (arguments.length === 3) {\n        // recall itself and copy src to dest from start index 0 to 0 of length\n        src = arguments[0];\n        dest = arguments[1];\n        length = arguments[2];\n      } else if (arguments.length === 5) {\n        src = arguments[0];\n        srcPos = arguments[1];\n        dest = arguments[2];\n        destPos = arguments[3];\n        length = arguments[4];\n      }\n\n      // copy src to dest from index srcPos to index destPos of length recursivly on objects\n      for (var i = srcPos, j = destPos; i < length + srcPos; i++, j++) {\n        if (dest[j] !== undef) {\n          dest[j] = src[i];\n        } else {\n          throw \"array index out of bounds exception\";\n        }\n      }\n    };\n\n    /**\n    * Reverses the order of an array.\n    *\n    * @param {boolean[]|byte[]|char[]|int[]|float[]|String[]} array\n    * boolean[], byte[], char[], int[], float[], or String[]\n    *\n    * @returns Array (the same datatype as the input)\n    *\n    * @see sort\n    */\n    p.reverse = function(array) {\n      return array.reverse();\n    };\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Color functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    // helper functions for internal blending modes\n    p.mix = function(a, b, f) {\n      return a + (((b - a) * f) >> 8);\n    };\n\n    p.peg = function(n) {\n      return (n < 0) ? 0 : ((n > 255) ? 255 : n);\n    };\n\n    // blending modes\n    /**\n    * These are internal blending modes used for BlendColor()\n    *\n    * @param {Color} c1       First Color to blend\n    * @param {Color} c2       Second Color to blend\n    *\n    * @returns {Color}        The blended Color\n    *\n    * @see BlendColor\n    * @see Blend\n    */\n    p.modes = (function() {\n      var ALPHA_MASK = PConstants.ALPHA_MASK,\n        RED_MASK = PConstants.RED_MASK,\n        GREEN_MASK = PConstants.GREEN_MASK,\n        BLUE_MASK = PConstants.BLUE_MASK,\n        min = Math.min,\n        max = Math.max;\n\n      function applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb) {\n        var a = min(((c1 & 0xff000000) >>> 24) + f, 0xff) << 24;\n\n        var r = (ar + (((cr - ar) * f) >> 8));\n        r = ((r < 0) ? 0 : ((r > 255) ? 255 : r)) << 16;\n\n        var g = (ag + (((cg - ag) * f) >> 8));\n        g = ((g < 0) ? 0 : ((g > 255) ? 255 : g)) << 8;\n\n        var b = ab + (((cb - ab) * f) >> 8);\n        b = (b < 0) ? 0 : ((b > 255) ? 255 : b);\n\n        return (a | r | g | b);\n      }\n\n      return {\n        replace: function(c1, c2) {\n          return c2;\n        },\n        blend: function(c1, c2) {\n          var f = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK),\n            ag = (c1 & GREEN_MASK),\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK),\n            bg = (c2 & GREEN_MASK),\n            bb = (c2 & BLUE_MASK);\n\n          return (min(((c1 & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |\n                  (ar + (((br - ar) * f) >> 8)) & RED_MASK |\n                  (ag + (((bg - ag) * f) >> 8)) & GREEN_MASK |\n                  (ab + (((bb - ab) * f) >> 8)) & BLUE_MASK);\n        },\n        add: function(c1, c2) {\n          var f = (c2 & ALPHA_MASK) >>> 24;\n          return (min(((c1 & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |\n                  min(((c1 & RED_MASK) + ((c2 & RED_MASK) >> 8) * f), RED_MASK) & RED_MASK |\n                  min(((c1 & GREEN_MASK) + ((c2 & GREEN_MASK) >> 8) * f), GREEN_MASK) & GREEN_MASK |\n                  min((c1 & BLUE_MASK) + (((c2 & BLUE_MASK) * f) >> 8), BLUE_MASK));\n        },\n        subtract: function(c1, c2) {\n          var f = (c2 & ALPHA_MASK) >>> 24;\n          return (min(((c1 & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |\n                  max(((c1 & RED_MASK) - ((c2 & RED_MASK) >> 8) * f), GREEN_MASK) & RED_MASK |\n                  max(((c1 & GREEN_MASK) - ((c2 & GREEN_MASK) >> 8) * f), BLUE_MASK) & GREEN_MASK |\n                  max((c1 & BLUE_MASK) - (((c2 & BLUE_MASK) * f) >> 8), 0));\n        },\n        lightest: function(c1, c2) {\n          var f = (c2 & ALPHA_MASK) >>> 24;\n          return (min(((c1 & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |\n                  max(c1 & RED_MASK, ((c2 & RED_MASK) >> 8) * f) & RED_MASK |\n                  max(c1 & GREEN_MASK, ((c2 & GREEN_MASK) >> 8) * f) & GREEN_MASK |\n                  max(c1 & BLUE_MASK, ((c2 & BLUE_MASK) * f) >> 8));\n        },\n        darkest: function(c1, c2) {\n          var f = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK),\n            ag = (c1 & GREEN_MASK),\n            ab = (c1 & BLUE_MASK),\n            br = min(c1 & RED_MASK, ((c2 & RED_MASK) >> 8) * f),\n            bg = min(c1 & GREEN_MASK, ((c2 & GREEN_MASK) >> 8) * f),\n            bb = min(c1 & BLUE_MASK, ((c2 & BLUE_MASK) * f) >> 8);\n\n          return (min(((c1 & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |\n                  (ar + (((br - ar) * f) >> 8)) & RED_MASK |\n                  (ag + (((bg - ag) * f) >> 8)) & GREEN_MASK |\n                  (ab + (((bb - ab) * f) >> 8)) & BLUE_MASK);\n        },\n        difference: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = (ar > br) ? (ar - br) : (br - ar),\n            cg = (ag > bg) ? (ag - bg) : (bg - ag),\n            cb = (ab > bb) ? (ab - bb) : (bb - ab);\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        exclusion: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = ar + br - ((ar * br) >> 7),\n            cg = ag + bg - ((ag * bg) >> 7),\n            cb = ab + bb - ((ab * bb) >> 7);\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        multiply: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = (ar * br) >> 8,\n            cg = (ag * bg) >> 8,\n            cb = (ab * bb) >> 8;\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        screen: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = 255 - (((255 - ar) * (255 - br)) >> 8),\n            cg = 255 - (((255 - ag) * (255 - bg)) >> 8),\n            cb = 255 - (((255 - ab) * (255 - bb)) >> 8);\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        hard_light: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = (br < 128) ? ((ar * br) >> 7) : (255 - (((255 - ar) * (255 - br)) >> 7)),\n            cg = (bg < 128) ? ((ag * bg) >> 7) : (255 - (((255 - ag) * (255 - bg)) >> 7)),\n            cb = (bb < 128) ? ((ab * bb) >> 7) : (255 - (((255 - ab) * (255 - bb)) >> 7));\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        soft_light: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = ((ar * br) >> 7) + ((ar * ar) >> 8) - ((ar * ar * br) >> 15),\n            cg = ((ag * bg) >> 7) + ((ag * ag) >> 8) - ((ag * ag * bg) >> 15),\n            cb = ((ab * bb) >> 7) + ((ab * ab) >> 8) - ((ab * ab * bb) >> 15);\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        overlay: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK),\n            cr = (ar < 128) ? ((ar * br) >> 7) : (255 - (((255 - ar) * (255 - br)) >> 7)),\n            cg = (ag < 128) ? ((ag * bg) >> 7) : (255 - (((255 - ag) * (255 - bg)) >> 7)),\n            cb = (ab < 128) ? ((ab * bb) >> 7) : (255 - (((255 - ab) * (255 - bb)) >> 7));\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        dodge: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK);\n\n          var cr = 255;\n          if (br !== 255) {\n            cr = (ar << 8) / (255 - br);\n            cr = (cr < 0) ? 0 : ((cr > 255) ? 255 : cr);\n          }\n\n          var cg = 255;\n          if (bg !== 255) {\n            cg = (ag << 8) / (255 - bg);\n            cg = (cg < 0) ? 0 : ((cg > 255) ? 255 : cg);\n          }\n\n          var cb = 255;\n          if (bb !== 255) {\n            cb = (ab << 8) / (255 - bb);\n            cb = (cb < 0) ? 0 : ((cb > 255) ? 255 : cb);\n          }\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        },\n        burn: function(c1, c2) {\n          var f  = (c2 & ALPHA_MASK) >>> 24,\n            ar = (c1 & RED_MASK) >> 16,\n            ag = (c1 & GREEN_MASK) >> 8,\n            ab = (c1 & BLUE_MASK),\n            br = (c2 & RED_MASK) >> 16,\n            bg = (c2 & GREEN_MASK) >> 8,\n            bb = (c2 & BLUE_MASK);\n\n          var cr = 0;\n          if (br !== 0) {\n            cr = ((255 - ar) << 8) / br;\n            cr = 255 - ((cr < 0) ? 0 : ((cr > 255) ? 255 : cr));\n          }\n\n          var cg = 0;\n          if (bg !== 0) {\n            cg = ((255 - ag) << 8) / bg;\n            cg = 255 - ((cg < 0) ? 0 : ((cg > 255) ? 255 : cg));\n          }\n\n          var cb = 0;\n          if (bb !== 0) {\n            cb = ((255 - ab) << 8) / bb;\n            cb = 255 - ((cb < 0) ? 0 : ((cb > 255) ? 255 : cb));\n          }\n\n          return applyMode(c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb);\n        }\n      };\n    }());\n\n    function color$4(aValue1, aValue2, aValue3, aValue4) {\n      var r, g, b, a;\n\n      if (curColorMode === PConstants.HSB) {\n        var rgb = p.color.toRGB(aValue1, aValue2, aValue3);\n        r = rgb[0];\n        g = rgb[1];\n        b = rgb[2];\n      } else {\n        r = Math.round(255 * (aValue1 / colorModeX));\n        g = Math.round(255 * (aValue2 / colorModeY));\n        b = Math.round(255 * (aValue3 / colorModeZ));\n      }\n\n      a = Math.round(255 * (aValue4 / colorModeA));\n\n      // Limit values less than 0 and greater than 255\n      r = (r < 0) ? 0 : r;\n      g = (g < 0) ? 0 : g;\n      b = (b < 0) ? 0 : b;\n      a = (a < 0) ? 0 : a;\n      r = (r > 255) ? 255 : r;\n      g = (g > 255) ? 255 : g;\n      b = (b > 255) ? 255 : b;\n      a = (a > 255) ? 255 : a;\n\n      // Create color int\n      return (a << 24) & PConstants.ALPHA_MASK | (r << 16) & PConstants.RED_MASK | (g << 8) & PConstants.GREEN_MASK | b & PConstants.BLUE_MASK;\n    }\n\n    function color$2(aValue1, aValue2) {\n      var a;\n\n      // Color int and alpha\n      if (aValue1 & PConstants.ALPHA_MASK) {\n        a = Math.round(255 * (aValue2 / colorModeA));\n        // Limit values less than 0 and greater than 255\n        a = (a > 255) ? 255 : a;\n        a = (a < 0) ? 0 : a;\n\n        return aValue1 - (aValue1 & PConstants.ALPHA_MASK) + ((a << 24) & PConstants.ALPHA_MASK);\n      }\n      // Grayscale and alpha\n      if (curColorMode === PConstants.RGB) {\n        return color$4(aValue1, aValue1, aValue1, aValue2);\n      }\n      if (curColorMode === PConstants.HSB) {\n        return color$4(0, 0, (aValue1 / colorModeX) * colorModeZ, aValue2);\n      }\n    }\n\n    function color$1(aValue1) {\n      // Grayscale\n      if (aValue1 <= colorModeX && aValue1 >= 0) {\n          if (curColorMode === PConstants.RGB) {\n            return color$4(aValue1, aValue1, aValue1, colorModeA);\n          }\n          if (curColorMode === PConstants.HSB) {\n            return color$4(0, 0, (aValue1 / colorModeX) * colorModeZ, colorModeA);\n          }\n      }\n      // Color int\n      if (aValue1) {\n        if (aValue1 > 2147483647) {\n          // Java Overflow\n          aValue1 -= 4294967296;\n        }\n        return aValue1;\n      }\n    }\n\n    /**\n    * Creates colors for storing in variables of the color datatype. The parameters are\n    * interpreted as RGB or HSB values depending on the current colorMode(). The default\n    * mode is RGB values from 0 to 255 and therefore, the function call color(255, 204, 0)\n    * will return a bright yellow color. More about how colors are stored can be found in\n    * the reference for the color datatype.\n    *\n    * @param {int|float} aValue1        red or hue or grey values relative to the current color range.\n    * Also can be color value in hexadecimal notation (i.e. #FFCC00 or 0xFFFFCC00)\n    * @param {int|float} aValue2        green or saturation values relative to the current color range\n    * @param {int|float} aValue3        blue or brightness values relative to the current color range\n    * @param {int|float} aValue4        relative to current color range. Represents alpha\n    *\n    * @returns {color} the color\n    *\n    * @see colorMode\n    */\n    p.color = function(aValue1, aValue2, aValue3, aValue4) {\n\n      // 4 arguments: (R, G, B, A) or (H, S, B, A)\n      if (aValue1 !== undef && aValue2 !== undef && aValue3 !== undef && aValue4 !== undef) {\n        return color$4(aValue1, aValue2, aValue3, aValue4);\n      }\n\n      // 3 arguments: (R, G, B) or (H, S, B)\n      if (aValue1 !== undef && aValue2 !== undef && aValue3 !== undef) {\n        return color$4(aValue1, aValue2, aValue3, colorModeA);\n      }\n\n      // 2 arguments: (Color, A) or (Grayscale, A)\n      if (aValue1 !== undef && aValue2 !== undef) {\n        return color$2(aValue1, aValue2);\n      }\n\n      // 1 argument: (Grayscale) or (Color)\n      if (typeof aValue1 === \"number\") {\n        return color$1(aValue1);\n      }\n\n      // Default\n      return color$4(colorModeX, colorModeY, colorModeZ, colorModeA);\n    };\n\n    // Ease of use function to extract the colour bits into a string\n    p.color.toString = function(colorInt) {\n      return \"rgba(\" + ((colorInt & PConstants.RED_MASK) >>> 16) + \",\" + ((colorInt & PConstants.GREEN_MASK) >>> 8) +\n             \",\" + ((colorInt & PConstants.BLUE_MASK)) + \",\" + ((colorInt & PConstants.ALPHA_MASK) >>> 24) / 255 + \")\";\n    };\n\n    // Easy of use function to pack rgba values into a single bit-shifted color int.\n    p.color.toInt = function(r, g, b, a) {\n      return (a << 24) & PConstants.ALPHA_MASK | (r << 16) & PConstants.RED_MASK | (g << 8) & PConstants.GREEN_MASK | b & PConstants.BLUE_MASK;\n    };\n\n    // Creates a simple array in [R, G, B, A] format, [255, 255, 255, 255]\n    p.color.toArray = function(colorInt) {\n      return [(colorInt & PConstants.RED_MASK) >>> 16, (colorInt & PConstants.GREEN_MASK) >>> 8,\n              colorInt & PConstants.BLUE_MASK, (colorInt & PConstants.ALPHA_MASK) >>> 24];\n    };\n\n    // Creates a WebGL color array in [R, G, B, A] format. WebGL wants the color ranges between 0 and 1, [1, 1, 1, 1]\n    p.color.toGLArray = function(colorInt) {\n      return [((colorInt & PConstants.RED_MASK) >>> 16) / 255, ((colorInt & PConstants.GREEN_MASK) >>> 8) / 255,\n              (colorInt & PConstants.BLUE_MASK) / 255, ((colorInt & PConstants.ALPHA_MASK) >>> 24) / 255];\n    };\n\n    // HSB conversion function from Mootools, MIT Licensed\n    p.color.toRGB = function(h, s, b) {\n      // Limit values greater than range\n      h = (h > colorModeX) ? colorModeX : h;\n      s = (s > colorModeY) ? colorModeY : s;\n      b = (b > colorModeZ) ? colorModeZ : b;\n\n      h = (h / colorModeX) * 360;\n      s = (s / colorModeY) * 100;\n      b = (b / colorModeZ) * 100;\n\n      var br = Math.round(b / 100 * 255);\n\n      if (s === 0) { // Grayscale\n        return [br, br, br];\n      }\n      var hue = h % 360;\n      var f = hue % 60;\n      var p = Math.round((b * (100 - s)) / 10000 * 255);\n      var q = Math.round((b * (6000 - s * f)) / 600000 * 255);\n      var t = Math.round((b * (6000 - s * (60 - f))) / 600000 * 255);\n      switch (Math.floor(hue / 60)) {\n      case 0:\n        return [br, t, p];\n      case 1:\n        return [q, br, p];\n      case 2:\n        return [p, br, t];\n      case 3:\n        return [p, q, br];\n      case 4:\n        return [t, p, br];\n      case 5:\n        return [br, p, q];\n      }\n    };\n\n    function colorToHSB(colorInt) {\n      var red, green, blue;\n\n      red   = ((colorInt & PConstants.RED_MASK) >>> 16) / 255;\n      green = ((colorInt & PConstants.GREEN_MASK) >>> 8) / 255;\n      blue  = (colorInt & PConstants.BLUE_MASK) / 255;\n\n      var max = p.max(p.max(red,green), blue),\n          min = p.min(p.min(red,green), blue),\n          hue, saturation;\n\n      if (min === max) {\n        return [0, 0, max*colorModeZ];\n      }\n      saturation = (max - min) / max;\n\n      if (red === max) {\n        hue = (green - blue) / (max - min);\n      } else if (green === max) {\n        hue = 2 + ((blue - red) / (max - min));\n      } else {\n        hue = 4 + ((red - green) / (max - min));\n      }\n\n      hue /= 6;\n\n      if (hue < 0) {\n        hue += 1;\n      } else if (hue > 1) {\n        hue -= 1;\n      }\n      return [hue*colorModeX, saturation*colorModeY, max*colorModeZ];\n    }\n\n    /**\n    * Extracts the brightness value from a color.\n    *\n    * @param {color} colInt any value of the color datatype\n    *\n    * @returns {float} The brightness color value.\n    *\n    * @see red\n    * @see green\n    * @see blue\n    * @see hue\n    * @see saturation\n    */\n    p.brightness = function(colInt){\n      return colorToHSB(colInt)[2];\n    };\n\n    /**\n    * Extracts the saturation value from a color.\n    *\n    * @param {color} colInt any value of the color datatype\n    *\n    * @returns {float} The saturation color value.\n    *\n    * @see red\n    * @see green\n    * @see blue\n    * @see hue\n    * @see brightness\n    */\n    p.saturation = function(colInt){\n      return colorToHSB(colInt)[1];\n    };\n\n    /**\n    * Extracts the hue value from a color.\n    *\n    * @param {color} colInt any value of the color datatype\n    *\n    * @returns {float} The hue color value.\n    *\n    * @see red\n    * @see green\n    * @see blue\n    * @see saturation\n    * @see brightness\n    */\n    p.hue = function(colInt){\n      return colorToHSB(colInt)[0];\n    };\n\n    /**\n    * Extracts the red value from a color, scaled to match current colorMode().\n    * This value is always returned as a float so be careful not to assign it to an int value.\n    *\n    * @param {color} aColor any value of the color datatype\n    *\n    * @returns {float} The red color value.\n    *\n    * @see green\n    * @see blue\n    * @see alpha\n    * @see >> right shift\n    * @see hue\n    * @see saturation\n    * @see brightness\n    */\n    p.red = function(aColor) {\n      return ((aColor & PConstants.RED_MASK) >>> 16) / 255 * colorModeX;\n    };\n\n    /**\n    * Extracts the green value from a color, scaled to match current colorMode().\n    * This value is always returned as a float so be careful not to assign it to an int value.\n    *\n    * @param {color} aColor any value of the color datatype\n    *\n    * @returns {float} The green color value.\n    *\n    * @see red\n    * @see blue\n    * @see alpha\n    * @see >> right shift\n    * @see hue\n    * @see saturation\n    * @see brightness\n    */\n    p.green = function(aColor) {\n      return ((aColor & PConstants.GREEN_MASK) >>> 8) / 255 * colorModeY;\n    };\n\n    /**\n    * Extracts the blue value from a color, scaled to match current colorMode().\n    * This value is always returned as a float so be careful not to assign it to an int value.\n    *\n    * @param {color} aColor any value of the color datatype\n    *\n    * @returns {float} The blue color value.\n    *\n    * @see red\n    * @see green\n    * @see alpha\n    * @see >> right shift\n    * @see hue\n    * @see saturation\n    * @see brightness\n    */\n    p.blue = function(aColor) {\n      return (aColor & PConstants.BLUE_MASK) / 255 * colorModeZ;\n    };\n\n    /**\n    * Extracts the alpha value from a color, scaled to match current colorMode().\n    * This value is always returned as a float so be careful not to assign it to an int value.\n    *\n    * @param {color} aColor any value of the color datatype\n    *\n    * @returns {float} The alpha color value.\n    *\n    * @see red\n    * @see green\n    * @see blue\n    * @see >> right shift\n    * @see hue\n    * @see saturation\n    * @see brightness\n    */\n    p.alpha = function(aColor) {\n      return ((aColor & PConstants.ALPHA_MASK) >>> 24) / 255 * colorModeA;\n    };\n\n    /**\n    * Calculates a color or colors between two colors at a specific increment.\n    * The amt parameter is the amount to interpolate between the two values where 0.0\n    * equal to the first point, 0.1 is very near the first point, 0.5 is half-way in between, etc.\n    *\n    * @param {color} c1     interpolate from this color\n    * @param {color} c2     interpolate to this color\n    * @param {float} amt    between 0.0 and 1.0\n    *\n    * @returns {float} The blended color.\n    *\n    * @see blendColor\n    * @see color\n    */\n    p.lerpColor = function(c1, c2, amt) {\n      var r, g, b, a, r1, g1, b1, a1, r2, g2, b2, a2;\n      var hsb1, hsb2, rgb, h, s;\n      var colorBits1 = p.color(c1);\n      var colorBits2 = p.color(c2);\n\n      if (curColorMode === PConstants.HSB) {\n        // Special processing for HSB mode.\n        // Get HSB and Alpha values for Color 1 and 2\n        hsb1 = colorToHSB(colorBits1);\n        a1 = ((colorBits1 & PConstants.ALPHA_MASK) >>> 24) / colorModeA;\n        hsb2 = colorToHSB(colorBits2);\n        a2 = ((colorBits2 & PConstants.ALPHA_MASK) >>> 24) / colorModeA;\n\n        // Return lerp value for each channel, for HSB components\n        h = p.lerp(hsb1[0], hsb2[0], amt);\n        s = p.lerp(hsb1[1], hsb2[1], amt);\n        b = p.lerp(hsb1[2], hsb2[2], amt);\n        rgb = p.color.toRGB(h, s, b);\n        // ... and for Alpha-range\n        a = p.lerp(a1, a2, amt) * colorModeA;\n\n        return (a << 24) & PConstants.ALPHA_MASK |\n               (rgb[0] << 16) & PConstants.RED_MASK |\n               (rgb[1] << 8) & PConstants.GREEN_MASK |\n               rgb[2] & PConstants.BLUE_MASK;\n      }\n\n      // Get RGBA values for Color 1 to floats\n      r1 = (colorBits1 & PConstants.RED_MASK) >>> 16;\n      g1 = (colorBits1 & PConstants.GREEN_MASK) >>> 8;\n      b1 = (colorBits1 & PConstants.BLUE_MASK);\n      a1 = ((colorBits1 & PConstants.ALPHA_MASK) >>> 24) / colorModeA;\n\n      // Get RGBA values for Color 2 to floats\n      r2 = (colorBits2 & PConstants.RED_MASK) >>> 16;\n      g2 = (colorBits2 & PConstants.GREEN_MASK) >>> 8;\n      b2 = (colorBits2 & PConstants.BLUE_MASK);\n      a2 = ((colorBits2 & PConstants.ALPHA_MASK) >>> 24) / colorModeA;\n\n      // Return lerp value for each channel, INT for color, Float for Alpha-range\n      r = p.lerp(r1, r2, amt) | 0;\n      g = p.lerp(g1, g2, amt) | 0;\n      b = p.lerp(b1, b2, amt) | 0;\n      a = p.lerp(a1, a2, amt) * colorModeA;\n\n      return (a << 24) & PConstants.ALPHA_MASK |\n             (r << 16) & PConstants.RED_MASK |\n             (g << 8) & PConstants.GREEN_MASK |\n             b & PConstants.BLUE_MASK;\n    };\n\n    /**\n    * Changes the way Processing interprets color data. By default, fill(), stroke(), and background()\n    * colors are set by values between 0 and 255 using the RGB color model. It is possible to change the\n    * numerical range used for specifying colors and to switch color systems. For example, calling colorMode(RGB, 1.0)\n    * will specify that values are specified between 0 and 1. The limits for defining colors are altered by setting the\n    * parameters range1, range2, range3, and range 4.\n    *\n    * @param {MODE} mode Either RGB or HSB, corresponding to Red/Green/Blue and Hue/Saturation/Brightness\n    * @param {int|float} range              range for all color elements\n    * @param {int|float} range1             range for the red or hue depending on the current color mode\n    * @param {int|float} range2             range for the green or saturation depending on the current color mode\n    * @param {int|float} range3             range for the blue or brightness depending on the current color mode\n    * @param {int|float} range4             range for the alpha\n    *\n    * @returns none\n    *\n    * @see background\n    * @see fill\n    * @see stroke\n    */\n    p.colorMode = function() { // mode, range1, range2, range3, range4\n      curColorMode = arguments[0];\n      if (arguments.length > 1) {\n        colorModeX   = arguments[1];\n        colorModeY   = arguments[2] || arguments[1];\n        colorModeZ   = arguments[3] || arguments[1];\n        colorModeA   = arguments[4] || arguments[1];\n      }\n    };\n\n    /**\n    * Blends two color values together based on the blending mode given as the MODE parameter.\n    * The possible modes are described in the reference for the blend() function.\n    *\n    * @param {color} c1 color: the first color to blend\n    * @param {color} c2 color: the second color to blend\n    * @param {MODE} MODE Either BLEND, ADD, SUBTRACT, DARKEST, LIGHTEST, DIFFERENCE, EXCLUSION, MULTIPLY,\n    * SCREEN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, or BURN\n    *\n    * @returns {float} The blended color.\n    *\n    * @see blend\n    * @see color\n    */\n    p.blendColor = function(c1, c2, mode) {\n      if (mode === PConstants.REPLACE) {\n        return p.modes.replace(c1, c2);\n      } else if (mode === PConstants.BLEND) {\n        return p.modes.blend(c1, c2);\n      } else if (mode === PConstants.ADD) {\n        return p.modes.add(c1, c2);\n      } else if (mode === PConstants.SUBTRACT) {\n        return p.modes.subtract(c1, c2);\n      } else if (mode === PConstants.LIGHTEST) {\n        return p.modes.lightest(c1, c2);\n      } else if (mode === PConstants.DARKEST) {\n        return p.modes.darkest(c1, c2);\n      } else if (mode === PConstants.DIFFERENCE) {\n        return p.modes.difference(c1, c2);\n      } else if (mode === PConstants.EXCLUSION) {\n        return p.modes.exclusion(c1, c2);\n      } else if (mode === PConstants.MULTIPLY) {\n        return p.modes.multiply(c1, c2);\n      } else if (mode === PConstants.SCREEN) {\n        return p.modes.screen(c1, c2);\n      } else if (mode === PConstants.HARD_LIGHT) {\n        return p.modes.hard_light(c1, c2);\n      } else if (mode === PConstants.SOFT_LIGHT) {\n        return p.modes.soft_light(c1, c2);\n      } else if (mode === PConstants.OVERLAY) {\n        return p.modes.overlay(c1, c2);\n      } else if (mode === PConstants.DODGE) {\n        return p.modes.dodge(c1, c2);\n      } else if (mode === PConstants.BURN) {\n        return p.modes.burn(c1, c2);\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Canvas-Matrix manipulation\n    ////////////////////////////////////////////////////////////////////////////\n\n    function saveContext() {\n      curContext.save();\n    }\n\n    function restoreContext() {\n      curContext.restore();\n      isStrokeDirty = true;\n      isFillDirty = true;\n    }\n\n    /**\n    * Prints the current matrix to the text window.\n    *\n    * @returns none\n    *\n    * @see pushMatrix\n    * @see popMatrix\n    * @see resetMatrix\n    * @see applyMatrix\n    */\n    p.printMatrix = function() {\n      modelView.print();\n    };\n\n    /**\n    * Specifies an amount to displace objects within the display window. The x parameter specifies left/right translation,\n    * the y parameter specifies up/down translation, and the z parameter specifies translations toward/away from the screen.\n    * Using this function with the z  parameter requires using the P3D or OPENGL parameter in combination with size as shown\n    * in the above example. Transformations apply to everything that happens after and subsequent calls to the function\n    * accumulates the effect. For example, calling translate(50, 0) and then translate(20, 0) is the same as translate(70, 0).\n    * If translate() is called within draw(), the transformation is reset when the loop begins again.\n    * This function can be further controlled by the pushMatrix() and popMatrix().\n    *\n    * @param {int|float} x        left/right translation\n    * @param {int|float} y        up/down translation\n    * @param {int|float} z        forward/back translation\n    *\n    * @returns none\n    *\n    * @see pushMatrix\n    * @see popMatrix\n    * @see scale\n    * @see rotate\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    */\n    Drawing2D.prototype.translate = function(x, y) {\n      modelView.translate(x, y);\n      modelViewInv.invTranslate(x, y);\n      curContext.translate(x, y);\n    };\n\n    Drawing3D.prototype.translate = function(x, y, z) {\n      modelView.translate(x, y, z);\n      modelViewInv.invTranslate(x, y, z);\n    };\n\n    /**\n    * Increases or decreases the size of a shape by expanding and contracting vertices. Objects always scale from their\n    * relative origin to the coordinate system. Scale values are specified as decimal percentages. For example, the\n    * function call scale(2.0) increases the dimension of a shape by 200%. Transformations apply to everything that\n    * happens after and subsequent calls to the function multiply the effect. For example, calling scale(2.0) and\n    * then scale(1.5) is the same as scale(3.0). If scale() is called within draw(), the transformation is reset when\n    * the loop begins again. Using this fuction with the z  parameter requires passing P3D or OPENGL into the size()\n    * parameter as shown in the example above. This function can be further controlled by pushMatrix() and popMatrix().\n    *\n    * @param {int|float} size     percentage to scale the object\n    * @param {int|float} x        percentage to scale the object in the x-axis\n    * @param {int|float} y        percentage to scale the object in the y-axis\n    * @param {int|float} z        percentage to scale the object in the z-axis\n    *\n    * @returns none\n    *\n    * @see pushMatrix\n    * @see popMatrix\n    * @see translate\n    * @see rotate\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    */\n    Drawing2D.prototype.scale = function(x, y) {\n      modelView.scale(x, y);\n      modelViewInv.invScale(x, y);\n      curContext.scale(x, y || x);\n    };\n\n    Drawing3D.prototype.scale = function(x, y, z) {\n      modelView.scale(x, y, z);\n      modelViewInv.invScale(x, y, z);\n    };\n\n\n    /**\n     * helper function for applying a transfrom matrix to a 2D context.\n     */\n    Drawing2D.prototype.transform = function(pmatrix) {\n      var e = pmatrix.array();\n      curContext.transform(e[0],e[3],e[1],e[4],e[2],e[5]);\n    };\n\n    /**\n     * helper function for applying a transfrom matrix to a 3D context.\n     * not currently implemented.\n     */\n    Drawing3D.prototype.transformm = function(pmatrix3d) {\n      throw(\"p.transform is currently not supported in 3D mode\");\n    };\n\n\n    /**\n    * Pushes the current transformation matrix onto the matrix stack. Understanding pushMatrix() and popMatrix()\n    * requires understanding the concept of a matrix stack. The pushMatrix() function saves the current coordinate\n    * system to the stack and popMatrix() restores the prior coordinate system. pushMatrix() and popMatrix() are\n    * used in conjuction with the other transformation methods and may be embedded to control the scope of\n    * the transformations.\n    *\n    * @returns none\n    *\n    * @see popMatrix\n    * @see translate\n    * @see rotate\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    */\n    Drawing2D.prototype.pushMatrix = function() {\n      userMatrixStack.load(modelView);\n      userReverseMatrixStack.load(modelViewInv);\n      saveContext();\n    };\n\n    Drawing3D.prototype.pushMatrix = function() {\n      userMatrixStack.load(modelView);\n      userReverseMatrixStack.load(modelViewInv);\n    };\n\n    /**\n    * Pops the current transformation matrix off the matrix stack. Understanding pushing and popping requires\n    * understanding the concept of a matrix stack. The pushMatrix() function saves the current coordinate system to\n    * the stack and popMatrix() restores the prior coordinate system. pushMatrix() and popMatrix() are used in\n    * conjuction with the other transformation methods and may be embedded to control the scope of the transformations.\n    *\n    * @returns none\n    *\n    * @see popMatrix\n    * @see pushMatrix\n    */\n    Drawing2D.prototype.popMatrix = function() {\n      modelView.set(userMatrixStack.pop());\n      modelViewInv.set(userReverseMatrixStack.pop());\n      restoreContext();\n    };\n\n    Drawing3D.prototype.popMatrix = function() {\n      modelView.set(userMatrixStack.pop());\n      modelViewInv.set(userReverseMatrixStack.pop());\n    };\n\n    /**\n    * Replaces the current matrix with the identity matrix. The equivalent function in OpenGL is glLoadIdentity().\n    *\n    * @returns none\n    *\n    * @see popMatrix\n    * @see pushMatrix\n    * @see applyMatrix\n    * @see printMatrix\n    */\n    Drawing2D.prototype.resetMatrix = function() {\n      modelView.reset();\n      modelViewInv.reset();\n      curContext.setTransform(1,0,0,1,0,0);\n    };\n\n    Drawing3D.prototype.resetMatrix = function() {\n      modelView.reset();\n      modelViewInv.reset();\n    };\n\n    /**\n    * Multiplies the current matrix by the one specified through the parameters. This is very slow because it will\n    * try to calculate the inverse of the transform, so avoid it whenever possible. The equivalent function\n    * in OpenGL is glMultMatrix().\n    *\n    * @param {int|float} n00-n15      numbers which define the 4x4 matrix to be multiplied\n    *\n    * @returns none\n    *\n    * @see popMatrix\n    * @see pushMatrix\n    * @see resetMatrix\n    * @see printMatrix\n    */\n    DrawingShared.prototype.applyMatrix = function() {\n      var a = arguments;\n      modelView.apply(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n      modelViewInv.invApply(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n    };\n\n    Drawing2D.prototype.applyMatrix = function() {\n      var a = arguments;\n      for (var cnt = a.length; cnt < 16; cnt++) {\n        a[cnt] = 0;\n      }\n      a[10] = a[15] = 1;\n      DrawingShared.prototype.applyMatrix.apply(this, a);\n    };\n\n    /**\n    * Rotates a shape around the x-axis the amount specified by the angle parameter. Angles should be\n    * specified in radians (values from 0 to PI*2) or converted to radians with the radians()  function.\n    * Objects are always rotated around their relative position to the origin and positive numbers\n    * rotate objects in a counterclockwise direction. Transformations apply to everything that happens\n    * after and subsequent calls to the function accumulates the effect. For example, calling rotateX(PI/2)\n    * and then rotateX(PI/2) is the same as rotateX(PI). If rotateX() is called within the draw(), the\n    * transformation is reset when the loop begins again. This function requires passing P3D or OPENGL\n    * into the size() parameter as shown in the example above.\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateY\n    * @see rotateZ\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    */\n    p.rotateX = function(angleInRadians) {\n      modelView.rotateX(angleInRadians);\n      modelViewInv.invRotateX(angleInRadians);\n    };\n\n    /**\n    * Rotates a shape around the z-axis the amount specified by the angle parameter. Angles should be\n    * specified in radians (values from 0 to PI*2) or converted to radians with the radians()  function.\n    * Objects are always rotated around their relative position to the origin and positive numbers\n    * rotate objects in a counterclockwise direction. Transformations apply to everything that happens\n    * after and subsequent calls to the function accumulates the effect. For example, calling rotateZ(PI/2)\n    * and then rotateZ(PI/2) is the same as rotateZ(PI). If rotateZ() is called within the draw(), the\n    * transformation is reset when the loop begins again. This function requires passing P3D or OPENGL\n    * into the size() parameter as shown in the example above.\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateX\n    * @see rotateY\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    */\n    Drawing2D.prototype.rotateZ = function() {\n      throw \"rotateZ() is not supported in 2D mode. Use rotate(float) instead.\";\n    };\n\n    Drawing3D.prototype.rotateZ = function(angleInRadians) {\n      modelView.rotateZ(angleInRadians);\n      modelViewInv.invRotateZ(angleInRadians);\n    };\n\n    /**\n    * Rotates a shape around the y-axis the amount specified by the angle parameter. Angles should be\n    * specified in radians (values from 0 to PI*2) or converted to radians with the radians()  function.\n    * Objects are always rotated around their relative position to the origin and positive numbers\n    * rotate objects in a counterclockwise direction. Transformations apply to everything that happens\n    * after and subsequent calls to the function accumulates the effect. For example, calling rotateY(PI/2)\n    * and then rotateY(PI/2) is the same as rotateY(PI). If rotateY() is called within the draw(), the\n    * transformation is reset when the loop begins again. This function requires passing P3D or OPENGL\n    * into the size() parameter as shown in the example above.\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateX\n    * @see rotateZ\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    */\n    p.rotateY = function(angleInRadians) {\n      modelView.rotateY(angleInRadians);\n      modelViewInv.invRotateY(angleInRadians);\n    };\n\n    /**\n    * Rotates a shape the amount specified by the angle parameter. Angles should be specified in radians\n    * (values from 0 to TWO_PI) or converted to radians with the radians() function. Objects are always\n    * rotated around their relative position to the origin and positive numbers rotate objects in a\n    * clockwise direction. Transformations apply to everything that happens after and subsequent calls\n    * to the function accumulates the effect. For example, calling rotate(HALF_PI) and then rotate(HALF_PI)\n    * is the same as rotate(PI). All tranformations are reset when draw() begins again. Technically,\n    * rotate() multiplies the current transformation matrix by a rotation matrix. This function can be\n    * further controlled by the pushMatrix() and popMatrix().\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    */\n    Drawing2D.prototype.rotate = function(angleInRadians) {\n      modelView.rotateZ(angleInRadians);\n      modelViewInv.invRotateZ(angleInRadians);\n      curContext.rotate(angleInRadians);\n    };\n\n    Drawing3D.prototype.rotate = function(angleInRadians) {\n      if (arguments.length < 4) {\n        p.rotateZ(angleInRadians);\n      } else {\n        modelView.rotate(angleInRadians, arguments[1], arguments[2], arguments[3]);\n        modelViewInv.rotate((-angleInRadians), arguments[1], arguments[2], arguments[3]);\n      }\n    };\n\n    /**\n    * Shears a shape around the x-axis the amount specified by the angle parameter.\n    * Angles should be specified in radians (values from 0 to PI*2) or converted to radians\n    * with the radians() function. Objects are always sheared around their relative position\n    * to the origin and positive numbers shear objects in a clockwise direction. Transformations\n    * apply to everything that happens after and subsequent calls to the function accumulates the\n    * effect. For example, calling shearX(PI/2) and then shearX(PI/2) is the same as shearX(PI)\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    */\n\n    Drawing2D.prototype.shearX = function(angleInRadians) {\n      modelView.shearX(angleInRadians);\n      curContext.transform(1,0,angleInRadians,1,0,0);\n    };\n\n    Drawing3D.prototype.shearX = function(angleInRadians) {\n      modelView.shearX(angleInRadians);\n    };\n\n    /**\n    * Shears a shape around the y-axis the amount specified by the angle parameter.\n    * Angles should be specified in radians (values from 0 to PI*2) or converted to\n    * radians with the radians() function. Objects are always sheared around their\n    * relative position to the origin and positive numbers shear objects in a\n    * clockwise direction. Transformations apply to everything that happens after\n    * and subsequent calls to the function accumulates the effect. For example,\n    * calling shearY(PI/2) and then shearY(PI/2) is the same as shearY(PI).\n    *\n    * @param {int|float} angleInRadians     angle of rotation specified in radians\n    *\n    * @returns none\n    *\n    * @see rotateX\n    * @see rotateY\n    * @see rotateZ\n    * @see rotate\n    * @see translate\n    * @see scale\n    * @see popMatrix\n    * @see pushMatrix\n    * @see shearX\n    */\n\n   Drawing2D.prototype.shearY = function(angleInRadians) {\n      modelView.shearY(angleInRadians);\n      curContext.transform(1,angleInRadians,0,1,0,0);\n    };\n\n    Drawing3D.prototype.shearY = function(angleInRadians) {\n      modelView.shearY(angleInRadians);\n    };\n\n    /**\n    * The pushStyle() function saves the current style settings and popStyle()  restores the prior settings.\n    * Note that these functions are always used together. They allow you to change the style settings and later\n    * return to what you had. When a new style is started with pushStyle(), it builds on the current style information.\n    * The pushStyle() and popStyle() functions can be embedded to provide more control (see the second example\n    * above for a demonstration.)\n    * The style information controlled by the following functions are included in the style: fill(), stroke(), tint(),\n    * strokeWeight(), strokeCap(), strokeJoin(), imageMode(), rectMode(), ellipseMode(), shapeMode(), colorMode(),\n    * textAlign(), textFont(), textMode(), textSize(), textLeading(), emissive(), specular(), shininess(), ambient()\n    *\n    * @returns none\n    *\n    * @see popStyle\n    */\n    p.pushStyle = function() {\n      // Save the canvas state.\n      saveContext();\n\n      p.pushMatrix();\n\n      var newState = {\n        'doFill': doFill,\n        'currentFillColor': currentFillColor,\n        'doStroke': doStroke,\n        'currentStrokeColor': currentStrokeColor,\n        'curTint': curTint,\n        'curRectMode': curRectMode,\n        'curColorMode': curColorMode,\n        'colorModeX': colorModeX,\n        'colorModeZ': colorModeZ,\n        'colorModeY': colorModeY,\n        'colorModeA': colorModeA,\n        'curTextFont': curTextFont,\n        'horizontalTextAlignment': horizontalTextAlignment,\n        'verticalTextAlignment': verticalTextAlignment,\n        'textMode': textMode,\n        'curFontName': curFontName,\n        'curTextSize': curTextSize,\n        'curTextAscent': curTextAscent,\n        'curTextDescent': curTextDescent,\n        'curTextLeading': curTextLeading\n      };\n\n      styleArray.push(newState);\n    };\n\n    /**\n    * The pushStyle() function saves the current style settings and popStyle()  restores the prior settings; these\n    * functions are always used together. They allow you to change the style settings and later return to what you had.\n    * When a new style is started with pushStyle(), it builds on the current style information. The pushStyle() and\n    * popStyle() functions can be embedded to provide more control (see the second example above for a demonstration.)\n    *\n    * @returns none\n    *\n    * @see pushStyle\n    */\n    p.popStyle = function() {\n      var oldState = styleArray.pop();\n\n      if (oldState) {\n        restoreContext();\n\n        p.popMatrix();\n\n        doFill = oldState.doFill;\n        currentFillColor = oldState.currentFillColor;\n        doStroke = oldState.doStroke;\n        currentStrokeColor = oldState.currentStrokeColor;\n        curTint = oldState.curTint;\n        curRectMode = oldState.curRectMode;\n        curColorMode = oldState.curColorMode;\n        colorModeX = oldState.colorModeX;\n        colorModeZ = oldState.colorModeZ;\n        colorModeY = oldState.colorModeY;\n        colorModeA = oldState.colorModeA;\n        curTextFont = oldState.curTextFont;\n        curFontName = oldState.curFontName;\n        curTextSize = oldState.curTextSize;\n        horizontalTextAlignment = oldState.horizontalTextAlignment;\n        verticalTextAlignment = oldState.verticalTextAlignment;\n        textMode = oldState.textMode;\n        curTextAscent = oldState.curTextAscent;\n        curTextDescent = oldState.curTextDescent;\n        curTextLeading = oldState.curTextLeading;\n      } else {\n        throw \"Too many popStyle() without enough pushStyle()\";\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Time based functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n    * Processing communicates with the clock on your computer.\n    * The year() function returns the current year as an integer (2003, 2004, 2005, etc).\n    *\n    * @returns {float} The current year.\n    *\n    * @see millis\n    * @see second\n    * @see minute\n    * @see hour\n    * @see day\n    * @see month\n    */\n    p.year = function() {\n      return new Date().getFullYear();\n    };\n    /**\n    * Processing communicates with the clock on your computer.\n    * The month() function returns the current month as a value from 1 - 12.\n    *\n    * @returns {float} The current month.\n    *\n    * @see millis\n    * @see second\n    * @see minute\n    * @see hour\n    * @see day\n    * @see year\n    */\n    p.month = function() {\n      return new Date().getMonth() + 1;\n    };\n    /**\n    * Processing communicates with the clock on your computer.\n    * The day() function returns the current day as a value from 1 - 31.\n    *\n    * @returns {float} The current day.\n    *\n    * @see millis\n    * @see second\n    * @see minute\n    * @see hour\n    * @see month\n    * @see year\n    */\n    p.day = function() {\n      return new Date().getDate();\n    };\n    /**\n    * Processing communicates with the clock on your computer.\n    * The hour() function returns the current hour as a value from 0 - 23.\n    *\n    * @returns {float} The current hour.\n    *\n    * @see millis\n    * @see second\n    * @see minute\n    * @see month\n    * @see day\n    * @see year\n    */\n    p.hour = function() {\n      return new Date().getHours();\n    };\n    /**\n    * Processing communicates with the clock on your computer.\n    * The minute() function returns the current minute as a value from 0 - 59.\n    *\n    * @returns {float} The current minute.\n    *\n    * @see millis\n    * @see second\n    * @see month\n    * @see hour\n    * @see day\n    * @see year\n    */\n    p.minute = function() {\n      return new Date().getMinutes();\n    };\n    /**\n    * Processing communicates with the clock on your computer.\n    * The second() function returns the current second as a value from 0 - 59.\n    *\n    * @returns {float} The current minute.\n    *\n    * @see millis\n    * @see month\n    * @see minute\n    * @see hour\n    * @see day\n    * @see year\n    */\n    p.second = function() {\n      return new Date().getSeconds();\n    };\n    /**\n    * Returns the number of milliseconds (thousandths of a second) since starting a sketch.\n    * This information is often used for timing animation sequences.\n    *\n    * @returns {long} The number of milliseconds since starting the sketch.\n    *\n    * @see month\n    * @see second\n    * @see minute\n    * @see hour\n    * @see day\n    * @see year\n    */\n    p.millis = function() {\n      return Date.now() - start;\n    };\n\n    /**\n    * Executes the code within draw() one time. This functions allows the program to update\n    * the display window only when necessary, for example when an event registered by\n    * mousePressed() or keyPressed() occurs.\n    * In structuring a program, it only makes sense to call redraw() within events such as\n    * mousePressed(). This is because redraw() does not run draw() immediately (it only sets\n    * a flag that indicates an update is needed).\n    * Calling redraw() within draw() has no effect because draw() is continuously called anyway.\n    *\n    * @returns none\n    *\n    * @see noLoop\n    * @see loop\n    */\n    function redrawHelper() {\n      var sec = (Date.now() - timeSinceLastFPS) / 1000;\n      framesSinceLastFPS++;\n      var fps = framesSinceLastFPS / sec;\n\n      // recalculate FPS every half second for better accuracy.\n      if (sec > 0.5) {\n        timeSinceLastFPS = Date.now();\n        framesSinceLastFPS = 0;\n        p.__frameRate = fps;\n      }\n\n      p.frameCount++;\n    }\n\n    Drawing2D.prototype.redraw = function() {\n      redrawHelper();\n\n      curContext.lineWidth = lineWidth;\n      var pmouseXLastEvent = p.pmouseX,\n          pmouseYLastEvent = p.pmouseY;\n      p.pmouseX = pmouseXLastFrame;\n      p.pmouseY = pmouseYLastFrame;\n\n      saveContext();\n      p.draw();\n      restoreContext();\n\n      pmouseXLastFrame = p.mouseX;\n      pmouseYLastFrame = p.mouseY;\n      p.pmouseX = pmouseXLastEvent;\n      p.pmouseY = pmouseYLastEvent;\n    };\n\n    Drawing3D.prototype.redraw = function() {\n      redrawHelper();\n\n      var pmouseXLastEvent = p.pmouseX,\n          pmouseYLastEvent = p.pmouseY;\n      p.pmouseX = pmouseXLastFrame;\n      p.pmouseY = pmouseYLastFrame;\n      // even if the color buffer isn't cleared with background(),\n      // the depth buffer needs to be cleared regardless.\n      curContext.clear(curContext.DEPTH_BUFFER_BIT);\n      curContextCache = { attributes: {}, locations: {} };\n      // Delete all the lighting states and the materials the\n      // user set in the last draw() call.\n      p.noLights();\n      p.lightFalloff(1, 0, 0);\n      p.shininess(1);\n      p.ambient(255, 255, 255);\n      p.specular(0, 0, 0);\n      p.emissive(0, 0, 0);\n      p.camera();\n      p.draw();\n\n      pmouseXLastFrame = p.mouseX;\n      pmouseYLastFrame = p.mouseY;\n      p.pmouseX = pmouseXLastEvent;\n      p.pmouseY = pmouseYLastEvent;\n    };\n\n    /**\n    * Stops Processing from continuously executing the code within draw(). If loop() is\n    * called, the code in draw() begin to run continuously again. If using noLoop() in\n    * setup(), it should be the last line inside the block.\n    * When noLoop() is used, it's not possible to manipulate or access the screen inside event\n    * handling functions such as mousePressed() or keyPressed(). Instead, use those functions\n    * to call redraw() or loop(), which will run draw(), which can update the screen properly.\n    * This means that when noLoop() has been called, no drawing can happen, and functions like\n    * saveFrame() or loadPixels() may not be used.\n    * Note that if the sketch is resized, redraw() will be called to update the sketch, even\n    * after noLoop() has been specified. Otherwise, the sketch would enter an odd state until\n    * loop() was called.\n    *\n    * @returns none\n    *\n    * @see redraw\n    * @see draw\n    * @see loop\n    */\n    p.noLoop = function() {\n      doLoop = false;\n      loopStarted = false;\n      clearInterval(looping);\n      curSketch.onPause();\n    };\n\n    /**\n    * Causes Processing to continuously execute the code within draw(). If noLoop() is called,\n    * the code in draw() stops executing.\n    *\n    * @returns none\n    *\n    * @see noLoop\n    */\n    p.loop = function() {\n      if (loopStarted) {\n        return;\n      }\n\n      timeSinceLastFPS = Date.now();\n      framesSinceLastFPS = 0;\n\n      looping = window.setInterval(function() {\n        try {\n          curSketch.onFrameStart();\n          p.redraw();\n          curSketch.onFrameEnd();\n        } catch(e_loop) {\n          window.clearInterval(looping);\n          throw e_loop;\n        }\n      }, curMsPerFrame);\n      doLoop = true;\n      loopStarted = true;\n      curSketch.onLoop();\n    };\n\n    /**\n    * Specifies the number of frames to be displayed every second. If the processor is not\n    * fast enough to maintain the specified rate, it will not be achieved. For example, the\n    * function call frameRate(30) will attempt to refresh 30 times a second. It is recommended\n    * to set the frame rate within setup(). The default rate is 60 frames per second.\n    *\n    * @param {int} aRate        number of frames per second.\n    *\n    * @returns none\n    *\n    * @see delay\n    */\n    p.frameRate = function(aRate) {\n      curFrameRate = aRate;\n      curMsPerFrame = 1000 / curFrameRate;\n\n      // clear and reset interval\n      if (doLoop) {\n        p.noLoop();\n        p.loop();\n      }\n    };\n\n    /**\n    * Quits/stops/exits the program.\n    * Rather than terminating immediately, exit() will cause the sketch to exit after draw()\n    * has completed (or after setup() completes if called during the setup() method).\n    *\n    * @returns none\n    */\n    p.exit = function() {\n      // cleanup\n      window.clearInterval(looping);\n      removeInstance(p.externals.canvas.id);\n      delete(curElement.onmousedown);\n\n      // Step through the libraries to detach them\n      for (var lib in Processing.lib) {\n        if (Processing.lib.hasOwnProperty(lib)) {\n          if (Processing.lib[lib].hasOwnProperty(\"detach\")) {\n            Processing.lib[lib].detach(p);\n          }\n        }\n      }\n\n      // clean up all event handling\n      var i = eventHandlers.length;\n      while (i--) {\n        detachEventHandler(eventHandlers[i]);\n      }\n      curSketch.onExit();\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // MISC functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n    * Sets the cursor to a predefined symbol, an image, or turns it on if already hidden.\n    * If you are trying to set an image as the cursor, it is recommended to make the size\n    * 16x16 or 32x32 pixels. It is not possible to load an image as the cursor if you are\n    * exporting your program for the Web. The values for parameters x and y must be less\n    * than the dimensions of the image.\n    *\n    * @param {MODE} MODE either ARROW, CROSS, HAND, MOVE, TEXT, WAIT\n    * @param {PImage} image       any variable of type PImage\n    * @param {int}    x           the horizonal active spot of the cursor\n    * @param {int}    y           the vertical active spot of the cursor\n    *\n    * @returns none\n    *\n    * @see noCursor\n    */\n    p.cursor = function() {\n      if (arguments.length > 1 || (arguments.length === 1 && arguments[0] instanceof p.PImage)) {\n        var image = arguments[0],\n          x, y;\n        if (arguments.length >= 3) {\n          x = arguments[1];\n          y = arguments[2];\n          if (x < 0 || y < 0 || y >= image.height || x >= image.width) {\n            throw \"x and y must be non-negative and less than the dimensions of the image\";\n          }\n        } else {\n          x = image.width >>> 1;\n          y = image.height >>> 1;\n        }\n\n        // see https://developer.mozilla.org/en/Using_URL_values_for_the_cursor_property\n        var imageDataURL = image.toDataURL();\n        var style = \"url(\\\"\" + imageDataURL + \"\\\") \" + x + \" \" + y + \", default\";\n        curCursor = curElement.style.cursor = style;\n      } else if (arguments.length === 1) {\n        var mode = arguments[0];\n        curCursor = curElement.style.cursor = mode;\n      } else {\n        curCursor = curElement.style.cursor = oldCursor;\n      }\n    };\n\n    /**\n    * Hides the cursor from view.\n    *\n    * @returns none\n    *\n    * @see cursor\n    */\n    p.noCursor = function() {\n      curCursor = curElement.style.cursor = PConstants.NOCURSOR;\n    };\n\n    /**\n    * Links to a webpage either in the same window or in a new window. The complete URL\n    * must be specified.\n    *\n    * @param {String} href      complete url as a String in quotes\n    * @param {String} target    name of the window to load the URL as a string in quotes\n    *\n    * @returns none\n    */\n    p.link = function(href, target) {\n      if (target !== undef) {\n        window.open(href, target);\n      } else {\n        window.location = href;\n      }\n    };\n\n    // PGraphics methods\n    // These functions exist only for compatibility with P5\n    p.beginDraw = noop;\n    p.endDraw = noop;\n\n    /**\n     * This function takes content from a canvas and turns it into an ImageData object to be used with a PImage\n     *\n     * @returns {ImageData}        ImageData object to attach to a PImage (1D array of pixel data)\n     *\n     * @see PImage\n     */\n    Drawing2D.prototype.toImageData = function(x, y, w, h) {\n      x = x !== undef ? x : 0;\n      y = y !== undef ? y : 0;\n      w = w !== undef ? w : p.width;\n      h = h !== undef ? h : p.height;\n      return curContext.getImageData(x, y, w, h);\n    };\n\n    Drawing3D.prototype.toImageData = function(x, y, w, h) {\n      x = x !== undef ? x : 0;\n      y = y !== undef ? y : 0;\n      w = w !== undef ? w : p.width;\n      h = h !== undef ? h : p.height;\n      var c = document.createElement(\"canvas\"),\n          ctx = c.getContext(\"2d\"),\n          obj = ctx.createImageData(w, h),\n          uBuff = new Uint8Array(w * h * 4);\n      curContext.readPixels(x, y, w, h, curContext.RGBA, curContext.UNSIGNED_BYTE, uBuff);\n      for (var i=0, ul=uBuff.length, obj_data=obj.data; i < ul; i++) {\n        obj_data[i] = uBuff[(h - 1 - Math.floor(i / 4 / w)) * w * 4 + (i % (w * 4))];\n      }\n      return obj;\n    };\n\n    /**\n    * Displays message in the browser's status area. This is the text area in the lower\n    * left corner of the browser. The status() function will only work when the\n    * Processing program is running in a web browser.\n    *\n    * @param {String} text      any valid String\n    *\n    * @returns none\n    */\n    p.status = function(text) {\n      window.status = text;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Binary Functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n    * Converts a byte, char, int, or color to a String containing the equivalent binary\n    * notation. For example color(0, 102, 153, 255) will convert to the String\n    * \"11111111000000000110011010011001\". This function can help make your geeky debugging\n    * sessions much happier.\n    *\n    * @param {byte|char|int|color} num          byte, char, int, color: value to convert\n    * @param {int} numBits                      number of digits to return\n    *\n    * @returns {String}\n    *\n    * @see unhex\n    * @see hex\n    * @see unbinary\n    */\n    p.binary = function(num, numBits) {\n      var bit;\n      if (numBits > 0) {\n        bit = numBits;\n      } else if(num instanceof Char) {\n        bit = 16;\n        num |= 0; // making it int\n      } else {\n        // autodetect, skipping zeros\n        bit = 32;\n        while (bit > 1 && !((num >>> (bit - 1)) & 1)) {\n          bit--;\n        }\n      }\n      var result = \"\";\n      while (bit > 0) {\n        result += ((num >>> (--bit)) & 1) ? \"1\" : \"0\";\n      }\n      return result;\n    };\n\n    /**\n    * Converts a String representation of a binary number to its equivalent integer value.\n    * For example, unbinary(\"00001000\") will return 8.\n    *\n    * @param {String} binaryString String\n    *\n    * @returns {Int}\n    *\n    * @see hex\n    * @see binary\n    * @see unbinary\n    */\n    p.unbinary = function(binaryString) {\n      var i = binaryString.length - 1, mask = 1, result = 0;\n      while (i >= 0) {\n        var ch = binaryString[i--];\n        if (ch !== '0' && ch !== '1') {\n          throw \"the value passed into unbinary was not an 8 bit binary number\";\n        }\n        if (ch === '1') {\n          result += mask;\n        }\n        mask <<= 1;\n      }\n      return result;\n    };\n\n    var decimalToHex = function(d, padding) {\n      //if there is no padding value added, default padding to 8 else go into while statement.\n      padding = (padding === undef || padding === null) ? padding = 8 : padding;\n      if (d < 0) {\n        d = 0xFFFFFFFF + d + 1;\n      }\n      var hex = Number(d).toString(16).toUpperCase();\n      while (hex.length < padding) {\n        hex = \"0\" + hex;\n      }\n      if (hex.length >= padding) {\n        hex = hex.substring(hex.length - padding, hex.length);\n      }\n      return hex;\n    };\n\n    // note: since we cannot keep track of byte, int types by default the returned string is 8 chars long\n    // if no 2nd argument is passed.  closest compromise we can use to match java implementation Feb 5 2010\n    // also the char parser has issues with chars that are not digits or letters IE: !@#$%^&*\n    /**\n    * Converts a byte, char, int, or color to a String containing the equivalent hexadecimal notation.\n    * For example color(0, 102, 153, 255) will convert to the String \"FF006699\". This function can help\n    * make your geeky debugging sessions much happier.\n    *\n    * @param {byte|char|int|Color} value   the value to turn into a hex string\n    * @param {int} digits                 the number of digits to return\n    *\n    * @returns {String}\n    *\n    * @see unhex\n    * @see binary\n    * @see unbinary\n    */\n    p.hex = function(value, len) {\n      if (arguments.length === 1) {\n        if (value instanceof Char) {\n          len = 4;\n        } else { // int or byte, indistinguishable at the moment, default to 8\n          len = 8;\n        }\n      }\n      return decimalToHex(value, len);\n    };\n\n    function unhexScalar(hex) {\n      var value = parseInt(\"0x\" + hex, 16);\n\n      // correct for int overflow java expectation\n      if (value > 2147483647) {\n        value -= 4294967296;\n      }\n      return value;\n    }\n\n    /**\n    * Converts a String representation of a hexadecimal number to its equivalent integer value.\n    *\n    * @param {String} hex   the hex string to convert to an int\n    *\n    * @returns {int}\n    *\n    * @see hex\n    * @see binary\n    * @see unbinary\n    */\n    p.unhex = function(hex) {\n      if (hex instanceof Array) {\n        var arr = [];\n        for (var i = 0; i < hex.length; i++) {\n          arr.push(unhexScalar(hex[i]));\n        }\n        return arr;\n      }\n      return unhexScalar(hex);\n    };\n\n    // Load a file or URL into strings\n    /**\n    * Reads the contents of a file or url and creates a String array of its individual lines.\n    * The filename parameter can also be a URL to a file found online.  If the file is not available or an error occurs,\n    * null will be returned and an error message will be printed to the console. The error message does not halt\n    * the program.\n    *\n    * @param {String} filename    name of the file or url to load\n    *\n    * @returns {String[]}\n    *\n    * @see loadBytes\n    * @see saveStrings\n    * @see saveBytes\n    */\n    p.loadStrings = function(filename) {\n      if (localStorage[filename]) {\n        return localStorage[filename].split(\"\\n\");\n      }\n\n      var filecontent = ajax(filename);\n      if(typeof filecontent !== \"string\" || filecontent === \"\") {\n        return [];\n      }\n\n      // deal with the fact that Windows uses \\r\\n, Unix uses \\n,\n      // Mac uses \\r, and we actually expect \\n\n      filecontent = filecontent.replace(/(\\r\\n?)/g,\"\\n\").replace(/\\n$/,\"\");\n\n      return filecontent.split(\"\\n\");\n    };\n\n    // Writes an array of strings to a file, one line per string\n    /**\n    * Writes an array of strings to a file, one line per string. This file is saved to the localStorage.\n    *\n    * @param {String} filename    name of the file to save to localStorage\n    * @param {String[]} strings   string array to be written\n    *\n    * @see loadBytes\n    * @see loadStrings\n    * @see saveBytes\n    */\n    p.saveStrings = function(filename, strings) {\n      localStorage[filename] = strings.join('\\n');\n    };\n\n    /**\n    * Reads the contents of a file or url and places it in a byte array. If a file is specified, it must be located in the localStorage.\n    * The filename parameter can also be a URL to a file found online.\n    *\n    * @param {String} filename   name of a file in the localStorage or a URL.\n    *\n    * @returns {byte[]}\n    *\n    * @see loadStrings\n    * @see saveStrings\n    * @see saveBytes\n    */\n    p.loadBytes = function(url) {\n      var string = ajax(url);\n      var ret = [];\n\n      for (var i = 0; i < string.length; i++) {\n        ret.push(string.charCodeAt(i));\n      }\n\n      return ret;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // String Functions\n    ////////////////////////////////////////////////////////////////////////////\n    /**\n     * The matchAll() function is identical to match(), except that it returns an array of all matches in\n     * the specified String, rather than just the first.\n     *\n     * @param {String} aString  the String to search inside\n     * @param {String} aRegExp  the regexp to be used for matching\n     *\n     * @return {String[]} returns an array of matches\n     *\n     * @see #match\n     */\n    p.matchAll = function(aString, aRegExp) {\n      var results = [],\n          latest;\n      var regexp = new RegExp(aRegExp, \"g\");\n      while ((latest = regexp.exec(aString)) !== null) {\n        results.push(latest);\n        if (latest[0].length === 0) {\n          ++regexp.lastIndex;\n        }\n      }\n      return results.length > 0 ? results : null;\n    };\n    /**\n     * The match() function matches a string with a regular expression, and returns the match as an\n     * array. The first index is the matching expression, and array elements\n     * [1] and higher represent each of the groups (sequences found in parens).\n     *\n     * @param {String} str      the String to be searched\n     * @param {String} regexp   the regexp to be used for matching\n     *\n     * @return {String[]} an array of matching strings\n     */\n    p.match = function(str, regexp) {\n      return str.match(regexp);\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Other java specific functions\n    ////////////////////////////////////////////////////////////////////////////\n\n\n    var logBuffer = [];\n\n    /**\n     * The println() function writes to the console area of the Processing environment.\n     * Each call to this function creates a new line of output. Individual elements can be separated with quotes (\"\") and joined with the string concatenation operator (+).\n     *\n     * @param {String} message the string to write to the console\n     *\n     * @see #join\n     * @see #print\n     */\n    p.println = function(message) {\n      Processing.logger.println(message);\n    };\n    /**\n     * The print() function writes to the console area of the Processing environment.\n     *\n     * @param {String} message the string to write to the console\n     *\n     * @see #join\n     */\n    p.print = function(message) {\n      Processing.logger.print(message);\n    };\n\n    // Alphanumeric chars arguments automatically converted to numbers when\n    // passed in, and will come out as numbers.\n    p.str = function(val) {\n      if (val instanceof Array) {\n        var arr = [];\n        for (var i = 0; i < val.length; i++) {\n          arr.push(val[i].toString() + \"\");\n        }\n        return arr;\n      }\n      return (val.toString() + \"\");\n    };\n\n\n    // Conversion\n    function booleanScalar(val) {\n      if (typeof val === 'number') {\n        return val !== 0;\n      }\n      if (typeof val === 'boolean') {\n        return val;\n      }\n      if (typeof val === 'string') {\n        return val.toLowerCase() === 'true';\n      }\n      if (val instanceof Char) {\n        // 1, T or t\n        return val.code === 49 || val.code === 84 || val.code === 116;\n      }\n    }\n\n    /**\n     * Converts the passed parameter to the function to its boolean value.\n     * It will return an array of booleans if an array is passed in.\n     *\n     * @param {int, byte, string} val          the parameter to be converted to boolean\n     * @param {int[], byte[], string[]} val    the array to be converted to boolean[]\n     *\n     * @return {boolean|boolean[]} returns a boolean or an array of booleans\n     */\n    p.parseBoolean = function (val) {\n      if (val instanceof Array) {\n        var ret = [];\n        for (var i = 0; i < val.length; i++) {\n          ret.push(booleanScalar(val[i]));\n        }\n        return ret;\n      }\n      return booleanScalar(val);\n    };\n\n    /**\n     * Converts the passed parameter to the function to its byte value.\n     * A byte is a number between -128 and 127.\n     * It will return an array of bytes if an array is passed in.\n     *\n     * @param {int, char} what        the parameter to be conveted to byte\n     * @param {int[], char[]} what    the array to be converted to byte[]\n     *\n     * @return {byte|byte[]} returns a byte or an array of bytes\n     */\n    p.parseByte = function(what) {\n      if (what instanceof Array) {\n        var bytes = [];\n        for (var i = 0; i < what.length; i++) {\n          bytes.push((0 - (what[i] & 0x80)) | (what[i] & 0x7F));\n        }\n        return bytes;\n      }\n      return (0 - (what & 0x80)) | (what & 0x7F);\n    };\n\n    /**\n     * Converts the passed parameter to the function to its char value.\n     * It will return an array of chars if an array is passed in.\n     *\n     * @param {int, byte} key        the parameter to be conveted to char\n     * @param {int[], byte[]} key    the array to be converted to char[]\n     *\n     * @return {char|char[]} returns a char or an array of chars\n     */\n    p.parseChar = function(key) {\n      if (typeof key === \"number\") {\n        return new Char(String.fromCharCode(key & 0xFFFF));\n      }\n      if (key instanceof Array) {\n        var ret = [];\n        for (var i = 0; i < key.length; i++) {\n          ret.push(new Char(String.fromCharCode(key[i] & 0xFFFF)));\n        }\n        return ret;\n      }\n      throw \"char() may receive only one argument of type int, byte, int[], or byte[].\";\n    };\n\n    // Processing doc claims good argument types are: int, char, byte, boolean,\n    // String, int[], char[], byte[], boolean[], String[].\n    // floats should not work. However, floats with only zeroes right of the\n    // decimal will work because JS converts those to int.\n    function floatScalar(val) {\n      if (typeof val === 'number') {\n        return val;\n      }\n      if (typeof val === 'boolean') {\n        return val ? 1 : 0;\n      }\n      if (typeof val === 'string') {\n        return parseFloat(val);\n      }\n      if (val instanceof Char) {\n        return val.code;\n      }\n    }\n\n    /**\n     * Converts the passed parameter to the function to its float value.\n     * It will return an array of floats if an array is passed in.\n     *\n     * @param {int, char, boolean, string} val            the parameter to be conveted to float\n     * @param {int[], char[], boolean[], string[]} val    the array to be converted to float[]\n     *\n     * @return {float|float[]} returns a float or an array of floats\n     */\n    p.parseFloat = function(val) {\n      if (val instanceof Array) {\n        var ret = [];\n        for (var i = 0; i < val.length; i++) {\n          ret.push(floatScalar(val[i]));\n        }\n        return ret;\n      }\n      return floatScalar(val);\n    };\n\n    function intScalar(val, radix) {\n      if (typeof val === 'number') {\n        return val & 0xFFFFFFFF;\n      }\n      if (typeof val === 'boolean') {\n        return val ? 1 : 0;\n      }\n      if (typeof val === 'string') {\n        var number = parseInt(val, radix || 10); // Default to decimal radix.\n        return number & 0xFFFFFFFF;\n      }\n      if (val instanceof Char) {\n        return val.code;\n      }\n    }\n\n    /**\n     * Converts the passed parameter to the function to its int value.\n     * It will return an array of ints if an array is passed in.\n     *\n     * @param {string, char, boolean, float} val            the parameter to be conveted to int\n     * @param {string[], char[], boolean[], float[]} val    the array to be converted to int[]\n     * @param {int} radix                                   optional the radix of the number (for js compatibility)\n     *\n     * @return {int|int[]} returns a int or an array of ints\n     */\n    p.parseInt = function(val, radix) {\n      if (val instanceof Array) {\n        var ret = [];\n        for (var i = 0; i < val.length; i++) {\n          if (typeof val[i] === 'string' && !/^\\s*[+\\-]?\\d+\\s*$/.test(val[i])) {\n            ret.push(0);\n          } else {\n            ret.push(intScalar(val[i], radix));\n          }\n        }\n        return ret;\n      }\n      return intScalar(val, radix);\n    };\n\n    p.__int_cast = function(val) {\n      return 0|val;\n    };\n\n    p.__instanceof = function(obj, type) {\n      if (typeof type !== \"function\") {\n        throw \"Function is expected as type argument for instanceof operator\";\n      }\n\n      if (typeof obj === \"string\") {\n        // special case for strings\n        return type === Object || type === String;\n      }\n\n      if (obj instanceof type) {\n        // fast check if obj is already of type instance\n        return true;\n      }\n\n      if (typeof obj !== \"object\" || obj === null) {\n        return false; // not an object or null\n      }\n\n      var objType = obj.constructor;\n      if (type.$isInterface) {\n        // expecting the interface\n        // queueing interfaces from type and its base classes\n        var interfaces = [];\n        while (objType) {\n          if (objType.$interfaces) {\n            interfaces = interfaces.concat(objType.$interfaces);\n          }\n          objType = objType.$base;\n        }\n        while (interfaces.length > 0) {\n          var i = interfaces.shift();\n          if (i === type) {\n            return true;\n          }\n          // wide search in base interfaces\n          if (i.$interfaces) {\n            interfaces = interfaces.concat(i.$interfaces);\n          }\n        }\n        return false;\n      }\n\n      while (objType.hasOwnProperty(\"$base\")) {\n        objType = objType.$base;\n        if (objType === type) {\n          return true; // object was found\n        }\n      }\n\n      return false;\n    };\n\n    /**\n    * Defines the dimension of the display window in units of pixels. The size() function must\n    * be the first line in setup(). If size() is not called, the default size of the window is\n    * 100x100 pixels. The system variables width and height are set by the parameters passed to\n    * the size() function.\n    *\n    * @param {int} aWidth     width of the display window in units of pixels\n    * @param {int} aHeight    height of the display window in units of pixels\n    * @param {MODE} aMode     Either P2D, P3D, JAVA2D, or OPENGL\n    *\n    * @see createGraphics\n    * @see screen\n    */\n    DrawingShared.prototype.size = function(aWidth, aHeight, aMode) {\n      if (doStroke) {\n        p.stroke(0);\n      }\n\n      if (doFill) {\n        p.fill(255);\n      }\n\n      // The default 2d context has already been created in the p.init() stage if\n      // a 3d context was not specified. This is so that a 2d context will be\n      // available if size() was not called.\n      var savedProperties = {\n        fillStyle: curContext.fillStyle,\n        strokeStyle: curContext.strokeStyle,\n        lineCap: curContext.lineCap,\n        lineJoin: curContext.lineJoin\n      };\n      // remove the style width and height properties to ensure that the canvas gets set to\n      // aWidth and aHeight coming in\n      if (curElement.style.length > 0 ) {\n        curElement.style.removeProperty(\"width\");\n        curElement.style.removeProperty(\"height\");\n      }\n\n      curElement.width = p.width = aWidth || 100;\n      curElement.height = p.height = aHeight || 100;\n\n      for (var prop in savedProperties) {\n        if (savedProperties.hasOwnProperty(prop)) {\n          curContext[prop] = savedProperties[prop];\n        }\n      }\n\n      // make sure to set the default font the first time round.\n      p.textFont(curTextFont);\n\n      // Set the background to whatever it was called last as if background() was called before size()\n      // If background() hasn't been called before, set background() to a light gray\n      p.background();\n\n      // set 5% for pixels to cache (or 1000)\n      maxPixelsCached = Math.max(1000, aWidth * aHeight * 0.05);\n\n      // Externalize the context\n      p.externals.context = curContext;\n\n      for (var i = 0; i < PConstants.SINCOS_LENGTH; i++) {\n        sinLUT[i] = p.sin(i * (PConstants.PI / 180) * 0.5);\n        cosLUT[i] = p.cos(i * (PConstants.PI / 180) * 0.5);\n      }\n    };\n\n    Drawing2D.prototype.size = function(aWidth, aHeight, aMode) {\n      if (curContext === undef) {\n        // size() was called without p.init() default context, i.e. p.createGraphics()\n        curContext = curElement.getContext(\"2d\");\n        userMatrixStack = new PMatrixStack();\n        userReverseMatrixStack = new PMatrixStack();\n        modelView = new PMatrix2D();\n        modelViewInv = new PMatrix2D();\n      }\n\n      DrawingShared.prototype.size.apply(this, arguments);\n    };\n\n    Drawing3D.prototype.size = (function() {\n      var size3DCalled = false;\n\n      return function size(aWidth, aHeight, aMode) {\n        if (size3DCalled) {\n          throw \"Multiple calls to size() for 3D renders are not allowed.\";\n        }\n        size3DCalled = true;\n\n        function getGLContext(canvas) {\n          var ctxNames = ['experimental-webgl', 'webgl', 'webkit-3d'],\n              gl;\n\n          for (var i=0, l=ctxNames.length; i<l; i++) {\n            gl = canvas.getContext(ctxNames[i], {antialias: false, preserveDrawingBuffer: true});\n            if (gl) {\n              break;\n            }\n          }\n\n          return gl;\n        }\n\n        // Get the 3D rendering context.\n        try {\n          // If the HTML <canvas> dimensions differ from the\n          // dimensions specified in the size() call in the sketch, for\n          // 3D sketches, browsers will either not render or render the\n          // scene incorrectly. To fix this, we need to adjust the\n          // width and height attributes of the canvas.\n          curElement.width = p.width = aWidth || 100;\n          curElement.height = p.height = aHeight || 100;\n          curContext = getGLContext(curElement);\n          canTex = curContext.createTexture();\n          textTex = curContext.createTexture();\n        } catch(e_size) {\n          Processing.debug(e_size);\n        }\n\n        if (!curContext) {\n          throw \"WebGL context is not supported on this browser.\";\n        }\n\n        // Set defaults\n        curContext.viewport(0, 0, curElement.width, curElement.height);\n        curContext.enable(curContext.DEPTH_TEST);\n        curContext.enable(curContext.BLEND);\n        curContext.blendFunc(curContext.SRC_ALPHA, curContext.ONE_MINUS_SRC_ALPHA);\n\n        // Create the program objects to render 2D (points, lines) and\n        // 3D (spheres, boxes) shapes. Because 2D shapes are not lit,\n        // lighting calculations are ommitted from this program object.\n        programObject2D = createProgramObject(curContext, vertexShaderSrc2D, fragmentShaderSrc2D);\n\n        programObjectUnlitShape = createProgramObject(curContext, vertexShaderSrcUnlitShape, fragmentShaderSrcUnlitShape);\n\n        // Set the default point and line width for the 2D and unlit shapes.\n        p.strokeWeight(1);\n\n        // Now that the programs have been compiled, we can set the default\n        // states for the lights.\n        programObject3D = createProgramObject(curContext, vertexShaderSrc3D, fragmentShaderSrc3D);\n        curContext.useProgram(programObject3D);\n\n        // Assume we aren't using textures by default.\n        uniformi(\"usingTexture3d\", programObject3D, \"usingTexture\", usingTexture);\n\n        // Set some defaults.\n        p.lightFalloff(1, 0, 0);\n        p.shininess(1);\n        p.ambient(255, 255, 255);\n        p.specular(0, 0, 0);\n        p.emissive(0, 0, 0);\n\n        // Create buffers for 3D primitives\n        boxBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, boxBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, boxVerts, curContext.STATIC_DRAW);\n\n        boxNormBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, boxNormBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, boxNorms, curContext.STATIC_DRAW);\n\n        boxOutlineBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, boxOutlineBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, boxOutlineVerts, curContext.STATIC_DRAW);\n\n        // used to draw the rectangle and the outline\n        rectBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, rectBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, rectVerts, curContext.STATIC_DRAW);\n\n        rectNormBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, rectNormBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, rectNorms, curContext.STATIC_DRAW);\n\n        // The sphere vertices are specified dynamically since the user\n        // can change the level of detail. Everytime the user does that\n        // using sphereDetail(), the new vertices are calculated.\n        sphereBuffer = curContext.createBuffer();\n\n        lineBuffer = curContext.createBuffer();\n\n        // Shape buffers\n        fillBuffer = curContext.createBuffer();\n        fillColorBuffer = curContext.createBuffer();\n        strokeColorBuffer = curContext.createBuffer();\n        shapeTexVBO = curContext.createBuffer();\n\n        pointBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, pointBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array([0, 0, 0]), curContext.STATIC_DRAW);\n\n        textBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, textBuffer );\n        curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]), curContext.STATIC_DRAW);\n\n        textureBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ARRAY_BUFFER, textureBuffer);\n        curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array([0,0,1,0,1,1,0,1]), curContext.STATIC_DRAW);\n\n        indexBuffer = curContext.createBuffer();\n        curContext.bindBuffer(curContext.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        curContext.bufferData(curContext.ELEMENT_ARRAY_BUFFER, new Uint16Array([0,1,2,2,3,0]), curContext.STATIC_DRAW);\n\n        cam = new PMatrix3D();\n        cameraInv = new PMatrix3D();\n        modelView = new PMatrix3D();\n        modelViewInv = new PMatrix3D();\n        projection = new PMatrix3D();\n        p.camera();\n        p.perspective();\n\n        userMatrixStack = new PMatrixStack();\n        userReverseMatrixStack = new PMatrixStack();\n        // used by both curve and bezier, so just init here\n        curveBasisMatrix = new PMatrix3D();\n        curveToBezierMatrix = new PMatrix3D();\n        curveDrawMatrix = new PMatrix3D();\n        bezierDrawMatrix = new PMatrix3D();\n        bezierBasisInverse = new PMatrix3D();\n        bezierBasisMatrix = new PMatrix3D();\n        bezierBasisMatrix.set(-1, 3, -3, 1, 3, -6, 3, 0, -3, 3, 0, 0, 1, 0, 0, 0);\n\n        DrawingShared.prototype.size.apply(this, arguments);\n      };\n    }());\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Lights\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Adds an ambient light. Ambient light doesn't come from a specific direction,\n     * the rays have light have bounced around so much that objects are evenly lit\n     * from all sides. Ambient lights are almost always used in combination with\n     * other types of lights. Lights need to be included in the <b>draw()</b> to\n     * remain persistent in a looping program. Placing them in the <b>setup()</b>\n     * of a looping program will cause them to only have an effect the first time\n     * through the loop. The effect of the parameters is determined by the current\n     * color mode.\n     *\n     * @param {int | float} r red or hue value\n     * @param {int | float} g green or hue value\n     * @param {int | float} b blue or hue value\n     *\n     * @param {int | float} x x position of light (used for falloff)\n     * @param {int | float} y y position of light (used for falloff)\n     * @param {int | float} z z position of light (used for falloff)\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see directionalLight\n     * @see pointLight\n     * @see spotLight\n    */\n    Drawing2D.prototype.ambientLight = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.ambientLight = function(r, g, b, x, y, z) {\n      if (lightCount === PConstants.MAX_LIGHTS) {\n        throw \"can only create \" + PConstants.MAX_LIGHTS + \" lights\";\n      }\n\n      var pos = new PVector(x, y, z);\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.mult(pos, pos);\n\n      // Instead of calling p.color, we do the calculations ourselves to\n      // reduce property lookups.\n      var col = color$4(r, g, b, 0);\n      var normalizedCol = [ ((col & PConstants.RED_MASK) >>> 16) / 255,\n                            ((col & PConstants.GREEN_MASK) >>> 8) / 255,\n                             (col & PConstants.BLUE_MASK) / 255 ];\n\n      curContext.useProgram(programObject3D);\n      uniformf(\"uLights.color.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".color\", normalizedCol);\n      uniformf(\"uLights.position.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".position\", pos.array());\n      uniformi(\"uLights.type.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".type\", 0);\n      uniformi(\"uLightCount3d\", programObject3D, \"uLightCount\", ++lightCount);\n    };\n\n    /**\n     * Adds a directional light. Directional light comes from one direction and\n     * is stronger when hitting a surface squarely and weaker if it hits at a\n     * gentle angle. After hitting a surface, a directional lights scatters in\n     * all directions. Lights need to be included in the <b>draw()</b> to remain\n     * persistent in a looping program. Placing them in the <b>setup()</b> of a\n     * looping program will cause them to only have an effect the first time\n     * through the loop. The affect of the <br>r</b>, <br>g</b>, and <br>b</b>\n     * parameters is determined by the current color mode. The <b>nx</b>,\n     * <b>ny</b>, and <b>nz</b> parameters specify the direction the light is\n     * facing. For example, setting <b>ny</b> to -1 will cause the geometry to be\n     * lit from below (the light is facing directly upward).\n     *\n     * @param {int | float} r red or hue value\n     * @param {int | float} g green or hue value\n     * @param {int | float} b blue or hue value\n     *\n     * @param {int | float} nx direction along the x axis\n     * @param {int | float} ny direction along the y axis\n     * @param {int | float} nz direction along the z axis\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see ambientLight\n     * @see pointLight\n     * @see spotLight\n    */\n    Drawing2D.prototype.directionalLight = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.directionalLight = function(r, g, b, nx, ny, nz) {\n      if (lightCount === PConstants.MAX_LIGHTS) {\n        throw \"can only create \" + PConstants.MAX_LIGHTS + \" lights\";\n      }\n\n      curContext.useProgram(programObject3D);\n\n      var mvm = new PMatrix3D();\n      mvm.scale(1, -1, 1);\n      mvm.apply(modelView.array());\n      mvm = mvm.array();\n\n      // We need to multiply the direction by the model view matrix, but\n      // the mult function checks the w component of the vector, if it isn't\n      // present, it uses 1, so we manually multiply.\n      var dir = [\n        mvm[0] * nx + mvm[4] * ny + mvm[8] * nz,\n        mvm[1] * nx + mvm[5] * ny + mvm[9] * nz,\n        mvm[2] * nx + mvm[6] * ny + mvm[10] * nz\n      ];\n\n      // Instead of calling p.color, we do the calculations ourselves to\n      // reduce property lookups.\n      var col = color$4(r, g, b, 0);\n      var normalizedCol = [ ((col & PConstants.RED_MASK) >>> 16) / 255,\n                            ((col & PConstants.GREEN_MASK) >>> 8) / 255,\n                             (col & PConstants.BLUE_MASK) / 255 ];\n\n      uniformf(\"uLights.color.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".color\", normalizedCol);\n      uniformf(\"uLights.position.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".position\", dir);\n      uniformi(\"uLights.type.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".type\", 1);\n      uniformi(\"uLightCount3d\", programObject3D, \"uLightCount\", ++lightCount);\n    };\n\n    /**\n     * Sets the falloff rates for point lights, spot lights, and ambient lights.\n     * The parameters are used to determine the falloff with the following equation:\n     *\n     * d = distance from light position to vertex position\n     * falloff = 1 / (CONSTANT + d * LINEAR + (d*d) * QUADRATIC)\n     *\n     * Like <b>fill()</b>, it affects only the elements which are created after it in the\n     * code. The default value if <b>LightFalloff(1.0, 0.0, 0.0)</b>. Thinking about an\n     * ambient light with a falloff can be tricky. It is used, for example, if you\n     * wanted a region of your scene to be lit ambiently one color and another region\n     * to be lit ambiently by another color, you would use an ambient light with location\n     * and falloff. You can think of it as a point light that doesn't care which direction\n     * a surface is facing.\n     *\n     * @param {int | float} constant constant value for determining falloff\n     * @param {int | float} linear linear value for determining falloff\n     * @param {int | float} quadratic quadratic value for determining falloff\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see ambientLight\n     * @see pointLight\n     * @see spotLight\n     * @see lightSpecular\n    */\n    Drawing2D.prototype.lightFalloff = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.lightFalloff = function(constant, linear, quadratic) {\n      curContext.useProgram(programObject3D);\n      uniformf(\"uFalloff3d\", programObject3D, \"uFalloff\", [constant, linear, quadratic]);\n    };\n\n    /**\n     * Sets the specular color for lights. Like <b>fill()</b>, it affects only the\n     * elements which are created after it in the code. Specular refers to light\n     * which bounces off a surface in a perferred direction (rather than bouncing\n     * in all directions like a diffuse light) and is used for creating highlights.\n     * The specular quality of a light interacts with the specular material qualities\n     * set through the <b>specular()</b> and <b>shininess()</b> functions.\n     *\n     * @param {int | float} r red or hue value\n     * @param {int | float} g green or hue value\n     * @param {int | float} b blue or hue value\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see ambientLight\n     * @see pointLight\n     * @see spotLight\n    */\n    Drawing2D.prototype.lightSpecular = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.lightSpecular = function(r, g, b) {\n\n      // Instead of calling p.color, we do the calculations ourselves to\n      // reduce property lookups.\n      var col = color$4(r, g, b, 0);\n      var normalizedCol = [ ((col & PConstants.RED_MASK) >>> 16) / 255,\n                            ((col & PConstants.GREEN_MASK) >>> 8) / 255,\n                             (col & PConstants.BLUE_MASK) / 255 ];\n\n      curContext.useProgram(programObject3D);\n      uniformf(\"uSpecular3d\", programObject3D, \"uSpecular\", normalizedCol);\n    };\n\n    /**\n     * Sets the default ambient light, directional light, falloff, and specular\n     * values. The defaults are ambientLight(128, 128, 128) and\n     * directionalLight(128, 128, 128, 0, 0, -1), lightFalloff(1, 0, 0), and\n     * lightSpecular(0, 0, 0). Lights need to be included in the draw() to remain\n     * persistent in a looping program. Placing them in the setup() of a looping\n     * program will cause them to only have an effect the first time through the\n     * loop.\n     *\n     * @returns none\n     *\n     * @see ambientLight\n     * @see directionalLight\n     * @see pointLight\n     * @see spotLight\n     * @see noLights\n     *\n    */\n    p.lights = function() {\n      p.ambientLight(128, 128, 128);\n      p.directionalLight(128, 128, 128, 0, 0, -1);\n      p.lightFalloff(1, 0, 0);\n      p.lightSpecular(0, 0, 0);\n    };\n\n    /**\n     * Adds a point light. Lights need to be included in the <b>draw()</b> to remain\n     * persistent in a looping program. Placing them in the <b>setup()</b> of a\n     * looping program will cause them to only have an effect the first time through\n     * the loop. The affect of the <b>r</b>, <b>g</b>, and <b>b</b> parameters\n     * is determined by the current color mode. The <b>x</b>, <b>y</b>, and <b>z</b>\n     * parameters set the position of the light.\n     *\n     * @param {int | float} r red or hue value\n     * @param {int | float} g green or hue value\n     * @param {int | float} b blue or hue value\n     * @param {int | float} x x coordinate of the light\n     * @param {int | float} y y coordinate of the light\n     * @param {int | float} z z coordinate of the light\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see directionalLight\n     * @see ambientLight\n     * @see spotLight\n    */\n    Drawing2D.prototype.pointLight = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.pointLight = function(r, g, b, x, y, z) {\n      if (lightCount === PConstants.MAX_LIGHTS) {\n        throw \"can only create \" + PConstants.MAX_LIGHTS + \" lights\";\n      }\n\n      // Place the point in view space once instead of once per vertex\n      // in the shader.\n      var pos = new PVector(x, y, z);\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.mult(pos, pos);\n\n      // Instead of calling p.color, we do the calculations ourselves to\n      // reduce property lookups.\n      var col = color$4(r, g, b, 0);\n      var normalizedCol = [ ((col & PConstants.RED_MASK) >>> 16) / 255,\n                            ((col & PConstants.GREEN_MASK) >>> 8) / 255,\n                             (col & PConstants.BLUE_MASK) / 255 ];\n\n      curContext.useProgram(programObject3D);\n      uniformf(\"uLights.color.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".color\", normalizedCol);\n      uniformf(\"uLights.position.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".position\", pos.array());\n      uniformi(\"uLights.type.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".type\", 2);\n      uniformi(\"uLightCount3d\", programObject3D, \"uLightCount\", ++lightCount);\n    };\n\n    /**\n     * Disable all lighting. Lighting is turned off by default and enabled with\n     * the lights() method. This function can be used to disable lighting so\n     * that 2D geometry (which does not require lighting) can be drawn after a\n     * set of lighted 3D geometry.\n     *\n     * @returns none\n     *\n     * @see lights\n    */\n    Drawing2D.prototype.noLights = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.noLights = function() {\n      lightCount = 0;\n      curContext.useProgram(programObject3D);\n      uniformi(\"uLightCount3d\", programObject3D, \"uLightCount\", lightCount);\n    };\n\n    /**\n     * Adds a spot light. Lights need to be included in the <b>draw()</b> to\n     * remain persistent in a looping program. Placing them in the <b>setup()</b>\n     * of a looping program will cause them to only have an effect the first time\n     * through the loop. The affect of the <b>r</b>, <b>g</b>, and <b>b</b> parameters\n     * is determined by the current color mode. The <b>x</b>, <b>y</b>, and <b>z</b>\n     * parameters specify the position of the light and <b>nx</b>, <b>ny</b>, <b>nz</b>\n     * specify the direction or light. The angle parameter affects <b>angle</b> of the\n     * spotlight cone.\n     *\n     * @param {int | float} r red or hue value\n     * @param {int | float} g green or hue value\n     * @param {int | float} b blue or hue value\n     * @param {int | float} x coordinate of the light\n     * @param {int | float} y coordinate of the light\n     * @param {int | float} z coordinate of the light\n     * @param {int | float} nx direction along the x axis\n     * @param {int | float} ny direction along the y axis\n     * @param {int | float} nz direction along the z axis\n     * @param {float} angle angle of the spotlight cone\n     * @param {float} concentration exponent determining the center bias of the cone\n     *\n     * @returns none\n     *\n     * @see lights\n     * @see directionalLight\n     * @see ambientLight\n     * @see pointLight\n    */\n    Drawing2D.prototype.spotLight = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.spotLight = function(r, g, b, x, y, z, nx, ny, nz, angle, concentration) {\n      if (lightCount === PConstants.MAX_LIGHTS) {\n        throw \"can only create \" + PConstants.MAX_LIGHTS + \" lights\";\n      }\n\n      curContext.useProgram(programObject3D);\n\n      // multiply the position and direction by the model view matrix\n      // once per object rather than once per vertex.\n      var pos = new PVector(x, y, z);\n      var mvm = new PMatrix3D();\n      mvm.scale(1, -1, 1);\n      mvm.apply(modelView.array());\n      mvm.mult(pos, pos);\n\n      // Convert to array since we need to directly access the elements.\n      mvm = mvm.array();\n\n      // We need to multiply the direction by the model view matrix, but\n      // the mult function checks the w component of the vector, if it isn't\n      // present, it uses 1, so we use a very small value as a work around.\n      var dir = [\n          mvm[0] * nx + mvm[4] * ny + mvm[8] * nz,\n          mvm[1] * nx + mvm[5] * ny + mvm[9] * nz,\n          mvm[2] * nx + mvm[6] * ny + mvm[10] * nz\n      ];\n\n      // Instead of calling p.color, we do the calculations ourselves to\n      // reduce property lookups.\n      var col = color$4(r, g, b, 0);\n      var normalizedCol = [ ((col & PConstants.RED_MASK) >>> 16) / 255,\n                            ((col & PConstants.GREEN_MASK) >>> 8) / 255,\n                             (col & PConstants.BLUE_MASK) / 255 ];\n\n      uniformf(\"uLights.color.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".color\", normalizedCol);\n      uniformf(\"uLights.position.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".position\", pos.array());\n      uniformf(\"uLights.direction.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".direction\", dir);\n      uniformf(\"uLights.concentration.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".concentration\", concentration);\n      uniformf(\"uLights.angle.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".angle\", angle);\n      uniformi(\"uLights.type.3d.\" + lightCount, programObject3D, \"uLights\" + lightCount + \".type\", 3);\n      uniformi(\"uLightCount3d\", programObject3D, \"uLightCount\", ++lightCount);\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Camera functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * The <b>beginCamera()</b> and <b>endCamera()</b> functions enable advanced customization of the camera space.\n     * The functions are useful if you want to more control over camera movement, however for most users, the <b>camera()</b>\n     * function will be sufficient.<br /><br />The camera functions will replace any transformations (such as <b>rotate()</b>\n     * or <b>translate()</b>) that occur before them in <b>draw()</b>, but they will not automatically replace the camera\n     * transform itself. For this reason, camera functions should be placed at the beginning of <b>draw()</b> (so that\n     * transformations happen afterwards), and the <b>camera()</b> function can be used after <b>beginCamera()</b> if\n     * you want to reset the camera before applying transformations.<br /><br />This function sets the matrix mode to the\n     * camera matrix so calls such as <b>translate()</b>, <b>rotate()</b>, applyMatrix() and resetMatrix() affect the camera.\n     * <b>beginCamera()</b> should always be used with a following <b>endCamera()</b> and pairs of <b>beginCamera()</b> and\n     * <b>endCamera()</b> cannot be nested.\n     *\n     * @see camera\n     * @see endCamera\n     * @see applyMatrix\n     * @see resetMatrix\n     * @see translate\n     * @see rotate\n     * @see scale\n     */\n    Drawing2D.prototype.beginCamera = function() {\n      throw (\"beginCamera() is not available in 2D mode\");\n    };\n\n    Drawing3D.prototype.beginCamera = function() {\n      if (manipulatingCamera) {\n        throw (\"You cannot call beginCamera() again before calling endCamera()\");\n      }\n      manipulatingCamera = true;\n      modelView = cameraInv;\n      modelViewInv = cam;\n    };\n\n    /**\n     * The <b>beginCamera()</b> and <b>endCamera()</b> functions enable advanced customization of the camera space.\n     * Please see the reference for <b>beginCamera()</b> for a description of how the functions are used.\n     *\n     * @see beginCamera\n     */\n    Drawing2D.prototype.endCamera = function() {\n      throw (\"endCamera() is not available in 2D mode\");\n    };\n\n    Drawing3D.prototype.endCamera = function() {\n      if (!manipulatingCamera) {\n        throw (\"You cannot call endCamera() before calling beginCamera()\");\n      }\n      modelView.set(cam);\n      modelViewInv.set(cameraInv);\n      manipulatingCamera = false;\n    };\n\n    /**\n     * Sets the position of the camera through setting the eye position, the center of the scene, and which axis is facing\n     * upward. Moving the eye position and the direction it is pointing (the center of the scene) allows the images to be\n     * seen from different angles. The version without any parameters sets the camera to the default position, pointing to\n     * the center of the display window with the Y axis as up. The default values are camera(width/2.0, height/2.0,\n     * (height/2.0) / tan(PI*60.0 / 360.0), width/2.0, height/2.0, 0, 0, 1, 0). This function is similar to gluLookAt()\n     * in OpenGL, but it first clears the current camera settings.\n     *\n     * @param {float} eyeX    x-coordinate for the eye\n     * @param {float} eyeY    y-coordinate for the eye\n     * @param {float} eyeZ    z-coordinate for the eye\n     * @param {float} centerX x-coordinate for the center of the scene\n     * @param {float} centerY y-coordinate for the center of the scene\n     * @param {float} centerZ z-coordinate for the center of the scene\n     * @param {float} upX     usually 0.0, 1.0, -1.0\n     * @param {float} upY     usually 0.0, 1.0, -1.0\n     * @param {float} upZ     usually 0.0, 1.0, -1.0\n     *\n     * @see beginCamera\n     * @see endCamera\n     * @see frustum\n     */\n    p.camera = function(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ) {\n      if (eyeX === undef) {\n        // Workaround if createGraphics is used.\n        cameraX = p.width / 2;\n        cameraY = p.height / 2;\n        cameraZ = cameraY / Math.tan(cameraFOV / 2);\n        eyeX = cameraX;\n        eyeY = cameraY;\n        eyeZ = cameraZ;\n        centerX = cameraX;\n        centerY = cameraY;\n        centerZ = 0;\n        upX = 0;\n        upY = 1;\n        upZ = 0;\n      }\n\n      var z = new PVector(eyeX - centerX, eyeY - centerY, eyeZ - centerZ);\n      var y = new PVector(upX, upY, upZ);\n      z.normalize();\n      var x = PVector.cross(y, z);\n      y = PVector.cross(z, x);\n      x.normalize();\n      y.normalize();\n\n      var xX = x.x,\n          xY = x.y,\n          xZ = x.z;\n\n      var yX = y.x,\n          yY = y.y,\n          yZ = y.z;\n\n      var zX = z.x,\n          zY = z.y,\n          zZ = z.z;\n\n      cam.set(xX, xY, xZ, 0, yX, yY, yZ, 0, zX, zY, zZ, 0, 0, 0, 0, 1);\n\n      cam.translate(-eyeX, -eyeY, -eyeZ);\n\n      cameraInv.reset();\n      cameraInv.invApply(xX, xY, xZ, 0, yX, yY, yZ, 0, zX, zY, zZ, 0, 0, 0, 0, 1);\n\n      cameraInv.translate(eyeX, eyeY, eyeZ);\n\n      modelView.set(cam);\n      modelViewInv.set(cameraInv);\n    };\n\n    /**\n     * Sets a perspective projection applying foreshortening, making distant objects appear smaller than closer ones. The\n     * parameters define a viewing volume with the shape of truncated pyramid. Objects near to the front of the volume appear\n     * their actual size, while farther objects appear smaller. This projection simulates the perspective of the world more\n     * accurately than orthographic projection. The version of perspective without parameters sets the default perspective and\n     * the version with four parameters allows the programmer to set the area precisely. The default values are:\n     * perspective(PI/3.0, width/height, cameraZ/10.0, cameraZ*10.0) where cameraZ is ((height/2.0) / tan(PI*60.0/360.0));\n     *\n     * @param {float} fov     field-of-view angle (in radians) for vertical direction\n     * @param {float} aspect  ratio of width to height\n     * @param {float} zNear   z-position of nearest clipping plane\n     * @param {float} zFar    z-positions of farthest clipping plane\n     */\n    p.perspective = function(fov, aspect, near, far) {\n      if (arguments.length === 0) {\n        //in case canvas is resized\n        cameraY = curElement.height / 2;\n        cameraZ = cameraY / Math.tan(cameraFOV / 2);\n        cameraNear = cameraZ / 10;\n        cameraFar = cameraZ * 10;\n        cameraAspect = p.width / p.height;\n        fov = cameraFOV;\n        aspect = cameraAspect;\n        near = cameraNear;\n        far = cameraFar;\n      }\n\n      var yMax, yMin, xMax, xMin;\n      yMax = near * Math.tan(fov / 2);\n      yMin = -yMax;\n      xMax = yMax * aspect;\n      xMin = yMin * aspect;\n      p.frustum(xMin, xMax, yMin, yMax, near, far);\n    };\n\n    /**\n     * Sets a perspective matrix defined through the parameters. Works like glFrustum, except it wipes out the current\n     * perspective matrix rather than muliplying itself with it.\n     *\n     * @param {float} left   left coordinate of the clipping plane\n     * @param {float} right  right coordinate of the clipping plane\n     * @param {float} bottom bottom coordinate of the clipping plane\n     * @param {float} top    top coordinate of the clipping plane\n     * @param {float} near   near coordinate of the clipping plane\n     * @param {float} far    far coordinate of the clipping plane\n     *\n     * @see beginCamera\n     * @see camera\n     * @see endCamera\n     * @see perspective\n     */\n    Drawing2D.prototype.frustum = function() {\n      throw(\"Processing.js: frustum() is not supported in 2D mode\");\n    };\n\n    Drawing3D.prototype.frustum = function(left, right, bottom, top, near, far) {\n      frustumMode = true;\n      projection = new PMatrix3D();\n      projection.set((2 * near) / (right - left), 0, (right + left) / (right - left),\n                     0, 0, (2 * near) / (top - bottom), (top + bottom) / (top - bottom),\n                     0, 0, 0, -(far + near) / (far - near), -(2 * far * near) / (far - near),\n                     0, 0, -1, 0);\n      var proj = new PMatrix3D();\n      proj.set(projection);\n      proj.transpose();\n      curContext.useProgram(programObject2D);\n      uniformMatrix(\"projection2d\", programObject2D, \"uProjection\", false, proj.array());\n      curContext.useProgram(programObject3D);\n      uniformMatrix(\"projection3d\", programObject3D, \"uProjection\", false, proj.array());\n      curContext.useProgram(programObjectUnlitShape);\n      uniformMatrix(\"uProjectionUS\", programObjectUnlitShape, \"uProjection\", false, proj.array());\n    };\n\n    /**\n     * Sets an orthographic projection and defines a parallel clipping volume. All objects with the same dimension appear\n     * the same size, regardless of whether they are near or far from the camera. The parameters to this function specify\n     * the clipping volume where left and right are the minimum and maximum x values, top and bottom are the minimum and\n     * maximum y values, and near and far are the minimum and maximum z values. If no parameters are given, the default\n     * is used: ortho(0, width, 0, height, -10, 10).\n     *\n     * @param {float} left   left plane of the clipping volume\n     * @param {float} right  right plane of the clipping volume\n     * @param {float} bottom bottom plane of the clipping volume\n     * @param {float} top    top plane of the clipping volume\n     * @param {float} near   maximum distance from the origin to the viewer\n     * @param {float} far    maximum distance from the origin away from the viewer\n     */\n    p.ortho = function(left, right, bottom, top, near, far) {\n      if (arguments.length === 0) {\n        left = 0;\n        right = p.width;\n        bottom = 0;\n        top = p.height;\n        near = -10;\n        far = 10;\n      }\n\n      var x = 2 / (right - left);\n      var y = 2 / (top - bottom);\n      var z = -2 / (far - near);\n\n      var tx = -(right + left) / (right - left);\n      var ty = -(top + bottom) / (top - bottom);\n      var tz = -(far + near) / (far - near);\n\n      projection = new PMatrix3D();\n      projection.set(x, 0, 0, tx, 0, y, 0, ty, 0, 0, z, tz, 0, 0, 0, 1);\n\n      var proj = new PMatrix3D();\n      proj.set(projection);\n      proj.transpose();\n      curContext.useProgram(programObject2D);\n      uniformMatrix(\"projection2d\", programObject2D, \"uProjection\", false, proj.array());\n      curContext.useProgram(programObject3D);\n      uniformMatrix(\"projection3d\", programObject3D, \"uProjection\", false, proj.array());\n      curContext.useProgram(programObjectUnlitShape);\n      uniformMatrix(\"uProjectionUS\", programObjectUnlitShape, \"uProjection\", false, proj.array());\n      frustumMode = false;\n    };\n    /**\n     * The printProjection() prints the current projection matrix to the text window.\n     */\n    p.printProjection = function() {\n      projection.print();\n    };\n    /**\n     * The printCamera() function prints the current camera matrix.\n     */\n    p.printCamera = function() {\n      cam.print();\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Shapes\n    ////////////////////////////////////////////////////////////////////////////\n    /**\n     * The box() function renders a box. A box is an extruded rectangle. A box with equal dimension on all sides is a cube.\n     * Calling this function with only one parameter will create a cube.\n     *\n     * @param {int|float} w  dimension of the box in the x-dimension\n     * @param {int|float} h  dimension of the box in the y-dimension\n     * @param {int|float} d  dimension of the box in the z-dimension\n     */\n    Drawing2D.prototype.box = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.box = function(w, h, d) {\n      // user can uniformly scale the box by\n      // passing in only one argument.\n      if (!h || !d) {\n        h = d = w;\n      }\n\n      // Modeling transformation\n      var model = new PMatrix3D();\n      model.scale(w, h, d);\n\n      // Viewing transformation needs to have Y flipped\n      // becuase that's what Processing does.\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      if (doFill) {\n        curContext.useProgram(programObject3D);\n        uniformMatrix(\"model3d\", programObject3D, \"uModel\", false, model.array());\n        uniformMatrix(\"view3d\", programObject3D, \"uView\", false, view.array());\n        // Fix stitching problems. (lines get occluded by triangles\n        // since they share the same depth values). This is not entirely\n        // working, but it's a start for drawing the outline. So\n        // developers can start playing around with styles.\n        curContext.enable(curContext.POLYGON_OFFSET_FILL);\n        curContext.polygonOffset(1, 1);\n        uniformf(\"color3d\", programObject3D, \"uColor\", fillStyle);\n\n        // Calculating the normal matrix can be expensive, so only\n        // do it if it's necessary.\n        if(lightCount > 0){\n          // Create the normal transformation matrix.\n          var v = new PMatrix3D();\n          v.set(view);\n\n          var m = new PMatrix3D();\n          m.set(model);\n\n          v.mult(m);\n\n          var normalMatrix = new PMatrix3D();\n          normalMatrix.set(v);\n          normalMatrix.invert();\n          normalMatrix.transpose();\n\n          uniformMatrix(\"uNormalTransform3d\", programObject3D, \"uNormalTransform\", false, normalMatrix.array());\n          vertexAttribPointer(\"aNormal3d\", programObject3D, \"aNormal\", 3, boxNormBuffer);\n        }\n        else{\n          disableVertexAttribPointer(\"aNormal3d\", programObject3D, \"aNormal\");\n        }\n\n        vertexAttribPointer(\"aVertex3d\", programObject3D, \"aVertex\", 3, boxBuffer);\n\n        // Turn off per vertex colors.\n        disableVertexAttribPointer(\"aColor3d\", programObject3D, \"aColor\");\n        disableVertexAttribPointer(\"aTexture3d\", programObject3D, \"aTexture\");\n\n        curContext.drawArrays(curContext.TRIANGLES, 0, boxVerts.length / 3);\n        curContext.disable(curContext.POLYGON_OFFSET_FILL);\n      }\n\n      // Draw the box outline.\n      if (lineWidth > 0 && doStroke) {\n        curContext.useProgram(programObject2D);\n        uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false, model.array());\n        uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n        uniformf(\"uColor2d\", programObject2D, \"uColor\", strokeStyle);\n        uniformi(\"uIsDrawingText2d\", programObject2D, \"uIsDrawingText\", false);\n        vertexAttribPointer(\"vertex2d\", programObject2D, \"aVertex\", 3, boxOutlineBuffer);\n        disableVertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\");\n        curContext.drawArrays(curContext.LINES, 0, boxOutlineVerts.length / 3);\n      }\n    };\n\n    /**\n     * The initSphere() function is a helper function used by <b>sphereDetail()</b>\n     * This function creates and stores sphere vertices every time the user changes sphere detail.\n     *\n     * @see #sphereDetail\n     */\n    var initSphere = function() {\n      var i;\n      sphereVerts = [];\n\n      for (i = 0; i < sphereDetailU; i++) {\n        sphereVerts.push(0);\n        sphereVerts.push(-1);\n        sphereVerts.push(0);\n        sphereVerts.push(sphereX[i]);\n        sphereVerts.push(sphereY[i]);\n        sphereVerts.push(sphereZ[i]);\n      }\n      sphereVerts.push(0);\n      sphereVerts.push(-1);\n      sphereVerts.push(0);\n      sphereVerts.push(sphereX[0]);\n      sphereVerts.push(sphereY[0]);\n      sphereVerts.push(sphereZ[0]);\n\n      var v1, v11, v2;\n\n      // middle rings\n      var voff = 0;\n      for (i = 2; i < sphereDetailV; i++) {\n        v1 = v11 = voff;\n        voff += sphereDetailU;\n        v2 = voff;\n        for (var j = 0; j < sphereDetailU; j++) {\n          sphereVerts.push(sphereX[v1]);\n          sphereVerts.push(sphereY[v1]);\n          sphereVerts.push(sphereZ[v1++]);\n          sphereVerts.push(sphereX[v2]);\n          sphereVerts.push(sphereY[v2]);\n          sphereVerts.push(sphereZ[v2++]);\n        }\n\n        // close each ring\n        v1 = v11;\n        v2 = voff;\n\n        sphereVerts.push(sphereX[v1]);\n        sphereVerts.push(sphereY[v1]);\n        sphereVerts.push(sphereZ[v1]);\n        sphereVerts.push(sphereX[v2]);\n        sphereVerts.push(sphereY[v2]);\n        sphereVerts.push(sphereZ[v2]);\n      }\n\n      // add the northern cap\n      for (i = 0; i < sphereDetailU; i++) {\n        v2 = voff + i;\n\n        sphereVerts.push(sphereX[v2]);\n        sphereVerts.push(sphereY[v2]);\n        sphereVerts.push(sphereZ[v2]);\n        sphereVerts.push(0);\n        sphereVerts.push(1);\n        sphereVerts.push(0);\n      }\n\n      sphereVerts.push(sphereX[voff]);\n      sphereVerts.push(sphereY[voff]);\n      sphereVerts.push(sphereZ[voff]);\n      sphereVerts.push(0);\n      sphereVerts.push(1);\n      sphereVerts.push(0);\n\n      //set the buffer data\n      curContext.bindBuffer(curContext.ARRAY_BUFFER, sphereBuffer);\n      curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(sphereVerts), curContext.STATIC_DRAW);\n    };\n\n    /**\n     * The sphereDetail() function controls the detail used to render a sphere by adjusting the number of\n     * vertices of the sphere mesh. The default resolution is 30, which creates\n     * a fairly detailed sphere definition with vertices every 360/30 = 12\n     * degrees. If you're going to render a great number of spheres per frame,\n     * it is advised to reduce the level of detail using this function.\n     * The setting stays active until <b>sphereDetail()</b> is called again with\n     * a new parameter and so should <i>not</i> be called prior to every\n     * <b>sphere()</b> statement, unless you wish to render spheres with\n     * different settings, e.g. using less detail for smaller spheres or ones\n     * further away from the camera. To control the detail of the horizontal\n     * and vertical resolution independently, use the version of the functions\n     * with two parameters. Calling this function with one parameter sets the number of segments\n     *(minimum of 3) used per full circle revolution. This is equivalent to calling the function with\n     * two identical values.\n     *\n     * @param {int} ures    number of segments used horizontally (longitudinally) per full circle revolution\n     * @param {int} vres    number of segments used vertically (latitudinally) from top to bottom\n     *\n     * @see #sphere()\n     */\n    p.sphereDetail = function(ures, vres) {\n      var i;\n\n      if (arguments.length === 1) {\n        ures = vres = arguments[0];\n      }\n\n      if (ures < 3) {\n        ures = 3;\n      } // force a minimum res\n      if (vres < 2) {\n        vres = 2;\n      } // force a minimum res\n      // if it hasn't changed do nothing\n      if ((ures === sphereDetailU) && (vres === sphereDetailV)) {\n        return;\n      }\n\n      var delta = PConstants.SINCOS_LENGTH / ures;\n      var cx = new Float32Array(ures);\n      var cz = new Float32Array(ures);\n      // calc unit circle in XZ plane\n      for (i = 0; i < ures; i++) {\n        cx[i] = cosLUT[((i * delta) % PConstants.SINCOS_LENGTH) | 0];\n        cz[i] = sinLUT[((i * delta) % PConstants.SINCOS_LENGTH) | 0];\n      }\n\n      // computing vertexlist\n      // vertexlist starts at south pole\n      var vertCount = ures * (vres - 1) + 2;\n      var currVert = 0;\n\n      // re-init arrays to store vertices\n      sphereX = new Float32Array(vertCount);\n      sphereY = new Float32Array(vertCount);\n      sphereZ = new Float32Array(vertCount);\n\n      var angle_step = (PConstants.SINCOS_LENGTH * 0.5) / vres;\n      var angle = angle_step;\n\n      // step along Y axis\n      for (i = 1; i < vres; i++) {\n        var curradius = sinLUT[(angle % PConstants.SINCOS_LENGTH) | 0];\n        var currY = -cosLUT[(angle % PConstants.SINCOS_LENGTH) | 0];\n        for (var j = 0; j < ures; j++) {\n          sphereX[currVert] = cx[j] * curradius;\n          sphereY[currVert] = currY;\n          sphereZ[currVert++] = cz[j] * curradius;\n        }\n        angle += angle_step;\n      }\n      sphereDetailU = ures;\n      sphereDetailV = vres;\n\n      // make the sphere verts and norms\n      initSphere();\n    };\n\n    /**\n     * The sphere() function draws a sphere with radius r centered at coordinate 0, 0, 0.\n     * A sphere is a hollow ball made from tessellated triangles.\n     *\n     * @param {int|float} r the radius of the sphere\n     */\n    Drawing2D.prototype.sphere = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.sphere = function() {\n      var sRad = arguments[0];\n\n      if ((sphereDetailU < 3) || (sphereDetailV < 2)) {\n        p.sphereDetail(30);\n      }\n\n      // Modeling transformation.\n      var model = new PMatrix3D();\n      model.scale(sRad, sRad, sRad);\n\n      // viewing transformation needs to have Y flipped\n      // becuase that's what Processing does.\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      if (doFill) {\n        // Calculating the normal matrix can be expensive, so only\n        // do it if it's necessary.\n        if(lightCount > 0){\n          // Create a normal transformation matrix.\n          var v = new PMatrix3D();\n          v.set(view);\n\n          var m = new PMatrix3D();\n          m.set(model);\n\n          v.mult(m);\n\n          var normalMatrix = new PMatrix3D();\n          normalMatrix.set(v);\n          normalMatrix.invert();\n          normalMatrix.transpose();\n\n          uniformMatrix(\"uNormalTransform3d\", programObject3D, \"uNormalTransform\", false, normalMatrix.array());\n          vertexAttribPointer(\"aNormal3d\", programObject3D, \"aNormal\", 3, sphereBuffer);\n        }\n        else{\n          disableVertexAttribPointer(\"aNormal3d\", programObject3D, \"aNormal\");\n        }\n\n        curContext.useProgram(programObject3D);\n        disableVertexAttribPointer(\"aTexture3d\", programObject3D, \"aTexture\");\n\n        uniformMatrix(\"uModel3d\", programObject3D, \"uModel\", false, model.array());\n        uniformMatrix(\"uView3d\", programObject3D, \"uView\", false, view.array());\n        vertexAttribPointer(\"aVertex3d\", programObject3D, \"aVertex\", 3, sphereBuffer);\n\n        // Turn off per vertex colors.\n        disableVertexAttribPointer(\"aColor3d\", programObject3D, \"aColor\");\n\n        // fix stitching problems. (lines get occluded by triangles\n        // since they share the same depth values). This is not entirely\n        // working, but it's a start for drawing the outline. So\n        // developers can start playing around with styles.\n        curContext.enable(curContext.POLYGON_OFFSET_FILL);\n        curContext.polygonOffset(1, 1);\n        uniformf(\"uColor3d\", programObject3D, \"uColor\", fillStyle);\n        curContext.drawArrays(curContext.TRIANGLE_STRIP, 0, sphereVerts.length / 3);\n        curContext.disable(curContext.POLYGON_OFFSET_FILL);\n      }\n\n      // Draw the sphere outline.\n      if (lineWidth > 0 && doStroke) {\n        curContext.useProgram(programObject2D);\n        uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false, model.array());\n        uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n        vertexAttribPointer(\"aVertex2d\", programObject2D, \"aVertex\", 3, sphereBuffer);\n        disableVertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\");\n        uniformf(\"uColor2d\", programObject2D, \"uColor\", strokeStyle);\n        uniformi(\"uIsDrawingText\", programObject2D, \"uIsDrawingText\", false);\n        curContext.drawArrays(curContext.LINE_STRIP, 0, sphereVerts.length / 3);\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Coordinates\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Returns the three-dimensional X, Y, Z position in model space. This returns\n     * the X value for a given coordinate based on the current set of transformations\n     * (scale, rotate, translate, etc.) The X value can be used to place an object\n     * in space relative to the location of the original point once the transformations\n     * are no longer in use.<br />\n     * <br />\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see modelY\n     * @see modelZ\n    */\n    p.modelX = function(x, y, z) {\n      var mv = modelView.array();\n      var ci = cameraInv.array();\n\n      var ax = mv[0] * x + mv[1] * y + mv[2] * z + mv[3];\n      var ay = mv[4] * x + mv[5] * y + mv[6] * z + mv[7];\n      var az = mv[8] * x + mv[9] * y + mv[10] * z + mv[11];\n      var aw = mv[12] * x + mv[13] * y + mv[14] * z + mv[15];\n\n      var ox = ci[0] * ax + ci[1] * ay + ci[2] * az + ci[3] * aw;\n      var ow = ci[12] * ax + ci[13] * ay + ci[14] * az + ci[15] * aw;\n\n      return (ow !== 0) ? ox / ow : ox;\n    };\n\n    /**\n     * Returns the three-dimensional X, Y, Z position in model space. This returns\n     * the Y value for a given coordinate based on the current set of transformations\n     * (scale, rotate, translate, etc.) The Y value can be used to place an object in\n     * space relative to the location of the original point once the transformations\n     * are no longer in use.<br />\n     * <br />\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see modelX\n     * @see modelZ\n    */\n    p.modelY = function(x, y, z) {\n      var mv = modelView.array();\n      var ci = cameraInv.array();\n\n      var ax = mv[0] * x + mv[1] * y + mv[2] * z + mv[3];\n      var ay = mv[4] * x + mv[5] * y + mv[6] * z + mv[7];\n      var az = mv[8] * x + mv[9] * y + mv[10] * z + mv[11];\n      var aw = mv[12] * x + mv[13] * y + mv[14] * z + mv[15];\n\n      var oy = ci[4] * ax + ci[5] * ay + ci[6] * az + ci[7] * aw;\n      var ow = ci[12] * ax + ci[13] * ay + ci[14] * az + ci[15] * aw;\n\n      return (ow !== 0) ? oy / ow : oy;\n    };\n\n    /**\n     * Returns the three-dimensional X, Y, Z position in model space. This returns\n     * the Z value for a given coordinate based on the current set of transformations\n     * (scale, rotate, translate, etc.) The Z value can be used to place an object in\n     * space relative to the location of the original point once the transformations\n     * are no longer in use.\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see modelX\n     * @see modelY\n    */\n    p.modelZ = function(x, y, z) {\n      var mv = modelView.array();\n      var ci = cameraInv.array();\n\n      var ax = mv[0] * x + mv[1] * y + mv[2] * z + mv[3];\n      var ay = mv[4] * x + mv[5] * y + mv[6] * z + mv[7];\n      var az = mv[8] * x + mv[9] * y + mv[10] * z + mv[11];\n      var aw = mv[12] * x + mv[13] * y + mv[14] * z + mv[15];\n\n      var oz = ci[8] * ax + ci[9] * ay + ci[10] * az + ci[11] * aw;\n      var ow = ci[12] * ax + ci[13] * ay + ci[14] * az + ci[15] * aw;\n\n      return (ow !== 0) ? oz / ow : oz;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Material Properties\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Sets the ambient reflectance for shapes drawn to the screen. This is\n     * combined with the ambient light component of environment. The color\n     * components set through the parameters define the reflectance. For example in\n     * the default color mode, setting v1=255, v2=126, v3=0, would cause all the\n     * red light to reflect and half of the green light to reflect. Used in combination\n     * with <b>emissive()</b>, <b>specular()</b>, and <b>shininess()</b> in setting\n     * the materal properties of shapes.\n     *\n     * @param {int | float} gray\n     *\n     * @returns none\n     *\n     * @see emissive\n     * @see specular\n     * @see shininess\n    */\n    Drawing2D.prototype.ambient = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.ambient = function(v1, v2, v3) {\n      curContext.useProgram(programObject3D);\n      uniformi(\"uUsingMat3d\", programObject3D, \"uUsingMat\", true);\n      var col = p.color(v1, v2, v3);\n      uniformf(\"uMaterialAmbient3d\", programObject3D, \"uMaterialAmbient\", p.color.toGLArray(col).slice(0, 3));\n    };\n\n    /**\n     * Sets the emissive color of the material used for drawing shapes\n     * drawn to the screen. Used in combination with ambient(), specular(),\n     * and shininess() in setting the material properties of shapes.\n     *\n     * Can be called in the following ways:\n     *\n     * emissive(gray)\n     * @param {int | float} gray number specifying value between white and black\n     *\n     * emissive(color)\n     * @param {color} color any value of the color datatype\n     *\n     * emissive(v1, v2, v3)\n     * @param {int | float} v1 red or hue value\n     * @param {int | float} v2 green or saturation value\n     * @param {int | float} v3 blue or brightness value\n     *\n     * @returns none\n     *\n     * @see ambient\n     * @see specular\n     * @see shininess\n    */\n    Drawing2D.prototype.emissive = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.emissive = function(v1, v2, v3) {\n      curContext.useProgram(programObject3D);\n      uniformi(\"uUsingMat3d\", programObject3D, \"uUsingMat\", true);\n      var col = p.color(v1, v2, v3);\n      uniformf(\"uMaterialEmissive3d\", programObject3D, \"uMaterialEmissive\", p.color.toGLArray(col).slice(0, 3));\n    };\n\n    /**\n     * Sets the amount of gloss in the surface of shapes. Used in combination with\n     * <b>ambient()</b>, <b>specular()</b>, and <b>emissive()</b> in setting the\n     * material properties of shapes.\n     *\n     * @param {float} shine degree of shininess\n     *\n     * @returns none\n    */\n    Drawing2D.prototype.shininess = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.shininess = function(shine) {\n      curContext.useProgram(programObject3D);\n      uniformi(\"uUsingMat3d\", programObject3D, \"uUsingMat\", true);\n      uniformf(\"uShininess3d\", programObject3D, \"uShininess\", shine);\n    };\n\n    /**\n     * Sets the specular color of the materials used for shapes drawn to the screen,\n     * which sets the color of hightlights. Specular refers to light which bounces\n     * off a surface in a perferred direction (rather than bouncing in all directions\n     * like a diffuse light). Used in combination with emissive(), ambient(), and\n     * shininess() in setting the material properties of shapes.\n     *\n     * Can be called in the following ways:\n     *\n     * specular(gray)\n     * @param {int | float} gray number specifying value between white and black\n     *\n     * specular(gray, alpha)\n     * @param {int | float} gray number specifying value between white and black\n     * @param {int | float} alpha opacity\n     *\n     * specular(color)\n     * @param {color} color any value of the color datatype\n     *\n     * specular(v1, v2, v3)\n     * @param {int | float} v1 red or hue value\n     * @param {int | float} v2 green or saturation value\n     * @param {int | float} v3 blue or brightness value\n     *\n     * specular(v1, v2, v3, alpha)\n     * @param {int | float} v1 red or hue value\n     * @param {int | float} v2 green or saturation value\n     * @param {int | float} v3 blue or brightness value\n     * @param {int | float} alpha opacity\n     *\n     * @returns none\n     *\n     * @see ambient\n     * @see emissive\n     * @see shininess\n    */\n    Drawing2D.prototype.specular = DrawingShared.prototype.a3DOnlyFunction;\n\n    Drawing3D.prototype.specular = function(v1, v2, v3) {\n      curContext.useProgram(programObject3D);\n      uniformi(\"uUsingMat3d\", programObject3D, \"uUsingMat\", true);\n      var col = p.color(v1, v2, v3);\n      uniformf(\"uMaterialSpecular3d\", programObject3D, \"uMaterialSpecular\", p.color.toGLArray(col).slice(0, 3));\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Coordinates\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Takes a three-dimensional X, Y, Z position and returns the X value for\n     * where it will appear on a (two-dimensional) screen.\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z optional coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see screenY\n     * @see screenZ\n    */\n    p.screenX = function( x, y, z ) {\n      var mv = modelView.array();\n      if( mv.length === 16 )\n      {\n        var ax = mv[ 0]*x + mv[ 1]*y + mv[ 2]*z + mv[ 3];\n        var ay = mv[ 4]*x + mv[ 5]*y + mv[ 6]*z + mv[ 7];\n        var az = mv[ 8]*x + mv[ 9]*y + mv[10]*z + mv[11];\n        var aw = mv[12]*x + mv[13]*y + mv[14]*z + mv[15];\n\n        var pj = projection.array();\n\n        var ox = pj[ 0]*ax + pj[ 1]*ay + pj[ 2]*az + pj[ 3]*aw;\n        var ow = pj[12]*ax + pj[13]*ay + pj[14]*az + pj[15]*aw;\n\n        if ( ow !== 0 ){\n          ox /= ow;\n        }\n        return p.width * ( 1 + ox ) / 2.0;\n      }\n      // We assume that we're in 2D\n      return modelView.multX(x, y);\n    };\n\n    /**\n     * Takes a three-dimensional X, Y, Z position and returns the Y value for\n     * where it will appear on a (two-dimensional) screen.\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z optional coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see screenX\n     * @see screenZ\n    */\n    p.screenY = function screenY( x, y, z ) {\n      var mv = modelView.array();\n      if( mv.length === 16 ) {\n        var ax = mv[ 0]*x + mv[ 1]*y + mv[ 2]*z + mv[ 3];\n        var ay = mv[ 4]*x + mv[ 5]*y + mv[ 6]*z + mv[ 7];\n        var az = mv[ 8]*x + mv[ 9]*y + mv[10]*z + mv[11];\n        var aw = mv[12]*x + mv[13]*y + mv[14]*z + mv[15];\n\n        var pj = projection.array();\n\n        var oy = pj[ 4]*ax + pj[ 5]*ay + pj[ 6]*az + pj[ 7]*aw;\n        var ow = pj[12]*ax + pj[13]*ay + pj[14]*az + pj[15]*aw;\n\n        if ( ow !== 0 ){\n          oy /= ow;\n        }\n        return p.height * ( 1 + oy ) / 2.0;\n      }\n      // We assume that we're in 2D\n      return modelView.multY(x, y);\n    };\n\n    /**\n     * Takes a three-dimensional X, Y, Z position and returns the Z value for\n     * where it will appear on a (two-dimensional) screen.\n     *\n     * @param {int | float} x 3D x coordinate to be mapped\n     * @param {int | float} y 3D y coordinate to be mapped\n     * @param {int | float} z 3D z coordinate to be mapped\n     *\n     * @returns {float}\n     *\n     * @see screenX\n     * @see screenY\n    */\n    p.screenZ = function screenZ( x, y, z ) {\n      var mv = modelView.array();\n      if( mv.length !== 16 ) {\n        return 0;\n      }\n\n      var pj = projection.array();\n\n      var ax = mv[ 0]*x + mv[ 1]*y + mv[ 2]*z + mv[ 3];\n      var ay = mv[ 4]*x + mv[ 5]*y + mv[ 6]*z + mv[ 7];\n      var az = mv[ 8]*x + mv[ 9]*y + mv[10]*z + mv[11];\n      var aw = mv[12]*x + mv[13]*y + mv[14]*z + mv[15];\n\n      var oz = pj[ 8]*ax + pj[ 9]*ay + pj[10]*az + pj[11]*aw;\n      var ow = pj[12]*ax + pj[13]*ay + pj[14]*az + pj[15]*aw;\n\n      if ( ow !== 0 ) {\n        oz /= ow;\n      }\n      return ( oz + 1 ) / 2.0;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Style functions\n    ////////////////////////////////////////////////////////////////////////////\n    /**\n     * The fill() function sets the color used to fill shapes. For example, if you run <b>fill(204, 102, 0)</b>, all subsequent shapes will be filled with orange.\n     * This color is either specified in terms of the RGB or HSB color depending on the current <b>colorMode()</b>\n     *(the default color space is RGB, with each value in the range from 0 to 255).\n     * <br><br>When using hexadecimal notation to specify a color, use \"#\" or \"0x\" before the values (e.g. #CCFFAA, 0xFFCCFFAA).\n     * The # syntax uses six digits to specify a color (the way colors are specified in HTML and CSS). When using the hexadecimal notation starting with \"0x\",\n     * the hexadecimal value must be specified with eight characters; the first two characters define the alpha component and the remainder the red, green, and blue components.\n     * <br><br>The value for the parameter \"gray\" must be less than or equal to the current maximum value as specified by <b>colorMode()</b>. The default maximum value is 255.\n     * <br><br>To change the color of an image (or a texture), use tint().\n     *\n     * @param {int|float} gray    number specifying value between white and black\n     * @param {int|float} value1  red or hue value\n     * @param {int|float} value2  green or saturation value\n     * @param {int|float} value3  blue or brightness value\n     * @param {int|float} alpha   opacity of the fill\n     * @param {Color} color       any value of the color datatype\n     * @param {int} hex           color value in hexadecimal notation (i.e. #FFCC00 or 0xFFFFCC00)\n     *\n     * @see #noFill()\n     * @see #stroke()\n     * @see #tint()\n     * @see #background()\n     * @see #colorMode()\n     */\n    DrawingShared.prototype.fill = function() {\n      var color = p.color.apply(this, arguments);\n      if(color === currentFillColor && doFill) {\n        return;\n      }\n      doFill = true;\n      currentFillColor = color;\n    };\n\n    Drawing2D.prototype.fill = function() {\n      DrawingShared.prototype.fill.apply(this, arguments);\n      isFillDirty = true;\n    };\n\n    Drawing3D.prototype.fill = function() {\n      DrawingShared.prototype.fill.apply(this, arguments);\n      fillStyle = p.color.toGLArray(currentFillColor);\n    };\n\n    function executeContextFill() {\n      if(doFill) {\n        if(isFillDirty) {\n          curContext.fillStyle = p.color.toString(currentFillColor);\n          isFillDirty = false;\n        }\n        curContext.fill();\n      }\n    }\n\n    /**\n     * The noFill() function disables filling geometry. If both <b>noStroke()</b> and <b>noFill()</b>\n     * are called, no shapes will be drawn to the screen.\n     *\n     * @see #fill()\n     *\n     */\n    p.noFill = function() {\n      doFill = false;\n    };\n\n    /**\n     * The stroke() function sets the color used to draw lines and borders around shapes. This color\n     * is either specified in terms of the RGB or HSB color depending on the\n     * current <b>colorMode()</b> (the default color space is RGB, with each\n     * value in the range from 0 to 255).\n     * <br><br>When using hexadecimal notation to specify a color, use \"#\" or\n     * \"0x\" before the values (e.g. #CCFFAA, 0xFFCCFFAA). The # syntax uses six\n     * digits to specify a color (the way colors are specified in HTML and CSS).\n     * When using the hexadecimal notation starting with \"0x\", the hexadecimal\n     * value must be specified with eight characters; the first two characters\n     * define the alpha component and the remainder the red, green, and blue\n     * components.\n     * <br><br>The value for the parameter \"gray\" must be less than or equal\n     * to the current maximum value as specified by <b>colorMode()</b>.\n     * The default maximum value is 255.\n     *\n     * @param {int|float} gray    number specifying value between white and black\n     * @param {int|float} value1  red or hue value\n     * @param {int|float} value2  green or saturation value\n     * @param {int|float} value3  blue or brightness value\n     * @param {int|float} alpha   opacity of the stroke\n     * @param {Color} color       any value of the color datatype\n     * @param {int} hex           color value in hexadecimal notation (i.e. #FFCC00 or 0xFFFFCC00)\n     *\n     * @see #fill()\n     * @see #noStroke()\n     * @see #tint()\n     * @see #background()\n     * @see #colorMode()\n     */\n    DrawingShared.prototype.stroke = function() {\n      var color = p.color.apply(this, arguments);\n      if(color === currentStrokeColor && doStroke) {\n        return;\n      }\n      doStroke = true;\n      currentStrokeColor = color;\n    };\n\n    Drawing2D.prototype.stroke = function() {\n      DrawingShared.prototype.stroke.apply(this, arguments);\n      isStrokeDirty = true;\n    };\n\n    Drawing3D.prototype.stroke = function() {\n      DrawingShared.prototype.stroke.apply(this, arguments);\n      strokeStyle = p.color.toGLArray(currentStrokeColor);\n    };\n\n    function executeContextStroke() {\n      if(doStroke) {\n        if(isStrokeDirty) {\n          curContext.strokeStyle = p.color.toString(currentStrokeColor);\n          isStrokeDirty = false;\n        }\n        curContext.stroke();\n      }\n    }\n\n    /**\n     * The noStroke() function disables drawing the stroke (outline). If both <b>noStroke()</b> and\n     * <b>noFill()</b> are called, no shapes will be drawn to the screen.\n     *\n     * @see #stroke()\n     */\n    p.noStroke = function() {\n      doStroke = false;\n    };\n\n    /**\n     * The strokeWeight() function sets the width of the stroke used for lines, points, and the border around shapes.\n     * All widths are set in units of pixels.\n     *\n     * @param {int|float} w the weight (in pixels) of the stroke\n     */\n    DrawingShared.prototype.strokeWeight = function(w) {\n      lineWidth = w;\n    };\n\n    Drawing2D.prototype.strokeWeight = function(w) {\n      DrawingShared.prototype.strokeWeight.apply(this, arguments);\n      curContext.lineWidth = w;\n    };\n\n    Drawing3D.prototype.strokeWeight = function(w) {\n      DrawingShared.prototype.strokeWeight.apply(this, arguments);\n\n      // Processing groups the weight of points and lines under this one function,\n      // but for WebGL, we need to set a uniform for points and call a function for line.\n\n      curContext.useProgram(programObject2D);\n      uniformf(\"pointSize2d\", programObject2D, \"uPointSize\", w);\n\n      curContext.useProgram(programObjectUnlitShape);\n      uniformf(\"pointSizeUnlitShape\", programObjectUnlitShape, \"uPointSize\", w);\n\n      curContext.lineWidth(w);\n    };\n\n    /**\n     * The strokeCap() function sets the style for rendering line endings. These ends are either squared, extended, or rounded and\n     * specified with the corresponding parameters SQUARE, PROJECT, and ROUND. The default cap is ROUND.\n     * This function is not available with the P2D, P3D, or OPENGL renderers\n     *\n     * @param {int} value Either SQUARE, PROJECT, or ROUND\n     */\n    p.strokeCap = function(value) {\n      drawing.$ensureContext().lineCap = value;\n    };\n\n    /**\n     * The strokeJoin() function sets the style of the joints which connect line segments.\n     * These joints are either mitered, beveled, or rounded and specified with the corresponding parameters MITER, BEVEL, and ROUND. The default joint is MITER.\n     * This function is not available with the P2D, P3D, or OPENGL renderers\n     *\n     * @param {int} value Either SQUARE, PROJECT, or ROUND\n     */\n    p.strokeJoin = function(value) {\n      drawing.$ensureContext().lineJoin = value;\n    };\n\n    /**\n     * The smooth() function draws all geometry with smooth (anti-aliased) edges. This will slow down the frame rate of the application,\n     * but will enhance the visual refinement. <br/><br/>\n     * Note that smooth() will also improve image quality of resized images, and noSmooth() will disable image (and font) smoothing altogether.\n     * When working with a 3D sketch, smooth will draw points as circles rather than squares.\n     *\n     * @see #noSmooth()\n     * @see #hint()\n     * @see #size()\n     */\n\n    Drawing2D.prototype.smooth = function() {\n      renderSmooth = true;\n      var style = curElement.style;\n      style.setProperty(\"image-rendering\", \"optimizeQuality\", \"important\");\n      style.setProperty(\"-ms-interpolation-mode\", \"bicubic\", \"important\");\n      if (curContext.hasOwnProperty(\"mozImageSmoothingEnabled\")) {\n        curContext.mozImageSmoothingEnabled = true;\n      }\n    };\n\n    Drawing3D.prototype.smooth = function(){\n      renderSmooth = true;\n    };\n\n    /**\n     * The noSmooth() function draws all geometry with jagged (aliased) edges.\n     *\n     * @see #smooth()\n     */\n\n    Drawing2D.prototype.noSmooth = function() {\n      renderSmooth = false;\n      var style = curElement.style;\n      style.setProperty(\"image-rendering\", \"optimizeSpeed\", \"important\");\n      style.setProperty(\"image-rendering\", \"-moz-crisp-edges\", \"important\");\n      style.setProperty(\"image-rendering\", \"-webkit-optimize-contrast\", \"important\");\n      style.setProperty(\"image-rendering\", \"optimize-contrast\", \"important\");\n      style.setProperty(\"-ms-interpolation-mode\", \"nearest-neighbor\", \"important\");\n      if (curContext.hasOwnProperty(\"mozImageSmoothingEnabled\")) {\n        curContext.mozImageSmoothingEnabled = false;\n      }\n    };\n\n    Drawing3D.prototype.noSmooth = function(){\n      renderSmooth = false;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Vector drawing functions\n    ////////////////////////////////////////////////////////////////////////////\n    /**\n     * The point() function draws a point, a coordinate in space at the dimension of one pixel.\n     * The first parameter is the horizontal value for the point, the second\n     * value is the vertical value for the point, and the optional third value\n     * is the depth value. Drawing this shape in 3D using the <b>z</b>\n     * parameter requires the P3D or OPENGL parameter in combination with\n     * size as shown in the above example.\n     *\n     * @param {int|float} x x-coordinate of the point\n     * @param {int|float} y y-coordinate of the point\n     * @param {int|float} z z-coordinate of the point\n     *\n     * @see #beginShape()\n     */\n    Drawing2D.prototype.point = function(x, y) {\n      if (!doStroke) {\n        return;\n      }\n\n      x = Math.round(x);\n      y = Math.round(y);\n      curContext.fillStyle = p.color.toString(currentStrokeColor);\n      isFillDirty = true;\n      // Draw a circle for any point larger than 1px\n      if (lineWidth > 1) {\n        curContext.beginPath();\n        curContext.arc(x, y, lineWidth / 2, 0, PConstants.TWO_PI, false);\n        curContext.fill();\n      } else {\n        curContext.fillRect(x, y, 1, 1);\n      }\n    };\n\n    Drawing3D.prototype.point = function(x, y, z) {\n      var model = new PMatrix3D();\n\n      // move point to position\n      model.translate(x, y, z || 0);\n      model.transpose();\n\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      curContext.useProgram(programObject2D);\n      uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false, model.array());\n      uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n\n      if (lineWidth > 0 && doStroke) {\n        // this will be replaced with the new bit shifting color code\n        uniformf(\"uColor2d\", programObject2D, \"uColor\", strokeStyle);\n        uniformi(\"uIsDrawingText2d\", programObject2D, \"uIsDrawingText\", false);\n        uniformi(\"uSmooth2d\", programObject2D, \"uSmooth\", renderSmooth);\n        vertexAttribPointer(\"aVertex2d\", programObject2D, \"aVertex\", 3, pointBuffer);\n        disableVertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\");\n        curContext.drawArrays(curContext.POINTS, 0, 1);\n      }\n    };\n\n    /**\n     * Using the <b>beginShape()</b> and <b>endShape()</b> functions allow creating more complex forms.\n     * <b>beginShape()</b> begins recording vertices for a shape and <b>endShape()</b> stops recording.\n     * The value of the <b>MODE</b> parameter tells it which types of shapes to create from the provided vertices.\n     * With no mode specified, the shape can be any irregular polygon. After calling the <b>beginShape()</b> function,\n     * a series of <b>vertex()</b> commands must follow. To stop drawing the shape, call <b>endShape()</b>.\n     * The <b>vertex()</b> function with two parameters specifies a position in 2D and the <b>vertex()</b>\n     * function with three parameters specifies a position in 3D. Each shape will be outlined with the current\n     * stroke color and filled with the fill color.\n     *\n     * @param {int} MODE either POINTS, LINES, TRIANGLES, TRIANGLE_FAN, TRIANGLE_STRIP, QUADS, and QUAD_STRIP.\n     *\n     * @see endShape\n     * @see vertex\n     * @see curveVertex\n     * @see bezierVertex\n     */\n    p.beginShape = function(type) {\n      curShape = type;\n      curvePoints = [];\n      vertArray = [];\n    };\n\n    /**\n     * All shapes are constructed by connecting a series of vertices. <b>vertex()</b> is used to specify the vertex\n     * coordinates for points, lines, triangles, quads, and polygons and is used exclusively within the <b>beginShape()</b>\n     * and <b>endShape()</b> function. <br /><br />Drawing a vertex in 3D using the <b>z</b> parameter requires the P3D or\n     * OPENGL parameter in combination with size as shown in the above example.<br /><br />This function is also used to map a\n     * texture onto the geometry. The <b>texture()</b> function declares the texture to apply to the geometry and the <b>u</b>\n     * and <b>v</b> coordinates set define the mapping of this texture to the form. By default, the coordinates used for\n     * <b>u</b> and <b>v</b> are specified in relation to the image's size in pixels, but this relation can be changed with\n     * <b>textureMode()</b>.\n     *\n     * @param {int | float} x x-coordinate of the vertex\n     * @param {int | float} y y-coordinate of the vertex\n     * @param {boolean} moveto flag to indicate whether this is a new subpath\n     *\n     * @see beginShape\n     * @see endShape\n     * @see bezierVertex\n     * @see curveVertex\n     * @see texture\n     */\n\n    Drawing2D.prototype.vertex = function(x, y, moveTo) {\n      var vert = [];\n\n      if (firstVert) { firstVert = false; }\n      vert.isVert = true;\n\n      vert[0] = x;\n      vert[1] = y;\n      vert[2] = 0;\n      vert[3] = 0;\n      vert[4] = 0;\n\n      // fill and stroke color\n      vert[5] = currentFillColor;\n      vert[6] = currentStrokeColor;\n\n      vertArray.push(vert);\n      if (moveTo) {\n        vertArray[vertArray.length-1].moveTo = moveTo;\n      }\n    };\n\n    Drawing3D.prototype.vertex = function(x, y, z, u, v) {\n      var vert = [];\n\n      if (firstVert) { firstVert = false; }\n      vert.isVert = true;\n\n      if (v === undef && usingTexture) {\n        v = u;\n        u = z;\n        z = 0;\n      }\n\n      // Convert u and v to normalized coordinates\n      if (u !== undef && v !== undef) {\n        if (curTextureMode === PConstants.IMAGE) {\n          u /= curTexture.width;\n          v /= curTexture.height;\n        }\n        u = u > 1 ? 1 : u;\n        u = u < 0 ? 0 : u;\n        v = v > 1 ? 1 : v;\n        v = v < 0 ? 0 : v;\n      }\n\n      vert[0] = x;\n      vert[1] = y;\n      vert[2] = z || 0;\n      vert[3] = u || 0;\n      vert[4] = v || 0;\n\n      // fill rgba\n      vert[5] = fillStyle[0];\n      vert[6] = fillStyle[1];\n      vert[7] = fillStyle[2];\n      vert[8] = fillStyle[3];\n      // stroke rgba\n      vert[9] = strokeStyle[0];\n      vert[10] = strokeStyle[1];\n      vert[11] = strokeStyle[2];\n      vert[12] = strokeStyle[3];\n      //normals\n      vert[13] = normalX;\n      vert[14] = normalY;\n      vert[15] = normalZ;\n\n      vertArray.push(vert);\n    };\n\n    /**\n     * @private\n     * Renders 3D points created from calls to vertex and beginShape/endShape\n     *\n     * @param {Array} vArray an array of vertex coordinate\n     * @param {Array} cArray an array of colours used for the vertices\n     *\n     * @see beginShape\n     * @see endShape\n     * @see vertex\n     */\n    var point3D = function(vArray, cArray){\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      curContext.useProgram(programObjectUnlitShape);\n\n      uniformMatrix(\"uViewUS\", programObjectUnlitShape, \"uView\", false, view.array());\n      uniformi(\"uSmoothUS\", programObjectUnlitShape, \"uSmooth\", renderSmooth);\n\n      vertexAttribPointer(\"aVertexUS\", programObjectUnlitShape, \"aVertex\", 3, pointBuffer);\n      curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(vArray), curContext.STREAM_DRAW);\n\n      vertexAttribPointer(\"aColorUS\", programObjectUnlitShape, \"aColor\", 4, fillColorBuffer);\n      curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(cArray), curContext.STREAM_DRAW);\n\n      curContext.drawArrays(curContext.POINTS, 0, vArray.length/3);\n    };\n\n    /**\n     * @private\n     * Renders 3D lines created from calls to beginShape/vertex/endShape - based on the mode specified LINES, LINE_LOOP, etc.\n     *\n     * @param {Array} vArray an array of vertex coordinate\n     * @param {String} mode  either LINES, LINE_LOOP, or LINE_STRIP\n     * @param {Array} cArray an array of colours used for the vertices\n     *\n     * @see beginShape\n     * @see endShape\n     * @see vertex\n     */\n    var line3D = function(vArray, mode, cArray){\n      var ctxMode;\n      if (mode === \"LINES\"){\n        ctxMode = curContext.LINES;\n      }\n      else if(mode === \"LINE_LOOP\"){\n        ctxMode = curContext.LINE_LOOP;\n      }\n      else{\n        ctxMode = curContext.LINE_STRIP;\n      }\n\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      curContext.useProgram(programObjectUnlitShape);\n      uniformMatrix(\"uViewUS\", programObjectUnlitShape, \"uView\", false, view.array());\n      vertexAttribPointer(\"aVertexUS\", programObjectUnlitShape, \"aVertex\", 3, lineBuffer);\n      curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(vArray), curContext.STREAM_DRAW);\n      vertexAttribPointer(\"aColorUS\", programObjectUnlitShape, \"aColor\", 4, strokeColorBuffer);\n      curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(cArray), curContext.STREAM_DRAW);\n      curContext.drawArrays(ctxMode, 0, vArray.length/3);\n    };\n\n    /**\n     * @private\n     * Render filled shapes created from calls to beginShape/vertex/endShape - based on the mode specified TRIANGLES, etc.\n     *\n     * @param {Array} vArray an array of vertex coordinate\n     * @param {String} mode  either LINES, LINE_LOOP, or LINE_STRIP\n     * @param {Array} cArray an array of colours used for the vertices\n     * @param {Array} tArray an array of u,v coordinates for textures\n     *\n     * @see beginShape\n     * @see endShape\n     * @see vertex\n     */\n    var fill3D = function(vArray, mode, cArray, tArray){\n      var ctxMode;\n      if (mode === \"TRIANGLES\") {\n        ctxMode = curContext.TRIANGLES;\n      } else if(mode === \"TRIANGLE_FAN\") {\n        ctxMode = curContext.TRIANGLE_FAN;\n      } else {\n        ctxMode = curContext.TRIANGLE_STRIP;\n      }\n\n      var view = new PMatrix3D();\n      view.scale( 1, -1, 1 );\n      view.apply( modelView.array() );\n      view.transpose();\n\n      curContext.useProgram( programObject3D );\n      uniformMatrix( \"model3d\", programObject3D, \"uModel\", false,  [1,0,0,0,  0,1,0,0,   0,0,1,0,   0,0,0,1] );\n      uniformMatrix( \"view3d\", programObject3D, \"uView\", false, view.array() );\n      curContext.enable( curContext.POLYGON_OFFSET_FILL );\n      curContext.polygonOffset( 1, 1 );\n      uniformf( \"color3d\", programObject3D, \"uColor\", [-1,0,0,0] );\n      vertexAttribPointer( \"vertex3d\", programObject3D, \"aVertex\", 3, fillBuffer );\n      curContext.bufferData( curContext.ARRAY_BUFFER, new Float32Array(vArray), curContext.STREAM_DRAW );\n\n      // if we are using a texture and a tint, then overwrite the\n      // contents of the color buffer with the current tint\n      if ( usingTexture && curTint !== null ){\n        curTint3d( cArray );\n      }\n\n      vertexAttribPointer( \"aColor3d\", programObject3D, \"aColor\", 4, fillColorBuffer );\n      curContext.bufferData( curContext.ARRAY_BUFFER, new Float32Array(cArray), curContext.STREAM_DRAW );\n\n      // No support for lights....yet\n      disableVertexAttribPointer( \"aNormal3d\", programObject3D, \"aNormal\" );\n\n      if ( usingTexture ) {\n        uniformi( \"uUsingTexture3d\", programObject3D, \"uUsingTexture\", usingTexture );\n        vertexAttribPointer( \"aTexture3d\", programObject3D, \"aTexture\", 2, shapeTexVBO );\n        curContext.bufferData( curContext.ARRAY_BUFFER, new Float32Array(tArray), curContext.STREAM_DRAW );\n      }\n\n      curContext.drawArrays( ctxMode, 0, vArray.length/3 );\n      curContext.disable( curContext.POLYGON_OFFSET_FILL );\n    };\n\n    /**\n     * this series of three operations is used a lot in Drawing2D.prototype.endShape\n     * and has been split off as its own function, to tighten the code and allow for\n     * fewer bugs.\n     */\n    function fillStrokeClose() {\n      executeContextFill();\n      executeContextStroke();\n      curContext.closePath();\n    }\n\n    /**\n     * The endShape() function is the companion to beginShape() and may only be called after beginShape().\n     * When endshape() is called, all of image data defined since the previous call to beginShape() is written\n     * into the image buffer.\n     *\n     * @param {int} MODE Use CLOSE to close the shape\n     *\n     * @see beginShape\n     */\n    Drawing2D.prototype.endShape = function(mode) {\n      // Duplicated in Drawing3D; too many variables used\n      if (vertArray.length === 0) { return; }\n\n      var closeShape = mode === PConstants.CLOSE;\n\n      // if the shape is closed, the first element is also the last element\n      if (closeShape) {\n        vertArray.push(vertArray[0]);\n      }\n\n      var lineVertArray = [];\n      var fillVertArray = [];\n      var colorVertArray = [];\n      var strokeVertArray = [];\n      var texVertArray = [];\n      var cachedVertArray;\n\n      firstVert = true;\n      var i, j, k;\n      var vertArrayLength = vertArray.length;\n\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 0; j < 3; j++) {\n          fillVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // 5,6,7,8\n      // R,G,B,A - fill colour\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 5; j < 9; j++) {\n          colorVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // 9,10,11,12\n      // R, G, B, A - stroke colour\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 9; j < 13; j++) {\n          strokeVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // texture u,v\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        texVertArray.push(cachedVertArray[3]);\n        texVertArray.push(cachedVertArray[4]);\n      }\n\n      // curveVertex\n      if ( isCurve && (curShape === PConstants.POLYGON || curShape === undef) ) {\n        if (vertArrayLength > 3) {\n          var b = [],\n              s = 1 - curTightness;\n          curContext.beginPath();\n          curContext.moveTo(vertArray[1][0], vertArray[1][1]);\n            /*\n            * Matrix to convert from Catmull-Rom to cubic Bezier\n            * where t = curTightness\n            * |0         1          0         0       |\n            * |(t-1)/6   1          (1-t)/6   0       |\n            * |0         (1-t)/6    1         (t-1)/6 |\n            * |0         0          0         0       |\n            */\n          for (i = 1; (i+2) < vertArrayLength; i++) {\n            cachedVertArray = vertArray[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * vertArray[i+1][0] - s * vertArray[i-1][0]) / 6,\n                   cachedVertArray[1] + (s * vertArray[i+1][1] - s * vertArray[i-1][1]) / 6];\n            b[2] = [vertArray[i+1][0] + (s * vertArray[i][0] - s * vertArray[i+2][0]) / 6,\n                   vertArray[i+1][1] + (s * vertArray[i][1] - s * vertArray[i+2][1]) / 6];\n            b[3] = [vertArray[i+1][0], vertArray[i+1][1]];\n            curContext.bezierCurveTo(b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]);\n          }\n          fillStrokeClose();\n        }\n      }\n\n      // bezierVertex\n      else if ( isBezier && (curShape === PConstants.POLYGON || curShape === undef) ) {\n        curContext.beginPath();\n        for (i = 0; i < vertArrayLength; i++) {\n          cachedVertArray = vertArray[i];\n          if (vertArray[i].isVert) { //if it is a vertex move to the position\n            if (vertArray[i].moveTo) {\n              curContext.moveTo(cachedVertArray[0], cachedVertArray[1]);\n            } else {\n              curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n            }\n          } else { //otherwise continue drawing bezier\n            curContext.bezierCurveTo(vertArray[i][0], vertArray[i][1], vertArray[i][2], vertArray[i][3], vertArray[i][4], vertArray[i][5]);\n          }\n        }\n        fillStrokeClose();\n      }\n\n      // render the vertices provided\n      else {\n        if (curShape === PConstants.POINTS) {\n          for (i = 0; i < vertArrayLength; i++) {\n            cachedVertArray = vertArray[i];\n            if (doStroke) {\n              p.stroke(cachedVertArray[6]);\n            }\n            p.point(cachedVertArray[0], cachedVertArray[1]);\n          }\n        } else if (curShape === PConstants.LINES) {\n          for (i = 0; (i + 1) < vertArrayLength; i+=2) {\n            cachedVertArray = vertArray[i];\n            if (doStroke) {\n              p.stroke(vertArray[i+1][6]);\n            }\n            p.line(cachedVertArray[0], cachedVertArray[1], vertArray[i+1][0], vertArray[i+1][1]);\n          }\n        } else if (curShape === PConstants.TRIANGLES) {\n          for (i = 0; (i + 2) < vertArrayLength; i+=3) {\n            cachedVertArray = vertArray[i];\n            curContext.beginPath();\n            curContext.moveTo(cachedVertArray[0], cachedVertArray[1]);\n            curContext.lineTo(vertArray[i+1][0], vertArray[i+1][1]);\n            curContext.lineTo(vertArray[i+2][0], vertArray[i+2][1]);\n            curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n\n            if (doFill) {\n              p.fill(vertArray[i+2][5]);\n              executeContextFill();\n            }\n            if (doStroke) {\n              p.stroke(vertArray[i+2][6]);\n              executeContextStroke();\n            }\n\n            curContext.closePath();\n          }\n        } else if (curShape === PConstants.TRIANGLE_STRIP) {\n          for (i = 0; (i+1) < vertArrayLength; i++) {\n            cachedVertArray = vertArray[i];\n            curContext.beginPath();\n            curContext.moveTo(vertArray[i+1][0], vertArray[i+1][1]);\n            curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n\n            if (doStroke) {\n              p.stroke(vertArray[i+1][6]);\n            }\n            if (doFill) {\n              p.fill(vertArray[i+1][5]);\n            }\n\n            if (i + 2 < vertArrayLength) {\n              curContext.lineTo(vertArray[i+2][0], vertArray[i+2][1]);\n              if (doStroke) {\n                p.stroke(vertArray[i+2][6]);\n              }\n              if (doFill) {\n                p.fill(vertArray[i+2][5]);\n              }\n            }\n            fillStrokeClose();\n          }\n        } else if (curShape === PConstants.TRIANGLE_FAN) {\n          if (vertArrayLength > 2) {\n            curContext.beginPath();\n            curContext.moveTo(vertArray[0][0], vertArray[0][1]);\n            curContext.lineTo(vertArray[1][0], vertArray[1][1]);\n            curContext.lineTo(vertArray[2][0], vertArray[2][1]);\n\n            if (doFill) {\n              p.fill(vertArray[2][5]);\n              executeContextFill();\n            }\n            if (doStroke) {\n              p.stroke(vertArray[2][6]);\n              executeContextStroke();\n            }\n\n            curContext.closePath();\n            for (i = 3; i < vertArrayLength; i++) {\n              cachedVertArray = vertArray[i];\n              curContext.beginPath();\n              curContext.moveTo(vertArray[0][0], vertArray[0][1]);\n              curContext.lineTo(vertArray[i-1][0], vertArray[i-1][1]);\n              curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n\n              if (doFill) {\n                p.fill(cachedVertArray[5]);\n                executeContextFill();\n              }\n              if (doStroke) {\n                p.stroke(cachedVertArray[6]);\n                executeContextStroke();\n              }\n\n              curContext.closePath();\n            }\n          }\n        } else if (curShape === PConstants.QUADS) {\n          for (i = 0; (i + 3) < vertArrayLength; i+=4) {\n            cachedVertArray = vertArray[i];\n            curContext.beginPath();\n            curContext.moveTo(cachedVertArray[0], cachedVertArray[1]);\n            for (j = 1; j < 4; j++) {\n              curContext.lineTo(vertArray[i+j][0], vertArray[i+j][1]);\n            }\n            curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n\n            if (doFill) {\n              p.fill(vertArray[i+3][5]);\n              executeContextFill();\n            }\n            if (doStroke) {\n              p.stroke(vertArray[i+3][6]);\n              executeContextStroke();\n            }\n\n            curContext.closePath();\n          }\n        } else if (curShape === PConstants.QUAD_STRIP) {\n          if (vertArrayLength > 3) {\n            for (i = 0; (i+1) < vertArrayLength; i+=2) {\n              cachedVertArray = vertArray[i];\n              curContext.beginPath();\n              if (i+3 < vertArrayLength) {\n                curContext.moveTo(vertArray[i+2][0], vertArray[i+2][1]);\n                curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n                curContext.lineTo(vertArray[i+1][0], vertArray[i+1][1]);\n                curContext.lineTo(vertArray[i+3][0], vertArray[i+3][1]);\n\n                if (doFill) {\n                  p.fill(vertArray[i+3][5]);\n                }\n                if (doStroke) {\n                  p.stroke(vertArray[i+3][6]);\n                }\n              } else {\n                curContext.moveTo(cachedVertArray[0], cachedVertArray[1]);\n                curContext.lineTo(vertArray[i+1][0], vertArray[i+1][1]);\n              }\n              fillStrokeClose();\n            }\n          }\n        } else {\n          curContext.beginPath();\n          curContext.moveTo(vertArray[0][0], vertArray[0][1]);\n          for (i = 1; i < vertArrayLength; i++) {\n            cachedVertArray = vertArray[i];\n            if (cachedVertArray.isVert) { //if it is a vertex move to the position\n              if (cachedVertArray.moveTo) {\n                curContext.moveTo(cachedVertArray[0], cachedVertArray[1]);\n              } else {\n                curContext.lineTo(cachedVertArray[0], cachedVertArray[1]);\n              }\n            }\n          }\n          fillStrokeClose();\n        }\n      }\n\n      // Reset some settings\n      isCurve = false;\n      isBezier = false;\n      curveVertArray = [];\n      curveVertCount = 0;\n\n      // If the shape is closed, the first element was added as last element.\n      // We must remove it again to prevent the list of vertices from growing\n      // over successive calls to endShape(CLOSE)\n      if (closeShape) {\n        vertArray.pop();\n      }\n    };\n\n    Drawing3D.prototype.endShape = function(mode) {\n      // Duplicated in Drawing3D; too many variables used\n      if (vertArray.length === 0) { return; }\n\n      var closeShape = mode === PConstants.CLOSE;\n      var lineVertArray = [];\n      var fillVertArray = [];\n      var colorVertArray = [];\n      var strokeVertArray = [];\n      var texVertArray = [];\n      var cachedVertArray;\n\n      firstVert = true;\n      var i, j, k;\n      var vertArrayLength = vertArray.length;\n\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 0; j < 3; j++) {\n          fillVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // 5,6,7,8\n      // R,G,B,A - fill colour\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 5; j < 9; j++) {\n          colorVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // 9,10,11,12\n      // R, G, B, A - stroke colour\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        for (j = 9; j < 13; j++) {\n          strokeVertArray.push(cachedVertArray[j]);\n        }\n      }\n\n      // texture u,v\n      for (i = 0; i < vertArrayLength; i++) {\n        cachedVertArray = vertArray[i];\n        texVertArray.push(cachedVertArray[3]);\n        texVertArray.push(cachedVertArray[4]);\n      }\n\n      // if shape is closed, push the first point into the last point (including colours)\n      if (closeShape) {\n        fillVertArray.push(vertArray[0][0]);\n        fillVertArray.push(vertArray[0][1]);\n        fillVertArray.push(vertArray[0][2]);\n\n        for (i = 5; i < 9; i++) {\n          colorVertArray.push(vertArray[0][i]);\n        }\n\n        for (i = 9; i < 13; i++) {\n          strokeVertArray.push(vertArray[0][i]);\n        }\n\n        texVertArray.push(vertArray[0][3]);\n        texVertArray.push(vertArray[0][4]);\n      }\n      // End duplication\n\n      // curveVertex\n      if ( isCurve && (curShape === PConstants.POLYGON || curShape === undef) ) {\n        lineVertArray = fillVertArray;\n        if (doStroke) {\n          line3D(lineVertArray, null, strokeVertArray);\n        }\n        if (doFill) {\n          fill3D(fillVertArray, null, colorVertArray);\n        }\n      }\n      // bezierVertex\n      else if ( isBezier && (curShape === PConstants.POLYGON || curShape === undef) ) {\n        lineVertArray = fillVertArray;\n        lineVertArray.splice(lineVertArray.length - 3);\n        strokeVertArray.splice(strokeVertArray.length - 4);\n        if (doStroke) {\n          line3D(lineVertArray, null, strokeVertArray);\n        }\n        if (doFill) {\n          fill3D(fillVertArray, \"TRIANGLES\", colorVertArray);\n        }\n      }\n\n      // render the vertices provided\n      else {\n        if (curShape === PConstants.POINTS) {       // if POINTS was the specified parameter in beginShape\n          for (i = 0; i < vertArrayLength; i++) {  // loop through and push the point location information to the array\n            cachedVertArray = vertArray[i];\n            for (j = 0; j < 3; j++) {\n              lineVertArray.push(cachedVertArray[j]);\n            }\n          }\n          point3D(lineVertArray, strokeVertArray);  // render function for points\n        } else if (curShape === PConstants.LINES) { // if LINES was the specified parameter in beginShape\n          for (i = 0; i < vertArrayLength; i++) {  // loop through and push the point location information to the array\n            cachedVertArray = vertArray[i];\n            for (j = 0; j < 3; j++) {\n              lineVertArray.push(cachedVertArray[j]);\n            }\n          }\n          for (i = 0; i < vertArrayLength; i++) {  // loop through and push the color information to the array\n            cachedVertArray = vertArray[i];\n            for (j = 5; j < 9; j++) {\n              colorVertArray.push(cachedVertArray[j]);\n            }\n          }\n          line3D(lineVertArray, \"LINES\", strokeVertArray);  // render function for lines\n        } else if (curShape === PConstants.TRIANGLES) {     // if TRIANGLES was the specified parameter in beginShape\n          if (vertArrayLength > 2) {\n            for (i = 0; (i+2) < vertArrayLength; i+=3) {   // loop through the array per triangle\n              fillVertArray = [];\n              texVertArray = [];\n              lineVertArray = [];\n              colorVertArray = [];\n              strokeVertArray = [];\n              for (j = 0; j < 3; j++) {\n                for (k = 0; k < 3; k++) {                   // loop through and push\n                  lineVertArray.push(vertArray[i+j][k]);    // the line point location information\n                  fillVertArray.push(vertArray[i+j][k]);    // and fill point location information\n                }\n              }\n              for (j = 0; j < 3; j++) {                     // loop through and push the texture information\n                for (k = 3; k < 5; k++) {\n                  texVertArray.push(vertArray[i+j][k]);\n                }\n              }\n              for (j = 0; j < 3; j++) {\n                for (k = 5; k < 9; k++) {                   // loop through and push\n                  colorVertArray.push(vertArray[i+j][k]);   // the colour information\n                  strokeVertArray.push(vertArray[i+j][k+4]);// and the stroke information\n                }\n              }\n              if (doStroke) {\n                line3D(lineVertArray, \"LINE_LOOP\", strokeVertArray );               // line render function\n              }\n              if (doFill || usingTexture) {\n                fill3D(fillVertArray, \"TRIANGLES\", colorVertArray, texVertArray);   // fill shape render function\n              }\n            }\n          }\n        } else if (curShape === PConstants.TRIANGLE_STRIP) {    // if TRIANGLE_STRIP was the specified parameter in beginShape\n          if (vertArrayLength > 2) {\n            for (i = 0; (i+2) < vertArrayLength; i++) {\n              lineVertArray = [];\n              fillVertArray = [];\n              strokeVertArray = [];\n              colorVertArray = [];\n              texVertArray = [];\n              for (j = 0; j < 3; j++) {\n                for (k = 0; k < 3; k++) {\n                  lineVertArray.push(vertArray[i+j][k]);\n                  fillVertArray.push(vertArray[i+j][k]);\n                }\n              }\n              for (j = 0; j < 3; j++) {\n                for (k = 3; k < 5; k++) {\n                  texVertArray.push(vertArray[i+j][k]);\n                }\n              }\n              for (j = 0; j < 3; j++) {\n                for (k = 5; k < 9; k++) {\n                  strokeVertArray.push(vertArray[i+j][k+4]);\n                  colorVertArray.push(vertArray[i+j][k]);\n                }\n              }\n\n              if (doFill || usingTexture) {\n                fill3D(fillVertArray, \"TRIANGLE_STRIP\", colorVertArray, texVertArray);\n              }\n              if (doStroke) {\n                line3D(lineVertArray, \"LINE_LOOP\", strokeVertArray);\n              }\n            }\n          }\n        } else if (curShape === PConstants.TRIANGLE_FAN) {\n          if (vertArrayLength > 2) {\n            for (i = 0; i < 3; i++) {\n              cachedVertArray = vertArray[i];\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(cachedVertArray[j]);\n              }\n            }\n            for (i = 0; i < 3; i++) {\n              cachedVertArray = vertArray[i];\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(cachedVertArray[j]);\n              }\n            }\n            if (doStroke) {\n              line3D(lineVertArray, \"LINE_LOOP\", strokeVertArray);\n            }\n\n            for (i = 2; (i+1) < vertArrayLength; i++) {\n              lineVertArray = [];\n              strokeVertArray = [];\n              lineVertArray.push(vertArray[0][0]);\n              lineVertArray.push(vertArray[0][1]);\n              lineVertArray.push(vertArray[0][2]);\n\n              strokeVertArray.push(vertArray[0][9]);\n              strokeVertArray.push(vertArray[0][10]);\n              strokeVertArray.push(vertArray[0][11]);\n              strokeVertArray.push(vertArray[0][12]);\n\n              for (j = 0; j < 2; j++) {\n                for (k = 0; k < 3; k++) {\n                  lineVertArray.push(vertArray[i+j][k]);\n                }\n              }\n              for (j = 0; j < 2; j++) {\n                for (k = 9; k < 13; k++) {\n                  strokeVertArray.push(vertArray[i+j][k]);\n                }\n              }\n              if (doStroke) {\n                line3D(lineVertArray, \"LINE_STRIP\",strokeVertArray);\n              }\n            }\n            if (doFill || usingTexture) {\n              fill3D(fillVertArray, \"TRIANGLE_FAN\", colorVertArray, texVertArray);\n            }\n          }\n        } else if (curShape === PConstants.QUADS) {\n          for (i = 0; (i + 3) < vertArrayLength; i+=4) {\n            lineVertArray = [];\n            for (j = 0; j < 4; j++) {\n              cachedVertArray = vertArray[i+j];\n              for (k = 0; k < 3; k++) {\n                lineVertArray.push(cachedVertArray[k]);\n              }\n            }\n            if (doStroke) {\n              line3D(lineVertArray, \"LINE_LOOP\",strokeVertArray);\n            }\n\n            if (doFill) {\n              fillVertArray = [];\n              colorVertArray = [];\n              texVertArray = [];\n              for (j = 0; j < 3; j++) {\n                fillVertArray.push(vertArray[i][j]);\n              }\n              for (j = 5; j < 9; j++) {\n                colorVertArray.push(vertArray[i][j]);\n              }\n\n              for (j = 0; j < 3; j++) {\n                fillVertArray.push(vertArray[i+1][j]);\n              }\n              for (j = 5; j < 9; j++) {\n                colorVertArray.push(vertArray[i+1][j]);\n              }\n\n              for (j = 0; j < 3; j++) {\n                fillVertArray.push(vertArray[i+3][j]);\n              }\n              for (j = 5; j < 9; j++) {\n                colorVertArray.push(vertArray[i+3][j]);\n              }\n\n              for (j = 0; j < 3; j++) {\n                fillVertArray.push(vertArray[i+2][j]);\n              }\n              for (j = 5; j < 9; j++) {\n                colorVertArray.push(vertArray[i+2][j]);\n              }\n\n              if (usingTexture) {\n                texVertArray.push(vertArray[i+0][3]);\n                texVertArray.push(vertArray[i+0][4]);\n                texVertArray.push(vertArray[i+1][3]);\n                texVertArray.push(vertArray[i+1][4]);\n                texVertArray.push(vertArray[i+3][3]);\n                texVertArray.push(vertArray[i+3][4]);\n                texVertArray.push(vertArray[i+2][3]);\n                texVertArray.push(vertArray[i+2][4]);\n              }\n\n              fill3D(fillVertArray, \"TRIANGLE_STRIP\", colorVertArray, texVertArray);\n            }\n          }\n        } else if (curShape === PConstants.QUAD_STRIP) {\n          var tempArray = [];\n          if (vertArrayLength > 3) {\n            for (i = 0; i < 2; i++) {\n              cachedVertArray = vertArray[i];\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(cachedVertArray[j]);\n              }\n            }\n\n            for (i = 0; i < 2; i++) {\n              cachedVertArray = vertArray[i];\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(cachedVertArray[j]);\n              }\n            }\n\n            line3D(lineVertArray, \"LINE_STRIP\", strokeVertArray);\n            if (vertArrayLength > 4 && vertArrayLength % 2 > 0) {\n              tempArray = fillVertArray.splice(fillVertArray.length - 3);\n              vertArray.pop();\n            }\n            for (i = 0; (i+3) < vertArrayLength; i+=2) {\n              lineVertArray = [];\n              strokeVertArray = [];\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(vertArray[i+1][j]);\n              }\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(vertArray[i+3][j]);\n              }\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(vertArray[i+2][j]);\n              }\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(vertArray[i+0][j]);\n              }\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(vertArray[i+1][j]);\n              }\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(vertArray[i+3][j]);\n              }\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(vertArray[i+2][j]);\n              }\n              for (j = 9; j < 13; j++) {\n                strokeVertArray.push(vertArray[i+0][j]);\n              }\n              if (doStroke) {\n                line3D(lineVertArray, \"LINE_STRIP\", strokeVertArray);\n              }\n            }\n\n            if (doFill || usingTexture) {\n              fill3D(fillVertArray, \"TRIANGLE_LIST\", colorVertArray, texVertArray);\n            }\n          }\n        }\n        // If the user didn't specify a type (LINES, TRIANGLES, etc)\n        else {\n          // If only one vertex was specified, it must be a point\n          if (vertArrayLength === 1) {\n            for (j = 0; j < 3; j++) {\n              lineVertArray.push(vertArray[0][j]);\n            }\n            for (j = 9; j < 13; j++) {\n              strokeVertArray.push(vertArray[0][j]);\n            }\n            point3D(lineVertArray,strokeVertArray);\n          } else {\n            for (i = 0; i < vertArrayLength; i++) {\n              cachedVertArray = vertArray[i];\n              for (j = 0; j < 3; j++) {\n                lineVertArray.push(cachedVertArray[j]);\n              }\n              for (j = 5; j < 9; j++) {\n                strokeVertArray.push(cachedVertArray[j]);\n              }\n            }\n            if (doStroke && closeShape) {\n              line3D(lineVertArray, \"LINE_LOOP\", strokeVertArray);\n            } else if (doStroke && !closeShape) {\n              line3D(lineVertArray, \"LINE_STRIP\", strokeVertArray);\n            }\n\n            // fill is ignored if textures are used\n            if (doFill || usingTexture) {\n              fill3D(fillVertArray, \"TRIANGLE_FAN\", colorVertArray, texVertArray);\n            }\n          }\n        }\n        // everytime beginShape is followed by a call to\n        // texture(), texturing it turned back on. We do this to\n        // figure out if the shape should be textured or filled\n        // with a color.\n        usingTexture = false;\n        curContext.useProgram(programObject3D);\n        uniformi(\"usingTexture3d\", programObject3D, \"uUsingTexture\", usingTexture);\n      }\n\n      // Reset some settings\n      isCurve = false;\n      isBezier = false;\n      curveVertArray = [];\n      curveVertCount = 0;\n    };\n\n    /**\n     * The function splineForward() setup forward-differencing matrix to be used for speedy\n     * curve rendering. It's based on using a specific number\n     * of curve segments and just doing incremental adds for each\n     * vertex of the segment, rather than running the mathematically\n     * expensive cubic equation. This function is used by both curveDetail and bezierDetail.\n     *\n     * @param {int} segments      number of curve segments to use when drawing\n     * @param {PMatrix3D} matrix  target object for the new matrix\n     */\n    var splineForward = function(segments, matrix) {\n      var f = 1.0 / segments;\n      var ff = f * f;\n      var fff = ff * f;\n\n      matrix.set(0, 0, 0, 1, fff, ff, f, 0, 6 * fff, 2 * ff, 0, 0, 6 * fff, 0, 0, 0);\n    };\n\n    /**\n     * The curveInit() function set the number of segments to use when drawing a Catmull-Rom\n     * curve, and setting the s parameter, which defines how tightly\n     * the curve fits to each vertex. Catmull-Rom curves are actually\n     * a subset of this curve type where the s is set to zero.\n     * This in an internal function used by curveDetail() and curveTightness().\n     */\n    var curveInit = function() {\n      // allocate only if/when used to save startup time\n      if (!curveDrawMatrix) {\n        curveBasisMatrix = new PMatrix3D();\n        curveDrawMatrix = new PMatrix3D();\n        curveInited = true;\n      }\n\n      var s = curTightness;\n      curveBasisMatrix.set((s - 1) / 2, (s + 3) / 2, (-3 - s) / 2, (1 - s) / 2,\n                           (1 - s), (-5 - s) / 2, (s + 2), (s - 1) / 2,\n                           (s - 1) / 2, 0, (1 - s) / 2, 0, 0, 1, 0, 0);\n\n      splineForward(curveDet, curveDrawMatrix);\n\n      if (!bezierBasisInverse) {\n        //bezierBasisInverse = bezierBasisMatrix.get();\n        //bezierBasisInverse.invert();\n        curveToBezierMatrix = new PMatrix3D();\n      }\n\n      // TODO only needed for PGraphicsJava2D? if so, move it there\n      // actually, it's generally useful for other renderers, so keep it\n      // or hide the implementation elsewhere.\n      curveToBezierMatrix.set(curveBasisMatrix);\n      curveToBezierMatrix.preApply(bezierBasisInverse);\n\n      // multiply the basis and forward diff matrices together\n      // saves much time since this needn't be done for each curve\n      curveDrawMatrix.apply(curveBasisMatrix);\n    };\n\n    /**\n     * Specifies vertex coordinates for Bezier curves. Each call to <b>bezierVertex()</b> defines the position of two control\n     * points and one anchor point of a Bezier curve, adding a new segment to a line or shape. The first time\n     * <b>bezierVertex()</b> is used within a <b>beginShape()</b> call, it must be prefaced with a call to <b>vertex()</b>\n     * to set the first anchor point. This function must be used between <b>beginShape()</b> and <b>endShape()</b> and only\n     * when there is no MODE parameter specified to <b>beginShape()</b>. Using the 3D version of requires rendering with P3D\n     * or OPENGL (see the Environment reference for more information). <br /> <br /> <b>NOTE: </b> Fill does not work properly yet.\n     *\n     * @param {float | int} cx1 The x-coordinate of 1st control point\n     * @param {float | int} cy1 The y-coordinate of 1st control point\n     * @param {float | int} cz1 The z-coordinate of 1st control point\n     * @param {float | int} cx2 The x-coordinate of 2nd control point\n     * @param {float | int} cy2 The y-coordinate of 2nd control point\n     * @param {float | int} cz2 The z-coordinate of 2nd control point\n     * @param {float | int} x   The x-coordinate of the anchor point\n     * @param {float | int} y   The y-coordinate of the anchor point\n     * @param {float | int} z   The z-coordinate of the anchor point\n     *\n     * @see curveVertex\n     * @see vertex\n     * @see bezier\n     */\n    Drawing2D.prototype.bezierVertex = function() {\n      isBezier = true;\n      var vert = [];\n      if (firstVert) {\n        throw (\"vertex() must be used at least once before calling bezierVertex()\");\n      }\n\n      for (var i = 0; i < arguments.length; i++) {\n        vert[i] = arguments[i];\n      }\n      vertArray.push(vert);\n      vertArray[vertArray.length -1].isVert = false;\n    };\n\n    Drawing3D.prototype.bezierVertex = function() {\n      isBezier = true;\n      var vert = [];\n      if (firstVert) {\n        throw (\"vertex() must be used at least once before calling bezierVertex()\");\n      }\n\n      if (arguments.length === 9) {\n        if (bezierDrawMatrix === undef) {\n          bezierDrawMatrix = new PMatrix3D();\n        }\n        // setup matrix for forward differencing to speed up drawing\n        var lastPoint = vertArray.length - 1;\n        splineForward( bezDetail, bezierDrawMatrix );\n        bezierDrawMatrix.apply( bezierBasisMatrix );\n        var draw = bezierDrawMatrix.array();\n        var x1 = vertArray[lastPoint][0],\n            y1 = vertArray[lastPoint][1],\n            z1 = vertArray[lastPoint][2];\n        var xplot1 = draw[4] * x1 + draw[5] * arguments[0] + draw[6] * arguments[3] + draw[7] * arguments[6];\n        var xplot2 = draw[8] * x1 + draw[9] * arguments[0] + draw[10]* arguments[3] + draw[11]* arguments[6];\n        var xplot3 = draw[12]* x1 + draw[13]* arguments[0] + draw[14]* arguments[3] + draw[15]* arguments[6];\n\n        var yplot1 = draw[4] * y1 + draw[5] * arguments[1] + draw[6] * arguments[4] + draw[7] * arguments[7];\n        var yplot2 = draw[8] * y1 + draw[9] * arguments[1] + draw[10]* arguments[4] + draw[11]* arguments[7];\n        var yplot3 = draw[12]* y1 + draw[13]* arguments[1] + draw[14]* arguments[4] + draw[15]* arguments[7];\n\n        var zplot1 = draw[4] * z1 + draw[5] * arguments[2] + draw[6] * arguments[5] + draw[7] * arguments[8];\n        var zplot2 = draw[8] * z1 + draw[9] * arguments[2] + draw[10]* arguments[5] + draw[11]* arguments[8];\n        var zplot3 = draw[12]* z1 + draw[13]* arguments[2] + draw[14]* arguments[5] + draw[15]* arguments[8];\n        for (var j = 0; j < bezDetail; j++) {\n          x1 += xplot1; xplot1 += xplot2; xplot2 += xplot3;\n          y1 += yplot1; yplot1 += yplot2; yplot2 += yplot3;\n          z1 += zplot1; zplot1 += zplot2; zplot2 += zplot3;\n          p.vertex(x1, y1, z1);\n        }\n        p.vertex(arguments[6], arguments[7], arguments[8]);\n      }\n    };\n\n    /**\n     * Sets a texture to be applied to vertex points. The <b>texture()</b> function\n     * must be called between <b>beginShape()</b> and <b>endShape()</b> and before\n     * any calls to vertex().\n     *\n     * When textures are in use, the fill color is ignored. Instead, use tint() to\n     * specify the color of the texture as it is applied to the shape.\n     *\n     * @param {PImage} pimage the texture to apply\n     *\n     * @returns none\n     *\n     * @see textureMode\n     * @see beginShape\n     * @see endShape\n     * @see vertex\n    */\n    p.texture = function(pimage) {\n      var curContext = drawing.$ensureContext();\n\n      if (pimage.__texture) {\n        curContext.bindTexture(curContext.TEXTURE_2D, pimage.__texture);\n      } else if (pimage.localName === \"canvas\") {\n        curContext.bindTexture(curContext.TEXTURE_2D, canTex);\n        curContext.texImage2D(curContext.TEXTURE_2D, 0, curContext.RGBA, curContext.RGBA, curContext.UNSIGNED_BYTE, pimage);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MAG_FILTER, curContext.LINEAR);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MIN_FILTER, curContext.LINEAR);\n        curContext.generateMipmap(curContext.TEXTURE_2D);\n        curTexture.width = pimage.width;\n        curTexture.height = pimage.height;\n      } else {\n        var texture = curContext.createTexture(),\n            cvs = document.createElement('canvas'),\n            cvsTextureCtx = cvs.getContext('2d'),\n            pot;\n\n        // WebGL requires power of two textures\n        if (pimage.width & (pimage.width-1) === 0) {\n          cvs.width = pimage.width;\n        } else {\n          pot = 1;\n          while (pot < pimage.width) {\n            pot *= 2;\n          }\n          cvs.width = pot;\n        }\n\n        if (pimage.height & (pimage.height-1) === 0) {\n          cvs.height = pimage.height;\n        } else {\n          pot = 1;\n          while (pot < pimage.height) {\n            pot *= 2;\n          }\n          cvs.height = pot;\n        }\n\n        cvsTextureCtx.drawImage(pimage.sourceImg, 0, 0, pimage.width, pimage.height, 0, 0, cvs.width, cvs.height);\n\n        curContext.bindTexture(curContext.TEXTURE_2D, texture);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MIN_FILTER, curContext.LINEAR_MIPMAP_LINEAR);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MAG_FILTER, curContext.LINEAR);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_WRAP_T, curContext.CLAMP_TO_EDGE);\n        curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_WRAP_S, curContext.CLAMP_TO_EDGE);\n        curContext.texImage2D(curContext.TEXTURE_2D, 0, curContext.RGBA, curContext.RGBA, curContext.UNSIGNED_BYTE, cvs);\n        curContext.generateMipmap(curContext.TEXTURE_2D);\n\n        pimage.__texture = texture;\n        curTexture.width = pimage.width;\n        curTexture.height = pimage.height;\n      }\n\n      usingTexture = true;\n      curContext.useProgram(programObject3D);\n      uniformi(\"usingTexture3d\", programObject3D, \"uUsingTexture\", usingTexture);\n    };\n\n    /**\n     * Sets the coordinate space for texture mapping. There are two options, IMAGE,\n     * which refers to the actual coordinates of the image, and NORMALIZED, which\n     * refers to a normalized space of values ranging from 0 to 1. The default mode\n     * is IMAGE. In IMAGE, if an image is 100 x 200 pixels, mapping the image onto\n     * the entire size of a quad would require the points (0,0) (0,100) (100,200) (0,200).\n     * The same mapping in NORMAL_SPACE is (0,0) (0,1) (1,1) (0,1).\n     *\n     * @param MODE either IMAGE or NORMALIZED\n     *\n     * @returns none\n     *\n     * @see texture\n    */\n    p.textureMode = function(mode){\n      curTextureMode = mode;\n    };\n    /**\n     * The curveVertexSegment() function handle emitting a specific segment of Catmull-Rom curve. Internal helper function used by <b>curveVertex()</b>.\n     */\n    var curveVertexSegment = function(x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4) {\n      var x0 = x2;\n      var y0 = y2;\n      var z0 = z2;\n\n      var draw = curveDrawMatrix.array();\n\n      var xplot1 = draw[4] * x1 + draw[5] * x2 + draw[6] * x3 + draw[7] * x4;\n      var xplot2 = draw[8] * x1 + draw[9] * x2 + draw[10] * x3 + draw[11] * x4;\n      var xplot3 = draw[12] * x1 + draw[13] * x2 + draw[14] * x3 + draw[15] * x4;\n\n      var yplot1 = draw[4] * y1 + draw[5] * y2 + draw[6] * y3 + draw[7] * y4;\n      var yplot2 = draw[8] * y1 + draw[9] * y2 + draw[10] * y3 + draw[11] * y4;\n      var yplot3 = draw[12] * y1 + draw[13] * y2 + draw[14] * y3 + draw[15] * y4;\n\n      var zplot1 = draw[4] * z1 + draw[5] * z2 + draw[6] * z3 + draw[7] * z4;\n      var zplot2 = draw[8] * z1 + draw[9] * z2 + draw[10] * z3 + draw[11] * z4;\n      var zplot3 = draw[12] * z1 + draw[13] * z2 + draw[14] * z3 + draw[15] * z4;\n\n      p.vertex(x0, y0, z0);\n      for (var j = 0; j < curveDet; j++) {\n        x0 += xplot1; xplot1 += xplot2; xplot2 += xplot3;\n        y0 += yplot1; yplot1 += yplot2; yplot2 += yplot3;\n        z0 += zplot1; zplot1 += zplot2; zplot2 += zplot3;\n        p.vertex(x0, y0, z0);\n      }\n    };\n\n    /**\n     * Specifies vertex coordinates for curves. This function may only be used between <b>beginShape()</b> and\n     * <b>endShape()</b> and only when there is no MODE parameter specified to <b>beginShape()</b>. The first and last points\n     * in a series of <b>curveVertex()</b> lines will be used to guide the beginning and end of a the curve. A minimum of four\n     * points is required to draw a tiny curve between the second and third points. Adding a fifth point with\n     * <b>curveVertex()</b> will draw the curve between the second, third, and fourth points. The <b>curveVertex()</b> function\n     * is an implementation of Catmull-Rom splines. Using the 3D version of requires rendering with P3D or OPENGL (see the\n     * Environment reference for more information). <br /> <br /><b>NOTE: </b> Fill does not work properly yet.\n     *\n     * @param {float | int} x The x-coordinate of the vertex\n     * @param {float | int} y The y-coordinate of the vertex\n     * @param {float | int} z The z-coordinate of the vertex\n     *\n     * @see curve\n     * @see beginShape\n     * @see endShape\n     * @see vertex\n     * @see bezierVertex\n     */\n    Drawing2D.prototype.curveVertex = function(x, y) {\n      isCurve = true;\n\n      p.vertex(x, y);\n    };\n\n    Drawing3D.prototype.curveVertex = function(x, y, z) {\n      isCurve = true;\n\n      if (!curveInited) {\n        curveInit();\n      }\n      var vert = [];\n      vert[0] = x;\n      vert[1] = y;\n      vert[2] = z;\n      curveVertArray.push(vert);\n      curveVertCount++;\n\n      if (curveVertCount > 3) {\n        curveVertexSegment( curveVertArray[curveVertCount-4][0],\n                            curveVertArray[curveVertCount-4][1],\n                            curveVertArray[curveVertCount-4][2],\n                            curveVertArray[curveVertCount-3][0],\n                            curveVertArray[curveVertCount-3][1],\n                            curveVertArray[curveVertCount-3][2],\n                            curveVertArray[curveVertCount-2][0],\n                            curveVertArray[curveVertCount-2][1],\n                            curveVertArray[curveVertCount-2][2],\n                            curveVertArray[curveVertCount-1][0],\n                            curveVertArray[curveVertCount-1][1],\n                            curveVertArray[curveVertCount-1][2] );\n      }\n    };\n\n    /**\n     * The curve() function draws a curved line on the screen. The first and second parameters\n     * specify the beginning control point and the last two parameters specify\n     * the ending control point. The middle parameters specify the start and\n     * stop of the curve. Longer curves can be created by putting a series of\n     * <b>curve()</b> functions together or using <b>curveVertex()</b>.\n     * An additional function called <b>curveTightness()</b> provides control\n     * for the visual quality of the curve. The <b>curve()</b> function is an\n     * implementation of Catmull-Rom splines. Using the 3D version of requires\n     * rendering with P3D or OPENGL (see the Environment reference for more\n     * information).\n     *\n     * @param {int|float} x1 coordinates for the beginning control point\n     * @param {int|float} y1 coordinates for the beginning control point\n     * @param {int|float} z1 coordinates for the beginning control point\n     * @param {int|float} x2 coordinates for the first point\n     * @param {int|float} y2 coordinates for the first point\n     * @param {int|float} z2 coordinates for the first point\n     * @param {int|float} x3 coordinates for the second point\n     * @param {int|float} y3 coordinates for the second point\n     * @param {int|float} z3 coordinates for the second point\n     * @param {int|float} x4 coordinates for the ending control point\n     * @param {int|float} y4 coordinates for the ending control point\n     * @param {int|float} z4 coordinates for the ending control point\n     *\n     * @see #curveVertex()\n     * @see #curveTightness()\n     * @see #bezier()\n     */\n    Drawing2D.prototype.curve = function(x1, y1, x2, y2, x3, y3, x4, y4) {\n      p.beginShape();\n      p.curveVertex(x1, y1);\n      p.curveVertex(x2, y2);\n      p.curveVertex(x3, y3);\n      p.curveVertex(x4, y4);\n      p.endShape();\n    };\n\n    Drawing3D.prototype.curve = function(x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4) {\n      if (z4 !== undef) {\n        p.beginShape();\n        p.curveVertex(x1, y1, z1);\n        p.curveVertex(x2, y2, z2);\n        p.curveVertex(x3, y3, z3);\n        p.curveVertex(x4, y4, z4);\n        p.endShape();\n        return;\n      }\n      p.beginShape();\n      p.curveVertex(x1, y1);\n      p.curveVertex(z1, x2);\n      p.curveVertex(y2, z2);\n      p.curveVertex(x3, y3);\n      p.endShape();\n    };\n\n    /**\n     * The curveTightness() function modifies the quality of forms created with <b>curve()</b> and\n     * <b>curveVertex()</b>. The parameter <b>squishy</b> determines how the\n     * curve fits to the vertex points. The value 0.0 is the default value for\n     * <b>squishy</b> (this value defines the curves to be Catmull-Rom splines)\n     * and the value 1.0 connects all the points with straight lines.\n     * Values within the range -5.0 and 5.0 will deform the curves but\n     * will leave them recognizable and as values increase in magnitude,\n     * they will continue to deform.\n     *\n     * @param {float} tightness amount of deformation from the original vertices\n     *\n     * @see #curve()\n     * @see #curveVertex()\n     *\n     */\n    p.curveTightness = function(tightness) {\n      curTightness = tightness;\n    };\n\n    /**\n     * The curveDetail() function sets the resolution at which curves display. The default value is 20.\n     * This function is only useful when using the P3D or OPENGL renderer.\n     *\n     * @param {int} detail resolution of the curves\n     *\n     * @see curve()\n     * @see curveVertex()\n     * @see curveTightness()\n     */\n    p.curveDetail = function(detail) {\n      curveDet = detail;\n      curveInit();\n    };\n\n    /**\n    * Modifies the location from which rectangles draw. The default mode is rectMode(CORNER), which\n    * specifies the location to be the upper left corner of the shape and uses the third and fourth\n    * parameters of rect() to specify the width and height. The syntax rectMode(CORNERS) uses the\n    * first and second parameters of rect() to set the location of one corner and uses the third and\n    * fourth parameters to set the opposite corner. The syntax rectMode(CENTER) draws the image from\n    * its center point and uses the third and forth parameters of rect() to specify the image's width\n    * and height. The syntax rectMode(RADIUS) draws the image from its center point and uses the third\n    * and forth parameters of rect()  to specify half of the image's width and height. The parameter must\n    * be written in ALL CAPS because Processing is a case sensitive language. Note: In version 125, the\n    * mode named CENTER_RADIUS was shortened to RADIUS.\n    *\n    * @param {MODE} MODE      Either CORNER, CORNERS, CENTER, or RADIUS\n    *\n    * @see rect\n    */\n    p.rectMode = function(aRectMode) {\n      curRectMode = aRectMode;\n    };\n\n    /**\n    * Modifies the location from which images draw. The default mode is imageMode(CORNER), which specifies\n    * the location to be the upper left corner and uses the fourth and fifth parameters of image() to set\n    * the image's width and height. The syntax imageMode(CORNERS) uses the second and third parameters of\n    * image() to set the location of one corner of the image and uses the fourth and fifth parameters to\n    * set the opposite corner. Use imageMode(CENTER) to draw images centered at the given x and y position.\n    * The parameter to imageMode() must be written in ALL CAPS because Processing is a case sensitive language.\n    *\n    * @param {MODE} MODE      Either CORNER, CORNERS, or CENTER\n    *\n    * @see loadImage\n    * @see PImage\n    * @see image\n    * @see background\n    */\n    p.imageMode = function(mode) {\n      switch (mode) {\n      case PConstants.CORNER:\n        imageModeConvert = imageModeCorner;\n        break;\n      case PConstants.CORNERS:\n        imageModeConvert = imageModeCorners;\n        break;\n      case PConstants.CENTER:\n        imageModeConvert = imageModeCenter;\n        break;\n      default:\n        throw \"Invalid imageMode\";\n      }\n    };\n\n    /**\n    * The origin of the ellipse is modified by the ellipseMode() function. The default configuration is\n    * ellipseMode(CENTER), which specifies the location of the ellipse as the center of the shape. The RADIUS\n    * mode is the same, but the width and height parameters to ellipse()  specify the radius of the ellipse,\n    * rather than the diameter. The CORNER mode draws the shape from the upper-left corner of its bounding box.\n    * The CORNERS mode uses the four parameters to ellipse() to set two opposing corners of the ellipse's bounding\n    * box. The parameter must be written in \"ALL CAPS\" because Processing is a case sensitive language.\n    *\n    * @param {MODE} MODE      Either CENTER, RADIUS, CORNER, or CORNERS.\n    *\n    * @see ellipse\n    */\n    p.ellipseMode = function(aEllipseMode) {\n      curEllipseMode = aEllipseMode;\n    };\n\n    /**\n     * The arc() function draws an arc in the display window.\n     * Arcs are drawn along the outer edge of an ellipse defined by the\n     * <b>x</b>, <b>y</b>, <b>width</b> and <b>height</b> parameters.\n     * The origin or the arc's ellipse may be changed with the\n     * <b>ellipseMode()</b> function.\n     * The <b>start</b> and <b>stop</b> parameters specify the angles\n     * at which to draw the arc.\n     *\n     * @param {float} a       x-coordinate of the arc's ellipse\n     * @param {float} b       y-coordinate of the arc's ellipse\n     * @param {float} c       width of the arc's ellipse\n     * @param {float} d       height of the arc's ellipse\n     * @param {float} start   angle to start the arc, specified in radians\n     * @param {float} stop    angle to stop the arc, specified in radians\n     *\n     * @see #ellipseMode()\n     * @see #ellipse()\n     */\n    p.arc = function(x, y, width, height, start, stop) {\n      if (width <= 0 || stop < start) { return; }\n\n      if (curEllipseMode === PConstants.CORNERS) {\n        width = width - x;\n        height = height - y;\n      } else if (curEllipseMode === PConstants.RADIUS) {\n        x = x - width;\n        y = y - height;\n        width = width * 2;\n        height = height * 2;\n      } else if (curEllipseMode === PConstants.CENTER) {\n        x = x - width/2;\n        y = y - height/2;\n      }\n      // make sure that we're starting at a useful point\n      while (start < 0) {\n        start += PConstants.TWO_PI;\n        stop += PConstants.TWO_PI;\n      }\n      if (stop - start > PConstants.TWO_PI) {\n        start = 0;\n        stop = PConstants.TWO_PI;\n      }\n      var hr = width / 2,\n          vr = height / 2,\n          centerX = x + hr,\n          centerY = y + vr,\n          startLUT = 0 | (0.5 + start * p.RAD_TO_DEG * 2),\n          stopLUT  = 0 | (0.5 + stop * p.RAD_TO_DEG * 2),\n          i, j;\n      if (doFill) {\n        // shut off stroke for a minute\n        var savedStroke = doStroke;\n        doStroke = false;\n        p.beginShape();\n        p.vertex(centerX, centerY);\n        for (i = startLUT; i <= stopLUT; i++) {\n          j = i % PConstants.SINCOS_LENGTH;\n          p.vertex(centerX + cosLUT[j] * hr, centerY + sinLUT[j] * vr);\n        }\n        p.endShape(PConstants.CLOSE);\n        doStroke = savedStroke;\n      }\n\n      if (doStroke) {\n        // and doesn't include the first (center) vertex.\n        var savedFill = doFill;\n        doFill = false;\n        p.beginShape();\n        for (i = startLUT; i <= stopLUT; i++) {\n          j = i % PConstants.SINCOS_LENGTH;\n          p.vertex(centerX + cosLUT[j] * hr, centerY + sinLUT[j] * vr);\n        }\n        p.endShape();\n        doFill = savedFill;\n      }\n    };\n\n    /**\n    * Draws a line (a direct path between two points) to the screen. The version of line() with four parameters\n    * draws the line in 2D. To color a line, use the stroke() function. A line cannot be filled, therefore the\n    * fill()  method will not affect the color of a line. 2D lines are drawn with a width of one pixel by default,\n    * but this can be changed with the strokeWeight()  function. The version with six parameters allows the line\n    * to be placed anywhere within XYZ space. Drawing this shape in 3D using the z parameter requires the P3D or\n    * OPENGL parameter in combination with size.\n    *\n    * @param {int|float} x1       x-coordinate of the first point\n    * @param {int|float} y1       y-coordinate of the first point\n    * @param {int|float} z1       z-coordinate of the first point\n    * @param {int|float} x2       x-coordinate of the second point\n    * @param {int|float} y2       y-coordinate of the second point\n    * @param {int|float} z2       z-coordinate of the second point\n    *\n    * @see strokeWeight\n    * @see strokeJoin\n    * @see strokeCap\n    * @see beginShape\n    */\n    Drawing2D.prototype.line = function(x1, y1, x2, y2) {\n      if (!doStroke) {\n        return;\n      }\n      x1 = Math.round(x1);\n      x2 = Math.round(x2);\n      y1 = Math.round(y1);\n      y2 = Math.round(y2);\n      // A line is only defined if it has different start and end coordinates.\n      // If they are the same, we call point instead.\n      if (x1 === x2 && y1 === y2) {\n        p.point(x1, y1);\n        return;\n      }\n\n      var swap = undef,\n          lineCap = undef,\n          drawCrisp = true,\n          currentModelView = modelView.array(),\n          identityMatrix = [1, 0, 0, 0, 1, 0];\n      // Test if any transformations have been applied to the sketch\n      for (var i = 0; i < 6 && drawCrisp; i++) {\n        drawCrisp = currentModelView[i] === identityMatrix[i];\n      }\n      /* Draw crisp lines if the line is vertical or horizontal with the following method\n       * If any transformations have been applied to the sketch, don't make the line crisp\n       * If the line is directed up or to the left, reverse it by swapping x1/x2 or y1/y2\n       * Make the line 1 pixel longer to work around cross-platform canvas implementations\n       * If the lineWidth is odd, translate the line by 0.5 in the perpendicular direction\n       * Even lineWidths do not need to be translated because the canvas will draw them on pixel boundaries\n       * Change the cap to butt-end to work around cross-platform canvas implementations\n       * Reverse the translate and lineCap canvas state changes after drawing the line\n       */\n      if (drawCrisp) {\n        if (x1 === x2) {\n          if (y1 > y2) {\n            swap = y1;\n            y1 = y2;\n            y2 = swap;\n          }\n          y2++;\n          if (lineWidth % 2 === 1) {\n            curContext.translate(0.5, 0.0);\n          }\n        } else if (y1 === y2) {\n          if (x1 > x2) {\n            swap = x1;\n            x1 = x2;\n            x2 = swap;\n          }\n          x2++;\n          if (lineWidth % 2 === 1) {\n            curContext.translate(0.0, 0.5);\n          }\n        }\n        if (lineWidth === 1) {\n          lineCap = curContext.lineCap;\n          curContext.lineCap = 'butt';\n        }\n      }\n      curContext.beginPath();\n      curContext.moveTo(x1 || 0, y1 || 0);\n      curContext.lineTo(x2 || 0, y2 || 0);\n      executeContextStroke();\n      if (drawCrisp) {\n        if (x1 === x2 && lineWidth % 2 === 1) {\n          curContext.translate(-0.5, 0.0);\n        } else if (y1 === y2 && lineWidth % 2 === 1) {\n          curContext.translate(0.0, -0.5);\n        }\n        if (lineWidth === 1) {\n          curContext.lineCap = lineCap;\n        }\n      }\n    };\n\n    Drawing3D.prototype.line = function(x1, y1, z1, x2, y2, z2) {\n      if (y2 === undef || z2 === undef) { // 2D line called in 3D context\n        z2 = 0;\n        y2 = x2;\n        x2 = z1;\n        z1 = 0;\n      }\n\n      // a line is only defined if it has different start and end coordinates.\n      // If they are the same, we call point instead.\n      if (x1===x2 && y1===y2 && z1===z2) {\n        p.point(x1,y1,z1);\n        return;\n      }\n\n      var lineVerts = [x1, y1, z1, x2, y2, z2];\n\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      if (lineWidth > 0 && doStroke) {\n        curContext.useProgram(programObject2D);\n\n        uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false, [1,0,0,0,  0,1,0,0,  0,0,1,0,  0,0,0,1]);\n        uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n\n        uniformf(\"uColor2d\", programObject2D, \"uColor\", strokeStyle);\n        uniformi(\"uIsDrawingText\", programObject2D, \"uIsDrawingText\", false);\n\n        vertexAttribPointer(\"aVertex2d\", programObject2D, \"aVertex\", 3, lineBuffer);\n        disableVertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\");\n\n        curContext.bufferData(curContext.ARRAY_BUFFER, new Float32Array(lineVerts), curContext.STREAM_DRAW);\n        curContext.drawArrays(curContext.LINES, 0, 2);\n      }\n    };\n\n    /**\n     * Draws a Bezier curve on the screen. These curves are defined by a series of anchor and control points. The first\n     * two parameters specify the first anchor point and the last two parameters specify the other anchor point. The\n     * middle parameters specify the control points which define the shape of the curve. Bezier curves were developed\n     * by French engineer Pierre Bezier. Using the 3D version of requires rendering with P3D or OPENGL (see the\n     * Environment reference for more information).\n     *\n     * @param {int | float} x1,y1,z1    coordinates for the first anchor point\n     * @param {int | float} cx1,cy1,cz1 coordinates for the first control point\n     * @param {int | float} cx2,cy2,cz2 coordinates for the second control point\n     * @param {int | float} x2,y2,z2    coordinates for the second anchor point\n     *\n     * @see bezierVertex\n     * @see curve\n     */\n    Drawing2D.prototype.bezier = function() {\n      if (arguments.length !== 8) {\n        throw(\"You must use 8 parameters for bezier() in 2D mode\");\n      }\n\n      p.beginShape();\n      p.vertex( arguments[0], arguments[1] );\n      p.bezierVertex( arguments[2], arguments[3],\n                      arguments[4], arguments[5],\n                      arguments[6], arguments[7] );\n      p.endShape();\n    };\n\n    Drawing3D.prototype.bezier = function() {\n      if (arguments.length !== 12) {\n        throw(\"You must use 12 parameters for bezier() in 3D mode\");\n      }\n\n      p.beginShape();\n      p.vertex( arguments[0], arguments[1], arguments[2] );\n      p.bezierVertex( arguments[3], arguments[4], arguments[5],\n                      arguments[6], arguments[7], arguments[8],\n                      arguments[9], arguments[10], arguments[11] );\n      p.endShape();\n    };\n\n    /**\n     * Sets the resolution at which Beziers display. The default value is 20. This function is only useful when using the P3D\n     * or OPENGL renderer as the default (JAVA2D) renderer does not use this information.\n     *\n     * @param {int} detail resolution of the curves\n     *\n     * @see curve\n     * @see curveVertex\n     * @see curveTightness\n     */\n    p.bezierDetail = function( detail ){\n      bezDetail = detail;\n    };\n\n    /**\n     * The bezierPoint() function evalutes quadratic bezier at point t for points a, b, c, d.\n     * The parameter t varies between 0 and 1. The a and d parameters are the\n     * on-curve points, b and c are the control points. To make a two-dimensional\n     * curve, call this function once with the x coordinates and a second time\n     * with the y coordinates to get the location of a bezier curve at t.\n     *\n     * @param {float} a   coordinate of first point on the curve\n     * @param {float} b   coordinate of first control point\n     * @param {float} c   coordinate of second control point\n     * @param {float} d   coordinate of second point on the curve\n     * @param {float} t   value between 0 and 1\n     *\n     * @see #bezier()\n     * @see #bezierVertex()\n     * @see #curvePoint()\n     */\n    p.bezierPoint = function(a, b, c, d, t) {\n      return (1 - t) * (1 - t) * (1 - t) * a + 3 * (1 - t) * (1 - t) * t * b + 3 * (1 - t) * t * t * c + t * t * t * d;\n    };\n\n    /**\n     * The bezierTangent() function calculates the tangent of a point on a Bezier curve. There is a good\n     * definition of \"tangent\" at Wikipedia: <a href=\"http://en.wikipedia.org/wiki/Tangent\" target=\"new\">http://en.wikipedia.org/wiki/Tangent</a>\n     *\n     * @param {float} a   coordinate of first point on the curve\n     * @param {float} b   coordinate of first control point\n     * @param {float} c   coordinate of second control point\n     * @param {float} d   coordinate of second point on the curve\n     * @param {float} t   value between 0 and 1\n     *\n     * @see #bezier()\n     * @see #bezierVertex()\n     * @see #curvePoint()\n     */\n    p.bezierTangent = function(a, b, c, d, t) {\n      return (3 * t * t * (-a + 3 * b - 3 * c + d) + 6 * t * (a - 2 * b + c) + 3 * (-a + b));\n    };\n\n    /**\n     * The curvePoint() function evalutes the Catmull-Rom curve at point t for points a, b, c, d. The\n     * parameter t varies between 0 and 1, a and d are points on the curve,\n     * and b and c are the control points. This can be done once with the x\n     * coordinates and a second time with the y coordinates to get the\n     * location of a curve at t.\n     *\n     * @param {int|float} a   coordinate of first point on the curve\n     * @param {int|float} b   coordinate of second point on the curve\n     * @param {int|float} c   coordinate of third point on the curve\n     * @param {int|float} d   coordinate of fourth point on the curve\n     * @param {float} t       value between 0 and 1\n     *\n     * @see #curve()\n     * @see #curveVertex()\n     * @see #bezierPoint()\n     */\n    p.curvePoint = function(a, b, c, d, t) {\n      return 0.5 * ((2 * b) + (-a + c) * t + (2 * a - 5 * b + 4 * c - d) * t * t + (-a + 3 * b - 3 * c + d) * t * t * t);\n    };\n\n    /**\n     * The curveTangent() function calculates the tangent of a point on a Catmull-Rom curve.\n     * There is a good definition of \"tangent\" at Wikipedia: <a href=\"http://en.wikipedia.org/wiki/Tangent\" target=\"new\">http://en.wikipedia.org/wiki/Tangent</a>.\n     *\n     * @param {int|float} a   coordinate of first point on the curve\n     * @param {int|float} b   coordinate of first control point\n     * @param {int|float} c   coordinate of second control point\n     * @param {int|float} d   coordinate of second point on the curve\n     * @param {float} t       value between 0 and 1\n     *\n     * @see #curve()\n     * @see #curveVertex()\n     * @see #curvePoint()\n     * @see #bezierTangent()\n     */\n    p.curveTangent = function(a, b, c, d, t) {\n      return 0.5 * ((-a + c) + 2 * (2 * a - 5 * b + 4 * c - d) * t + 3 * (-a + 3 * b - 3 * c + d) * t * t);\n    };\n\n    /**\n     * A triangle is a plane created by connecting three points. The first two arguments specify the first point,\n     * the middle two arguments specify the second point, and the last two arguments specify the third point.\n     *\n     * @param {int | float} x1 x-coordinate of the first point\n     * @param {int | float} y1 y-coordinate of the first point\n     * @param {int | float} x2 x-coordinate of the second point\n     * @param {int | float} y2 y-coordinate of the second point\n     * @param {int | float} x3 x-coordinate of the third point\n     * @param {int | float} y3 y-coordinate of the third point\n     */\n    p.triangle = function(x1, y1, x2, y2, x3, y3) {\n      p.beginShape(PConstants.TRIANGLES);\n      p.vertex(x1, y1, 0);\n      p.vertex(x2, y2, 0);\n      p.vertex(x3, y3, 0);\n      p.endShape();\n    };\n\n    /**\n     * A quad is a quadrilateral, a four sided polygon. It is similar to a rectangle, but the angles between its\n     * edges are not constrained to ninety degrees. The first pair of parameters (x1,y1) sets the first vertex\n     * and the subsequent pairs should proceed clockwise or counter-clockwise around the defined shape.\n     *\n     * @param {float | int} x1 x-coordinate of the first corner\n     * @param {float | int} y1 y-coordinate of the first corner\n     * @param {float | int} x2 x-coordinate of the second corner\n     * @param {float | int} y2 y-coordinate of the second corner\n     * @param {float | int} x3 x-coordinate of the third corner\n     * @param {float | int} y3 y-coordinate of the third corner\n     * @param {float | int} x4 x-coordinate of the fourth corner\n     * @param {float | int} y4 y-coordinate of the fourth corner\n     */\n    p.quad = function(x1, y1, x2, y2, x3, y3, x4, y4) {\n      p.beginShape(PConstants.QUADS);\n      p.vertex(x1, y1, 0);\n      p.vertex(x2, y2, 0);\n      p.vertex(x3, y3, 0);\n      p.vertex(x4, y4, 0);\n      p.endShape();\n    };\n\n    var roundedRect$2d = function(x, y, width, height, tl, tr, br, bl) {\n      if (bl === undef) {\n        tr = tl;\n        br = tl;\n        bl = tl;\n      }\n      var halfWidth = width / 2,\n          halfHeight = height / 2;\n      if (tl > halfWidth || tl > halfHeight) {\n        tl = Math.min(halfWidth, halfHeight);\n      }\n      if (tr > halfWidth || tr > halfHeight) {\n        tr = Math.min(halfWidth, halfHeight);\n      }\n      if (br > halfWidth || br > halfHeight) {\n        br = Math.min(halfWidth, halfHeight);\n      }\n      if (bl > halfWidth || bl > halfHeight) {\n        bl = Math.min(halfWidth, halfHeight);\n      }\n      // Translate the stroke by (0.5, 0.5) to draw a crisp border\n      if (!doFill || doStroke) {\n        curContext.translate(0.5, 0.5);\n      }\n      curContext.beginPath();\n      curContext.moveTo(x + tl, y);\n      curContext.lineTo(x + width - tr, y);\n      curContext.quadraticCurveTo(x + width, y, x + width, y + tr);\n      curContext.lineTo(x + width, y + height - br);\n      curContext.quadraticCurveTo(x + width, y + height, x + width - br, y + height);\n      curContext.lineTo(x + bl, y + height);\n      curContext.quadraticCurveTo(x, y + height, x, y + height - bl);\n      curContext.lineTo(x, y + tl);\n      curContext.quadraticCurveTo(x, y, x + tl, y);\n      if (!doFill || doStroke) {\n        curContext.translate(-0.5, -0.5);\n      }\n      executeContextFill();\n      executeContextStroke();\n    };\n\n    /**\n    * Draws a rectangle to the screen. A rectangle is a four-sided shape with every angle at ninety\n    * degrees. The first two parameters set the location, the third sets the width, and the fourth\n    * sets the height. The origin is changed with the rectMode() function.\n    *\n    * @param {int|float} x        x-coordinate of the rectangle\n    * @param {int|float} y        y-coordinate of the rectangle\n    * @param {int|float} width    width of the rectangle\n    * @param {int|float} height   height of the rectangle\n    *\n    * @see rectMode\n    * @see quad\n    */\n    Drawing2D.prototype.rect = function(x, y, width, height, tl, tr, br, bl) {\n      if (!width && !height) {\n        return;\n      }\n\n      if (curRectMode === PConstants.CORNERS) {\n        width -= x;\n        height -= y;\n      } else if (curRectMode === PConstants.RADIUS) {\n        width *= 2;\n        height *= 2;\n        x -= width / 2;\n        y -= height / 2;\n      } else if (curRectMode === PConstants.CENTER) {\n        x -= width / 2;\n        y -= height / 2;\n      }\n\n      x = Math.round(x);\n      y = Math.round(y);\n      width = Math.round(width);\n      height = Math.round(height);\n      if (tl !== undef) {\n        roundedRect$2d(x, y, width, height, tl, tr, br, bl);\n        return;\n      }\n\n      // Translate the line by (0.5, 0.5) to draw a crisp rectangle border\n      if (doStroke && lineWidth % 2 === 1) {\n        curContext.translate(0.5, 0.5);\n      }\n      curContext.beginPath();\n      curContext.rect(x, y, width, height);\n      executeContextFill();\n      executeContextStroke();\n      if (doStroke && lineWidth % 2 === 1) {\n        curContext.translate(-0.5, -0.5);\n      }\n    };\n\n    Drawing3D.prototype.rect = function(x, y, width, height, tl, tr, br, bl) {\n      if (tl !== undef) {\n        throw \"rect() with rounded corners is not supported in 3D mode\";\n      }\n\n      if (curRectMode === PConstants.CORNERS) {\n        width -= x;\n        height -= y;\n      } else if (curRectMode === PConstants.RADIUS) {\n        width *= 2;\n        height *= 2;\n        x -= width / 2;\n        y -= height / 2;\n      } else if (curRectMode === PConstants.CENTER) {\n        x -= width / 2;\n        y -= height / 2;\n      }\n\n      // Modeling transformation\n      var model = new PMatrix3D();\n      model.translate(x, y, 0);\n      model.scale(width, height, 1);\n      model.transpose();\n\n      // viewing transformation needs to have Y flipped\n      // becuase that's what Processing does.\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      if (lineWidth > 0 && doStroke) {\n        curContext.useProgram(programObject2D);\n        uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false, model.array());\n        uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n        uniformf(\"uColor2d\", programObject2D, \"uColor\", strokeStyle);\n        uniformi(\"uIsDrawingText2d\", programObject2D, \"uIsDrawingText\", false);\n        vertexAttribPointer(\"aVertex2d\", programObject2D, \"aVertex\", 3, rectBuffer);\n        disableVertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\");\n        curContext.drawArrays(curContext.LINE_LOOP, 0, rectVerts.length / 3);\n      }\n\n      if (doFill) {\n        curContext.useProgram(programObject3D);\n        uniformMatrix(\"uModel3d\", programObject3D, \"uModel\", false, model.array());\n        uniformMatrix(\"uView3d\", programObject3D, \"uView\", false, view.array());\n\n        // fix stitching problems. (lines get occluded by triangles\n        // since they share the same depth values). This is not entirely\n        // working, but it's a start for drawing the outline. So\n        // developers can start playing around with styles.\n        curContext.enable(curContext.POLYGON_OFFSET_FILL);\n        curContext.polygonOffset(1, 1);\n\n        uniformf(\"color3d\", programObject3D, \"uColor\", fillStyle);\n\n        if(lightCount > 0){\n          var v = new PMatrix3D();\n          v.set(view);\n\n          var m = new PMatrix3D();\n          m.set(model);\n\n          v.mult(m);\n\n          var normalMatrix = new PMatrix3D();\n          normalMatrix.set(v);\n          normalMatrix.invert();\n          normalMatrix.transpose();\n\n          uniformMatrix(\"uNormalTransform3d\", programObject3D, \"uNormalTransform\", false, normalMatrix.array());\n          vertexAttribPointer(\"aNormal3d\", programObject3D, \"aNormal\", 3, rectNormBuffer);\n        }\n        else{\n          disableVertexAttribPointer(\"normal3d\", programObject3D, \"aNormal\");\n        }\n\n        vertexAttribPointer(\"vertex3d\", programObject3D, \"aVertex\", 3, rectBuffer);\n\n        curContext.drawArrays(curContext.TRIANGLE_FAN, 0, rectVerts.length / 3);\n        curContext.disable(curContext.POLYGON_OFFSET_FILL);\n      }\n    };\n\n    /**\n     * Draws an ellipse (oval) in the display window. An ellipse with an equal <b>width</b> and <b>height</b> is a circle.\n     * The first two parameters set the location, the third sets the width, and the fourth sets the height. The origin may be\n     * changed with the <b>ellipseMode()</b> function.\n     *\n     * @param {float|int} x      x-coordinate of the ellipse\n     * @param {float|int} y      y-coordinate of the ellipse\n     * @param {float|int} width  width of the ellipse\n     * @param {float|int} height height of the ellipse\n     *\n     * @see ellipseMode\n     */\n    Drawing2D.prototype.ellipse = function(x, y, width, height) {\n      x = x || 0;\n      y = y || 0;\n\n      if (width <= 0 && height <= 0) {\n        return;\n      }\n\n      if (curEllipseMode === PConstants.RADIUS) {\n        width *= 2;\n        height *= 2;\n      } else if (curEllipseMode === PConstants.CORNERS) {\n        width = width - x;\n        height = height - y;\n        x += width / 2;\n        y += height / 2;\n      } else if (curEllipseMode === PConstants.CORNER) {\n        x += width / 2;\n        y += height / 2;\n      }\n\n      // Shortcut for drawing a 2D circle\n      if (width === height) {\n        curContext.beginPath();\n        curContext.arc(x, y, width / 2, 0, PConstants.TWO_PI, false);\n        executeContextFill();\n        executeContextStroke();\n      } else {\n        var w = width / 2,\n            h = height / 2,\n            C = 0.5522847498307933,\n            c_x = C * w,\n            c_y = C * h;\n\n        p.beginShape();\n        p.vertex(x + w, y);\n        p.bezierVertex(x + w, y - c_y, x + c_x, y - h, x, y - h);\n        p.bezierVertex(x - c_x, y - h, x - w, y - c_y, x - w, y);\n        p.bezierVertex(x - w, y + c_y, x - c_x, y + h, x, y + h);\n        p.bezierVertex(x + c_x, y + h, x + w, y + c_y, x + w, y);\n        p.endShape();\n      }\n    };\n\n    Drawing3D.prototype.ellipse = function(x, y, width, height) {\n      x = x || 0;\n      y = y || 0;\n\n      if (width <= 0 && height <= 0) {\n        return;\n      }\n\n      if (curEllipseMode === PConstants.RADIUS) {\n        width *= 2;\n        height *= 2;\n      } else if (curEllipseMode === PConstants.CORNERS) {\n        width = width - x;\n        height = height - y;\n        x += width / 2;\n        y += height / 2;\n      } else if (curEllipseMode === PConstants.CORNER) {\n        x += width / 2;\n        y += height / 2;\n      }\n\n      var w = width / 2,\n          h = height / 2,\n          C = 0.5522847498307933,\n          c_x = C * w,\n          c_y = C * h;\n\n      p.beginShape();\n      p.vertex(x + w, y);\n      p.bezierVertex(x + w, y - c_y, 0, x + c_x, y - h, 0, x, y - h, 0);\n      p.bezierVertex(x - c_x, y - h, 0, x - w, y - c_y, 0, x - w, y, 0);\n      p.bezierVertex(x - w, y + c_y, 0, x - c_x, y + h, 0, x, y + h, 0);\n      p.bezierVertex(x + c_x, y + h, 0, x + w, y + c_y, 0, x + w, y, 0);\n      p.endShape();\n\n      if (doFill) {\n        //temporary workaround to not working fills for bezier -- will fix later\n        var xAv = 0, yAv = 0, i, j;\n        for (i = 0; i < vertArray.length; i++) {\n          xAv += vertArray[i][0];\n          yAv += vertArray[i][1];\n        }\n        xAv /= vertArray.length;\n        yAv /= vertArray.length;\n        var vert = [],\n            fillVertArray = [],\n            colorVertArray = [];\n        vert[0] = xAv;\n        vert[1] = yAv;\n        vert[2] = 0;\n        vert[3] = 0;\n        vert[4] = 0;\n        vert[5] = fillStyle[0];\n        vert[6] = fillStyle[1];\n        vert[7] = fillStyle[2];\n        vert[8] = fillStyle[3];\n        vert[9] = strokeStyle[0];\n        vert[10] = strokeStyle[1];\n        vert[11] = strokeStyle[2];\n        vert[12] = strokeStyle[3];\n        vert[13] = normalX;\n        vert[14] = normalY;\n        vert[15] = normalZ;\n        vertArray.unshift(vert);\n        for (i = 0; i < vertArray.length; i++) {\n          for (j = 0; j < 3; j++) {\n            fillVertArray.push(vertArray[i][j]);\n          }\n          for (j = 5; j < 9; j++) {\n            colorVertArray.push(vertArray[i][j]);\n          }\n        }\n        fill3D(fillVertArray, \"TRIANGLE_FAN\", colorVertArray);\n      }\n    };\n\n    /**\n    * Sets the current normal vector. This is for drawing three dimensional shapes and surfaces and\n    * specifies a vector perpendicular to the surface of the shape which determines how lighting affects\n    * it. Processing attempts to automatically assign normals to shapes, but since that's imperfect,\n    * this is a better option when you want more control. This function is identical to glNormal3f() in OpenGL.\n    *\n    * @param {float} nx       x direction\n    * @param {float} ny       y direction\n    * @param {float} nz       z direction\n    *\n    * @see beginShape\n    * @see endShape\n    * @see lights\n    */\n    p.normal = function(nx, ny, nz) {\n      if (arguments.length !== 3 || !(typeof nx === \"number\" && typeof ny === \"number\" && typeof nz === \"number\")) {\n        throw \"normal() requires three numeric arguments.\";\n      }\n\n      normalX = nx;\n      normalY = ny;\n      normalZ = nz;\n\n      if (curShape !== 0) {\n        if (normalMode === PConstants.NORMAL_MODE_AUTO) {\n          normalMode = PConstants.NORMAL_MODE_SHAPE;\n        } else if (normalMode === PConstants.NORMAL_MODE_SHAPE) {\n          normalMode = PConstants.NORMAL_MODE_VERTEX;\n        }\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Raster drawing functions\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n    * Saves an image from the display window. Images are saved in TIFF, TARGA, JPEG, and PNG format\n    * depending on the extension within the filename  parameter. For example, \"image.tif\" will have\n    * a TIFF image and \"image.png\" will save a PNG image. If no extension is included in the filename,\n    * the image will save in TIFF format and .tif will be added to the name. These files are saved to\n    * the sketch's folder, which may be opened by selecting \"Show sketch folder\" from the \"Sketch\" menu.\n    * It is not possible to use save() while running the program in a web browser.  All images saved\n    * from the main drawing window will be opaque. To save images without a background, use createGraphics().\n    *\n    * @param {String} filename      any sequence of letters and numbers\n    *\n    * @see saveFrame\n    * @see createGraphics\n    */\n    p.save = function(file, img) {\n      // file is unused at the moment\n      // may implement this differently in later release\n      if (img !== undef) {\n        return window.open(img.toDataURL(),\"_blank\");\n      }\n      return window.open(p.externals.canvas.toDataURL(),\"_blank\");\n    };\n\n    var saveNumber = 0;\n\n    p.saveFrame = function(file) {\n      if(file === undef) {\n        // use default name template if parameter is not specified\n        file = \"screen-####.png\";\n      }\n      // Increment changeable part: screen-0000.png, screen-0001.png, ...\n      var frameFilename = file.replace(/#+/, function(all) {\n        var s = \"\" + (saveNumber++);\n        while(s.length < all.length) {\n          s = \"0\" + s;\n        }\n        return s;\n      });\n      p.save(frameFilename);\n    };\n\n    var utilityContext2d = document.createElement(\"canvas\").getContext(\"2d\");\n\n    var canvasDataCache = [undef, undef, undef]; // we need three for now\n\n    function getCanvasData(obj, w, h) {\n      var canvasData = canvasDataCache.shift();\n\n      if (canvasData === undef) {\n        canvasData = {};\n        canvasData.canvas = document.createElement(\"canvas\");\n        canvasData.context = canvasData.canvas.getContext('2d');\n      }\n\n      canvasDataCache.push(canvasData);\n\n      var canvas = canvasData.canvas, context = canvasData.context,\n          width = w || obj.width, height = h || obj.height;\n\n      canvas.width = width;\n      canvas.height = height;\n\n      if (!obj) {\n        context.clearRect(0, 0, width, height);\n      } else if (\"data\" in obj) { // ImageData\n        context.putImageData(obj, 0, 0);\n      } else {\n        context.clearRect(0, 0, width, height);\n        context.drawImage(obj, 0, 0, width, height);\n      }\n      return canvasData;\n    }\n\n    /**\n     * Handle the sketch code for pixels[] and pixels.length\n     * parser code converts pixels[] to getPixels()\n     * or setPixels(), .length becomes getLength()\n     */\n    function buildPixelsObject(pImage) {\n      return {\n\n        getLength: (function(aImg) {\n          return function() {\n            if (aImg.isRemote) {\n              throw \"Image is loaded remotely. Cannot get length.\";\n            } else {\n              return aImg.imageData.data.length ? aImg.imageData.data.length/4 : 0;\n            }\n          };\n        }(pImage)),\n\n        getPixel: (function(aImg) {\n          return function(i) {\n            var offset = i*4,\n              data = aImg.imageData.data;\n\n            if (aImg.isRemote) {\n              throw \"Image is loaded remotely. Cannot get pixels.\";\n            }\n\n            return (data[offset+3] << 24) & PConstants.ALPHA_MASK |\n                   (data[offset] << 16) & PConstants.RED_MASK |\n                   (data[offset+1] << 8) & PConstants.GREEN_MASK |\n                   data[offset+2] & PConstants.BLUE_MASK;\n          };\n        }(pImage)),\n\n        setPixel: (function(aImg) {\n          return function(i, c) {\n            var offset = i*4,\n              data = aImg.imageData.data;\n\n            if (aImg.isRemote) {\n              throw \"Image is loaded remotely. Cannot set pixel.\";\n            }\n\n            data[offset+0] = (c & PConstants.RED_MASK) >>> 16;\n            data[offset+1] = (c & PConstants.GREEN_MASK) >>> 8;\n            data[offset+2] = (c & PConstants.BLUE_MASK);\n            data[offset+3] = (c & PConstants.ALPHA_MASK) >>> 24;\n            aImg.__isDirty = true;\n          };\n        }(pImage)),\n\n        toArray: (function(aImg) {\n          return function() {\n            var arr = [],\n              data = aImg.imageData.data,\n              length = aImg.width * aImg.height;\n\n            if (aImg.isRemote) {\n              throw \"Image is loaded remotely. Cannot get pixels.\";\n            }\n\n            for (var i = 0, offset = 0; i < length; i++, offset += 4) {\n              arr.push( (data[offset+3] << 24) & PConstants.ALPHA_MASK |\n                        (data[offset] << 16) & PConstants.RED_MASK |\n                        (data[offset+1] << 8) & PConstants.GREEN_MASK |\n                        data[offset+2] & PConstants.BLUE_MASK );\n            }\n            return arr;\n          };\n        }(pImage)),\n\n        set: (function(aImg) {\n          return function(arr) {\n            var offset,\n              data,\n              c;\n            if (this.isRemote) {\n              throw \"Image is loaded remotely. Cannot set pixels.\";\n            }\n\n            data = aImg.imageData.data;\n            for (var i = 0, aL = arr.length; i < aL; i++) {\n              c = arr[i];\n              offset = i*4;\n\n              data[offset+0] = (c & PConstants.RED_MASK) >>> 16;\n              data[offset+1] = (c & PConstants.GREEN_MASK) >>> 8;\n              data[offset+2] = (c & PConstants.BLUE_MASK);\n              data[offset+3] = (c & PConstants.ALPHA_MASK) >>> 24;\n            }\n            aImg.__isDirty = true;\n          };\n        }(pImage))\n\n      };\n    }\n\n    /**\n    * Datatype for storing images. Processing can display .gif, .jpg, .tga, and .png images. Images may be\n    * displayed in 2D and 3D space. Before an image is used, it must be loaded with the loadImage() function.\n    * The PImage object contains fields for the width and height of the image, as well as an array called\n    * pixels[]  which contains the values for every pixel in the image. A group of methods, described below,\n    * allow easy access to the image's pixels and alpha channel and simplify the process of compositing.\n    * Before using the pixels[] array, be sure to use the loadPixels() method on the image to make sure that the\n    * pixel data is properly loaded. To create a new image, use the createImage() function (do not use new PImage()).\n    *\n    * @param {int} width                image width\n    * @param {int} height               image height\n    * @param {MODE} format              Either RGB, ARGB, ALPHA (grayscale alpha channel)\n    *\n    * @returns {PImage}\n    *\n    * @see loadImage\n    * @see imageMode\n    * @see createImage\n    */\n    var PImage = function(aWidth, aHeight, aFormat) {\n\n      // Keep track of whether or not the cached imageData has been touched.\n      this.__isDirty = false;\n\n      if (aWidth instanceof HTMLImageElement) {\n        // convert an <img> to a PImage\n        this.fromHTMLImageData(aWidth);\n      } else if (aHeight || aFormat) {\n        this.width = aWidth || 1;\n        this.height = aHeight || 1;\n\n        // Stuff a canvas into sourceImg so image() calls can use drawImage like an <img>\n        var canvas = this.sourceImg = document.createElement(\"canvas\");\n        canvas.width = this.width;\n        canvas.height = this.height;\n\n        var imageData = this.imageData = canvas.getContext('2d').createImageData(this.width, this.height);\n        this.format = (aFormat === PConstants.ARGB || aFormat === PConstants.ALPHA) ? aFormat : PConstants.RGB;\n        if (this.format === PConstants.RGB) {\n          // Set the alpha channel of an RGB image to opaque.\n          for (var i = 3, data = this.imageData.data, len = data.length; i < len; i += 4) {\n            data[i] = 255;\n          }\n        }\n\n        this.__isDirty = true;\n        this.updatePixels();\n      } else {\n        this.width = 0;\n        this.height = 0;\n        this.imageData = utilityContext2d.createImageData(1, 1);\n        this.format = PConstants.ARGB;\n      }\n\n      this.pixels = buildPixelsObject(this);\n    };\n    PImage.prototype = {\n\n      /**\n       * Temporary hack to deal with cross-Processing-instance created PImage.  See\n       * tickets #1623 and #1644.\n       */\n      __isPImage: true,\n\n      /**\n      * @member PImage\n      * Updates the image with the data in its pixels[] array. Use in conjunction with loadPixels(). If\n      * you're only reading pixels from the array, there's no need to call updatePixels().\n      * Certain renderers may or may not seem to require loadPixels() or updatePixels(). However, the rule\n      * is that any time you want to manipulate the pixels[] array, you must first call loadPixels(), and\n      * after changes have been made, call updatePixels(). Even if the renderer may not seem to use this\n      * function in the current Processing release, this will always be subject to change.\n      * Currently, none of the renderers use the additional parameters to updatePixels().\n      */\n      updatePixels: function() {\n        var canvas = this.sourceImg;\n        if (canvas && canvas instanceof HTMLCanvasElement && this.__isDirty) {\n          canvas.getContext('2d').putImageData(this.imageData, 0, 0);\n        }\n        this.__isDirty = false;\n      },\n\n      fromHTMLImageData: function(htmlImg) {\n        // convert an <img> to a PImage\n        var canvasData = getCanvasData(htmlImg);\n        try {\n          var imageData = canvasData.context.getImageData(0, 0, htmlImg.width, htmlImg.height);\n          this.fromImageData(imageData);\n        } catch(e) {\n          if (htmlImg.width && htmlImg.height) {\n            this.isRemote = true;\n            this.width = htmlImg.width;\n            this.height = htmlImg.height;\n          }\n        }\n        this.sourceImg = htmlImg;\n      },\n\n      'get': function(x, y, w, h) {\n        if (!arguments.length) {\n          return p.get(this);\n        }\n        if (arguments.length === 2) {\n          return p.get(x, y, this);\n        }\n        if (arguments.length === 4) {\n          return p.get(x, y, w, h, this);\n        }\n      },\n\n      /**\n      * @member PImage\n      * Changes the color of any pixel or writes an image directly into the image. The x and y parameter\n      * specify the pixel or the upper-left corner of the image. The color parameter specifies the color value.\n      * Setting the color of a single pixel with set(x, y) is easy, but not as fast as putting the data\n      * directly into pixels[]. The equivalent statement to \"set(x, y, #000000)\" using pixels[] is\n      * \"pixels[y*width+x] = #000000\". Processing requires calling loadPixels() to load the display window\n      * data into the pixels[] array before getting the values and calling updatePixels() to update the window.\n      *\n      * @param {int} x        x-coordinate of the pixel or upper-left corner of the image\n      * @param {int} y        y-coordinate of the pixel or upper-left corner of the image\n      * @param {color} color  any value of the color datatype\n      *\n      * @see get\n      * @see pixels[]\n      * @see copy\n      */\n      'set': function(x, y, c) {\n        p.set(x, y, c, this);\n        this.__isDirty = true;\n      },\n\n      /**\n      * @member PImage\n      * Blends a region of pixels into the image specified by the img parameter. These copies utilize full\n      * alpha channel support and a choice of the following modes to blend the colors of source pixels (A)\n      * with the ones of pixels in the destination image (B):\n      * BLEND - linear interpolation of colours: C = A*factor + B\n      * ADD - additive blending with white clip: C = min(A*factor + B, 255)\n      * SUBTRACT - subtractive blending with black clip: C = max(B - A*factor, 0)\n      * DARKEST - only the darkest colour succeeds: C = min(A*factor, B)\n      * LIGHTEST - only the lightest colour succeeds: C = max(A*factor, B)\n      * DIFFERENCE - subtract colors from underlying image.\n      * EXCLUSION - similar to DIFFERENCE, but less extreme.\n      * MULTIPLY - Multiply the colors, result will always be darker.\n      * SCREEN - Opposite multiply, uses inverse values of the colors.\n      * OVERLAY - A mix of MULTIPLY and SCREEN. Multiplies dark values, and screens light values.\n      * HARD_LIGHT - SCREEN when greater than 50% gray, MULTIPLY when lower.\n      * SOFT_LIGHT - Mix of DARKEST and LIGHTEST. Works like OVERLAY, but not as harsh.\n      * DODGE - Lightens light tones and increases contrast, ignores darks. Called \"Color Dodge\" in Illustrator and Photoshop.\n      * BURN - Darker areas are applied, increasing contrast, ignores lights. Called \"Color Burn\" in Illustrator and Photoshop.\n      * All modes use the alpha information (highest byte) of source image pixels as the blending factor.\n      * If the source and destination regions are different sizes, the image will be automatically resized to\n      * match the destination size. If the srcImg parameter is not used, the display window is used as the source image.\n      * This function ignores imageMode().\n      *\n      * @param {int} x              X coordinate of the source's upper left corner\n      * @param {int} y              Y coordinate of the source's upper left corner\n      * @param {int} width          source image width\n      * @param {int} height         source image height\n      * @param {int} dx             X coordinate of the destinations's upper left corner\n      * @param {int} dy             Y coordinate of the destinations's upper left corner\n      * @param {int} dwidth         destination image width\n      * @param {int} dheight        destination image height\n      * @param {PImage} srcImg      an image variable referring to the source image\n      * @param {MODE} MODE          Either BLEND, ADD, SUBTRACT, LIGHTEST, DARKEST, DIFFERENCE, EXCLUSION,\n      * MULTIPLY, SCREEN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, BURN\n      *\n      * @see alpha\n      * @see copy\n      */\n      blend: function(srcImg, x, y, width, height, dx, dy, dwidth, dheight, MODE) {\n        if (arguments.length === 9) {\n          p.blend(this, srcImg, x, y, width, height, dx, dy, dwidth, dheight, this);\n        } else if (arguments.length === 10) {\n          p.blend(srcImg, x, y, width, height, dx, dy, dwidth, dheight, MODE, this);\n        }\n        delete this.sourceImg;\n      },\n\n      /**\n      * @member PImage\n      * Copies a region of pixels from one image into another. If the source and destination regions\n      * aren't the same size, it will automatically resize source pixels to fit the specified target region.\n      * No alpha information is used in the process, however if the source image has an alpha channel set,\n      * it will be copied as well. This function ignores imageMode().\n      *\n      * @param {int} sx             X coordinate of the source's upper left corner\n      * @param {int} sy             Y coordinate of the source's upper left corner\n      * @param {int} swidth         source image width\n      * @param {int} sheight        source image height\n      * @param {int} dx             X coordinate of the destinations's upper left corner\n      * @param {int} dy             Y coordinate of the destinations's upper left corner\n      * @param {int} dwidth         destination image width\n      * @param {int} dheight        destination image height\n      * @param {PImage} srcImg      an image variable referring to the source image\n      *\n      * @see alpha\n      * @see blend\n      */\n      copy: function(srcImg, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        if (arguments.length === 8) {\n          p.blend(this, srcImg, sx, sy, swidth, sheight, dx, dy, dwidth, PConstants.REPLACE, this);\n        } else if (arguments.length === 9) {\n          p.blend(srcImg, sx, sy, swidth, sheight, dx, dy, dwidth, dheight, PConstants.REPLACE, this);\n        }\n        delete this.sourceImg;\n      },\n\n      /**\n      * @member PImage\n      * Filters an image as defined by one of the following modes:\n      * THRESHOLD - converts the image to black and white pixels depending if they are above or below\n      * the threshold defined by the level parameter. The level must be between 0.0 (black) and 1.0(white).\n      * If no level is specified, 0.5 is used.\n      * GRAY - converts any colors in the image to grayscale equivalents\n      * INVERT - sets each pixel to its inverse value\n      * POSTERIZE - limits each channel of the image to the number of colors specified as the level parameter\n      * BLUR - executes a Guassian blur with the level parameter specifying the extent of the blurring.\n      * If no level parameter is used, the blur is equivalent to Guassian blur of radius 1.\n      * OPAQUE - sets the alpha channel to entirely opaque.\n      * ERODE - reduces the light areas with the amount defined by the level parameter.\n      * DILATE - increases the light areas with the amount defined by the level parameter\n      *\n      * @param {MODE} MODE        Either THRESHOLD, GRAY, INVERT, POSTERIZE, BLUR, OPAQUE, ERODE, or DILATE\n      * @param {int|float} param  in the range from 0 to 1\n      */\n      filter: function(mode, param) {\n        if (arguments.length === 2) {\n          p.filter(mode, param, this);\n        } else if (arguments.length === 1) {\n          // no param specified, send null to show its invalid\n          p.filter(mode, null, this);\n        }\n        delete this.sourceImg;\n      },\n\n      /**\n      * @member PImage\n      * Saves the image into a file. Images are saved in TIFF, TARGA, JPEG, and PNG format depending on\n      * the extension within the filename  parameter. For example, \"image.tif\" will have a TIFF image and\n      * \"image.png\" will save a PNG image. If no extension is included in the filename, the image will save\n      * in TIFF format and .tif will be added to the name. These files are saved to the sketch's folder,\n      * which may be opened by selecting \"Show sketch folder\" from the \"Sketch\" menu. It is not possible to\n      * use save() while running the program in a web browser.\n      * To save an image created within the code, rather than through loading, it's necessary to make the\n      * image with the createImage() function so it is aware of the location of the program and can therefore\n      * save the file to the right place. See the createImage() reference for more information.\n      *\n      * @param {String} filename        a sequence of letters and numbers\n      */\n      save: function(file){\n        p.save(file,this);\n      },\n\n      /**\n      * @member PImage\n      * Resize the image to a new width and height. To make the image scale proportionally, use 0 as the\n      * value for the wide or high parameter.\n      *\n      * @param {int} wide         the resized image width\n      * @param {int} high         the resized image height\n      *\n      * @see get\n      */\n      resize: function(w, h) {\n        if (this.isRemote) { // Remote images cannot access imageData\n          throw \"Image is loaded remotely. Cannot resize.\";\n        }\n        if (this.width !== 0 || this.height !== 0) {\n          // make aspect ratio if w or h is 0\n          if (w === 0 && h !== 0) {\n            w = Math.floor(this.width / this.height * h);\n          } else if (h === 0 && w !== 0) {\n            h = Math.floor(this.height / this.width * w);\n          }\n          // put 'this.imageData' into a new canvas\n          var canvas = getCanvasData(this.imageData).canvas;\n          // pull imageData object out of canvas into ImageData object\n          var imageData = getCanvasData(canvas, w, h).context.getImageData(0, 0, w, h);\n          // set this as new pimage\n          this.fromImageData(imageData);\n        }\n      },\n\n      /**\n      * @member PImage\n      * Masks part of an image from displaying by loading another image and using it as an alpha channel.\n      * This mask image should only contain grayscale data, but only the blue color channel is used. The\n      * mask image needs to be the same size as the image to which it is applied.\n      * In addition to using a mask image, an integer array containing the alpha channel data can be\n      * specified directly. This method is useful for creating dynamically generated alpha masks. This\n      * array must be of the same length as the target image's pixels array and should contain only grayscale\n      * data of values between 0-255.\n      *\n      * @param {PImage} maskImg         any PImage object used as the alpha channel for \"img\", needs to be same\n      *                                 size as \"img\"\n      * @param {int[]} maskArray        any array of Integer numbers used as the alpha channel, needs to be same\n      *                                 length as the image's pixel array\n      */\n      mask: function(mask) {\n        var obj = this.toImageData(),\n            i,\n            size;\n\n        if (mask instanceof PImage || mask.__isPImage) {\n          if (mask.width === this.width && mask.height === this.height) {\n            mask = mask.toImageData();\n\n            for (i = 2, size = this.width * this.height * 4; i < size; i += 4) {\n              // using it as an alpha channel\n              obj.data[i + 1] = mask.data[i];\n              // but only the blue color channel\n            }\n          } else {\n            throw \"mask must have the same dimensions as PImage.\";\n          }\n        } else if (mask instanceof Array) {\n          if (this.width * this.height === mask.length) {\n            for (i = 0, size = mask.length; i < size; ++i) {\n              obj.data[i * 4 + 3] = mask[i];\n            }\n          } else {\n            throw \"mask array must be the same length as PImage pixels array.\";\n          }\n        }\n\n        this.fromImageData(obj);\n      },\n\n      // These are intentionally left blank for PImages, we work live with pixels and draw as necessary\n      /**\n      * @member PImage\n      * Loads the pixel data for the image into its pixels[] array. This function must always be called\n      * before reading from or writing to pixels[].\n      * Certain renderers may or may not seem to require loadPixels() or updatePixels(). However, the\n      * rule is that any time you want to manipulate the pixels[] array, you must first call loadPixels(),\n      * and after changes have been made, call updatePixels(). Even if the renderer may not seem to use\n      * this function in the current Processing release, this will always be subject to change.\n      */\n      loadPixels: noop,\n\n      toImageData: function() {\n        if (this.isRemote) {\n          return this.sourceImg;\n        }\n\n        if (!this.__isDirty) {\n          return this.imageData;\n        }\n\n        var canvasData = getCanvasData(this.sourceImg);\n        return canvasData.context.getImageData(0, 0, this.width, this.height);\n      },\n\n      toDataURL: function() {\n        if (this.isRemote) { // Remote images cannot access imageData\n          throw \"Image is loaded remotely. Cannot create dataURI.\";\n        }\n        var canvasData = getCanvasData(this.imageData);\n        return canvasData.canvas.toDataURL();\n      },\n\n      fromImageData: function(canvasImg) {\n        var w = canvasImg.width,\n          h = canvasImg.height,\n          canvas = document.createElement('canvas'),\n          ctx = canvas.getContext('2d');\n\n        this.width = canvas.width = w;\n        this.height = canvas.height = h;\n\n        ctx.putImageData(canvasImg, 0, 0);\n\n        // changed for 0.9\n        this.format = PConstants.ARGB;\n\n        this.imageData = canvasImg;\n        this.sourceImg = canvas;\n      }\n    };\n\n    p.PImage = PImage;\n\n    /**\n    * Creates a new PImage (the datatype for storing images). This provides a fresh buffer of pixels to play\n    * with. Set the size of the buffer with the width and height parameters. The format parameter defines how\n    * the pixels are stored. See the PImage reference for more information.\n    * Be sure to include all three parameters, specifying only the width and height (but no format) will\n    * produce a strange error.\n    * Advanced users please note that createImage() should be used instead of the syntax new PImage().\n    *\n    * @param {int} width                image width\n    * @param {int} height               image height\n    * @param {MODE} format              Either RGB, ARGB, ALPHA (grayscale alpha channel)\n    *\n    * @returns {PImage}\n    *\n    * @see PImage\n    * @see PGraphics\n    */\n    p.createImage = function(w, h, mode) {\n      return new PImage(w,h,mode);\n    };\n\n    // Loads an image for display. Type is an extension. Callback is fired on load.\n    /**\n    * Loads an image into a variable of type PImage. Four types of images ( .gif, .jpg, .tga, .png) images may\n    * be loaded. To load correctly, images must be located in the data directory of the current sketch. In most\n    * cases, load all images in setup() to preload them at the start of the program. Loading images inside draw()\n    * will reduce the speed of a program.\n    * The filename parameter can also be a URL to a file found online. For security reasons, a Processing sketch\n    * found online can only download files from the same server from which it came. Getting around this restriction\n    * requires a signed applet.\n    * The extension parameter is used to determine the image type in cases where the image filename does not end\n    * with a proper extension. Specify the extension as the second parameter to loadImage(), as shown in the\n    * third example on this page.\n    * If an image is not loaded successfully, the null value is returned and an error message will be printed to\n    * the console. The error message does not halt the program, however the null value may cause a NullPointerException\n    * if your code does not check whether the value returned from loadImage() is null.\n    * Depending on the type of error, a PImage object may still be returned, but the width and height of the image\n    * will be set to -1. This happens if bad image data is returned or cannot be decoded properly. Sometimes this happens\n    * with image URLs that produce a 403 error or that redirect to a password prompt, because loadImage() will attempt\n    * to interpret the HTML as image data.\n    *\n    * @param {String} filename        name of file to load, can be .gif, .jpg, .tga, or a handful of other image\n    *                                 types depending on your platform.\n    * @param {String} extension       the type of image to load, for example \"png\", \"gif\", \"jpg\"\n    *\n    * @returns {PImage}\n    *\n    * @see PImage\n    * @see image\n    * @see imageMode\n    * @see background\n    */\n    p.loadImage = function(file, type, callback) {\n      // if type is specified, we just ignore it\n\n      var pimg;\n      // if image is in the preloader cache return a new PImage\n      if (curSketch.imageCache.images[file]) {\n        pimg = new PImage(curSketch.imageCache.images[file]);\n        pimg.loaded = true;\n        return pimg;\n      }\n      // else async load it\n      pimg = new PImage();\n      var img = document.createElement('img');\n\n      pimg.sourceImg = img;\n\n      img.onload = (function(aImage, aPImage, aCallback) {\n        var image = aImage;\n        var pimg = aPImage;\n        var callback = aCallback;\n        return function() {\n          // change the <img> object into a PImage now that its loaded\n          pimg.fromHTMLImageData(image);\n          pimg.loaded = true;\n          if (callback) {\n            callback();\n          }\n        };\n      }(img, pimg, callback));\n\n      img.src = file; // needs to be called after the img.onload function is declared or it wont work in opera\n      return pimg;\n    };\n\n    // async loading of large images, same functionality as loadImage above\n    /**\n    * This function load images on a separate thread so that your sketch does not freeze while images load during\n    * setup(). While the image is loading, its width and height will be 0. If an error occurs while loading the image,\n    * its width and height will be set to -1. You'll know when the image has loaded properly because its width and\n    * height will be greater than 0. Asynchronous image loading (particularly when downloading from a server) can\n    * dramatically improve performance.\n    * The extension parameter is used to determine the image type in cases where the image filename does not end\n    * with a proper extension. Specify the extension as the second parameter to requestImage().\n    *\n    * @param {String} filename        name of file to load, can be .gif, .jpg, .tga, or a handful of other image\n    *                                 types depending on your platform.\n    * @param {String} extension       the type of image to load, for example \"png\", \"gif\", \"jpg\"\n    *\n    * @returns {PImage}\n    *\n    * @see PImage\n    * @see loadImage\n    */\n    p.requestImage = p.loadImage;\n\n    function get$2(x,y) {\n      var data;\n      // return the color at x,y (int) of curContext\n      if (x >= p.width || x < 0 || y < 0 || y >= p.height) {\n        // x,y is outside image return transparent black\n        return 0;\n      }\n\n      // loadPixels() has been called\n      if (isContextReplaced) {\n        var offset = ((0|x) + p.width * (0|y)) * 4;\n        data = p.imageData.data;\n        return (data[offset + 3] << 24) & PConstants.ALPHA_MASK |\n               (data[offset] << 16) & PConstants.RED_MASK |\n               (data[offset + 1] << 8) & PConstants.GREEN_MASK |\n               data[offset + 2] & PConstants.BLUE_MASK;\n      }\n\n      // x,y is inside canvas space\n      data = p.toImageData(0|x, 0|y, 1, 1).data;\n      return (data[3] << 24) & PConstants.ALPHA_MASK |\n             (data[0] << 16) & PConstants.RED_MASK |\n             (data[1] << 8) & PConstants.GREEN_MASK |\n             data[2] & PConstants.BLUE_MASK;\n    }\n    function get$3(x,y,img) {\n      if (img.isRemote) { // Remote images cannot access imageData\n        throw \"Image is loaded remotely. Cannot get x,y.\";\n      }\n      // PImage.get(x,y) was called, return the color (int) at x,y of img\n      var offset = y * img.width * 4 + (x * 4),\n          data = img.imageData.data;\n      return (data[offset + 3] << 24) & PConstants.ALPHA_MASK |\n             (data[offset] << 16) & PConstants.RED_MASK |\n             (data[offset + 1] << 8) & PConstants.GREEN_MASK |\n             data[offset + 2] & PConstants.BLUE_MASK;\n    }\n    function get$4(x, y, w, h) {\n      // return a PImage of w and h from cood x,y of curContext\n      var c = new PImage(w, h, PConstants.ARGB);\n      c.fromImageData(p.toImageData(x, y, w, h));\n      return c;\n    }\n    function get$5(x, y, w, h, img) {\n      if (img.isRemote) { // Remote images cannot access imageData\n        throw \"Image is loaded remotely. Cannot get x,y,w,h.\";\n      }\n      // PImage.get(x,y,w,h) was called, return x,y,w,h PImage of img\n      // offset start point needs to be *4\n      var c = new PImage(w, h, PConstants.ARGB), cData = c.imageData.data,\n        imgWidth = img.width, imgHeight = img.height, imgData = img.imageData.data;\n      // Don't need to copy pixels from the image outside ranges.\n      var startRow = Math.max(0, -y), startColumn = Math.max(0, -x),\n        stopRow = Math.min(h, imgHeight - y), stopColumn = Math.min(w, imgWidth - x);\n      for (var i = startRow; i < stopRow; ++i) {\n        var sourceOffset = ((y + i) * imgWidth + (x + startColumn)) * 4;\n        var targetOffset = (i * w + startColumn) * 4;\n        for (var j = startColumn; j < stopColumn; ++j) {\n          cData[targetOffset++] = imgData[sourceOffset++];\n          cData[targetOffset++] = imgData[sourceOffset++];\n          cData[targetOffset++] = imgData[sourceOffset++];\n          cData[targetOffset++] = imgData[sourceOffset++];\n        }\n      }\n      c.__isDirty = true;\n      return c;\n    }\n\n    // Gets a single pixel or block of pixels from the current Canvas Context or a PImage\n    /**\n    * Reads the color of any pixel or grabs a section of an image. If no parameters are specified, the entire\n    * image is returned. Get the value of one pixel by specifying an x,y coordinate. Get a section of the display\n    * window by specifying an additional width and height parameter. If the pixel requested is outside of the image\n    * window, black is returned. The numbers returned are scaled according to the current color ranges, but only RGB\n    * values are returned by this function. For example, even though you may have drawn a shape with colorMode(HSB),\n    * the numbers returned will be in RGB.\n    * Getting the color of a single pixel with get(x, y) is easy, but not as fast as grabbing the data directly\n    * from pixels[]. The equivalent statement to \"get(x, y)\" using pixels[] is \"pixels[y*width+x]\". Processing\n    * requires calling loadPixels() to load the display window data into the pixels[] array before getting the values.\n    * This function ignores imageMode().\n    *\n    * @param {int} x            x-coordinate of the pixel\n    * @param {int} y            y-coordinate of the pixel\n    * @param {int} width        width of pixel rectangle to get\n    * @param {int} height       height of pixel rectangle to get\n    *\n    * @returns {Color|PImage}\n    *\n    * @see set\n    * @see pixels[]\n    * @see imageMode\n    */\n    p.get = function(x, y, w, h, img) {\n      // for 0 2 and 4 arguments use curContext, otherwise PImage.get was called\n      if (img !== undefined) {\n        return get$5(x, y, w, h, img);\n      }\n      if (h !== undefined) {\n        return get$4(x, y, w, h);\n      }\n      if (w !== undefined) {\n        return get$3(x, y, w);\n      }\n      if (y !== undefined) {\n        return get$2(x, y);\n      }\n      if (x !== undefined) {\n        // PImage.get() was called, return a new PImage\n        return get$5(0, 0, x.width, x.height, x);\n      }\n\n      return get$4(0, 0, p.width, p.height);\n    };\n\n    /**\n     * Creates and returns a new <b>PGraphics</b> object of the types P2D, P3D, and JAVA2D. Use this class if you need to draw\n     * into an off-screen graphics buffer. It's not possible to use <b>createGraphics()</b> with OPENGL, because it doesn't\n     * allow offscreen use. The DXF and PDF renderers require the filename parameter. <br /><br /> It's important to call\n     * any drawing commands between beginDraw() and endDraw() statements. This is also true for any commands that affect\n     * drawing, such as smooth() or colorMode().<br /><br /> Unlike the main drawing surface which is completely opaque,\n     * surfaces created with createGraphics() can have transparency. This makes it possible to draw into a graphics and\n     * maintain the alpha channel.\n     *\n     * @param {int} width       width in pixels\n     * @param {int} height      height in pixels\n     * @param {int} renderer    Either P2D, P3D, JAVA2D, PDF, DXF\n     * @param {String} filename the name of the file (not supported yet)\n     */\n    p.createGraphics = function(w, h, render) {\n      var pg = new Processing();\n      pg.size(w, h, render);\n      pg.background(0,0);\n      return pg;\n    };\n\n    // pixels caching\n    function resetContext() {\n      if(isContextReplaced) {\n        curContext = originalContext;\n        isContextReplaced = false;\n\n        p.updatePixels();\n      }\n    }\n    function SetPixelContextWrapper() {\n      function wrapFunction(newContext, name) {\n        function wrapper() {\n          resetContext();\n          curContext[name].apply(curContext, arguments);\n        }\n        newContext[name] = wrapper;\n      }\n      function wrapProperty(newContext, name) {\n        function getter() {\n          resetContext();\n          return curContext[name];\n        }\n        function setter(value) {\n          resetContext();\n          curContext[name] = value;\n        }\n        p.defineProperty(newContext, name, { get: getter, set: setter });\n      }\n      for(var n in curContext) {\n        if(typeof curContext[n] === 'function') {\n          wrapFunction(this, n);\n        } else {\n          wrapProperty(this, n);\n        }\n      }\n    }\n    function replaceContext() {\n      if(isContextReplaced) {\n        return;\n      }\n      p.loadPixels();\n      if(proxyContext === null) {\n        originalContext = curContext;\n        proxyContext = new SetPixelContextWrapper();\n      }\n      isContextReplaced = true;\n      curContext = proxyContext;\n      setPixelsCached = 0;\n    }\n\n    function set$3(x, y, c) {\n      if (x < p.width && x >= 0 && y >= 0 && y < p.height) {\n        replaceContext();\n        p.pixels.setPixel((0|x)+p.width*(0|y), c);\n        if(++setPixelsCached > maxPixelsCached) {\n          resetContext();\n        }\n      }\n    }\n    function set$4(x, y, obj, img) {\n      if (img.isRemote) { // Remote images cannot access imageData\n        throw \"Image is loaded remotely. Cannot set x,y.\";\n      }\n      var c = p.color.toArray(obj);\n      var offset = y * img.width * 4 + (x*4);\n      var data = img.imageData.data;\n      data[offset] = c[0];\n      data[offset+1] = c[1];\n      data[offset+2] = c[2];\n      data[offset+3] = c[3];\n    }\n\n    // Paints a pixel array into the canvas\n    /**\n    * Changes the color of any pixel or writes an image directly into the display window. The x and y parameters\n    * specify the pixel to change and the color  parameter specifies the color value. The color parameter is affected\n    * by the current color mode (the default is RGB values from 0 to 255). When setting an image, the x and y\n    * parameters define the coordinates for the upper-left corner of the image.\n    * Setting the color of a single pixel with set(x, y) is easy, but not as fast as putting the data directly\n    * into pixels[]. The equivalent statement to \"set(x, y, #000000)\" using pixels[] is \"pixels[y*width+x] = #000000\".\n    * You must call loadPixels() to load the display window data into the pixels[] array before setting the values\n    * and calling updatePixels() to update the window with any changes. This function ignores imageMode().\n    *\n    * @param {int} x            x-coordinate of the pixel\n    * @param {int} y            y-coordinate of the pixel\n    * @param {Color} obj        any value of the color datatype\n    * @param {PImage} img       any valid variable of type PImage\n    *\n    * @see get\n    * @see pixels[]\n    * @see imageMode\n    */\n    p.set = function(x, y, obj, img) {\n      var color, oldFill;\n      if (arguments.length === 3) {\n        // called p.set(), was it with a color or a img ?\n        if (typeof obj === \"number\") {\n          set$3(x, y, obj);\n        } else if (obj instanceof PImage || obj.__isPImage) {\n          p.image(obj, x, y);\n        }\n      } else if (arguments.length === 4) {\n        // PImage.set(x,y,c) was called, set coordinate x,y color to c of img\n        set$4(x, y, obj, img);\n      }\n    };\n    p.imageData = {};\n\n    // handle the sketch code for pixels[]\n    // parser code converts pixels[] to getPixels() or setPixels(),\n    // .length becomes getLength()\n    /**\n    * Array containing the values for all the pixels in the display window. These values are of the color datatype.\n    * This array is the size of the display window. For example, if the image is 100x100 pixels, there will be 10000\n    * values and if the window is 200x300 pixels, there will be 60000 values. The index value defines the position\n    * of a value within the array. For example, the statment color b = pixels[230] will set the variable b to be\n    * equal to the value at that location in the array.\n    * Before accessing this array, the data must loaded with the loadPixels() function. After the array data has\n    * been modified, the updatePixels() function must be run to update the changes.\n    *\n    * @param {int} index      must not exceed the size of the array\n    *\n    * @see loadPixels\n    * @see updatePixels\n    * @see get\n    * @see set\n    * @see PImage\n    */\n    p.pixels = {\n      getLength: function() { return p.imageData.data.length ? p.imageData.data.length/4 : 0; },\n      getPixel: function(i) {\n        var offset = i*4, data = p.imageData.data;\n        return (data[offset+3] << 24) & 0xff000000 |\n               (data[offset+0] << 16) & 0x00ff0000 |\n               (data[offset+1] << 8) & 0x0000ff00 |\n               data[offset+2] & 0x000000ff;\n      },\n      setPixel: function(i,c) {\n        var offset = i*4, data = p.imageData.data;\n        data[offset+0] = (c & 0x00ff0000) >>> 16; // RED_MASK\n        data[offset+1] = (c & 0x0000ff00) >>> 8;  // GREEN_MASK\n        data[offset+2] = (c & 0x000000ff);        // BLUE_MASK\n        data[offset+3] = (c & 0xff000000) >>> 24; // ALPHA_MASK\n      },\n      toArray: function() {\n        var arr = [], length = p.imageData.width * p.imageData.height, data = p.imageData.data;\n        for (var i = 0, offset = 0; i < length; i++, offset += 4) {\n          arr.push((data[offset+3] << 24) & 0xff000000 |\n                   (data[offset+0] << 16) & 0x00ff0000 |\n                   (data[offset+1] << 8) & 0x0000ff00 |\n                   data[offset+2] & 0x000000ff);\n        }\n        return arr;\n      },\n      set: function(arr) {\n        for (var i = 0, aL = arr.length; i < aL; i++) {\n          this.setPixel(i, arr[i]);\n        }\n      }\n    };\n\n    // Gets a 1-Dimensional pixel array from Canvas\n    /**\n    * Loads the pixel data for the display window into the pixels[] array. This function must always be called\n    * before reading from or writing to pixels[].\n    * Certain renderers may or may not seem to require loadPixels() or updatePixels(). However, the rule is that\n    * any time you want to manipulate the pixels[] array, you must first call loadPixels(), and after changes\n    * have been made, call updatePixels(). Even if the renderer may not seem to use this function in the current\n    * Processing release, this will always be subject to change.\n    *\n    * @see pixels[]\n    * @see updatePixels\n    */\n    p.loadPixels = function() {\n      p.imageData = drawing.$ensureContext().getImageData(0, 0, p.width, p.height);\n    };\n\n    // Draws a 1-Dimensional pixel array to Canvas\n    /**\n    * Updates the display window with the data in the pixels[] array. Use in conjunction with loadPixels(). If\n    * you're only reading pixels from the array, there's no need to call updatePixels() unless there are changes.\n    * Certain renderers may or may not seem to require loadPixels() or updatePixels(). However, the rule is that\n    * any time you want to manipulate the pixels[] array, you must first call loadPixels(), and after changes\n    * have been made, call updatePixels(). Even if the renderer may not seem to use this function in the current\n    * Processing release, this will always be subject to change.\n    * Currently, none of the renderers use the additional parameters to updatePixels(), however this may be\n    * implemented in the future.\n    *\n    * @see loadPixels\n    * @see pixels[]\n    */\n    p.updatePixels = function() {\n      if (p.imageData) {\n        drawing.$ensureContext().putImageData(p.imageData, 0, 0);\n      }\n    };\n\n    /**\n    * Set various hints and hacks for the renderer. This is used to handle obscure rendering features that cannot be\n    * implemented in a consistent manner across renderers. Many options will often graduate to standard features\n    * instead of hints over time.\n    * hint(ENABLE_OPENGL_4X_SMOOTH) - Enable 4x anti-aliasing for OpenGL. This can help force anti-aliasing if\n    * it has not been enabled by the user. On some graphics cards, this can also be set by the graphics driver's\n    * control panel, however not all cards make this available. This hint must be called immediately after the\n    * size() command because it resets the renderer, obliterating any settings and anything drawn (and like size(),\n    * re-running the code that came before it again).\n    * hint(DISABLE_OPENGL_2X_SMOOTH) - In Processing 1.0, Processing always enables 2x smoothing when the OpenGL\n    * renderer is used. This hint disables the default 2x smoothing and returns the smoothing behavior found in\n    * earlier releases, where smooth() and noSmooth() could be used to enable and disable smoothing, though the\n    * quality was inferior.\n    * hint(ENABLE_NATIVE_FONTS) - Use the native version fonts when they are installed, rather than the bitmapped\n    * version from a .vlw file. This is useful with the JAVA2D renderer setting, as it will improve font rendering\n    * speed. This is not enabled by default, because it can be misleading while testing because the type will look\n    * great on your machine (because you have the font installed) but lousy on others' machines if the identical\n    * font is unavailable. This option can only be set per-sketch, and must be called before any use of textFont().\n    * hint(DISABLE_DEPTH_TEST) - Disable the zbuffer, allowing you to draw on top of everything at will. When depth\n    * testing is disabled, items will be drawn to the screen sequentially, like a painting. This hint is most often\n    * used to draw in 3D, then draw in 2D on top of it (for instance, to draw GUI controls in 2D on top of a 3D\n    * interface). Starting in release 0149, this will also clear the depth buffer. Restore the default with\n    * hint(ENABLE_DEPTH_TEST), but note that with the depth buffer cleared, any 3D drawing that happens later in\n    * draw() will ignore existing shapes on the screen.\n    * hint(ENABLE_DEPTH_SORT) - Enable primitive z-sorting of triangles and lines in P3D and OPENGL. This can slow\n    * performance considerably, and the algorithm is not yet perfect. Restore the default with hint(DISABLE_DEPTH_SORT).\n    * hint(DISABLE_OPENGL_ERROR_REPORT) - Speeds up the OPENGL renderer setting by not checking for errors while\n    * running. Undo with hint(ENABLE_OPENGL_ERROR_REPORT).\n    * As of release 0149, unhint() has been removed in favor of adding additional ENABLE/DISABLE constants to reset\n    * the default behavior. This prevents the double negatives, and also reinforces which hints can be enabled or disabled.\n    *\n    * @param {MODE} item          constant: name of the hint to be enabled or disabled\n    *\n    * @see PGraphics\n    * @see createGraphics\n    * @see size\n    */\n    p.hint = function(which) {\n      var curContext = drawing.$ensureContext();\n      if (which === PConstants.DISABLE_DEPTH_TEST) {\n         curContext.disable(curContext.DEPTH_TEST);\n         curContext.depthMask(false);\n         curContext.clear(curContext.DEPTH_BUFFER_BIT);\n      }\n      else if (which === PConstants.ENABLE_DEPTH_TEST) {\n         curContext.enable(curContext.DEPTH_TEST);\n         curContext.depthMask(true);\n      }\n      else if (which === PConstants.ENABLE_OPENGL_2X_SMOOTH ||\n               which === PConstants.ENABLE_OPENGL_4X_SMOOTH){\n        renderSmooth = true;\n      }\n      else if (which === PConstants.DISABLE_OPENGL_2X_SMOOTH){\n        renderSmooth = false;\n      }\n    };\n\n    /**\n     * The background() function sets the color used for the background of the Processing window.\n     * The default background is light gray. In the <b>draw()</b> function, the background color is used to clear the display window at the beginning of each frame.\n     * An image can also be used as the background for a sketch, however its width and height must be the same size as the sketch window.\n     * To resize an image 'b' to the size of the sketch window, use b.resize(width, height).\n     * Images used as background will ignore the current <b>tint()</b> setting.\n     * For the main drawing surface, the alpha value will be ignored. However,\n     * alpha can be used on PGraphics objects from <b>createGraphics()</b>. This is\n     * the only way to set all the pixels partially transparent, for instance.\n     * If the 'gray' parameter is passed in the function sets the background to a grayscale value, based on the\n     * current colorMode.\n     * <p>\n     * Note that background() should be called before any transformations occur,\n     * because some implementations may require the current transformation matrix\n     * to be identity before drawing.\n     *\n     * @param {int|float} gray    specifies a value between white and black\n     * @param {int|float} value1  red or hue value (depending on the current color mode)\n     * @param {int|float} value2  green or saturation value (depending on the current color mode)\n     * @param {int|float} value3  blue or brightness value (depending on the current color mode)\n     * @param {int|float} alpha   opacity of the background\n     * @param {Color} color       any value of the color datatype\n     * @param {int} hex           color value in hexadecimal notation (i.e. #FFCC00 or 0xFFFFCC00)\n     * @param {PImage} image      an instance of a PImage to use as a background\n     *\n     * @see #stroke()\n     * @see #fill()\n     * @see #tint()\n     * @see #colorMode()\n     */\n    var backgroundHelper = function(arg1, arg2, arg3, arg4) {\n      var obj;\n\n      if (arg1 instanceof PImage || arg1.__isPImage) {\n        obj = arg1;\n\n        if (!obj.loaded) {\n          throw \"Error using image in background(): PImage not loaded.\";\n        }\n        if(obj.width !== p.width || obj.height !== p.height){\n          throw \"Background image must be the same dimensions as the canvas.\";\n        }\n      } else {\n        obj = p.color(arg1, arg2, arg3, arg4);\n      }\n\n      backgroundObj = obj;\n    };\n\n    Drawing2D.prototype.background = function(arg1, arg2, arg3, arg4) {\n      if (arg1 !== undef) {\n        backgroundHelper(arg1, arg2, arg3, arg4);\n      }\n\n      if (backgroundObj instanceof PImage || backgroundObj.__isPImage) {\n        saveContext();\n        curContext.setTransform(1, 0, 0, 1, 0, 0);\n        p.image(backgroundObj, 0, 0);\n        restoreContext();\n      } else {\n        saveContext();\n        curContext.setTransform(1, 0, 0, 1, 0, 0);\n\n        // If the background is transparent\n        if (p.alpha(backgroundObj) !== colorModeA) {\n          curContext.clearRect(0,0, p.width, p.height);\n        }\n        curContext.fillStyle = p.color.toString(backgroundObj);\n        curContext.fillRect(0, 0, p.width, p.height);\n        isFillDirty = true;\n        restoreContext();\n      }\n    };\n\n    Drawing3D.prototype.background = function(arg1, arg2, arg3, arg4) {\n      if (arguments.length > 0) {\n        backgroundHelper(arg1, arg2, arg3, arg4);\n      }\n\n      var c = p.color.toGLArray(backgroundObj);\n      curContext.clearColor(c[0], c[1], c[2], c[3]);\n      curContext.clear(curContext.COLOR_BUFFER_BIT | curContext.DEPTH_BUFFER_BIT);\n\n      // An image as a background in 3D is not implemented yet\n    };\n\n    // Draws an image to the Canvas\n    /**\n    * Displays images to the screen. The images must be in the sketch's \"data\" directory to load correctly. Select \"Add\n    * file...\" from the \"Sketch\" menu to add the image. Processing currently works with GIF, JPEG, and Targa images. The\n    * color of an image may be modified with the tint() function and if a GIF has transparency, it will maintain its\n    * transparency. The img parameter specifies the image to display and the x and y parameters define the location of\n    * the image from its upper-left corner. The image is displayed at its original size unless the width and height\n    * parameters specify a different size. The imageMode() function changes the way the parameters work. A call to\n    * imageMode(CORNERS) will change the width and height parameters to define the x and y values of the opposite\n    * corner of the image.\n    *\n    * @param {PImage} img            the image to display\n    * @param {int|float} x           x-coordinate of the image\n    * @param {int|float} y           y-coordinate of the image\n    * @param {int|float} width       width to display the image\n    * @param {int|float} height      height to display the image\n    *\n    * @see loadImage\n    * @see PImage\n    * @see imageMode\n    * @see tint\n    * @see background\n    * @see alpha\n    */\n    Drawing2D.prototype.image = function(img, x, y, w, h) {\n      // Fix fractional positions\n      x = Math.round(x);\n      y = Math.round(y);\n\n      if (img.width > 0) {\n        var wid = w || img.width;\n        var hgt = h || img.height;\n\n        var bounds = imageModeConvert(x || 0, y || 0, w || img.width, h || img.height, arguments.length < 4);\n        var fastImage = !!img.sourceImg && curTint === null;\n        if (fastImage) {\n          var htmlElement = img.sourceImg;\n          if (img.__isDirty) {\n            img.updatePixels();\n          }\n          // Using HTML element's width and height in case if the image was resized.\n          curContext.drawImage(htmlElement, 0, 0,\n            htmlElement.width, htmlElement.height, bounds.x, bounds.y, bounds.w, bounds.h);\n        } else {\n          var obj = img.toImageData();\n\n          // Tint the image\n          if (curTint !== null) {\n            curTint(obj);\n            img.__isDirty = true;\n          }\n\n          curContext.drawImage(getCanvasData(obj).canvas, 0, 0,\n            img.width, img.height, bounds.x, bounds.y, bounds.w, bounds.h);\n        }\n      }\n    };\n\n    Drawing3D.prototype.image = function(img, x, y, w, h) {\n      if (img.width > 0) {\n        // Fix fractional positions\n        x = Math.round(x);\n        y = Math.round(y);\n        w = w || img.width;\n        h = h || img.height;\n\n        p.beginShape(p.QUADS);\n        p.texture(img);\n        p.vertex(x, y, 0, 0, 0);\n        p.vertex(x, y+h, 0, 0, h);\n        p.vertex(x+w, y+h, 0, w, h);\n        p.vertex(x+w, y, 0, w, 0);\n        p.endShape();\n      }\n    };\n\n    /**\n     * The tint() function sets the fill value for displaying images. Images can be tinted to\n     * specified colors or made transparent by setting the alpha.\n     * <br><br>To make an image transparent, but not change it's color,\n     * use white as the tint color and specify an alpha value. For instance,\n     * tint(255, 128) will make an image 50% transparent (unless\n     * <b>colorMode()</b> has been used).\n     *\n     * <br><br>When using hexadecimal notation to specify a color, use \"#\" or\n     * \"0x\" before the values (e.g. #CCFFAA, 0xFFCCFFAA). The # syntax uses six\n     * digits to specify a color (the way colors are specified in HTML and CSS).\n     * When using the hexadecimal notation starting with \"0x\", the hexadecimal\n     * value must be specified with eight characters; the first two characters\n     * define the alpha component and the remainder the red, green, and blue\n     * components.\n     * <br><br>The value for the parameter \"gray\" must be less than or equal\n     * to the current maximum value as specified by <b>colorMode()</b>.\n     * The default maximum value is 255.\n     * <br><br>The tint() method is also used to control the coloring of\n     * textures in 3D.\n     *\n     * @param {int|float} gray    any valid number\n     * @param {int|float} alpha    opacity of the image\n     * @param {int|float} value1  red or hue value\n     * @param {int|float} value2  green or saturation value\n     * @param {int|float} value3  blue or brightness value\n     * @param {int|float} color    any value of the color datatype\n     * @param {int} hex            color value in hexadecimal notation (i.e. #FFCC00 or 0xFFFFCC00)\n     *\n     * @see #noTint()\n     * @see #image()\n     */\n    p.tint = function(a1, a2, a3, a4) {\n      var tintColor = p.color(a1, a2, a3, a4);\n      var r = p.red(tintColor) / colorModeX;\n      var g = p.green(tintColor) / colorModeY;\n      var b = p.blue(tintColor) / colorModeZ;\n      var a = p.alpha(tintColor) / colorModeA;\n      curTint = function(obj) {\n        var data = obj.data,\n            length = 4 * obj.width * obj.height;\n        for (var i = 0; i < length;) {\n          data[i++] *= r;\n          data[i++] *= g;\n          data[i++] *= b;\n          data[i++] *= a;\n        }\n      };\n      // for overriding the color buffer when 3d rendering\n      curTint3d = function(data){\n        for (var i = 0; i < data.length;) {\n          data[i++] = r;\n          data[i++] = g;\n          data[i++] = b;\n          data[i++] = a;\n        }\n      };\n    };\n\n    /**\n     * The noTint() function removes the current fill value for displaying images and reverts to displaying images with their original hues.\n     *\n     * @see #tint()\n     * @see #image()\n     */\n    p.noTint = function() {\n      curTint = null;\n      curTint3d = null;\n    };\n\n    /**\n    * Copies a region of pixels from the display window to another area of the display window and copies a region of pixels from an\n    * image used as the srcImg  parameter into the display window. If the source and destination regions aren't the same size, it will\n    * automatically resize the source pixels to fit the specified target region. No alpha information is used in the process, however\n    * if the source image has an alpha channel set, it will be copied as well. This function ignores imageMode().\n    *\n    * @param {int} x            X coordinate of the source's upper left corner\n    * @param {int} y            Y coordinate of the source's upper left corner\n    * @param {int} width        source image width\n    * @param {int} height       source image height\n    * @param {int} dx           X coordinate of the destination's upper left corner\n    * @param {int} dy           Y coordinate of the destination's upper left corner\n    * @param {int} dwidth       destination image width\n    * @param {int} dheight      destination image height\n    * @param {PImage} srcImg    image variable referring to the source image\n    *\n    * @see blend\n    * @see get\n    */\n    p.copy = function(src, sx, sy, sw, sh, dx, dy, dw, dh) {\n      if (dh === undef) {\n        // shift everything, and introduce p\n        dh = dw;\n        dw = dy;\n        dy = dx;\n        dx = sh;\n        sh = sw;\n        sw = sy;\n        sy = sx;\n        sx = src;\n        src = p;\n      }\n      p.blend(src, sx, sy, sw, sh, dx, dy, dw, dh, PConstants.REPLACE);\n    };\n\n    /**\n    * Blends a region of pixels from one image into another (or in itself again) with full alpha channel support. There\n    * is a choice of the following modes to blend the source pixels (A) with the ones of pixels in the destination image (B):\n    * BLEND - linear interpolation of colours: C = A*factor + B\n    * ADD - additive blending with white clip: C = min(A*factor + B, 255)\n    * SUBTRACT - subtractive blending with black clip: C = max(B - A*factor, 0)\n    * DARKEST - only the darkest colour succeeds: C = min(A*factor, B)\n    * LIGHTEST - only the lightest colour succeeds: C = max(A*factor, B)\n    * DIFFERENCE - subtract colors from underlying image.\n    * EXCLUSION - similar to DIFFERENCE, but less extreme.\n    * MULTIPLY - Multiply the colors, result will always be darker.\n    * SCREEN - Opposite multiply, uses inverse values of the colors.\n    * OVERLAY - A mix of MULTIPLY and SCREEN. Multiplies dark values, and screens light values.\n    * HARD_LIGHT - SCREEN when greater than 50% gray, MULTIPLY when lower.\n    * SOFT_LIGHT - Mix of DARKEST and LIGHTEST. Works like OVERLAY, but not as harsh.\n    * DODGE - Lightens light tones and increases contrast, ignores darks. Called \"Color Dodge\" in Illustrator and Photoshop.\n    * BURN - Darker areas are applied, increasing contrast, ignores lights. Called \"Color Burn\" in Illustrator and Photoshop.\n    * All modes use the alpha information (highest byte) of source image pixels as the blending factor. If the source and\n    * destination regions are different sizes, the image will be automatically resized to match the destination size. If the\n    * srcImg parameter is not used, the display window is used as the source image.  This function ignores imageMode().\n    *\n    * @param {int} x            X coordinate of the source's upper left corner\n    * @param {int} y            Y coordinate of the source's upper left corner\n    * @param {int} width        source image width\n    * @param {int} height       source image height\n    * @param {int} dx           X coordinate of the destination's upper left corner\n    * @param {int} dy           Y coordinate of the destination's upper left corner\n    * @param {int} dwidth       destination image width\n    * @param {int} dheight      destination image height\n    * @param {PImage} srcImg    image variable referring to the source image\n    * @param {PImage} MODE      Either BLEND, ADD, SUBTRACT, LIGHTEST, DARKEST, DIFFERENCE, EXCLUSION, MULTIPLY, SCREEN,\n    *                           OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, BURN\n    * @see filter\n    */\n    p.blend = function(src, sx, sy, sw, sh, dx, dy, dw, dh, mode, pimgdest) {\n      if (src.isRemote) {\n        throw \"Image is loaded remotely. Cannot blend image.\";\n      }\n\n      if (mode === undef) {\n        // shift everything, and introduce p\n        mode = dh;\n        dh = dw;\n        dw = dy;\n        dy = dx;\n        dx = sh;\n        sh = sw;\n        sw = sy;\n        sy = sx;\n        sx = src;\n        src = p;\n      }\n\n      var sx2 = sx + sw,\n        sy2 = sy + sh,\n        dx2 = dx + dw,\n        dy2 = dy + dh,\n        dest = pimgdest || p;\n\n      // check if pimgdest is there and pixels, if so this was a call from pimg.blend\n      if (pimgdest === undef || mode === undef) {\n        p.loadPixels();\n      }\n\n      src.loadPixels();\n\n      if (src === p && p.intersect(sx, sy, sx2, sy2, dx, dy, dx2, dy2)) {\n        p.blit_resize(p.get(sx, sy, sx2 - sx, sy2 - sy), 0, 0, sx2 - sx - 1, sy2 - sy - 1,\n                      dest.imageData.data, dest.width, dest.height, dx, dy, dx2, dy2, mode);\n      } else {\n        p.blit_resize(src, sx, sy, sx2, sy2, dest.imageData.data, dest.width, dest.height, dx, dy, dx2, dy2, mode);\n      }\n\n      if (pimgdest === undef) {\n        p.updatePixels();\n      }\n    };\n\n    // helper function for filter()\n    var buildBlurKernel = function(r) {\n      var radius = p.floor(r * 3.5), i, radiusi;\n      radius = (radius < 1) ? 1 : ((radius < 248) ? radius : 248);\n      if (p.shared.blurRadius !== radius) {\n        p.shared.blurRadius = radius;\n        p.shared.blurKernelSize = 1 + (p.shared.blurRadius<<1);\n        p.shared.blurKernel = new Float32Array(p.shared.blurKernelSize);\n        var sharedBlurKernal = p.shared.blurKernel;\n        var sharedBlurKernelSize = p.shared.blurKernelSize;\n        var sharedBlurRadius = p.shared.blurRadius;\n        // init blurKernel\n        for (i = 0; i < sharedBlurKernelSize; i++) {\n          sharedBlurKernal[i] = 0;\n        }\n        var radiusiSquared = (radius - 1) * (radius - 1);\n        for (i = 1; i < radius; i++) {\n          sharedBlurKernal[radius + i] = sharedBlurKernal[radiusi] = radiusiSquared;\n        }\n        sharedBlurKernal[radius] = radius * radius;\n      }\n    };\n\n    var blurARGB = function(r, aImg) {\n      var sum, cr, cg, cb, ca, c, m;\n      var read, ri, ym, ymi, bk0;\n      var wh = aImg.pixels.getLength();\n      var r2 = new Float32Array(wh);\n      var g2 = new Float32Array(wh);\n      var b2 = new Float32Array(wh);\n      var a2 = new Float32Array(wh);\n      var yi = 0;\n      var x, y, i, offset;\n\n      buildBlurKernel(r);\n\n      var aImgHeight = aImg.height;\n      var aImgWidth = aImg.width;\n      var sharedBlurKernelSize = p.shared.blurKernelSize;\n      var sharedBlurRadius = p.shared.blurRadius;\n      var sharedBlurKernal = p.shared.blurKernel;\n      var pix = aImg.imageData.data;\n\n      for (y = 0; y < aImgHeight; y++) {\n        for (x = 0; x < aImgWidth; x++) {\n          cb = cg = cr = ca = sum = 0;\n          read = x - sharedBlurRadius;\n          if (read<0) {\n            bk0 = -read;\n            read = 0;\n          } else {\n            if (read >= aImgWidth) {\n              break;\n            }\n            bk0=0;\n          }\n          for (i = bk0; i < sharedBlurKernelSize; i++) {\n            if (read >= aImgWidth) {\n              break;\n            }\n            offset = (read + yi) *4;\n            m = sharedBlurKernal[i];\n            ca += m * pix[offset + 3];\n            cr += m * pix[offset];\n            cg += m * pix[offset + 1];\n            cb += m * pix[offset + 2];\n            sum += m;\n            read++;\n          }\n          ri = yi + x;\n          a2[ri] = ca / sum;\n          r2[ri] = cr / sum;\n          g2[ri] = cg / sum;\n          b2[ri] = cb / sum;\n        }\n        yi += aImgWidth;\n      }\n\n      yi = 0;\n      ym = -sharedBlurRadius;\n      ymi = ym*aImgWidth;\n\n      for (y = 0; y < aImgHeight; y++) {\n        for (x = 0; x < aImgWidth; x++) {\n          cb = cg = cr = ca = sum = 0;\n          if (ym<0) {\n            bk0 = ri = -ym;\n            read = x;\n          } else {\n            if (ym >= aImgHeight) {\n              break;\n            }\n            bk0 = 0;\n            ri = ym;\n            read = x + ymi;\n          }\n          for (i = bk0; i < sharedBlurKernelSize; i++) {\n            if (ri >= aImgHeight) {\n              break;\n            }\n            m = sharedBlurKernal[i];\n            ca += m * a2[read];\n            cr += m * r2[read];\n            cg += m * g2[read];\n            cb += m * b2[read];\n            sum += m;\n            ri++;\n            read += aImgWidth;\n          }\n          offset = (x + yi) *4;\n          pix[offset] = cr / sum;\n          pix[offset + 1] = cg / sum;\n          pix[offset + 2] = cb / sum;\n          pix[offset + 3] = ca / sum;\n        }\n        yi += aImgWidth;\n        ymi += aImgWidth;\n        ym++;\n      }\n    };\n\n    // helper funtion for ERODE and DILATE modes of filter()\n    var dilate = function(isInverted, aImg) {\n      var currIdx = 0;\n      var maxIdx = aImg.pixels.getLength();\n      var out = new Int32Array(maxIdx);\n      var currRowIdx, maxRowIdx, colOrig, colOut, currLum;\n      var idxRight, idxLeft, idxUp, idxDown,\n          colRight, colLeft, colUp, colDown,\n          lumRight, lumLeft, lumUp, lumDown;\n\n      if (!isInverted) {\n        // erosion (grow light areas)\n        while (currIdx<maxIdx) {\n          currRowIdx = currIdx;\n          maxRowIdx = currIdx + aImg.width;\n          while (currIdx < maxRowIdx) {\n            colOrig = colOut = aImg.pixels.getPixel(currIdx);\n            idxLeft = currIdx - 1;\n            idxRight = currIdx + 1;\n            idxUp = currIdx - aImg.width;\n            idxDown = currIdx + aImg.width;\n            if (idxLeft < currRowIdx) {\n              idxLeft = currIdx;\n            }\n            if (idxRight >= maxRowIdx) {\n              idxRight = currIdx;\n            }\n            if (idxUp < 0) {\n              idxUp = 0;\n            }\n            if (idxDown >= maxIdx) {\n              idxDown = currIdx;\n            }\n            colUp = aImg.pixels.getPixel(idxUp);\n            colLeft = aImg.pixels.getPixel(idxLeft);\n            colDown = aImg.pixels.getPixel(idxDown);\n            colRight = aImg.pixels.getPixel(idxRight);\n\n            // compute luminance\n            currLum = 77*(colOrig>>16&0xff) + 151*(colOrig>>8&0xff) + 28*(colOrig&0xff);\n            lumLeft = 77*(colLeft>>16&0xff) + 151*(colLeft>>8&0xff) + 28*(colLeft&0xff);\n            lumRight = 77*(colRight>>16&0xff) + 151*(colRight>>8&0xff) + 28*(colRight&0xff);\n            lumUp = 77*(colUp>>16&0xff) + 151*(colUp>>8&0xff) + 28*(colUp&0xff);\n            lumDown = 77*(colDown>>16&0xff) + 151*(colDown>>8&0xff) + 28*(colDown&0xff);\n\n            if (lumLeft > currLum) {\n              colOut = colLeft;\n              currLum = lumLeft;\n            }\n            if (lumRight > currLum) {\n              colOut = colRight;\n              currLum = lumRight;\n            }\n            if (lumUp > currLum) {\n              colOut = colUp;\n              currLum = lumUp;\n            }\n            if (lumDown > currLum) {\n              colOut = colDown;\n              currLum = lumDown;\n            }\n            out[currIdx++] = colOut;\n          }\n        }\n      } else {\n        // dilate (grow dark areas)\n        while (currIdx < maxIdx) {\n          currRowIdx = currIdx;\n          maxRowIdx = currIdx + aImg.width;\n          while (currIdx < maxRowIdx) {\n            colOrig = colOut = aImg.pixels.getPixel(currIdx);\n            idxLeft = currIdx - 1;\n            idxRight = currIdx + 1;\n            idxUp = currIdx - aImg.width;\n            idxDown = currIdx + aImg.width;\n            if (idxLeft < currRowIdx) {\n              idxLeft = currIdx;\n            }\n            if (idxRight >= maxRowIdx) {\n              idxRight = currIdx;\n            }\n            if (idxUp < 0) {\n              idxUp = 0;\n            }\n            if (idxDown >= maxIdx) {\n              idxDown = currIdx;\n            }\n            colUp = aImg.pixels.getPixel(idxUp);\n            colLeft = aImg.pixels.getPixel(idxLeft);\n            colDown = aImg.pixels.getPixel(idxDown);\n            colRight = aImg.pixels.getPixel(idxRight);\n\n            // compute luminance\n            currLum = 77*(colOrig>>16&0xff) + 151*(colOrig>>8&0xff) + 28*(colOrig&0xff);\n            lumLeft = 77*(colLeft>>16&0xff) + 151*(colLeft>>8&0xff) + 28*(colLeft&0xff);\n            lumRight = 77*(colRight>>16&0xff) + 151*(colRight>>8&0xff) + 28*(colRight&0xff);\n            lumUp = 77*(colUp>>16&0xff) + 151*(colUp>>8&0xff) + 28*(colUp&0xff);\n            lumDown = 77*(colDown>>16&0xff) + 151*(colDown>>8&0xff) + 28*(colDown&0xff);\n\n            if (lumLeft < currLum) {\n              colOut = colLeft;\n              currLum = lumLeft;\n            }\n            if (lumRight < currLum) {\n              colOut = colRight;\n              currLum = lumRight;\n            }\n            if (lumUp < currLum) {\n              colOut = colUp;\n              currLum = lumUp;\n            }\n            if (lumDown < currLum) {\n              colOut = colDown;\n              currLum = lumDown;\n            }\n            out[currIdx++]=colOut;\n          }\n        }\n      }\n      aImg.pixels.set(out);\n      //p.arraycopy(out,0,pixels,0,maxIdx);\n    };\n\n    /**\n    * Filters the display window as defined by one of the following modes:\n    * THRESHOLD - converts the image to black and white pixels depending if they are above or below the threshold\n    * defined by the level parameter. The level must be between 0.0 (black) and 1.0(white). If no level is specified, 0.5 is used.\n    * GRAY - converts any colors in the image to grayscale equivalents\n    * INVERT - sets each pixel to its inverse value\n    * POSTERIZE - limits each channel of the image to the number of colors specified as the level parameter\n    * BLUR - executes a Guassian blur with the level parameter specifying the extent of the blurring. If no level parameter is\n    * used, the blur is equivalent to Guassian blur of radius 1.\n    * OPAQUE - sets the alpha channel to entirely opaque.\n    * ERODE - reduces the light areas with the amount defined by the level parameter.\n    * DILATE - increases the light areas with the amount defined by the level parameter.\n    *\n    * @param {MODE} MODE          Either THRESHOLD, GRAY, INVERT, POSTERIZE, BLUR, OPAQUE, ERODE, or DILATE\n    * @param {int|float} level    defines the quality of the filter\n    *\n    * @see blend\n    */\n    p.filter = function(kind, param, aImg){\n      var img, col, lum, i;\n\n      if (arguments.length === 3) {\n        aImg.loadPixels();\n        img = aImg;\n      } else {\n        p.loadPixels();\n        img = p;\n      }\n\n      if (param === undef) {\n        param = null;\n      }\n      if (img.isRemote) { // Remote images cannot access imageData\n        throw \"Image is loaded remotely. Cannot filter image.\";\n      }\n      // begin filter process\n      var imglen = img.pixels.getLength();\n      switch (kind) {\n        case PConstants.BLUR:\n          var radius = param || 1; // if no param specified, use 1 (default for p5)\n          blurARGB(radius, img);\n          break;\n\n        case PConstants.GRAY:\n          if (img.format === PConstants.ALPHA) { //trouble\n            // for an alpha image, convert it to an opaque grayscale\n            for (i = 0; i < imglen; i++) {\n              col = 255 - img.pixels.getPixel(i);\n              img.pixels.setPixel(i,(0xff000000 | (col << 16) | (col << 8) | col));\n            }\n            img.format = PConstants.RGB; //trouble\n          } else {\n            for (i = 0; i < imglen; i++) {\n              col = img.pixels.getPixel(i);\n              lum = (77*(col>>16&0xff) + 151*(col>>8&0xff) + 28*(col&0xff))>>8;\n              img.pixels.setPixel(i,((col & PConstants.ALPHA_MASK) | lum<<16 | lum<<8 | lum));\n            }\n          }\n          break;\n\n        case PConstants.INVERT:\n          for (i = 0; i < imglen; i++) {\n            img.pixels.setPixel(i, (img.pixels.getPixel(i) ^ 0xffffff));\n          }\n          break;\n\n        case PConstants.POSTERIZE:\n          if (param === null) {\n            throw \"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)\";\n          }\n          var levels = p.floor(param);\n          if ((levels < 2) || (levels > 255)) {\n            throw \"Levels must be between 2 and 255 for filter(POSTERIZE, levels)\";\n          }\n          var levels1 = levels - 1;\n          for (i = 0; i < imglen; i++) {\n            var rlevel = (img.pixels.getPixel(i) >> 16) & 0xff;\n            var glevel = (img.pixels.getPixel(i) >> 8) & 0xff;\n            var blevel = img.pixels.getPixel(i) & 0xff;\n            rlevel = (((rlevel * levels) >> 8) * 255) / levels1;\n            glevel = (((glevel * levels) >> 8) * 255) / levels1;\n            blevel = (((blevel * levels) >> 8) * 255) / levels1;\n            img.pixels.setPixel(i, ((0xff000000 & img.pixels.getPixel(i)) | (rlevel << 16) | (glevel << 8) | blevel));\n          }\n          break;\n\n        case PConstants.OPAQUE:\n          for (i = 0; i < imglen; i++) {\n            img.pixels.setPixel(i, (img.pixels.getPixel(i) | 0xff000000));\n          }\n          img.format = PConstants.RGB; //trouble\n          break;\n\n        case PConstants.THRESHOLD:\n          if (param === null) {\n            param = 0.5;\n          }\n          if ((param < 0) || (param > 1)) {\n            throw \"Level must be between 0 and 1 for filter(THRESHOLD, level)\";\n          }\n          var thresh = p.floor(param * 255);\n          for (i = 0; i < imglen; i++) {\n            var max = p.max((img.pixels.getPixel(i) & PConstants.RED_MASK) >> 16, p.max((img.pixels.getPixel(i) & PConstants.GREEN_MASK) >> 8, (img.pixels.getPixel(i) & PConstants.BLUE_MASK)));\n            img.pixels.setPixel(i, ((img.pixels.getPixel(i) & PConstants.ALPHA_MASK) | ((max < thresh) ? 0x000000 : 0xffffff)));\n          }\n          break;\n\n        case PConstants.ERODE:\n          dilate(true, img);\n          break;\n\n        case PConstants.DILATE:\n          dilate(false, img);\n          break;\n      }\n      img.updatePixels();\n    };\n\n\n    // shared variables for blit_resize(), filter_new_scanline(), filter_bilinear(), filter()\n    // change this in the future to not be exposed to p\n    p.shared = {\n      fracU: 0,\n      ifU: 0,\n      fracV: 0,\n      ifV: 0,\n      u1: 0,\n      u2: 0,\n      v1: 0,\n      v2: 0,\n      sX: 0,\n      sY: 0,\n      iw: 0,\n      iw1: 0,\n      ih1: 0,\n      ul: 0,\n      ll: 0,\n      ur: 0,\n      lr: 0,\n      cUL: 0,\n      cLL: 0,\n      cUR: 0,\n      cLR: 0,\n      srcXOffset: 0,\n      srcYOffset: 0,\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      srcBuffer: null,\n      blurRadius: 0,\n      blurKernelSize: 0,\n      blurKernel: null\n    };\n\n    p.intersect = function(sx1, sy1, sx2, sy2, dx1, dy1, dx2, dy2) {\n      var sw = sx2 - sx1 + 1;\n      var sh = sy2 - sy1 + 1;\n      var dw = dx2 - dx1 + 1;\n      var dh = dy2 - dy1 + 1;\n      if (dx1 < sx1) {\n        dw += dx1 - sx1;\n        if (dw > sw) {\n          dw = sw;\n        }\n      } else {\n        var w = sw + sx1 - dx1;\n        if (dw > w) {\n          dw = w;\n        }\n      }\n      if (dy1 < sy1) {\n        dh += dy1 - sy1;\n        if (dh > sh) {\n          dh = sh;\n        }\n      } else {\n        var h = sh + sy1 - dy1;\n        if (dh > h) {\n          dh = h;\n        }\n      }\n      return ! (dw <= 0 || dh <= 0);\n    };\n\n    var blendFuncs = {};\n    blendFuncs[PConstants.BLEND] = p.modes.blend;\n    blendFuncs[PConstants.ADD] = p.modes.add;\n    blendFuncs[PConstants.SUBTRACT] = p.modes.subtract;\n    blendFuncs[PConstants.LIGHTEST] = p.modes.lightest;\n    blendFuncs[PConstants.DARKEST] = p.modes.darkest;\n    blendFuncs[PConstants.REPLACE] = p.modes.replace;\n    blendFuncs[PConstants.DIFFERENCE] = p.modes.difference;\n    blendFuncs[PConstants.EXCLUSION] = p.modes.exclusion;\n    blendFuncs[PConstants.MULTIPLY] = p.modes.multiply;\n    blendFuncs[PConstants.SCREEN] = p.modes.screen;\n    blendFuncs[PConstants.OVERLAY] = p.modes.overlay;\n    blendFuncs[PConstants.HARD_LIGHT] = p.modes.hard_light;\n    blendFuncs[PConstants.SOFT_LIGHT] = p.modes.soft_light;\n    blendFuncs[PConstants.DODGE] = p.modes.dodge;\n    blendFuncs[PConstants.BURN] = p.modes.burn;\n\n    p.blit_resize = function(img, srcX1, srcY1, srcX2, srcY2, destPixels,\n                             screenW, screenH, destX1, destY1, destX2, destY2, mode) {\n      var x, y;\n      if (srcX1 < 0) {\n        srcX1 = 0;\n      }\n      if (srcY1 < 0) {\n        srcY1 = 0;\n      }\n      if (srcX2 >= img.width) {\n        srcX2 = img.width - 1;\n      }\n      if (srcY2 >= img.height) {\n        srcY2 = img.height - 1;\n      }\n      var srcW = srcX2 - srcX1;\n      var srcH = srcY2 - srcY1;\n      var destW = destX2 - destX1;\n      var destH = destY2 - destY1;\n\n      if (destW <= 0 || destH <= 0 || srcW <= 0 || srcH <= 0 || destX1 >= screenW ||\n          destY1 >= screenH || srcX1 >= img.width || srcY1 >= img.height) {\n        return;\n      }\n\n      var dx = Math.floor(srcW / destW * PConstants.PRECISIONF);\n      var dy = Math.floor(srcH / destH * PConstants.PRECISIONF);\n\n      var pshared = p.shared;\n\n      pshared.srcXOffset = Math.floor(destX1 < 0 ? -destX1 * dx : srcX1 * PConstants.PRECISIONF);\n      pshared.srcYOffset = Math.floor(destY1 < 0 ? -destY1 * dy : srcY1 * PConstants.PRECISIONF);\n      if (destX1 < 0) {\n        destW += destX1;\n        destX1 = 0;\n      }\n      if (destY1 < 0) {\n        destH += destY1;\n        destY1 = 0;\n      }\n      destW = Math.min(destW, screenW - destX1);\n      destH = Math.min(destH, screenH - destY1);\n\n      var destOffset = destY1 * screenW + destX1;\n      var destColor;\n\n      pshared.srcBuffer = img.imageData.data;\n      pshared.iw = img.width;\n      pshared.iw1 = img.width - 1;\n      pshared.ih1 = img.height - 1;\n\n      // cache for speed\n      var filterBilinear = p.filter_bilinear,\n        filterNewScanline = p.filter_new_scanline,\n        blendFunc = blendFuncs[mode],\n        blendedColor,\n        idx,\n        cULoffset,\n        cURoffset,\n        cLLoffset,\n        cLRoffset,\n        ALPHA_MASK = PConstants.ALPHA_MASK,\n        RED_MASK = PConstants.RED_MASK,\n        GREEN_MASK = PConstants.GREEN_MASK,\n        BLUE_MASK = PConstants.BLUE_MASK,\n        PREC_MAXVAL = PConstants.PREC_MAXVAL,\n        PRECISIONB = PConstants.PRECISIONB,\n        PREC_RED_SHIFT = PConstants.PREC_RED_SHIFT,\n        PREC_ALPHA_SHIFT = PConstants.PREC_ALPHA_SHIFT,\n        srcBuffer = pshared.srcBuffer,\n        min = Math.min;\n\n      for (y = 0; y < destH; y++) {\n\n        pshared.sX = pshared.srcXOffset;\n        pshared.fracV = pshared.srcYOffset & PREC_MAXVAL;\n        pshared.ifV = PREC_MAXVAL - pshared.fracV;\n        pshared.v1 = (pshared.srcYOffset >> PRECISIONB) * pshared.iw;\n        pshared.v2 = min((pshared.srcYOffset >> PRECISIONB) + 1, pshared.ih1) * pshared.iw;\n\n        for (x = 0; x < destW; x++) {\n          idx = (destOffset + x) * 4;\n\n          destColor = (destPixels[idx + 3] << 24) &\n                      ALPHA_MASK | (destPixels[idx] << 16) &\n                      RED_MASK   | (destPixels[idx + 1] << 8) &\n                      GREEN_MASK |  destPixels[idx + 2] & BLUE_MASK;\n\n          pshared.fracU = pshared.sX & PREC_MAXVAL;\n          pshared.ifU = PREC_MAXVAL - pshared.fracU;\n          pshared.ul = (pshared.ifU * pshared.ifV) >> PRECISIONB;\n          pshared.ll = (pshared.ifU * pshared.fracV) >> PRECISIONB;\n          pshared.ur = (pshared.fracU * pshared.ifV) >> PRECISIONB;\n          pshared.lr = (pshared.fracU * pshared.fracV) >> PRECISIONB;\n          pshared.u1 = (pshared.sX >> PRECISIONB);\n          pshared.u2 = min(pshared.u1 + 1, pshared.iw1);\n\n          cULoffset = (pshared.v1 + pshared.u1) * 4;\n          cURoffset = (pshared.v1 + pshared.u2) * 4;\n          cLLoffset = (pshared.v2 + pshared.u1) * 4;\n          cLRoffset = (pshared.v2 + pshared.u2) * 4;\n\n          pshared.cUL = (srcBuffer[cULoffset + 3] << 24) &\n                        ALPHA_MASK | (srcBuffer[cULoffset] << 16) &\n                        RED_MASK   | (srcBuffer[cULoffset + 1] << 8) &\n                        GREEN_MASK |  srcBuffer[cULoffset + 2] & BLUE_MASK;\n\n          pshared.cUR = (srcBuffer[cURoffset + 3] << 24) &\n                        ALPHA_MASK | (srcBuffer[cURoffset] << 16) &\n                        RED_MASK   | (srcBuffer[cURoffset + 1] << 8) &\n                        GREEN_MASK |  srcBuffer[cURoffset + 2] & BLUE_MASK;\n\n          pshared.cLL = (srcBuffer[cLLoffset + 3] << 24) &\n                        ALPHA_MASK | (srcBuffer[cLLoffset] << 16) &\n                        RED_MASK   | (srcBuffer[cLLoffset + 1] << 8) &\n                        GREEN_MASK |  srcBuffer[cLLoffset + 2] & BLUE_MASK;\n\n          pshared.cLR = (srcBuffer[cLRoffset + 3] << 24) &\n                        ALPHA_MASK | (srcBuffer[cLRoffset] << 16) &\n                        RED_MASK   | (srcBuffer[cLRoffset + 1] << 8) &\n                        GREEN_MASK |  srcBuffer[cLRoffset + 2] & BLUE_MASK;\n\n          pshared.r = ((pshared.ul * ((pshared.cUL & RED_MASK) >> 16) +\n                       pshared.ll * ((pshared.cLL & RED_MASK) >> 16) +\n                       pshared.ur * ((pshared.cUR & RED_MASK) >> 16) +\n                       pshared.lr * ((pshared.cLR & RED_MASK) >> 16)) << PREC_RED_SHIFT) & RED_MASK;\n          pshared.g = ((pshared.ul * (pshared.cUL & GREEN_MASK) +\n                       pshared.ll * (pshared.cLL & GREEN_MASK) +\n                       pshared.ur * (pshared.cUR & GREEN_MASK) +\n                       pshared.lr * (pshared.cLR & GREEN_MASK)) >>> PRECISIONB) & GREEN_MASK;\n          pshared.b = (pshared.ul * (pshared.cUL & BLUE_MASK) +\n                       pshared.ll * (pshared.cLL & BLUE_MASK) +\n                       pshared.ur * (pshared.cUR & BLUE_MASK) +\n                       pshared.lr * (pshared.cLR & BLUE_MASK)) >>> PRECISIONB;\n          pshared.a = ((pshared.ul * ((pshared.cUL & ALPHA_MASK) >>> 24) +\n                       pshared.ll * ((pshared.cLL & ALPHA_MASK) >>> 24) +\n                       pshared.ur * ((pshared.cUR & ALPHA_MASK) >>> 24) +\n                       pshared.lr * ((pshared.cLR & ALPHA_MASK) >>> 24)) << PREC_ALPHA_SHIFT) & ALPHA_MASK;\n\n          blendedColor = blendFunc(destColor, (pshared.a | pshared.r | pshared.g | pshared.b));\n\n          destPixels[idx]     = (blendedColor & RED_MASK) >>> 16;\n          destPixels[idx + 1] = (blendedColor & GREEN_MASK) >>> 8;\n          destPixels[idx + 2] = (blendedColor & BLUE_MASK);\n          destPixels[idx + 3] = (blendedColor & ALPHA_MASK) >>> 24;\n\n          pshared.sX += dx;\n        }\n        destOffset += screenW;\n        pshared.srcYOffset += dy;\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Font handling\n    ////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * loadFont() Loads a font into a variable of type PFont.\n     *\n     * @param {String} name filename of the font to load\n     * @param {int|float} size option font size (used internally)\n     *\n     * @returns {PFont} new PFont object\n     *\n     * @see #PFont\n     * @see #textFont\n     * @see #text\n     * @see #createFont\n     */\n    p.loadFont = function(name, size) {\n      if (name === undef) {\n        throw(\"font name required in loadFont.\");\n      }\n      if (name.indexOf(\".svg\") === -1) {\n        if (size === undef) {\n          size = curTextFont.size;\n        }\n        return PFont.get(name, size);\n      }\n      // If the font is a glyph, calculate by SVG table\n      var font = p.loadGlyphs(name);\n\n      return {\n        name: name,\n        css: '12px sans-serif',\n        glyph: true,\n        units_per_em: font.units_per_em,\n        horiz_adv_x: 1 / font.units_per_em * font.horiz_adv_x,\n        ascent: font.ascent,\n        descent: font.descent,\n        width: function(str) {\n          var width = 0;\n          var len = str.length;\n          for (var i = 0; i < len; i++) {\n            try {\n              width += parseFloat(p.glyphLook(p.glyphTable[name], str[i]).horiz_adv_x);\n            }\n            catch(e) {\n              Processing.debug(e);\n            }\n          }\n          return width / p.glyphTable[name].units_per_em;\n        }\n      };\n    };\n\n    /**\n     * createFont() Loads a font into a variable of type PFont.\n     * Smooth and charset are ignored in Processing.js.\n     *\n     * @param {String}    name    filename of the font to load\n     * @param {int|float} size    font size in pixels\n     * @param {boolean}   smooth  not used in Processing.js\n     * @param {char[]}    charset not used in Processing.js\n     *\n     * @returns {PFont} new PFont object\n     *\n     * @see #PFont\n     * @see #textFont\n     * @see #text\n     * @see #loadFont\n     */\n    p.createFont = function(name, size) {\n      // because Processing.js only deals with real fonts,\n      // createFont is simply a wrapper for loadFont/2\n      return p.loadFont(name, size);\n    };\n\n    /**\n     * textFont() Sets the current font.\n     *\n     * @param {PFont}     pfont the PFont to load as current text font\n     * @param {int|float} size optional font size in pixels\n     *\n     * @see #createFont\n     * @see #loadFont\n     * @see #PFont\n     * @see #text\n     */\n    p.textFont = function(pfont, size) {\n      if (size !== undef) {\n        // If we're using an SVG glyph font, don't load from cache\n        if (!pfont.glyph) {\n          pfont = PFont.get(pfont.name, size);\n        }\n        curTextSize = size;\n      }\n      curTextFont = pfont;\n      curFontName = curTextFont.name;\n      curTextAscent = curTextFont.ascent;\n      curTextDescent = curTextFont.descent;\n      curTextLeading = curTextFont.leading;\n      var curContext = drawing.$ensureContext();\n      curContext.font = curTextFont.css;\n    };\n\n    /**\n     * textSize() Sets the current font size in pixels.\n     *\n     * @param {int|float} size font size in pixels\n     *\n     * @see #textFont\n     * @see #loadFont\n     * @see #PFont\n     * @see #text\n     */\n    p.textSize = function(size) {\n      curTextFont = PFont.get(curFontName, size);\n      curTextSize = size;\n      // recache metrics\n      curTextAscent = curTextFont.ascent;\n      curTextDescent = curTextFont.descent;\n      curTextLeading = curTextFont.leading;\n      var curContext = drawing.$ensureContext();\n      curContext.font = curTextFont.css;\n    };\n\n    /**\n     * textAscent() returns the maximum height a character extends above the baseline of the\n     * current font at its current size, in pixels.\n     *\n     * @returns {float} height of the current font above the baseline, at its current size, in pixels\n     *\n     * @see #textDescent\n     */\n    p.textAscent = function() {\n      return curTextAscent;\n    };\n\n    /**\n     * textDescent() returns the maximum depth a character will protrude below the baseline of\n     * the current font at its current size, in pixels.\n     *\n     * @returns {float} depth of the current font below the baseline, at its current size, in pixels\n     *\n     * @see #textAscent\n     */\n    p.textDescent = function() {\n      return curTextDescent;\n    };\n\n    /**\n     * textLeading() Sets the current font's leading, which is the distance\n     * from baseline to baseline over consecutive lines, with additional vertical\n     * spacing taking into account. Usually this value is 1.2 or 1.25 times the\n     * textsize, but this value can be changed to effect vertically compressed\n     * or stretched text.\n     *\n     * @param {int|float} the desired baseline-to-baseline size in pixels\n     */\n    p.textLeading = function(leading) {\n      curTextLeading = leading;\n    };\n\n    /**\n     * textAlign() Sets the current alignment for drawing text.\n     *\n     * @param {int} ALIGN  Horizontal alignment, either LEFT, CENTER, or RIGHT\n     * @param {int} YALIGN optional vertical alignment, either TOP, BOTTOM, CENTER, or BASELINE\n     *\n     * @see #loadFont\n     * @see #PFont\n     * @see #text\n     */\n    p.textAlign = function(xalign, yalign) {\n      horizontalTextAlignment = xalign;\n      verticalTextAlignment = yalign || PConstants.BASELINE;\n    };\n\n    /**\n     * toP5String converts things with arbitrary data type into\n     * string values, for text rendering.\n     *\n     * @param {any} any object that can be converted into a string\n     *\n     * @return {String} the string representation of the input\n     */\n    function toP5String(obj) {\n      if(obj instanceof String) {\n        return obj;\n      }\n      if(typeof obj === 'number') {\n        // check if an int\n        if(obj === (0 | obj)) {\n          return obj.toString();\n        }\n        return p.nf(obj, 0, 3);\n      }\n      if(obj === null || obj === undef) {\n        return \"\";\n      }\n      return obj.toString();\n    }\n\n    /**\n     * textWidth() Calculates and returns the width of any character or text string in pixels.\n     *\n     * @param {char|String} str char or String to be measured\n     *\n     * @return {float} width of char or String in pixels\n     *\n     * @see #loadFont\n     * @see #PFont\n     * @see #text\n     * @see #textFont\n     */\n    Drawing2D.prototype.textWidth = function(str) {\n      var lines = toP5String(str).split(/\\r?\\n/g), width = 0;\n      var i, linesCount = lines.length;\n\n      curContext.font = curTextFont.css;\n      for (i = 0; i < linesCount; ++i) {\n        width = Math.max(width, curTextFont.measureTextWidth(lines[i]));\n      }\n      return width | 0;\n    };\n\n    Drawing3D.prototype.textWidth = function(str) {\n      var lines = toP5String(str).split(/\\r?\\n/g), width = 0;\n      var i, linesCount = lines.length;\n      if (textcanvas === undef) {\n        textcanvas = document.createElement(\"canvas\");\n      }\n\n      var textContext = textcanvas.getContext(\"2d\");\n      textContext.font = curTextFont.css;\n\n      for (i = 0; i < linesCount; ++i) {\n        width = Math.max(width, textContext.measureText(lines[i]).width);\n      }\n      return width | 0;\n    };\n\n    // A lookup table for characters that can not be referenced by Object\n    p.glyphLook = function(font, chr) {\n      try {\n        switch (chr) {\n        case \"1\":\n          return font.one;\n        case \"2\":\n          return font.two;\n        case \"3\":\n          return font.three;\n        case \"4\":\n          return font.four;\n        case \"5\":\n          return font.five;\n        case \"6\":\n          return font.six;\n        case \"7\":\n          return font.seven;\n        case \"8\":\n          return font.eight;\n        case \"9\":\n          return font.nine;\n        case \"0\":\n          return font.zero;\n        case \" \":\n          return font.space;\n        case \"$\":\n          return font.dollar;\n        case \"!\":\n          return font.exclam;\n        case '\"':\n          return font.quotedbl;\n        case \"#\":\n          return font.numbersign;\n        case \"%\":\n          return font.percent;\n        case \"&\":\n          return font.ampersand;\n        case \"'\":\n          return font.quotesingle;\n        case \"(\":\n          return font.parenleft;\n        case \")\":\n          return font.parenright;\n        case \"*\":\n          return font.asterisk;\n        case \"+\":\n          return font.plus;\n        case \",\":\n          return font.comma;\n        case \"-\":\n          return font.hyphen;\n        case \".\":\n          return font.period;\n        case \"/\":\n          return font.slash;\n        case \"_\":\n          return font.underscore;\n        case \":\":\n          return font.colon;\n        case \";\":\n          return font.semicolon;\n        case \"<\":\n          return font.less;\n        case \"=\":\n          return font.equal;\n        case \">\":\n          return font.greater;\n        case \"?\":\n          return font.question;\n        case \"@\":\n          return font.at;\n        case \"[\":\n          return font.bracketleft;\n        case \"\\\\\":\n          return font.backslash;\n        case \"]\":\n          return font.bracketright;\n        case \"^\":\n          return font.asciicircum;\n        case \"`\":\n          return font.grave;\n        case \"{\":\n          return font.braceleft;\n        case \"|\":\n          return font.bar;\n        case \"}\":\n          return font.braceright;\n        case \"~\":\n          return font.asciitilde;\n          // If the character is not 'special', access it by object reference\n        default:\n          return font[chr];\n        }\n      } catch(e) {\n        Processing.debug(e);\n      }\n    };\n\n    // Print some text to the Canvas\n    Drawing2D.prototype.text$line = function(str, x, y, z, align) {\n      var textWidth = 0, xOffset = 0;\n      // If the font is a standard Canvas font...\n      if (!curTextFont.glyph) {\n        if (str && (\"fillText\" in curContext)) {\n          if (isFillDirty) {\n            curContext.fillStyle = p.color.toString(currentFillColor);\n            isFillDirty = false;\n          }\n\n          // horizontal offset/alignment\n          if(align === PConstants.RIGHT || align === PConstants.CENTER) {\n            textWidth = curTextFont.measureTextWidth(str);\n\n            if(align === PConstants.RIGHT) {\n              xOffset = -textWidth;\n            } else { // if(align === PConstants.CENTER)\n              xOffset = -textWidth/2;\n            }\n          }\n\n          curContext.fillText(str, x+xOffset, y);\n        }\n      } else {\n        // If the font is a Batik SVG font...\n        var font = p.glyphTable[curFontName];\n        saveContext();\n        curContext.translate(x, y + curTextSize);\n\n        // horizontal offset/alignment\n        if(align === PConstants.RIGHT || align === PConstants.CENTER) {\n          textWidth = font.width(str);\n\n          if(align === PConstants.RIGHT) {\n            xOffset = -textWidth;\n          } else { // if(align === PConstants.CENTER)\n            xOffset = -textWidth/2;\n          }\n        }\n\n        var upem   = font.units_per_em,\n          newScale = 1 / upem * curTextSize;\n\n        curContext.scale(newScale, newScale);\n\n        for (var i=0, len=str.length; i < len; i++) {\n          // Test character against glyph table\n          try {\n            p.glyphLook(font, str[i]).draw();\n          } catch(e) {\n            Processing.debug(e);\n          }\n        }\n        restoreContext();\n      }\n    };\n\n    Drawing3D.prototype.text$line = function(str, x, y, z, align) {\n      // handle case for 3d text\n      if (textcanvas === undef) {\n        textcanvas = document.createElement(\"canvas\");\n      }\n      var oldContext = curContext;\n      curContext = textcanvas.getContext(\"2d\");\n      curContext.font = curTextFont.css;\n      var textWidth = curTextFont.measureTextWidth(str);\n      textcanvas.width = textWidth;\n      textcanvas.height = curTextSize;\n      curContext = textcanvas.getContext(\"2d\"); // refreshes curContext\n      curContext.font = curTextFont.css;\n      curContext.textBaseline=\"top\";\n\n      // paint on 2D canvas\n      Drawing2D.prototype.text$line(str,0,0,0,PConstants.LEFT);\n\n      // use it as a texture\n      var aspect = textcanvas.width/textcanvas.height;\n      curContext = oldContext;\n\n      curContext.bindTexture(curContext.TEXTURE_2D, textTex);\n      curContext.texImage2D(curContext.TEXTURE_2D, 0, curContext.RGBA, curContext.RGBA, curContext.UNSIGNED_BYTE, textcanvas);\n      curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MAG_FILTER, curContext.LINEAR);\n      curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_MIN_FILTER, curContext.LINEAR);\n      curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_WRAP_T, curContext.CLAMP_TO_EDGE);\n      curContext.texParameteri(curContext.TEXTURE_2D, curContext.TEXTURE_WRAP_S, curContext.CLAMP_TO_EDGE);\n      // If we don't have a power of two texture, we can't mipmap it.\n      // curContext.generateMipmap(curContext.TEXTURE_2D);\n\n      // horizontal offset/alignment\n      var xOffset = 0;\n      if (align === PConstants.RIGHT) {\n        xOffset = -textWidth;\n      } else if(align === PConstants.CENTER) {\n        xOffset = -textWidth/2;\n      }\n      var model = new PMatrix3D();\n      var scalefactor = curTextSize * 0.5;\n      model.translate(x+xOffset-scalefactor/2, y-scalefactor, z);\n      model.scale(-aspect*scalefactor, -scalefactor, scalefactor);\n      model.translate(-1, -1, -1);\n      model.transpose();\n\n      var view = new PMatrix3D();\n      view.scale(1, -1, 1);\n      view.apply(modelView.array());\n      view.transpose();\n\n      curContext.useProgram(programObject2D);\n      vertexAttribPointer(\"aVertex2d\", programObject2D, \"aVertex\", 3, textBuffer);\n      vertexAttribPointer(\"aTextureCoord2d\", programObject2D, \"aTextureCoord\", 2, textureBuffer);\n      uniformi(\"uSampler2d\", programObject2D, \"uSampler\", [0]);\n\n      uniformi(\"uIsDrawingText2d\", programObject2D, \"uIsDrawingText\", true);\n\n      uniformMatrix(\"uModel2d\", programObject2D, \"uModel\", false,  model.array());\n      uniformMatrix(\"uView2d\", programObject2D, \"uView\", false, view.array());\n      uniformf(\"uColor2d\", programObject2D, \"uColor\", fillStyle);\n      curContext.bindBuffer(curContext.ELEMENT_ARRAY_BUFFER, indexBuffer);\n      curContext.drawElements(curContext.TRIANGLES, 6, curContext.UNSIGNED_SHORT, 0);\n    };\n\n\n    /**\n    * unbounded text function (z is an optional argument)\n    */\n    function text$4(str, x, y, z) {\n      var lines, linesCount;\n      if(str.indexOf('\\n') < 0) {\n        lines = [str];\n        linesCount = 1;\n      } else {\n        lines = str.split(/\\r?\\n/g);\n        linesCount = lines.length;\n      }\n      // handle text line-by-line\n\n      var yOffset = 0;\n      if(verticalTextAlignment === PConstants.TOP) {\n        yOffset = curTextAscent + curTextDescent;\n      } else if(verticalTextAlignment === PConstants.CENTER) {\n        yOffset = curTextAscent/2 - (linesCount-1)*curTextLeading/2;\n      } else if(verticalTextAlignment === PConstants.BOTTOM) {\n        yOffset = -(curTextDescent + (linesCount-1)*curTextLeading);\n      }\n\n      for(var i=0;i<linesCount;++i) {\n        var line = lines[i];\n        drawing.text$line(line, x, y + yOffset, z, horizontalTextAlignment);\n        yOffset += curTextLeading;\n      }\n    }\n\n\n    /**\n    * box-bounded text function (z is an optional argument)\n    */\n    function text$6(str, x, y, width, height, z) {\n      // 'fail' on 0-valued dimensions\n      if (str.length === 0 || width === 0 || height === 0) {\n        return;\n      }\n      // also 'fail' if the text height is larger than the bounding height\n      if(curTextSize > height) {\n        return;\n      }\n\n      var spaceMark = -1;\n      var start = 0;\n      var lineWidth = 0;\n      var drawCommands = [];\n\n      // run through text, character-by-character\n      for (var charPos=0, len=str.length; charPos < len; charPos++)\n      {\n        var currentChar = str[charPos];\n        var spaceChar = (currentChar === \" \");\n        var letterWidth = curTextFont.measureTextWidth(currentChar);\n\n        // if we aren't looking at a newline, and the text still fits, keep processing\n        if (currentChar !== \"\\n\" && (lineWidth + letterWidth <= width)) {\n          if (spaceChar) { spaceMark = charPos; }\n          lineWidth += letterWidth;\n        }\n\n        // if we're looking at a newline, or the text no longer fits, push the section that fit into the drawcommand list\n        else\n        {\n          if (spaceMark + 1 === start) {\n            if(charPos>0) {\n              // Whole line without spaces so far.\n              spaceMark = charPos;\n            } else {\n              // 'fail', because the line can't even fit the first character\n              return;\n            }\n          }\n\n          if (currentChar === \"\\n\") {\n            drawCommands.push({text:str.substring(start, charPos), width: lineWidth});\n            start = charPos + 1;\n          } else {\n            // current is not a newline, which means the line doesn't fit in box. push text.\n            // In Processing 1.5.1, the space is also pushed, so we push up to spaceMark+1,\n            // rather than up to spaceMark, as was the case for Processing 1.5 and earlier.\n            drawCommands.push({text:str.substring(start, spaceMark+1), width: lineWidth});\n            start = spaceMark + 1;\n          }\n\n          // newline + return\n          lineWidth = 0;\n          charPos = start - 1;\n        }\n      }\n\n      // push the remaining text\n      if (start < len) {\n        drawCommands.push({text:str.substring(start), width: lineWidth});\n      }\n\n      // resolve horizontal alignment\n      var xOffset = 1,\n          yOffset = curTextAscent;\n      if (horizontalTextAlignment === PConstants.CENTER) {\n        xOffset = width/2;\n      } else if (horizontalTextAlignment === PConstants.RIGHT) {\n        xOffset = width;\n      }\n\n      // resolve vertical alignment\n      var linesCount = drawCommands.length,\n          visibleLines = Math.min(linesCount, Math.floor(height/curTextLeading));\n      if(verticalTextAlignment === PConstants.TOP) {\n        yOffset = curTextAscent + curTextDescent;\n      } else if(verticalTextAlignment === PConstants.CENTER) {\n        yOffset = (height/2) - curTextLeading * (visibleLines/2 - 1);\n      } else if(verticalTextAlignment === PConstants.BOTTOM) {\n        yOffset = curTextDescent + curTextLeading;\n      }\n\n      var command,\n          drawCommand,\n          leading;\n      for (command = 0; command < linesCount; command++) {\n        leading = command * curTextLeading;\n        // stop if not enough space for one more line draw\n        if (yOffset + leading > height - curTextDescent) {\n          break;\n        }\n        drawCommand = drawCommands[command];\n        drawing.text$line(drawCommand.text, x + xOffset, y + yOffset + leading, z, horizontalTextAlignment);\n      }\n    }\n\n    /**\n     * text() Draws text to the screen.\n     *\n     * @param {String|char|int|float} data       the alphanumeric symbols to be displayed\n     * @param {int|float}             x          x-coordinate of text\n     * @param {int|float}             y          y-coordinate of text\n     * @param {int|float}             z          optional z-coordinate of text\n     * @param {String}                stringdata optional letters to be displayed\n     * @param {int|float}             width      optional width of text box\n     * @param {int|float}             height     optional height of text box\n     *\n     * @see #textAlign\n     * @see #textMode\n     * @see #loadFont\n     * @see #PFont\n     * @see #textFont\n     */\n    p.text = function() {\n      if (textMode === PConstants.SHAPE) {\n        // TODO: requires beginRaw function\n        return;\n      }\n      if (arguments.length === 3) { // for text( str, x, y)\n        text$4(toP5String(arguments[0]), arguments[1], arguments[2], 0);\n      } else if (arguments.length === 4) { // for text( str, x, y, z)\n        text$4(toP5String(arguments[0]), arguments[1], arguments[2], arguments[3]);\n      } else if (arguments.length === 5) { // for text( str, x, y , width, height)\n        text$6(toP5String(arguments[0]), arguments[1], arguments[2], arguments[3], arguments[4], 0);\n      } else if (arguments.length === 6) { // for text( stringdata, x, y , width, height, z)\n        text$6(toP5String(arguments[0]), arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n      }\n    };\n\n    /**\n     * Sets the way text draws to the screen. In the default configuration (the MODEL mode), it's possible to rotate,\n     * scale, and place letters in two and three dimensional space. <br /><br /> Changing to SCREEN mode draws letters\n     * directly to the front of the window and greatly increases rendering quality and speed when used with the P2D and\n     * P3D renderers. textMode(SCREEN) with OPENGL and JAVA2D (the default) renderers will generally be slower, though\n     * pixel accurate with P2D and P3D. With textMode(SCREEN), the letters draw at the actual size of the font (in pixels)\n     * and therefore calls to <b>textSize()</b> will not affect the size of the letters. To create a font at the size you\n     * desire, use the \"Create font...\" option in the Tools menu, or use the createFont() function. When using textMode(SCREEN),\n     * any z-coordinate passed to a text() command will be ignored, because your computer screen is...flat!\n     *\n     * @param {int} MODE Either MODEL, SCREEN or SHAPE (not yet supported)\n     *\n     * @see loadFont\n     * @see PFont\n     * @see text\n     * @see textFont\n     * @see createFont\n     */\n    p.textMode = function(mode){\n      textMode = mode;\n    };\n\n    // Load Batik SVG Fonts and parse to pre-def objects for quick rendering\n    p.loadGlyphs = function(url) {\n      var x, y, cx, cy, nx, ny, d, a, lastCom, lenC, horiz_adv_x, getXY = '[0-9\\\\-]+', path;\n\n      // Return arrays of SVG commands and coords\n      // get this to use p.matchAll() - will need to work around the lack of null return\n      var regex = function(needle, hay) {\n        var i = 0,\n          results = [],\n          latest, regexp = new RegExp(needle, \"g\");\n        latest = results[i] = regexp.exec(hay);\n        while (latest) {\n          i++;\n          latest = results[i] = regexp.exec(hay);\n        }\n        return results;\n      };\n\n      var buildPath = function(d) {\n        var c = regex(\"[A-Za-z][0-9\\\\- ]+|Z\", d);\n        var beforePathDraw = function() {\n          saveContext();\n          return drawing.$ensureContext();\n        };\n        var afterPathDraw = function() {\n          executeContextFill();\n          executeContextStroke();\n          restoreContext();\n        };\n\n        // Begin storing path object\n        path = \"return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();\";\n\n        x = 0;\n        y = 0;\n        cx = 0;\n        cy = 0;\n        nx = 0;\n        ny = 0;\n        d = 0;\n        a = 0;\n        lastCom = \"\";\n        lenC = c.length - 1;\n\n        // Loop through SVG commands translating to canvas eqivs functions in path object\n        for (var j = 0; j < lenC; j++) {\n          var com = c[j][0], xy = regex(getXY, com);\n\n          switch (com[0]) {\n            case \"M\":\n              //curContext.moveTo(x,-y);\n              x = parseFloat(xy[0][0]);\n              y = parseFloat(xy[1][0]);\n              path += \"curContext.moveTo(\" + x + \",\" + (-y) + \");\";\n              break;\n\n            case \"L\":\n              //curContext.lineTo(x,-y);\n              x = parseFloat(xy[0][0]);\n              y = parseFloat(xy[1][0]);\n              path += \"curContext.lineTo(\" + x + \",\" + (-y) + \");\";\n              break;\n\n            case \"H\":\n              //curContext.lineTo(x,-y)\n              x = parseFloat(xy[0][0]);\n              path += \"curContext.lineTo(\" + x + \",\" + (-y) + \");\";\n              break;\n\n            case \"V\":\n              //curContext.lineTo(x,-y);\n              y = parseFloat(xy[0][0]);\n              path += \"curContext.lineTo(\" + x + \",\" + (-y) + \");\";\n              break;\n\n            case \"T\":\n              //curContext.quadraticCurveTo(cx,-cy,nx,-ny);\n              nx = parseFloat(xy[0][0]);\n              ny = parseFloat(xy[1][0]);\n\n              if (lastCom === \"Q\" || lastCom === \"T\") {\n                d = Math.sqrt(Math.pow(x - cx, 2) + Math.pow(cy - y, 2));\n                a = Math.PI + Math.atan2(cx - x, cy - y);\n                cx = x + (Math.sin(a) * (d));\n                cy = y + (Math.cos(a) * (d));\n              } else {\n                cx = x;\n                cy = y;\n              }\n\n              path += \"curContext.quadraticCurveTo(\" + cx + \",\" + (-cy) + \",\" + nx + \",\" + (-ny) + \");\";\n              x = nx;\n              y = ny;\n              break;\n\n            case \"Q\":\n              //curContext.quadraticCurveTo(cx,-cy,nx,-ny);\n              cx = parseFloat(xy[0][0]);\n              cy = parseFloat(xy[1][0]);\n              nx = parseFloat(xy[2][0]);\n              ny = parseFloat(xy[3][0]);\n              path += \"curContext.quadraticCurveTo(\" + cx + \",\" + (-cy) + \",\" + nx + \",\" + (-ny) + \");\";\n              x = nx;\n              y = ny;\n              break;\n\n            case \"Z\":\n              //curContext.closePath();\n              path += \"curContext.closePath();\";\n              break;\n          }\n          lastCom = com[0];\n        }\n\n        path += \"afterPathDraw();\";\n        path += \"curContext.translate(\" + horiz_adv_x + \",0);\";\n        path += \"}}\";\n\n        return ((new Function(\"beforePathDraw\", \"afterPathDraw\", path))(beforePathDraw, afterPathDraw));\n      };\n\n      // Parse SVG font-file into block of Canvas commands\n      var parseSVGFont = function(svg) {\n        // Store font attributes\n        var font = svg.getElementsByTagName(\"font\");\n        p.glyphTable[url].horiz_adv_x = font[0].getAttribute(\"horiz-adv-x\");\n\n        var font_face = svg.getElementsByTagName(\"font-face\")[0];\n        p.glyphTable[url].units_per_em = parseFloat(font_face.getAttribute(\"units-per-em\"));\n        p.glyphTable[url].ascent = parseFloat(font_face.getAttribute(\"ascent\"));\n        p.glyphTable[url].descent = parseFloat(font_face.getAttribute(\"descent\"));\n\n        var glyph = svg.getElementsByTagName(\"glyph\"),\n          len = glyph.length;\n\n        // Loop through each glyph in the SVG\n        for (var i = 0; i < len; i++) {\n          // Store attributes for this glyph\n          var unicode = glyph[i].getAttribute(\"unicode\");\n          var name = glyph[i].getAttribute(\"glyph-name\");\n          horiz_adv_x = glyph[i].getAttribute(\"horiz-adv-x\");\n          if (horiz_adv_x === null) {\n            horiz_adv_x = p.glyphTable[url].horiz_adv_x;\n          }\n          d = glyph[i].getAttribute(\"d\");\n          // Split path commands in glpyh\n          if (d !== undef) {\n            path = buildPath(d);\n            // Store glyph data to table object\n            p.glyphTable[url][name] = {\n              name: name,\n              unicode: unicode,\n              horiz_adv_x: horiz_adv_x,\n              draw: path.draw\n            };\n          }\n        } // finished adding glyphs to table\n      };\n\n      // Load and parse Batik SVG font as XML into a Processing Glyph object\n      var loadXML = function() {\n        var xmlDoc;\n\n        try {\n          xmlDoc = document.implementation.createDocument(\"\", \"\", null);\n        }\n        catch(e_fx_op) {\n          Processing.debug(e_fx_op.message);\n          return;\n        }\n\n        try {\n          xmlDoc.async = false;\n          xmlDoc.load(url);\n          parseSVGFont(xmlDoc.getElementsByTagName(\"svg\")[0]);\n        }\n        catch(e_sf_ch) {\n          // Google Chrome, Safari etc.\n          Processing.debug(e_sf_ch);\n          try {\n            var xmlhttp = new window.XMLHttpRequest();\n            xmlhttp.open(\"GET\", url, false);\n            xmlhttp.send(null);\n            parseSVGFont(xmlhttp.responseXML.documentElement);\n          }\n          catch(e) {\n            Processing.debug(e_sf_ch);\n          }\n        }\n      };\n\n      // Create a new object in glyphTable to store this font\n      p.glyphTable[url] = {};\n\n      // Begin loading the Batik SVG font...\n      loadXML(url);\n\n      // Return the loaded font for attribute grabbing\n      return p.glyphTable[url];\n    };\n\n    /**\n     * Gets the sketch parameter value. The parameter can be defined as the canvas attribute with\n     * the \"data-processing-\" prefix or provided in the pjs directive (e.g. param-test=\"52\").\n     * The function tries the canvas attributes, then the pjs directive content.\n     *\n     * @param   {String}    name          The name of the param to read.\n     *\n     * @returns {String}    The parameter value, or null if parameter is not defined.\n     */\n    p.param = function(name) {\n      // trying attribute that was specified in CANVAS\n      var attributeName = \"data-processing-\" + name;\n      if (curElement.hasAttribute(attributeName)) {\n        return curElement.getAttribute(attributeName);\n      }\n      // trying child PARAM elements of the CANVAS\n      for (var i = 0, len = curElement.childNodes.length; i < len; ++i) {\n        var item = curElement.childNodes.item(i);\n        if (item.nodeType !== 1 || item.tagName.toLowerCase() !== \"param\") {\n          continue;\n        }\n        if (item.getAttribute(\"name\") === name) {\n          return item.getAttribute(\"value\");\n        }\n      }\n      // fallback to default params\n      if (curSketch.params.hasOwnProperty(name)) {\n        return curSketch.params[name];\n      }\n      return null;\n    };\n\n    ////////////////////////////////////////////////////////////////////////////\n    // 2D/3D methods wiring utils\n    ////////////////////////////////////////////////////////////////////////////\n    function wireDimensionalFunctions(mode) {\n      // Drawing2D/Drawing3D\n      if (mode === '3D') {\n        drawing = new Drawing3D();\n      } else if (mode === '2D') {\n        drawing = new Drawing2D();\n      } else {\n        drawing = new DrawingPre();\n      }\n\n      // Wire up functions (Use DrawingPre properties names)\n      for (var i in DrawingPre.prototype) {\n        if (DrawingPre.prototype.hasOwnProperty(i) && i.indexOf(\"$\") < 0) {\n          p[i] = drawing[i];\n        }\n      }\n\n      // Run initialization\n      drawing.$init();\n    }\n\n    function createDrawingPreFunction(name) {\n      return function() {\n        wireDimensionalFunctions(\"2D\");\n        return drawing[name].apply(this, arguments);\n      };\n    }\n    DrawingPre.prototype.translate = createDrawingPreFunction(\"translate\");\n    DrawingPre.prototype.transform = createDrawingPreFunction(\"transform\");\n    DrawingPre.prototype.scale = createDrawingPreFunction(\"scale\");\n    DrawingPre.prototype.pushMatrix = createDrawingPreFunction(\"pushMatrix\");\n    DrawingPre.prototype.popMatrix = createDrawingPreFunction(\"popMatrix\");\n    DrawingPre.prototype.resetMatrix = createDrawingPreFunction(\"resetMatrix\");\n    DrawingPre.prototype.applyMatrix = createDrawingPreFunction(\"applyMatrix\");\n    DrawingPre.prototype.rotate = createDrawingPreFunction(\"rotate\");\n    DrawingPre.prototype.rotateZ = createDrawingPreFunction(\"rotateZ\");\n    DrawingPre.prototype.shearX = createDrawingPreFunction(\"shearX\");\n    DrawingPre.prototype.shearY = createDrawingPreFunction(\"shearY\");\n    DrawingPre.prototype.redraw = createDrawingPreFunction(\"redraw\");\n    DrawingPre.prototype.toImageData = createDrawingPreFunction(\"toImageData\");\n    DrawingPre.prototype.ambientLight = createDrawingPreFunction(\"ambientLight\");\n    DrawingPre.prototype.directionalLight = createDrawingPreFunction(\"directionalLight\");\n    DrawingPre.prototype.lightFalloff = createDrawingPreFunction(\"lightFalloff\");\n    DrawingPre.prototype.lightSpecular = createDrawingPreFunction(\"lightSpecular\");\n    DrawingPre.prototype.pointLight = createDrawingPreFunction(\"pointLight\");\n    DrawingPre.prototype.noLights = createDrawingPreFunction(\"noLights\");\n    DrawingPre.prototype.spotLight = createDrawingPreFunction(\"spotLight\");\n    DrawingPre.prototype.beginCamera = createDrawingPreFunction(\"beginCamera\");\n    DrawingPre.prototype.endCamera = createDrawingPreFunction(\"endCamera\");\n    DrawingPre.prototype.frustum = createDrawingPreFunction(\"frustum\");\n    DrawingPre.prototype.box = createDrawingPreFunction(\"box\");\n    DrawingPre.prototype.sphere = createDrawingPreFunction(\"sphere\");\n    DrawingPre.prototype.ambient = createDrawingPreFunction(\"ambient\");\n    DrawingPre.prototype.emissive = createDrawingPreFunction(\"emissive\");\n    DrawingPre.prototype.shininess = createDrawingPreFunction(\"shininess\");\n    DrawingPre.prototype.specular = createDrawingPreFunction(\"specular\");\n    DrawingPre.prototype.fill = createDrawingPreFunction(\"fill\");\n    DrawingPre.prototype.stroke = createDrawingPreFunction(\"stroke\");\n    DrawingPre.prototype.strokeWeight = createDrawingPreFunction(\"strokeWeight\");\n    DrawingPre.prototype.smooth = createDrawingPreFunction(\"smooth\");\n    DrawingPre.prototype.noSmooth = createDrawingPreFunction(\"noSmooth\");\n    DrawingPre.prototype.point = createDrawingPreFunction(\"point\");\n    DrawingPre.prototype.vertex = createDrawingPreFunction(\"vertex\");\n    DrawingPre.prototype.endShape = createDrawingPreFunction(\"endShape\");\n    DrawingPre.prototype.bezierVertex = createDrawingPreFunction(\"bezierVertex\");\n    DrawingPre.prototype.curveVertex = createDrawingPreFunction(\"curveVertex\");\n    DrawingPre.prototype.curve = createDrawingPreFunction(\"curve\");\n    DrawingPre.prototype.line = createDrawingPreFunction(\"line\");\n    DrawingPre.prototype.bezier = createDrawingPreFunction(\"bezier\");\n    DrawingPre.prototype.rect = createDrawingPreFunction(\"rect\");\n    DrawingPre.prototype.ellipse = createDrawingPreFunction(\"ellipse\");\n    DrawingPre.prototype.background = createDrawingPreFunction(\"background\");\n    DrawingPre.prototype.image = createDrawingPreFunction(\"image\");\n    DrawingPre.prototype.textWidth = createDrawingPreFunction(\"textWidth\");\n    DrawingPre.prototype.text$line = createDrawingPreFunction(\"text$line\");\n    DrawingPre.prototype.$ensureContext = createDrawingPreFunction(\"$ensureContext\");\n    DrawingPre.prototype.$newPMatrix = createDrawingPreFunction(\"$newPMatrix\");\n\n    DrawingPre.prototype.size = function(aWidth, aHeight, aMode) {\n      wireDimensionalFunctions(aMode === PConstants.WEBGL ? \"3D\" : \"2D\");\n      p.size(aWidth, aHeight, aMode);\n    };\n\n    DrawingPre.prototype.$init = noop;\n\n    Drawing2D.prototype.$init = function() {\n      // Setup default 2d canvas context.\n      // Moving this here removes the number of times we need to check the 3D variable\n      p.size(p.width, p.height);\n\n      curContext.lineCap = 'round';\n\n      // Set default stroke and fill color\n      p.noSmooth();\n      p.disableContextMenu();\n    };\n    Drawing3D.prototype.$init = function() {\n      // For ref/perf test compatibility until those are fixed\n      p.use3DContext = true;\n      p.disableContextMenu();\n    };\n\n    DrawingShared.prototype.$ensureContext = function() {\n      return curContext;\n    };\n\n    //////////////////////////////////////////////////////////////////////////\n    // Keyboard Events\n    //////////////////////////////////////////////////////////////////////////\n\n    // In order to catch key events in a canvas, it needs to be \"specially focusable\",\n    // by assigning it a tabindex. If no tabindex is specified on-page, set this to 0.\n    if (!curElement.getAttribute(\"tabindex\")) {\n      curElement.setAttribute(\"tabindex\", 0);\n    }\n\n    function getKeyCode(e) {\n      var code = e.which || e.keyCode;\n      switch (code) {\n        case 13: // ENTER\n          return 10;\n        case 91: // META L (Saf/Mac)\n        case 93: // META R (Saf/Mac)\n        case 224: // META (FF/Mac)\n          return 157;\n        case 57392: // CONTROL (Op/Mac)\n          return 17;\n        case 46: // DELETE\n          return 127;\n        case 45: // INSERT\n          return 155;\n      }\n      return code;\n    }\n\n    function getKeyChar(e) {\n      var c = e.which || e.keyCode;\n      var anyShiftPressed = e.shiftKey || e.ctrlKey || e.altKey || e.metaKey;\n      switch (c) {\n        case 13:\n          c = anyShiftPressed ? 13 : 10; // RETURN vs ENTER (Mac)\n          break;\n        case 8:\n          c = anyShiftPressed ? 127 : 8; // DELETE vs BACKSPACE (Mac)\n          break;\n      }\n      return new Char(c);\n    }\n\n    function suppressKeyEvent(e) {\n      if (typeof e.preventDefault === \"function\") {\n        e.preventDefault();\n      } else if (typeof e.stopPropagation === \"function\") {\n        e.stopPropagation();\n      }\n      return false;\n    }\n\n    function updateKeyPressed() {\n      var ch;\n      for (ch in pressedKeysMap) {\n        if (pressedKeysMap.hasOwnProperty(ch)) {\n          p.__keyPressed = true;\n          return;\n        }\n      }\n      p.__keyPressed = false;\n    }\n\n    function resetKeyPressed() {\n      p.__keyPressed = false;\n      pressedKeysMap = [];\n      lastPressedKeyCode = null;\n    }\n\n    function simulateKeyTyped(code, c) {\n      pressedKeysMap[code] = c;\n      lastPressedKeyCode = null;\n      p.key = c;\n      p.keyCode = code;\n      p.keyPressed();\n      p.keyCode = 0;\n      p.keyTyped();\n      updateKeyPressed();\n    }\n\n    function handleKeydown(e) {\n      var code = getKeyCode(e);\n      if (code === PConstants.DELETE) {\n        simulateKeyTyped(code, new Char(127));\n        return;\n      }\n      if (codedKeys.indexOf(code) < 0) {\n        lastPressedKeyCode = code;\n        return;\n      }\n      var c = new Char(PConstants.CODED);\n      p.key = c;\n      p.keyCode = code;\n      pressedKeysMap[code] = c;\n      p.keyPressed();\n      lastPressedKeyCode = null;\n      updateKeyPressed();\n      return suppressKeyEvent(e);\n    }\n\n    function handleKeypress(e) {\n      if (lastPressedKeyCode === null) {\n        return; // processed in handleKeydown\n      }\n      var code = lastPressedKeyCode, c = getKeyChar(e);\n      simulateKeyTyped(code, c);\n      return suppressKeyEvent(e);\n    }\n\n    function handleKeyup(e) {\n      var code = getKeyCode(e), c = pressedKeysMap[code];\n      if (c === undef) {\n        return; // no keyPressed event was generated.\n      }\n      p.key = c;\n      p.keyCode = code;\n      p.keyReleased();\n      delete pressedKeysMap[code];\n      updateKeyPressed();\n    }\n\n    // Send aCode Processing syntax to be converted to JavaScript\n    if (!pgraphicsMode) {\n      if (aCode instanceof Processing.Sketch) {\n        // Use sketch as is\n        curSketch = aCode;\n      } else if (typeof aCode === \"function\") {\n        // Wrap function with default sketch parameters\n        curSketch = new Processing.Sketch(aCode);\n      } else if (!aCode) {\n        // Empty sketch\n        curSketch = new Processing.Sketch(function (){});\n      } else {\n  //#if PARSER\n        // Compile the code\n        curSketch = Processing.compile(aCode);\n  //#else\n  //      throw \"PJS compile is not supported\";\n  //#endif\n      }\n\n      // Expose internal field for diagnostics and testing\n      p.externals.sketch = curSketch;\n\n      wireDimensionalFunctions();\n\n      // the onfocus and onblur events are handled in two parts.\n      // 1) the p.focused property is handled per sketch\n      curElement.onfocus = function() {\n        p.focused = true;\n      };\n\n      curElement.onblur = function() {\n        p.focused = false;\n        if (!curSketch.options.globalKeyEvents) {\n          resetKeyPressed();\n        }\n      };\n\n      // 2) looping status is handled per page, based on the pauseOnBlur @pjs directive\n      if (curSketch.options.pauseOnBlur) {\n        attachEventHandler(window, 'focus', function() {\n          if (doLoop) {\n            p.loop();\n          }\n        });\n\n        attachEventHandler(window, 'blur', function() {\n          if (doLoop && loopStarted) {\n            p.noLoop();\n            doLoop = true; // make sure to keep this true after the noLoop call\n          }\n          resetKeyPressed();\n        });\n      }\n\n      // if keyboard events should be handled globally, the listeners should\n      // be bound to the document window, rather than to the current canvas\n      var keyTrigger = curSketch.options.globalKeyEvents ? window : curElement;\n      attachEventHandler(keyTrigger, \"keydown\", handleKeydown);\n      attachEventHandler(keyTrigger, \"keypress\", handleKeypress);\n      attachEventHandler(keyTrigger, \"keyup\", handleKeyup);\n\n      // Step through the libraries that were attached at doc load...\n      for (var i in Processing.lib) {\n        if (Processing.lib.hasOwnProperty(i)) {\n          if(Processing.lib[i].hasOwnProperty(\"attach\")) {\n            // use attach function if present\n            Processing.lib[i].attach(p);\n          } else if(Processing.lib[i] instanceof Function)  {\n            // Init the libraries in the context of this p_instance (legacy)\n            Processing.lib[i].call(this);\n          }\n        }\n      }\n\n      // sketch execute test interval, used to reschedule\n      // an execute when preloads have not yet finished.\n      var retryInterval = 100;\n\n      var executeSketch = function(processing) {\n        // Don't start until all specified images and fonts in the cache are preloaded\n        if (!(curSketch.imageCache.pending || PFont.preloading.pending(retryInterval))) {\n          // the opera preload cache can only be cleared once we start\n          if (window.opera) {\n            var link,\n                element,\n                operaCache=curSketch.imageCache.operaCache;\n            for (link in operaCache) {\n              if(operaCache.hasOwnProperty(link)) {\n                element = operaCache[link];\n                if (element !== null) {\n                  document.body.removeChild(element);\n                }\n                delete(operaCache[link]);\n              }\n            }\n          }\n\n          curSketch.attach(processing, defaultScope);\n\n          // pass a reference to the p instance for this sketch.\n          curSketch.onLoad(processing);\n\n          // Run void setup()\n          if (processing.setup) {\n            processing.setup();\n            // if any transforms were performed in setup reset to identity matrix\n            // so draw loop is unpolluted\n            processing.resetMatrix();\n            curSketch.onSetup();\n          }\n\n          // some pixels can be cached, flushing\n          resetContext();\n\n          if (processing.draw) {\n            if (!doLoop) {\n              processing.redraw();\n            } else {\n              processing.loop();\n            }\n          }\n        } else {\n          window.setTimeout(function() { executeSketch(processing); }, retryInterval);\n        }\n      };\n\n      // Only store an instance of non-createGraphics instances.\n      addInstance(this);\n\n      // The parser adds custom methods to the processing context\n      // this renames p to processing so these methods will run\n      executeSketch(p);\n    } else {\n      // No executable sketch was specified\n      // or called via createGraphics\n      curSketch = new Processing.Sketch();\n\n      wireDimensionalFunctions();\n\n      // Hack to make PGraphics work again after splitting size()\n      p.size = function(w, h, render) {\n        if (render && render === PConstants.WEBGL) {\n          wireDimensionalFunctions('3D');\n        } else {\n          wireDimensionalFunctions('2D');\n        }\n\n        p.size(w, h, render);\n      };\n    }\n  };\n\n  // Place-holder for overridable debugging function\n  Processing.debug = (function() {\n    if (\"console\" in window) {\n      return function(msg) {\n        window.console.log('Processing.js: ' + msg);\n      };\n    }\n    return noop;\n  }());\n\n  // bind prototype\n  Processing.prototype = defaultScope;\n\n  /**\n   * instance store and lookup\n   */\n  Processing.instances = processingInstances;\n  Processing.getInstanceById = function(name) {\n    return processingInstances[processingInstanceIds[name]];\n  };\n\n  // Unsupported Processing File and I/O operations.\n  (function(Processing) {\n    var unsupportedP5 = (\"open() createOutput() createInput() BufferedReader selectFolder() \" +\n                         \"dataPath() createWriter() selectOutput() beginRecord() \" +\n                         \"saveStream() endRecord() selectInput() saveBytes() createReader() \" +\n                         \"beginRaw() endRaw() PrintWriter delay()\").split(\" \"),\n        count = unsupportedP5.length,\n        prettyName,\n        p5Name;\n\n    function createUnsupportedFunc(n) {\n      return function() {\n        throw \"Processing.js does not support \" + n + \".\";\n      };\n    }\n\n    while (count--) {\n      prettyName = unsupportedP5[count];\n      p5Name = prettyName.replace(\"()\", \"\");\n      Processing[p5Name] = createUnsupportedFunc(prettyName);\n    }\n  }(defaultScope));\n\n  // we're done. Return our object.\n  return Processing;\n};\n\n},{}],27:[function(require,module,exports){\n// Base source files\nvar source = {\n  virtEquals: require(\"./Helpers/virtEquals\"),\n  virtHashCode: require(\"./Helpers/virtHashCode\"),\n  ObjectIterator: require(\"./Helpers/ObjectIterator\"),\n  PConstants: require(\"./Helpers/PConstants\"),\n  ArrayList: require(\"./Objects/ArrayList\"),\n  HashMap: require(\"./Objects/HashMap\"),\n  PVector: require(\"./Objects/PVector\"),\n  PFont: require(\"./Objects/PFont\"),\n  Char: require(\"./Objects/Char\"),\n  XMLAttribute: require(\"./Objects/XMLAttribute\"),\n  XMLElement: require(\"./Objects/XMLElement\"),\n  PMatrix2D: require(\"./Objects/PMatrix2D\"),\n  PMatrix3D: require(\"./Objects/PMatrix3D\"),\n  PShape: require(\"./Objects/PShape\"),\n  colors: require(\"./Objects/webcolors\"),\n  PShapeSVG:  require(\"./Objects/PShapeSVG\"),\n  CommonFunctions: require(\"./P5Functions/commonFunctions\"),\n  defaultScope: require(\"./Helpers/defaultScope\"),\n  Processing: require(\"./Processing\"),\n  setupParser: require(\"./Parser/Parser\"),\n  finalize: require(\"./Helpers/finalizeProcessing\")\n};\n\n// Additional code that gets tacked onto \"p\" during\n// instantiation of a Processing sketch.\nsource.extend = {\n  withMath: require(\"./P5Functions/Math.js\"),\n  withProxyFunctions: require(\"./P5Functions/JavaProxyFunctions\")(source.virtHashCode, source.virtEquals),\n  withTouch: require(\"./P5Functions/touchmouse\"),\n  withCommonFunctions: source.CommonFunctions.withCommonFunctions\n};\n\n/**\n * Processing.js building function\n */\nmodule.exports = function buildProcessingJS(Browser, testHarness) {\n  var noop = function(){},\n      virtEquals = source.virtEquals,\n      virtHashCode = source.virtHashCode,\n      PConstants = source.PConstants,\n      CommonFunctions = source.CommonFunctions,\n      ObjectIterator = source.ObjectIterator,\n      Char = source.Char,\n      XMLAttribute = source.XMLAttribute(),\n\n      ArrayList = source.ArrayList({\n        virtHashCode: virtHashCode,\n        virtEquals: virtEquals\n      }),\n\n      HashMap = source.HashMap({\n        virtHashCode: virtHashCode,\n        virtEquals: virtEquals\n      }),\n\n      PVector = source.PVector({\n        PConstants: PConstants\n      }),\n\n      PFont = source.PFont({\n        Browser: Browser,\n        noop: noop\n      }),\n\n      XMLElement = source.XMLElement({\n        Browser: Browser,\n        XMLAttribute: XMLAttribute\n      }),\n\n      PMatrix2D = source.PMatrix2D({\n        p:CommonFunctions\n      }),\n\n      PMatrix3D = source.PMatrix3D({\n        p:CommonFunctions\n      }),\n\n      PShape = source.PShape({\n        PConstants: PConstants,\n        PMatrix2D: PMatrix2D,\n        PMatrix3D: PMatrix3D\n      }),\n\n      PShapeSVG = source.PShapeSVG({\n        CommonFunctions: CommonFunctions,\n        PConstants: PConstants,\n        PShape: PShape,\n        XMLElement: XMLElement,\n        colors: source.colors\n      }),\n\n      defaultScope = source.defaultScope({\n        ArrayList: ArrayList,\n        HashMap: HashMap,\n        PVector: PVector,\n        PFont: PFont,\n        PShapeSVG: PShapeSVG,\n        ObjectIterator: ObjectIterator,\n        PConstants: PConstants,\n        Char: Char,\n        XMLElement: XMLElement,\n        XML: XMLElement\n      }),\n\n      Processing = source.Processing({\n        defaultScope: defaultScope,\n        Browser: Browser,\n        extend: source.extend,\n        noop: noop\n      });\n\n  // set up the Processing syntax parser\n  Processing = source.setupParser(Processing, {\n    Browser: Browser,\n    aFunctions: testHarness,\n    defaultScope: defaultScope\n  });\n\n  // finalise the Processing object\n  Processing = source.finalize(Processing, {\n    version: require('../package.json').version,\n    isDomPresent: false || Browser.isDomPresent,\n    window: Browser.window,\n    document: Browser.document,\n    noop: noop\n  });\n\n  // done.\n  return Processing;\n};\n\n},{\"../package.json\":2,\"./Helpers/ObjectIterator\":3,\"./Helpers/PConstants\":4,\"./Helpers/defaultScope\":5,\"./Helpers/finalizeProcessing\":6,\"./Helpers/virtEquals\":7,\"./Helpers/virtHashCode\":8,\"./Objects/ArrayList\":9,\"./Objects/Char\":10,\"./Objects/HashMap\":11,\"./Objects/PFont\":12,\"./Objects/PMatrix2D\":13,\"./Objects/PMatrix3D\":14,\"./Objects/PShape\":15,\"./Objects/PShapeSVG\":16,\"./Objects/PVector\":17,\"./Objects/XMLAttribute\":18,\"./Objects/XMLElement\":19,\"./Objects/webcolors\":20,\"./P5Functions/JavaProxyFunctions\":21,\"./P5Functions/Math.js\":22,\"./P5Functions/commonFunctions\":23,\"./P5Functions/touchmouse\":24,\"./Parser/Parser\":25,\"./Processing\":26}]},{},[1])\n;\n"]}